# Phase 11: Hidden Passage Revealed by Bright Light
# A secret exit becomes visible only when the room has enhanced visibility

id: bright_light_reveals_passage
event: on_command
command_pattern: "search*"
description: "Searching in bright light reveals hidden passage"

conditions:
  # Requires enhanced visibility (light level >= 76)
  - type: visibility_level
    params:
      level: "enhanced"

actions:
  - type: message_player
    params:
      text: "The brilliant light reveals subtle scratches on the floor leading to a hidden door!"

  - type: open_exit
    params:
      direction: "secret"
      destination: "room_hidden_chamber"

  - type: set_flag
    params:
      flag_name: "secret_revealed"
      value: true

# One-time trigger
max_fires: 1
enabled: true
