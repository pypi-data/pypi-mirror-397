"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["12265"],{56093:function(t,e,i){i.d(e,{t:function(){return n}});var n=(t,e)=>t.substring(0,e.length)===e},92900:function(t,e,i){i.d(e,{c:function(){return y}});i(44784),i(35748),i(34285),i(45519),i(95013);var n=i(94327),r=i(83510),o=i(6788),a=i(88341),s=i(25442),c=i(14523),l=i(45736),d=i(12275),h=i(85356),u={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};var _=0,v=new Map;function y(t,e,i){return function(t,e,i){var n;if(!i||t===c.Hh)return(0,l.a)("--history-unavailable-color",e);if(t===c.HV)return(0,l.a)("--history-unknown-color",e);var d=(0,s.mg)(i,t);if(d){var h=(0,l.a)(d,e);if(h){var _=(0,a.m)(i.entity_id),v=null===(n=u[_])||void 0===n?void 0:n[t];return v?(0,r.zm)((0,o.T)((0,r.Nc)((0,r.xp)(h)),v)):h}}}(t,e,i)||function(t,e,i){if(i){var r=(0,d.t)(i),o=(h.v[r]||"sensor"===r&&"enum"===i.attributes.device_class&&i.attributes.options||[]).indexOf(t);if(-1!==o)return(0,n.fI)(o,e)}}(t,e,i)||function(t,e){if(v.has(t))return v.get(t);var i=(0,n.fI)(_,e);return _++,v.set(t,i),i}(t,e)}},26399:function(t,e,i){i.d(e,{AB:function(){return l},Ci:function(){return c},E4:function(){return o},d1:function(){return a},gq:function(){return s}});i(46852),i(44941),i(89958),i(65315),i(84136),i(65152),i(45519);if(59509==i.j)var n=i(56093);var r=i(26539),o=(t,e,i,n)=>t.callWS({type:"trace/get",domain:e,item_id:i,run_id:n}),a=(t,e,i)=>t.callWS({type:"trace/list",domain:e,item_id:i}),s=(t,e,i)=>t.callWS({type:"trace/contexts",domain:e,item_id:i}),c=(t,e)=>{for(var i=e.split("/").reverse(),n=t;i.length;){var o=i.pop(),a=Number(o);if(isNaN(a)){var s=n[o];if(!s&&"sequence"===o)continue;s||"trigger"!==o||(s=n.triggers),s||"condition"!==o||(s=n.conditions),s||"action"!==o||(s=n.actions),n="trigger"===o?(0,r.aI)(s):s}else if(Array.isArray(n))n=n[a];else if(0!==a)throw new Error("If config is not an array, can only return index 0")}return n},l=t=>"trigger"===t||(0,n.t)(t,"trigger/")},94806:function(t,e,i){i.a(t,async function(t,e){try{var n=i(62020),r=i(31802),o=i(21101),a=i(23180),s=(i(38606),i(79827),i(44784),i(35748),i(80178),i(99342),i(64654),i(65315),i(37089),i(45519),i(67579),i(30500),i(95013),i(69868)),c=i(84922),l=i(11991),d=i(75907),h=i(48893),u=i(26946),_=i(46089),v=i(65380),y=i(33136),g=i(44017),m=i(88341),p=i(77240),f=i(92900),x=i(6595),b=(i(42163),i(28652)),$=i(13725),k=i(50809),w=i(78100),z=i(71522),I=i(61964),C=t([x,b,_,v,$]);[x,b,_,v,$]=C.then?(await C)():C;var M,q,E,S,N,T,P,W,Z,A,B,L,D,U,H,O,j,F,G=t=>t,R=["script","automation"],V=function(t){function e(){var t;(0,n.A)(this,e);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(t=(0,o.A)(this,e,[].concat(r))).userIdToName={},t.traceContexts={},t.entries=[],t.narrow=!1,t.virtualize=!1,t.showIndicator=!1,t.noIcon=!1,t.noName=!1,t.relativeTime=!1,t._renderLogbookItem=(e,i)=>{var n;if(!e||void 0===i)return c.s6;var r=t.entries[i-1],o=[],a=e.entity_id?t.hass.states[e.entity_id]:void 0,s=a?(0,$.dG)(a,e.state):void 0,l=e.entity_id?(0,m.m)(e.entity_id):e.domain,h=s||e.icon||e.state||!l||!(0,u.x)(t.hass,l)?void 0:(0,z.MR)({domain:l,type:"icon",useFallback:!0,darkOptimized:null===(n=t.hass.themes)||void 0===n?void 0:n.darkMode}),y=R.includes(e.domain)&&e.context_id&&e.context_id in t.traceContexts?t.traceContexts[e.context_id]:void 0,g=void 0!==y;return(0,c.qy)(M||(M=G` <div class="entry-container ${0}" .traceLink="${0}" @click="${0}"> ${0} <div class="entry ${0}"> <div class="icon-message"> ${0} ${0} <div class="message-relative_time"> <div class="message"> ${0} ${0} ${0} </div> <div class="secondary"> <span>${0}</span> - <ha-relative-time .hass="${0}" .datetime="${0}" capitalize></ha-relative-time> ${0} ${0} </div> </div> </div> ${0} </div> </div> `),(0,d.H)({clickable:g}),y?`/config/${y.domain}/trace/${y.item_id}?run_id=${y.run_id}`:void 0,t._handleClick,0===i||null!=e&&e.when&&null!=r&&r.when&&new Date(1e3*e.when).toDateString()!==new Date(1e3*r.when).toDateString()?(0,c.qy)(q||(q=G` <h4 class="date"> ${0} </h4> `),(0,_.Yq)(new Date(1e3*e.when),t.hass.locale,t.hass.config)):c.s6,(0,d.H)({"no-entity":!e.entity_id}),t.noIcon?"":(0,c.qy)(E||(E=G` <state-badge .hass="${0}" .overrideIcon="${0}" .overrideImage="${0}" .stateObj="${0}" .stateColor="${0}"></state-badge> `),t.hass,e.icon,h,e.icon?void 0:s,!1),t.showIndicator?t._renderIndicator(e):"",t.noName?"":t._renderEntity(e.entity_id,e.name,g),t._renderMessage(e,o,l,s,g),t._renderContextMessage(e,o,g),(0,v.ie)(new Date(1e3*e.when),t.hass.locale,t.hass.config),t.hass,1e3*e.when,e.context_user_id?(0,c.qy)(S||(S=G`${0}`),t._renderUser(e)):"",g?`- ${t.hass.localize("ui.components.logbook.show_trace")}`:"",g?(0,c.qy)(N||(N=G`<ha-icon-next></ha-icon-next>`)):"")},t}return(0,a.A)(e,t),(0,r.A)(e,[{key:"willUpdate",value:function(t){(!this.hasUpdated&&this.virtualize||t.has("virtualize")&&this.virtualize)&&(this.hass.loadBackendTranslation("services"),this.hass.loadBackendTranslation("title"),(0,w.i)())}},{key:"shouldUpdate",value:function(t){var e=t.get("hass"),i=void 0===e||e.locale!==this.hass.locale;return t.has("entries")||t.has("traceContexts")||i}},{key:"render",value:function(){var t;return null!==(t=this.entries)&&void 0!==t&&t.length?(0,c.qy)(P||(P=G` <div class="container ha-scrollbar ${0}" @scroll="${0}"> ${0} </div> `),(0,d.H)({narrow:this.narrow,"no-name":this.noName,"no-icon":this.noIcon}),this._saveScrollPos,this.virtualize?(0,c.qy)(W||(W=G`<lit-virtualizer @visibilityChanged="${0}" scroller class="ha-scrollbar" .items="${0}" .renderItem="${0}"> </lit-virtualizer>`),this._visibilityChanged,this.entries,this._renderLogbookItem):this.entries.map((t,e)=>this._renderLogbookItem(t,e))):(0,c.qy)(T||(T=G` <div class="container no-entries"> ${0} </div> `),this.hass.localize("ui.components.logbook.entries_not_found"))}},{key:"_saveScrollPos",value:function(t){this._savedScrollPos=t.target.scrollTop}},{key:"_visibilityChanged",value:function(t){(0,g.r)(this,"hass-logbook-live",{enable:0===t.first})}},{key:"_renderIndicator",value:function(t){var e=this.hass.states[t.entity_id],i=getComputedStyle(this),n={backgroundColor:void 0!==t.state?(0,f.c)(t.state,i,e):void 0};return(0,c.qy)(Z||(Z=G` <div class="indicator" style="${0}"></div> `),(0,h.W)(n))}},{key:"_renderMessage",value:function(t,e,i,n,r){if(t.entity_id&&t.state)return n?(0,$.a$)(this.hass,this.hass.localize,t.state,n,i):t.state;var o=(t=>t.context_event_type||t.context_state||t.context_message)(t),a=t.message;if(R.includes(i)&&t.source){if(o)return"";a=(0,$.$O)(this.hass.localize,t.source)}return a?this._formatMessageWithPossibleEntity(o?((t,e)=>e?t.replace(e," "):t)(a,t.context_entity_id):a,e,void 0,r):""}},{key:"_renderUser",value:function(t){var e=t.context_user_id&&this.userIdToName[t.context_user_id];return e?`- ${e}`:""}},{key:"_renderUnseenContextSourceEntity",value:function(t,e,i){return!t.context_entity_id||e.includes(t.context_entity_id)?"":(0,c.qy)(A||(A=G` (${0})`),this._renderEntity(t.context_entity_id,t.context_entity_id_name,i))}},{key:"_renderContextMessage",value:function(t,e,i){if(t.context_state){var n=t.context_entity_id&&t.context_entity_id in this.hass.states?(0,$.dG)(this.hass.states[t.context_entity_id],t.context_state):void 0;return(0,c.qy)(B||(B=G`${0} ${0} ${0}`),this.hass.localize("ui.components.logbook.triggered_by_state_of"),this._renderEntity(t.context_entity_id,t.context_entity_id_name,i),n?(0,$.a$)(this.hass,this.hass.localize,t.context_state,n,(0,m.m)(t.context_entity_id)):t.context_state)}var r;if("call_service"===t.context_event_type)return(0,c.qy)(L||(L=G`${0} ${0}`),this.hass.localize("ui.components.logbook.triggered_by_action"),t.context_domain&&t.context_service?`${(0,I.p$)(this.hass.localize,t.context_domain)}:\n      ${this.hass.localize(`component.${t.context_domain}.services.${t.context_service}.name`)||(null===(r=this.hass.services[t.context_domain])||void 0===r||null===(r=r[t.context_service])||void 0===r?void 0:r.name)||t.context_service}`:"");if(!t.context_message||e.includes(t.context_entity_id))return"";if("automation_triggered"===t.context_event_type||"script_started"===t.context_event_type){var o=t.context_source?t.context_source:t.context_message.replace("triggered by ",""),a=(0,$.$O)(this.hass.localize,o);return(0,c.qy)(D||(D=G`${0} ${0} ${0}`),this.hass.localize("automation_triggered"===t.context_event_type?"ui.components.logbook.triggered_by_automation":"ui.components.logbook.triggered_by_script"),this._renderEntity(t.context_entity_id,t.context_entity_id_name,i),t.context_message?this._formatMessageWithPossibleEntity(a,e,void 0,i):"")}return(0,c.qy)(U||(U=G` ${0} ${0} ${0} ${0}`),this.hass.localize("ui.components.logbook.triggered_by"),t.context_name,this._formatMessageWithPossibleEntity(t.context_message,e,t.context_entity_id,i),this._renderUnseenContextSourceEntity(t,e,i))}},{key:"_renderEntity",value:function(t,e,i){var n=t&&t in this.hass.states,r=e||n&&this.hass.states[t].attributes.friendly_name||t;return n?i?r:(0,c.qy)(H||(H=G`<button class="link" @click="${0}" .entityId="${0}"> ${0} </button>`),this._entityClicked,t,r):r}},{key:"_formatMessageWithPossibleEntity",value:function(t,e,i,n){if(-1!==t.indexOf("."))for(var r=t.split(" "),o=0,a=r.length;o<a;o++)if(r[o]in this.hass.states){var s=r[o];if(e.includes(s))return"";e.push(s);var l=r.splice(o);return l.shift(),(0,c.qy)(O||(O=G`${0} ${0} ${0}`),r.join(" "),this._renderEntity(s,this.hass.states[s].attributes.friendly_name,n),l.join(" "))}if(i&&i in this.hass.states){var d=this.hass.states[i].attributes.friendly_name;if(d&&t.endsWith(d))return e.includes(i)?"":(e.push(i),t=t.substring(0,t.length-d.length),(0,c.qy)(j||(j=G`${0} ${0}`),t,this._renderEntity(i,d,n)))}return t}},{key:"_entityClicked",value:function(t){var e=t.currentTarget.entityId;e&&(t.preventDefault(),t.stopPropagation(),(0,g.r)(this,"hass-more-info",{entityId:e}))}},{key:"_handleClick",value:function(t){var e=t.currentTarget;e.traceLink&&((0,p.o)(e.traceLink),(0,g.r)(this,"closed"))}}],[{key:"styles",get:function(){return[k.RF,k.dp,k.og,(0,c.AH)(F||(F=G`:host([virtualize]){display:block;height:100%}.entry-container{width:100%}.entry{position:relative;display:flex;width:100%;line-height:var(--ha-line-height-expanded);padding:8px 16px;box-sizing:border-box;border-top:1px solid var(--divider-color);justify-content:space-between;align-items:center}.indicator{background-color:var(--disabled-color);height:8px;width:8px;border-radius:var(--ha-border-radius-sm);flex-shrink:0;margin-right:12px;margin-inline-start:initial;margin-inline-end:12px;direction:var(--direction)}ha-icon-next{color:var(--secondary-text-color)}.clickable{cursor:pointer}:not(.clickable) .entry.no-entity,:not(.clickable) .no-name .entry{cursor:default}.entry:hover{background-color:rgba(var(--rgb-primary-text-color),.04)}.narrow:not(.no-icon) .time{margin-left:32px;margin-inline-start:32px;margin-inline-end:initial;direction:var(--direction)}.message-relative_time{display:flex;flex-direction:column}.secondary{font-size:var(--ha-font-size-s);line-height:var(--ha-line-height-normal)}.secondary a{color:var(--secondary-text-color)}.date{margin:8px 0;padding:0 16px}.icon-message{display:flex;align-items:center}.no-entries{text-align:center;color:var(--secondary-text-color)}state-badge{margin-right:16px;margin-inline-start:initial;flex-shrink:0;color:var(--state-icon-color);margin-inline-end:16px;direction:var(--direction)}.message{color:var(--primary-text-color)}.no-name .message:first-letter{text-transform:capitalize}a{color:var(--primary-color);text-decoration:none}button.link{color:var(--state-icon-color);text-decoration:none}.container{max-height:var(--logbook-max-height)}.container,lit-virtualizer{height:100%}lit-virtualizer{contain:size layout!important}.narrow .entry{line-height:var(--ha-line-height-normal)}.narrow .icon-message state-badge{margin-left:0;margin-inline-start:0;margin-right:8px;margin-inline-end:8px;direction:var(--direction)}`))]}}])}(c.WF);(0,s.__decorate)([(0,l.MZ)({attribute:!1})],V.prototype,"hass",void 0),(0,s.__decorate)([(0,l.MZ)({attribute:!1})],V.prototype,"userIdToName",void 0),(0,s.__decorate)([(0,l.MZ)({attribute:!1})],V.prototype,"traceContexts",void 0),(0,s.__decorate)([(0,l.MZ)({attribute:!1})],V.prototype,"entries",void 0),(0,s.__decorate)([(0,l.MZ)({type:Boolean,attribute:"narrow"})],V.prototype,"narrow",void 0),(0,s.__decorate)([(0,l.MZ)({type:Boolean,attribute:"virtualize",reflect:!0})],V.prototype,"virtualize",void 0),(0,s.__decorate)([(0,l.MZ)({type:Boolean,attribute:"show-indicator"})],V.prototype,"showIndicator",void 0),(0,s.__decorate)([(0,l.MZ)({type:Boolean,attribute:"no-icon"})],V.prototype,"noIcon",void 0),(0,s.__decorate)([(0,l.MZ)({type:Boolean,attribute:"no-name"})],V.prototype,"noName",void 0),(0,s.__decorate)([(0,l.MZ)({type:Boolean,attribute:"relative-time"})],V.prototype,"relativeTime",void 0),(0,s.__decorate)([(0,y.a)(".container")],V.prototype,"_savedScrollPos",void 0),(0,s.__decorate)([(0,l.Ls)({passive:!0})],V.prototype,"_saveScrollPos",null),(0,s.__decorate)([(0,l.Ls)({passive:!0})],V.prototype,"_visibilityChanged",null),V=(0,s.__decorate)([(0,l.EM)("ha-logbook-renderer")],V),e()}catch(Y){e(Y)}})}}]);
//# sourceMappingURL=12265.7964536c8ffac5fe.js.map