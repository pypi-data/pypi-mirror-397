"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["193"],{3320:function(t,i,e){e.a(t,async function(t,s){try{e.r(i),e.d(i,{HuiGraphHeaderFooter:function(){return q}});var o=e(98735),n=e(88486),r=e(73983),a=e(62020),c=e(31802),h=e(21101),u=e(87426),d=e(23180),_=(e(46852),e(79827),e(35748),e(65152),e(45519),e(5934),e(95013),e(69868)),l=e(84922),f=e(11991),b=e(26946),y=e(88341),v=e(96635),p=e(69006),g=e(44630),m=e(23459),k=(e(42086),t([v,p]));[v,p]=k.then?(await k)():k;var w,A,C,x,H,M=t=>t,N=["counter","input_number","number","sensor"],q=function(t){function i(){return(0,a.A)(this,i),(0,h.A)(this,i,arguments)}return(0,d.A)(i,t),(0,c.A)(i,[{key:"getCardSize",value:function(){return 3}},{key:"setConfig",value:function(t){if(null==t||!t.entity||!N.includes((0,y.m)(t.entity)))throw new Error("Specify an entity from within the sensor domain");var i=Object.assign({detail:1,hours_to_show:24},t);i.hours_to_show=Number(i.hours_to_show),i.detail=1===i.detail||2===i.detail?i.detail:1,this._config=i}},{key:"render",value:function(){return this._config&&this.hass?this._error?(0,l.qy)(w||(w=M`<div class="errors">${0}</div>`),this._error):this._coordinates?this._coordinates.length?(0,l.qy)(x||(x=M` <hui-graph-base .coordinates="${0}"></hui-graph-base> `),this._coordinates):(0,l.qy)(C||(C=M` <div class="container"> <div class="info">No state history found.</div> </div> `)):(0,l.qy)(A||(A=M` <div class="container"> <ha-spinner size="small"></ha-spinner> </div> `)):l.s6}},{key:"connectedCallback",value:function(){(0,u.A)(i,"connectedCallback",this,3)([]),this.hasUpdated&&this._config&&this._subscribeHistory()}},{key:"disconnectedCallback",value:function(){(0,u.A)(i,"disconnectedCallback",this,3)([]),this._unsubscribeHistory()}},{key:"_subscribeHistory",value:function(){(0,b.x)(this.hass,"history")&&!this._subscribed&&this._config&&(this._subscribed=(0,p.IQ)(this.hass,t=>{var i,e;if(this._subscribed&&this._config){var s=this.clientWidth||this.offsetWidth,o=Math.max(10,this._config.detail>1?Math.max(s/5,this._config.hours_to_show):this._config.hours_to_show),n=2!==this._config.detail,r=(0,m.a)(t[this._config.entity],s,s/5,o,{minY:null===(i=this._config.limits)||void 0===i?void 0:i.min,maxY:null===(e=this._config.limits)||void 0===e?void 0:e.max},n).points;this._coordinates=r}},this._config.hours_to_show,[this._config.entity]).catch(t=>{this._subscribed=void 0,this._error=t}),this._setRedrawTimer())}},{key:"_redrawGraph",value:function(){this._coordinates&&(this._coordinates=(0,r.A)(this._coordinates))}},{key:"_setRedrawTimer",value:function(){clearInterval(this._interval),this._interval=window.setInterval(()=>this._redrawGraph(),this._config.hours_to_show>24?36e5:6e4)}},{key:"_unsubscribeHistory",value:function(){clearInterval(this._interval),this._subscribed&&(this._subscribed.then(t=>null==t?void 0:t()),this._subscribed=void 0)}},{key:"updated",value:function(t){if(this._config&&this.hass&&t.has("_config")){var i=t.get("_config");i&&this._subscribed&&i.entity===this._config.entity||(this._unsubscribeHistory(),this._subscribeHistory())}}}],[{key:"getConfigElement",value:(s=(0,n.A)((0,o.A)().m(function t(){return(0,o.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Promise.all([e.e("42153"),e.e("30199"),e.e("37620"),e.e("71916"),e.e("61717"),e.e("10086"),e.e("57057")]).then(e.bind(e,12461));case 1:return t.a(2,document.createElement("hui-graph-footer-editor"))}},t)})),function(){return s.apply(this,arguments)})},{key:"getStubConfig",value:function(t,i,e){return{type:"graph",entity:(0,g.B)(t,1,i,e,N,t=>!isNaN(Number(t.state))&&!!t.attributes.unit_of_measurement)[0]||""}}}]);var s}(l.WF);q.styles=(0,l.AH)(H||(H=M`:host{display:block}ha-spinner{position:absolute;top:calc(50% - 14px)}.container{display:flex;justify-content:center;position:relative;padding-bottom:20%}.info{position:absolute;top:calc(50% - 16px);color:var(--secondary-text-color)}`)),(0,_.__decorate)([(0,f.MZ)({attribute:!1})],q.prototype,"hass",void 0),(0,_.__decorate)([(0,f.MZ)()],q.prototype,"type",void 0),(0,_.__decorate)([(0,f.wk)()],q.prototype,"_config",void 0),(0,_.__decorate)([(0,f.wk)()],q.prototype,"_coordinates",void 0),q=(0,_.__decorate)([(0,f.EM)("hui-graph-header-footer")],q),s()}catch(E){s(E)}})}}]);
//# sourceMappingURL=193.45b31382c7257020.js.map