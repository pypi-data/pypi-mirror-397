"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["89325"],{80892:function(e,t,r){r.a(e,async function(e,a){try{r.r(t),r.d(t,{CloudForgotPasswordCard:function(){return A}});var n=r(98735),o=r(88486),s=r(62020),i=r(31802),l=r(97750),d=r(21101),c=r(23180),u=(r(38606),r(69868)),h=r(84922),_=r(11991),p=r(44017),y=r(41042),f=(r(94124),r(70490),r(80287),r(50809)),v=r(50991),g=r(6033),w=e([y]);y=(w.then?(await w)():w)[0];var k,m,P,b,$=e=>e,A=function(e){function t(){var e;(0,s.A)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=(0,d.A)(this,t,[].concat(a))).translationKeyPanel="config.cloud.forgot_password",e.cardLess=!1,e._inProgress=!1,e._resetPassword=function(){var t=(0,o.A)((0,n.A)().m(function t(r){var a;return(0,n.A)().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e._inProgress=!0,t.p=1,!e.hass){t.n=3;break}return t.n=2,(0,v.Ut)(e.hass,r);case 2:t.n=4;break;case 3:return t.n=4,(0,g.zN)(r);case 4:(0,p.r)((0,l.A)(e),"cloud-email-changed",{value:r}),e._inProgress=!1,(0,p.r)((0,l.A)(e),"cloud-done",{flashMessage:e.localize(`ui.panel.${e.translationKeyPanel}.check_your_email`)}),t.n=8;break;case 5:if(t.p=5,a=t.v,e._inProgress=!1,"usernotfound"!==(a&&a.body&&a.body.code)||r===r.toLowerCase()){t.n=7;break}return t.n=6,e._resetPassword(r.toLowerCase());case 6:t.n=8;break;case 7:e._error=a&&a.body&&a.body.message?a.body.message:"Unknown error";case 8:return t.a(2)}},t,null,[[1,5]])}));return function(e){return t.apply(this,arguments)}}(),e}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){return this.cardLess?this._renderContent():(0,h.qy)(k||(k=$` <ha-card outlined .header="${0}"> ${0} </ha-card> `),this.localize(`ui.panel.${this.translationKeyPanel}.subtitle`),this._renderContent())}},{key:"_renderContent",value:function(){var e;return(0,h.qy)(m||(m=$` <div class="card-content"> <p> ${0} </p> ${0} <ha-textfield autofocus id="email" label="${0}" .value="${0}" type="email" required .disabled="${0}" @keydown="${0}" .validationMessage="${0}"></ha-textfield> </div> <div class="card-actions"> <ha-progress-button @click="${0}" .progress="${0}"> ${0} </ha-progress-button> </div> `),this.localize(`ui.panel.${this.translationKeyPanel}.instructions`),this._error?(0,h.qy)(P||(P=$`<ha-alert alert-type="error">${0}</ha-alert>`),this._error):h.s6,this.localize(`ui.panel.${this.translationKeyPanel}.email`),null!==(e=this.email)&&void 0!==e?e:"",this._inProgress,this._keyDown,this.localize(`ui.panel.${this.translationKeyPanel}.email_error_msg`),this._handleEmailPasswordReset,this._inProgress,this.localize(`ui.panel.${this.translationKeyPanel}.send_reset_email`))}},{key:"_keyDown",value:function(e){"Enter"===e.key&&this._handleEmailPasswordReset()}},{key:"_handleEmailPasswordReset",value:(r=(0,o.A)((0,n.A)().m(function e(){var t,r;return(0,n.A)().w(function(e){for(;;)switch(e.n){case 0:if(t=this.emailField,r=t.value,t.reportValidity()){e.n=1;break}return t.focus(),e.a(2);case 1:this._inProgress=!0,this._resetPassword(r);case 2:return e.a(2)}},e,this)})),function(){return r.apply(this,arguments)})}],[{key:"styles",get:function(){return[f.RF,(0,h.AH)(b||(b=$`ha-card{max-width:600px;margin:0 auto;margin-top:24px}h1{margin:0}ha-textfield{width:100%}.card-actions{display:flex;justify-content:flex-end;align-items:center}`))]}}]);var r}(h.WF);(0,u.__decorate)([(0,_.MZ)({attribute:!1})],A.prototype,"hass",void 0),(0,u.__decorate)([(0,_.MZ)({attribute:!1})],A.prototype,"localize",void 0),(0,u.__decorate)([(0,_.MZ)({attribute:"translation-key-panel"})],A.prototype,"translationKeyPanel",void 0),(0,u.__decorate)([(0,_.MZ)()],A.prototype,"email",void 0),(0,u.__decorate)([(0,_.MZ)({type:Boolean,attribute:"card-less"})],A.prototype,"cardLess",void 0),(0,u.__decorate)([(0,_.wk)()],A.prototype,"_inProgress",void 0),(0,u.__decorate)([(0,_.wk)()],A.prototype,"_error",void 0),(0,u.__decorate)([(0,_.P)("#email",!0)],A.prototype,"emailField",void 0),A=(0,u.__decorate)([(0,_.EM)("cloud-forgot-password-card")],A),a()}catch(C){a(C)}})}}]);
//# sourceMappingURL=89325.232e027eaa40490e.js.map