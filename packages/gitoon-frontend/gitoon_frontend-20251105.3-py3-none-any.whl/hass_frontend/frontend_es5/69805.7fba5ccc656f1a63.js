"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["69805"],{1020:function(e,t,a){a.a(e,async function(e,i){try{a.r(t),a.d(t,{HuiStatisticCardEditor:function(){return $}});var n=a(98735),o=a(88486),r=a(15243),s=a(62020),c=a(31802),l=a(21101),d=a(23180),h=(a(38606),a(80178),a(65315),a(22416),a(37089),a(29726),a(45519),a(30536),a(69868)),u=a(84922),p=a(11991),_=a(65940),f=a(36207),y=a(44017),m=a(29561),v=(a(60921),a(63002)),g=a(6775),b=a(85532),k=a(89485),q=e([v]);v=(q.then?(await q)():q)[0];var j,w=e=>e,Y=(0,f.kp)(b.H,(0,f.Ik)({entity:(0,f.lq)((0,f.Yj)()),name:(0,f.lq)(k.q),icon:(0,f.lq)((0,f.Yj)()),unit:(0,f.lq)((0,f.Yj)()),stat_type:(0,f.lq)((0,f.Yj)()),period:(0,f.lq)((0,f.bz)()),theme:(0,f.lq)((0,f.Yj)()),footer:(0,f.lq)(g.zb),collection_key:(0,f.lq)((0,f.Yj)())})),z=["mean","min","max","change"],A={mean:"mean",min:"min",max:"max",change:"sum"},O={today:{calendar:{period:"day"}},yesterday:{calendar:{period:"day",offset:-1}},this_week:{calendar:{period:"week"}},last_week:{calendar:{period:"week",offset:-1}},this_month:{calendar:{period:"month"}},last_month:{calendar:{period:"month",offset:-1}},this_year:{calendar:{period:"year"}},last_year:{calendar:{period:"year",offset:-1}}},$=function(e){function t(){var e;(0,s.A)(this,t);for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=(0,l.A)(this,t,[].concat(i)))._data=(0,_.A)(e=>{if(!e||!e.period)return e;for(var t=0,a=Object.entries(O);t<a.length;t++){var i=(0,r.A)(a[t],2),n=i[0],o=i[1];if((0,m.b)(o,e.period))return Object.assign(Object.assign({},e),{},{period:n})}return e}),e._schema=(0,_.A)((e,t,a)=>[{name:"entity",required:!0,selector:{statistic:{}}},{name:"stat_type",required:!0,selector:{select:{multiple:!1,options:z.map(e=>({value:e,label:t(`ui.panel.lovelace.editor.card.statistic.stat_type_labels.${e}`),disabled:!a||!(0,v.nN)(a,A[e])}))}}},{name:"period",required:!0,selector:e&&e in O?{select:{multiple:!1,options:Object.keys(O).map(e=>({value:e,label:t(`ui.panel.lovelace.editor.card.statistic.periods.${e}`)||e}))}}:{object:{}}},{name:"name",selector:{entity_name:{}},context:{entity:"entity"}},{type:"grid",name:"",schema:[{name:"icon",selector:{icon:{}},context:{icon_entity:"entity"}},{name:"unit",selector:{text:{}}},{name:"theme",selector:{theme:{}}}]}]),e._computeLabelCallback=t=>"period"===t.name?e.hass.localize("ui.panel.lovelace.editor.card.statistic.period"):"theme"===t.name?`${e.hass.localize("ui.panel.lovelace.editor.card.generic.theme")} (${e.hass.localize("ui.panel.lovelace.editor.card.config.optional")})`:e.hass.localize(`ui.panel.lovelace.editor.card.generic.${t.name}`),e}return(0,d.A)(t,e),(0,c.A)(t,[{key:"setConfig",value:function(e){(0,f.vA)(e,Y),this._config=e,this._fetchMetadata()}},{key:"firstUpdated",value:function(){this._fetchMetadata().then(()=>{var e,t,a;null!==(e=this._config)&&void 0!==e&&e.stat_type||null===(t=this._config)||void 0===t||!t.entity||(0,y.r)(this,"config-changed",{config:Object.assign(Object.assign({},this._config),{},{stat_type:null!==(a=this._metadata)&&void 0!==a&&a.has_sum?"change":"mean"})})})}},{key:"render",value:function(){if(!this.hass||!this._config)return u.s6;var e=this._data(this._config),t=this._schema("string"==typeof e.period?e.period:void 0,this.hass.localize,this._metadata);return(0,u.qy)(j||(j=w` <ha-form .hass="${0}" .data="${0}" .schema="${0}" .computeLabel="${0}" @value-changed="${0}"></ha-form> `),this.hass,e,t,this._computeLabelCallback,this._valueChanged)}},{key:"_fetchMetadata",value:(i=(0,o.A)((0,n.A)().m(function e(){return(0,n.A)().w(function(e){for(;;)switch(e.n){case 0:if(this.hass&&this._config){e.n=1;break}return e.a(2);case 1:return e.n=2,(0,v.Wr)(this.hass,[this._config.entity]);case 2:this._metadata=e.v[0];case 3:return e.a(2)}},e,this)})),function(){return i.apply(this,arguments)})},{key:"_valueChanged",value:(a=(0,o.A)((0,n.A)().m(function e(t){var a,i,o,r,s,c,l,d,h,u,p,_,f;return(0,n.A)().w(function(e){for(;;)switch(e.n){case 0:if(i=Object.assign({},t.detail.value),Object.keys(i).forEach(e=>""===i[e]&&delete i[e]),"string"==typeof i.period&&(o=O[i.period])&&(i.period=o),!i.stat_type||!i.entity||i.entity===(null===(a=this._metadata)||void 0===a?void 0:a.statistic_id)){e.n=5;break}return e.n=1,(0,v.Wr)(this.hass,[i.entity]);case 1:if(h=r=e.v,d=null===h){e.n=2;break}d=void 0===r;case 2:if(!d){e.n=3;break}u=void 0,e.n=4;break;case 3:u=r[0];case 4:(s=u)&&!s.has_sum&&"change"===i.stat_type&&(i.stat_type="mean"),s&&s.mean_type===v.ED.NONE&&"change"!==i.stat_type&&(i.stat_type="change");case 5:if(i.stat_type||!i.entity){e.n=10;break}return e.n=6,(0,v.Wr)(this.hass,[i.entity]);case 6:if(_=c=e.v,p=null===_){e.n=7;break}p=void 0===c;case 7:if(!p){e.n=8;break}f=void 0,e.n=9;break;case 8:f=c[0];case 9:l=f,i.stat_type=null!=l&&l.has_sum?"change":"mean";case 10:(0,y.r)(this,"config-changed",{config:i});case 11:return e.a(2)}},e,this)})),function(e){return a.apply(this,arguments)})}]);var a,i}(u.WF);(0,h.__decorate)([(0,p.MZ)({attribute:!1})],$.prototype,"hass",void 0),(0,h.__decorate)([(0,p.wk)()],$.prototype,"_config",void 0),(0,h.__decorate)([(0,p.wk)()],$.prototype,"_metadata",void 0),$=(0,h.__decorate)([(0,p.EM)("hui-statistic-card-editor")],$),i()}catch(C){i(C)}})},85532:function(e,t,a){a.d(t,{H:function(){return n}});var i=a(36207),n=(0,i.Ik)({type:(0,i.Yj)(),view_layout:(0,i.bz)(),layout_options:(0,i.bz)(),grid_options:(0,i.bz)(),visibility:(0,i.bz)(),disabled:(0,i.lq)((0,i.zM)())})},85602:function(e,t,a){a.d(t,{J:function(){return o}});var i=a(36207),n=a(2962),o=(0,i.Ik)({entity:(0,i.Yj)(),name:(0,i.lq)((0,i.Yj)()),icon:(0,i.lq)((0,i.Yj)()),image:(0,i.lq)((0,i.Yj)()),show_name:(0,i.lq)((0,i.zM)()),show_icon:(0,i.lq)((0,i.zM)()),tap_action:(0,i.lq)(n.kn),hold_action:(0,i.lq)(n.kn),double_tap_action:(0,i.lq)(n.kn)})},6775:function(e,t,a){a.d(t,{oe:function(){return c},zb:function(){return l}});var i=a(36207),n=a(2962),o=a(85602),r=(0,i.Ik)({type:(0,i.Yj)(),image:(0,i.Yj)(),tap_action:(0,i.lq)(n.kn),hold_action:(0,i.lq)(n.kn),double_tap_action:(0,i.lq)(n.kn),alt_text:(0,i.lq)((0,i.Yj)())}),s=(0,i.Ik)({type:(0,i.Yj)(),entities:(0,i.YO)(o.J)}),c=(0,i.Ik)({type:(0,i.Yj)(),entity:(0,i.Yj)(),detail:(0,i.lq)((0,i.ai)()),hours_to_show:(0,i.lq)((0,i.ai)())}),l=(0,i.OR)(e=>{if(e&&"object"==typeof e&&"type"in e)switch(e.type){case"buttons":return s;case"graph":return c;case"picture":return r}return(0,i.KC)([s,c,r])})}}]);
//# sourceMappingURL=69805.7fba5ccc656f1a63.js.map