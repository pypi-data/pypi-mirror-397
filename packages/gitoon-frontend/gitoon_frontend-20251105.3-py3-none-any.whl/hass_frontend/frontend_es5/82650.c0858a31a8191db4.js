"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["82650"],{21281:function(t,e,i){i.r(e),i.d(e,{HuiEntityFilterCard:function(){return p}});var s=i(18202),n=i(62020),r=i(31802),a=i(21101),o=i(23180),h=i(87426),l=(i(45269),i(46852),i(38606),i(96956),i(80178),i(65315),i(12840),i(837),i(37089),i(59023),i(45519),i(69868)),c=i(84922),f=i(11991),u=i(44017),d=i(85191),y=i(62491),_=i(44630),g=i(38177),v=i(97073),p=function(t){function e(){var t;(0,n.A)(this,e);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=(0,a.A)(this,e,[].concat(s))).preview=!1,t}return(0,o.A)(e,t),(0,r.A)(e,[{key:"getCardSize",value:function(){return this._element?(0,d.Z)(this._element):1}},{key:"setConfig",value:function(t){if(!t.entities||!t.entities.length||!Array.isArray(t.entities))throw new Error("Entities must be specified");if(!t.conditions&&!t.state_filter&&!t.entities.some(t=>"object"==typeof t&&(t.state_filter||t.conditions)))throw new Error("At least one conditions or state_filter is required");if(t.conditions&&!Array.isArray(t.conditions)||t.state_filter&&!Array.isArray(t.state_filter)||t.entities.some(t=>"object"==typeof t&&(t.state_filter&&!Array.isArray(t.state_filter)||t.conditions&&!Array.isArray(t.conditions))))throw new Error("Conditions or state_filter must be an array");if(t.conditions&&t.state_filter||t.entities.some(t=>"object"==typeof t&&t.state_filter&&t.conditions))throw new Error("Conditions and state_filter may not be simultaneously defined");this._configEntities=(0,g.L)(t.entities),this._config=t,this._baseCardConfig=Object.assign({type:"entities",entities:[]},this._config.card),this.lastChild&&this.removeChild(this.lastChild),this._element=this._createCardElement(this._baseCardConfig)}},{key:"createRenderRoot",value:function(){return this}},{key:"shouldUpdate",value:function(t){return this._element&&(this._element.hass=this.hass,this._element.preview=this.preview,this._element.layout=this.layout),!(!t.has("_config")&&!t.has("preview"))||!!t.has("hass")&&this._haveEntitiesChanged(t.get("hass"))}},{key:"update",value:function(t){if((0,h.A)(e,"update",this,3)([t]),this.hass&&this._config&&this._configEntities&&this._element){var i=this._configEntities.filter(t=>{var e,i,s=this.hass.states[t.entity];if(!s)return!1;var n=null!==(e=t.conditions)&&void 0!==e?e:this._config.conditions;if(n&&!t.state_filter){var r=n.map(e=>(0,v.lB)(e,t.entity));return(0,v.XH)(r,this.hass)}var a=null!==(i=t.state_filter)&&void 0!==i?i:this._config.state_filter;return!a||a.some(t=>(0,y.J)(s,t))});if(0!==i.length||!1!==this._config.show_empty||this.preview){if(this.lastChild)this._oldEntities&&i.length===this._oldEntities.length&&i.every((t,e)=>t===this._oldEntities[e])||(this._oldEntities=i,this._element.config=Object.assign(Object.assign({},this._baseCardConfig),{},{entities:i}));else this._element.config=Object.assign(Object.assign({},this._baseCardConfig),{},{entities:i}),this._oldEntities=i;this.lastChild||this.appendChild(this._element),this.hidden&&(this.style.display="block",this.toggleAttribute("hidden",!1),(0,u.r)(this,"card-visibility-changed",{value:!0}))}else this.hidden||(this.style.display="none",this.toggleAttribute("hidden",!0),(0,u.r)(this,"card-visibility-changed",{value:!1}))}}},{key:"_haveEntitiesChanged",value:function(t){var e;if(!this.hass||!t)return!0;if(!this._configEntities)return!0;if(this.hass.localize!==t.localize)return!0;var i,n=(0,s.A)(this._configEntities);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(this.hass.states[r.entity]!==t.states[r.entity])return!0;if(r.conditions){var a,o=(0,v.Wx)(r.conditions),h=(0,s.A)(o);try{for(h.s();!(a=h.n()).done;){var l=a.value;if(this.hass.states[l]!==t.states[l])return!0}}catch(_){h.e(_)}finally{h.f()}}}}catch(_){n.e(_)}finally{n.f()}if(null!==(e=this._config)&&void 0!==e&&e.conditions){var c,f,u=(0,v.Wx)(null===(c=this._config)||void 0===c?void 0:c.conditions),d=(0,s.A)(u);try{for(d.s();!(f=d.n()).done;){var y=f.value;if(this.hass.states[y]!==t.states[y])return!0}}catch(_){d.e(_)}finally{d.f()}}return!1}},{key:"_createCardElement",value:function(t){var e=document.createElement("hui-card");return e.hass=this.hass,e.preview=this.preview,e.config=t,e.load(),e}}],[{key:"getStubConfig",value:function(t,e,i){var s=(0,_.B)(t,3,e,i,["light","switch","sensor"]);return{type:"entity-filter",entities:s,conditions:s[0]?[{condition:"state",state:t.states[s[0]].state}]:[],card:{type:"entities"}}}}])}(c.mN);(0,l.__decorate)([(0,f.MZ)({attribute:!1})],p.prototype,"hass",void 0),(0,l.__decorate)([(0,f.MZ)({attribute:!1})],p.prototype,"layout",void 0),(0,l.__decorate)([(0,f.MZ)({type:Boolean})],p.prototype,"preview",void 0),(0,l.__decorate)([(0,f.wk)()],p.prototype,"_config",void 0),p=(0,l.__decorate)([(0,f.EM)("hui-entity-filter-card")],p)},62491:function(t,e,i){i.d(e,{J:function(){return s}});i(79827),i(80178),i(65315),i(37089),i(36874),i(65152),i(45519),i(42124),i(86581),i(67579),i(41190),i(47849),i(39118);var s=(t,e)=>{var i,s,n;if("object"==typeof e?(i=e.operator,s=e.value,n=e.attribute?t.attributes[e.attribute]:t.state):(i="==",s=e,n=t.state),"=="===i||"!="===i){var r="number"==typeof s||"string"==typeof s&&s.trim()&&!isNaN(Number(s)),a="number"==typeof n||"string"==typeof n&&n.trim()&&!isNaN(Number(n));r&&a&&(s=Number(s),n=Number(n))}switch(i){case"==":return n===s;case"<=":return n<=s;case"<":return n<s;case">=":return n>=s;case">":return n>s;case"!=":return n!==s;case"in":return!(!Array.isArray(s)&&"string"!=typeof s)&&(Array.isArray(s)&&(s=s.map(t=>`${t}`)),s.includes(n));case"not in":return!(!Array.isArray(s)&&"string"!=typeof s)&&(Array.isArray(s)&&(s=s.map(t=>`${t}`)),!s.includes(n));case"regex":return"string"==typeof s&&(null!==n&&"object"==typeof n?RegExp(s).test(JSON.stringify(n)):RegExp(s).test(n));default:return!1}}}}]);
//# sourceMappingURL=82650.c0858a31a8191db4.js.map