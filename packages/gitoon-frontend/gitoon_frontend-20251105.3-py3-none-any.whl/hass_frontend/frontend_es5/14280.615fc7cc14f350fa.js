"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["14280"],{89094:function(t,e,i){i.d(e,{H:function(){return r}});var a=i(98735),o=i(88486),r=(i(46852),i(35748),i(80178),i(65315),i(37089),i(45519),i(5934),i(95013),function(){var t=(0,o.A)((0,a.A)().m(function t(e){var o,r,n,l,c;return(0,a.A)().w(function(t){for(;;)switch(t.n){case 0:if(e.parentNode){t.n=1;break}throw new Error("Cannot setup Leaflet map on disconnected element");case 1:return t.n=2,Promise.resolve().then(i.t.bind(i,96866,23));case 2:return(o=t.v.default).Icon.Default.imagePath="/static/images/leaflet/images/",t.n=3,i.e("57207").then(i.t.bind(i,23754,23));case 3:return r=o.map(e),(n=document.createElement("link")).setAttribute("href","/static/images/leaflet/leaflet.css"),n.setAttribute("rel","stylesheet"),e.parentNode.appendChild(n),(l=document.createElement("link")).setAttribute("href","/static/images/leaflet/MarkerCluster.css"),l.setAttribute("rel","stylesheet"),e.parentNode.appendChild(l),r.setView([52.3731339,4.8903147],13),c=s(o).addTo(r),t.a(2,[r,o,c])}},t)}));return function(e){return t.apply(this,arguments)}}()),s=t=>t.tileLayer("https://basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}"+(t.Browser.retina?"@2x.png":".png"),{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>, &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",minZoom:0,maxZoom:20})},14404:function(t,e,i){i.d(e,{q:function(){return c}});var a=i(62020),o=i(31802),r=i(21101),s=i(23180),n=i(87426),l=i(96866),c=function(t){function e(t,i,o){var s;return(0,a.A)(this,e),(s=(0,r.A)(this,e,[t,o])).decorationLayer=i,s}return(0,s.A)(e,t),(0,o.A)(e,[{key:"onAdd",value:function(t){var i;return(0,n.A)(e,"onAdd",this,3)([t]),null===(i=this.decorationLayer)||void 0===i||i.addTo(t),this}},{key:"onRemove",value:function(t){var i;return null===(i=this.decorationLayer)||void 0===i||i.remove(),(0,n.A)(e,"onRemove",this,3)([t])}}])}(l.Marker)},91413:function(t,e,i){i.a(t,async function(t,e){try{var a=i(62020),o=i(31802),r=i(21101),s=i(23180),n=(i(38606),i(69868)),l=i(84922),c=i(11991),h=i(48893),d=i(44017),u=i(84553),p=t([u]);u=(p.then?(await p)():p)[0];var m,f,v,y,_,g=t=>t,b=function(t){function e(){var t;(0,a.A)(this,e);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(t=(0,r.A)(this,e,[].concat(o))).showIcon=!1,t}return(0,s.A)(e,t),(0,o.A)(e,[{key:"render",value:function(){var t;return(0,l.qy)(m||(m=g` <div class="marker ${0}" style="${0}" @click="${0}"> ${0} </div> `),this.entityPicture?"picture":"",(0,h.W)({"border-color":this.entityColor}),this._badgeTap,this.entityPicture?(0,l.qy)(f||(f=g`<div class="entity-picture" style="${0}"></div>`),(0,h.W)({"background-image":`url(${this.entityPicture})`})):this.showIcon&&this.entityId?(0,l.qy)(v||(v=g`<ha-state-icon .hass="${0}" .stateObj="${0}"></ha-state-icon>`),this.hass,null===(t=this.hass)||void 0===t?void 0:t.states[this.entityId]):this.entityUnit?(0,l.qy)(y||(y=g` ${0} <span class="unit" style="display:${0}">${0}</span> `),this.entityName,this.entityUnit?"initial":"none",this.entityUnit):this.entityName)}},{key:"_badgeTap",value:function(t){t.stopPropagation(),this.entityId&&(0,d.r)(this,"hass-more-info",{entityId:this.entityId})}}])}(l.WF);b.styles=(0,l.AH)(_||(_=g`.marker{display:flex;justify-content:center;text-align:center;align-items:center;box-sizing:border-box;width:48px;height:48px;font-size:var(--ha-marker-font-size, var(--ha-font-size-xl));border-radius:var(--ha-marker-border-radius,50%);border:1px solid var(--ha-marker-color,var(--primary-color));color:var(--primary-text-color);background-color:var(--card-background-color)}.marker.picture{overflow:hidden}.entity-picture{background-size:cover;height:100%;width:100%}.unit{margin-left:2px}`)),(0,n.__decorate)([(0,c.MZ)({attribute:!1})],b.prototype,"hass",void 0),(0,n.__decorate)([(0,c.MZ)({attribute:"entity-id",reflect:!0})],b.prototype,"entityId",void 0),(0,n.__decorate)([(0,c.MZ)({attribute:"entity-name"})],b.prototype,"entityName",void 0),(0,n.__decorate)([(0,c.MZ)({attribute:"entity-unit"})],b.prototype,"entityUnit",void 0),(0,n.__decorate)([(0,c.MZ)({attribute:"entity-picture"})],b.prototype,"entityPicture",void 0),(0,n.__decorate)([(0,c.MZ)({attribute:"entity-color"})],b.prototype,"entityColor",void 0),(0,n.__decorate)([(0,c.MZ)({attribute:"show-icon",type:Boolean})],b.prototype,"showIcon",void 0),customElements.define("ha-entity-marker",b),e()}catch(k){e(k)}})},2043:function(t,e,i){i.a(t,async function(t,e){try{var a=i(15243),o=i(18202),r=i(98735),s=i(88486),n=i(62020),l=i(31802),c=i(21101),h=i(23180),d=i(87426),u=i(10629),p=(i(38606),i(80178),i(99342),i(65315),i(22416),i(37089),i(65152),i(45519),i(30536),i(69868)),m=i(56590),f=i(84922),v=i(11991),y=i(6149),_=i(65380),g=i(44017),b=i(89094),k=i(12275),M=i(72652),A=i(14404),w=i(58564),L=(i(9058),i(91413)),Z=t([u,L,y,_]);[u,L,y,_]=Z.then?(await Z)():Z;var P,z=250,x=t=>"string"==typeof t?t:t.entity_id,C=function(t){function e(){var t;(0,n.A)(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(t=(0,c.A)(this,e,[].concat(a))).clickable=!1,t.autoFit=!1,t.renderPassive=!1,t.interactiveZones=!1,t.fitZones=!1,t.themeMode="auto",t.zoom=14,t.clusterMarkers=!0,t._loaded=!1,t._mapItems=[],t._mapFocusItems=[],t._mapZones=[],t._mapFocusZones=[],t._mapPaths=[],t._clickCount=0,t._isProgrammaticFit=!1,t._pauseAutoFit=!1,t._handleVisibilityChange=(0,s.A)((0,r.A)().m(function e(){return(0,r.A)().w(function(e){for(;;)switch(e.n){case 0:document.hidden||setTimeout(()=>{t._pauseAutoFit=!1},500);case 1:return e.a(2)}},e)})),t._loading=!1,t}return(0,h.A)(e,t),(0,l.A)(e,[{key:"connectedCallback",value:function(){this._pauseAutoFit=!1,document.addEventListener("visibilitychange",this._handleVisibilityChange),this._handleVisibilityChange(),(0,d.A)(e,"connectedCallback",this,3)([]),this._loadMap(),this._attachObserver()}},{key:"disconnectedCallback",value:function(){(0,d.A)(e,"disconnectedCallback",this,3)([]),document.removeEventListener("visibilitychange",this._handleVisibilityChange),this.leafletMap&&(this.leafletMap.remove(),this.leafletMap=void 0,this.Leaflet=void 0),this._loaded=!1,this._resizeObserver&&this._resizeObserver.unobserve(this)}},{key:"update",value:function(t){var i,a;if((0,d.A)(e,"update",this,3)([t]),this._loaded){var r=!1,s=t.get("hass");if(t.has("_loaded")||t.has("entities"))this._drawEntities(),r=!this._pauseAutoFit;else if(this._loaded&&s&&this.entities){var n,l=(0,o.A)(this.entities);try{for(l.s();!(n=l.n()).done;){var c=n.value;if(s.states[x(c)]!==this.hass.states[x(c)]){this._drawEntities(),r=!this._pauseAutoFit;break}}}catch(h){l.e(h)}finally{l.f()}}t.has("clusterMarkers")&&this._drawEntities(),(t.has("_loaded")||t.has("paths"))&&this._drawPaths(),(t.has("_loaded")||t.has("layers"))&&(this._drawLayers(t.get("layers")),r=!0),(t.has("_loaded")||this.autoFit&&r)&&this.fitMap(),t.has("zoom")&&(this._isProgrammaticFit=!0,this.leafletMap.setZoom(this.zoom),setTimeout(()=>{this._isProgrammaticFit=!1},z)),(t.has("themeMode")||t.has("hass")&&(!s||(null===(i=s.themes)||void 0===i?void 0:i.darkMode)!==(null===(a=this.hass.themes)||void 0===a?void 0:a.darkMode)))&&this._updateMapStyle()}}},{key:"_darkMode",get:function(){return"dark"===this.themeMode||"auto"===this.themeMode&&Boolean(this.hass.themes.darkMode)}},{key:"_updateMapStyle",value:function(){var t=this.renderRoot.querySelector("#map");t.classList.toggle("clickable",this.clickable),t.classList.toggle("dark",this._darkMode),t.classList.toggle("forced-dark","dark"===this.themeMode),t.classList.toggle("forced-light","light"===this.themeMode)}},{key:"_loadMap",value:(u=(0,s.A)((0,r.A)().m(function t(){var e,i,o;return(0,r.A)().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!this._loading){t.n=1;break}return t.a(2);case 1:return(e=this.shadowRoot.getElementById("map"))||((e=document.createElement("div")).id="map",this.shadowRoot.append(e)),this._loading=!0,t.p=2,t.n=3,(0,b.H)(e);case 3:i=t.v,o=(0,a.A)(i,2),this.leafletMap=o[0],this.Leaflet=o[1],this._updateMapStyle(),this.leafletMap.on("click",t=>{0===this._clickCount&&setTimeout(()=>{1===this._clickCount&&(0,g.r)(this,"map-clicked",{location:[t.latlng.lat,t.latlng.lng]}),this._clickCount=0},250),this._clickCount++}),this.leafletMap.on("zoomstart",()=>{this._isProgrammaticFit||(this._pauseAutoFit=!0)}),this.leafletMap.on("movestart",()=>{this._isProgrammaticFit||(this._pauseAutoFit=!0)}),this._loaded=!0;case 4:return t.p=4,this._loading=!1,t.f(4);case 5:return t.a(2)}},t,this,[[2,,4,5]])})),function(){return u.apply(this,arguments)})},{key:"fitMap",value:function(t){var e,i,a,o;if(null!=t&&t.unpause_autofit&&(this._pauseAutoFit=!1),this.leafletMap&&this.Leaflet&&this.hass){if(!(this._mapFocusItems.length||this._mapFocusZones.length||null!==(e=this.layers)&&void 0!==e&&e.length))return this._isProgrammaticFit=!0,this.leafletMap.setView(new this.Leaflet.LatLng(this.hass.config.latitude,this.hass.config.longitude),(null==t?void 0:t.zoom)||this.zoom),void setTimeout(()=>{this._isProgrammaticFit=!1},z);var r=this.Leaflet.latLngBounds(this._mapFocusItems?this._mapFocusItems.map(t=>t.getLatLng()):[]);null===(i=this._mapFocusZones)||void 0===i||i.forEach(t=>{r.extend("getBounds"in t?t.getBounds():t.getLatLng())}),null===(a=this.layers)||void 0===a||a.forEach(t=>{r.extend("getBounds"in t?t.getBounds():t.getLatLng())}),r=r.pad(null!==(o=null==t?void 0:t.pad)&&void 0!==o?o:.5),this._isProgrammaticFit=!0,this.leafletMap.fitBounds(r,{maxZoom:(null==t?void 0:t.zoom)||this.zoom}),setTimeout(()=>{this._isProgrammaticFit=!1},z)}}},{key:"fitBounds",value:function(t,e){var i;if(this.leafletMap&&this.Leaflet&&this.hass){var a=this.Leaflet.latLngBounds(t).pad(null!==(i=null==e?void 0:e.pad)&&void 0!==i?i:.5);this._isProgrammaticFit=!0,this.leafletMap.fitBounds(a,{maxZoom:(null==e?void 0:e.zoom)||this.zoom}),setTimeout(()=>{this._isProgrammaticFit=!1},z)}}},{key:"_drawLayers",value:function(t){if(t&&t.forEach(t=>t.remove()),this.layers){var e=this.leafletMap;this.layers.forEach(t=>{e.addLayer(t)})}}},{key:"_computePathTooltip",value:function(t,e){var i;return i=t.fullDatetime?(0,y.r6)(e.timestamp,this.hass.locale,this.hass.config):(0,m.c)(e.timestamp)?(0,_.ie)(e.timestamp,this.hass.locale,this.hass.config):(0,_.Xs)(e.timestamp,this.hass.locale,this.hass.config),`${t.name}<br>${i}`}},{key:"_drawPaths",value:function(){var t=this.hass,e=this.leafletMap,i=this.Leaflet;if(t&&e&&i&&(this._mapPaths.length&&(this._mapPaths.forEach(t=>t.remove()),this._mapPaths=[]),this.paths)){var a=getComputedStyle(this).getPropertyValue("--dark-primary-color");this.paths.forEach(t=>{var o,r;t.gradualOpacity&&(o=t.gradualOpacity/(t.points.length-2),r=1-t.gradualOpacity);for(var s=0;s<t.points.length-1;s++){var n=t.gradualOpacity?r+s*o:void 0;this._mapPaths.push(i.circleMarker(t.points[s].point,{radius:w.C?8:3,color:t.color||a,opacity:n,fillOpacity:n,interactive:!0}).bindTooltip(this._computePathTooltip(t,t.points[s]),{direction:"top"})),this._mapPaths.push(i.polyline([t.points[s].point,t.points[s+1].point],{color:t.color||a,opacity:n,interactive:!1}))}var l=t.points.length-1;if(l>=0){var c=t.gradualOpacity?r+l*o:void 0;this._mapPaths.push(i.circleMarker(t.points[l].point,{radius:w.C?8:3,color:t.color||a,opacity:c,fillOpacity:c,interactive:!0}).bindTooltip(this._computePathTooltip(t,t.points[l]),{direction:"top"}))}this._mapPaths.forEach(t=>e.addLayer(t))})}}},{key:"_drawEntities",value:function(){var t=this.hass,e=this.leafletMap,i=this.Leaflet;if(t&&e&&i&&(this._mapItems.length&&(this._mapItems.forEach(t=>t.remove()),this._mapItems=[],this._mapFocusItems=[]),this._mapZones.length&&(this._mapZones.forEach(t=>t.remove()),this._mapZones=[],this._mapFocusZones=[]),this._mapCluster&&(this._mapCluster.remove(),this._mapCluster=void 0),this.entities)){var a,r=getComputedStyle(this),s=r.getPropertyValue("--accent-color"),n=r.getPropertyValue("--secondary-text-color"),l=r.getPropertyValue("--dark-primary-color"),c=this._darkMode?"dark":"light",h=(0,o.A)(this.entities);try{for(h.s();!(a=h.n()).done;){var d=a.value,u=t.states[x(d)];if(u){var p="string"!=typeof d?d.name:void 0,m=null!=p?p:(0,M.u)(u),f=u.attributes,v=f.latitude,y=f.longitude,_=f.passive,g=f.icon,b=f.radius,w=f.entity_picture,L=f.gps_accuracy;if(v&&y)if("zone"!==(0,k.t)(u)){var Z="string"!=typeof d&&"state"===d.label_mode?this.hass.formatEntityState(u):"string"!=typeof d&&"attribute"===d.label_mode&&void 0!==d.attribute?this.hass.formatEntityAttributeValue(u,d.attribute):null!=p?p:m.split(" ").map(t=>t[0]).join("").substr(0,3),P=document.createElement("ha-entity-marker");P.hass=this.hass,P.showIcon="string"!=typeof d&&"icon"===d.label_mode,P.entityId=x(d),P.entityName=Z,P.entityUnit="string"!=typeof d&&d.unit&&"attribute"===d.label_mode?d.unit:"",P.entityPicture=!w||"string"!=typeof d&&d.label_mode?"":this.hass.hassUrl(w),"string"!=typeof d&&(P.entityColor=d.color);var z=new A.q([v,y],void 0,{icon:i.divIcon({html:P,iconSize:[48,48],className:""}),title:m});"string"!=typeof d&&!1===d.focus||this._mapFocusItems.push(z),L&&(z.decorationLayer=i.circle([v,y],{interactive:!1,color:l,radius:L})),this._mapItems.push(z)}else{if(_&&!this.renderPassive)continue;var C="";if(g){var F=document.createElement("ha-icon");F.setAttribute("icon",g),C=F.outerHTML}else{var E=document.createElement("span");E.innerHTML=m,C=E.outerHTML}var I=i.circle([v,y],{interactive:!1,color:_?n:s,radius:b}),B=new A.q([v,y],I,{icon:i.divIcon({html:C,iconSize:[24,24],className:c}),interactive:this.interactiveZones,title:m});this._mapZones.push(B),!this.fitZones||"string"!=typeof d&&!1===d.focus||this._mapFocusZones.push(I)}}}}catch(O){h.e(O)}finally{h.f()}this.clusterMarkers?(this._mapCluster=i.markerClusterGroup({showCoverageOnHover:!1,removeOutsideVisibleBounds:!1,maxClusterRadius:40}),this._mapCluster.addLayers(this._mapItems),e.addLayer(this._mapCluster)):this._mapItems.forEach(t=>e.addLayer(t)),this._mapZones.forEach(t=>e.addLayer(t))}}},{key:"_attachObserver",value:(i=(0,s.A)((0,r.A)().m(function t(){return(0,r.A)().w(function(t){for(;;)switch(t.n){case 0:this._resizeObserver||(this._resizeObserver=new ResizeObserver(()=>{var t;null===(t=this.leafletMap)||void 0===t||t.invalidateSize({debounceMoveend:!0})})),this._resizeObserver.observe(this);case 1:return t.a(2)}},t,this)})),function(){return i.apply(this,arguments)})}]);var i,u}(f.mN);C.styles=(0,f.AH)(P||(P=(t=>t)`:host{display:block;height:300px}#map{height:100%}#map.clickable{cursor:pointer}#map.dark{background:#090909}#map.forced-dark{color:#fff;--map-filter:invert(0.9) hue-rotate(170deg) brightness(1.5) contrast(1.2) saturate(0.3)}#map.forced-light{background:#fff;color:#000;--map-filter:invert(0)}#map.clickable:active,#map:active{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing}.leaflet-tile-pane{filter:var(--map-filter)}.dark .leaflet-bar a{background-color:#1c1c1c;color:#fff}.dark .leaflet-bar a:hover{background-color:#313131}.leaflet-marker-draggable{cursor:move!important}.leaflet-edit-resize{border-radius:var(--ha-border-radius-circle);cursor:nesw-resize!important}.named-icon{display:flex;align-items:center;justify-content:center;flex-direction:column;text-align:center;color:var(--primary-text-color)}.leaflet-pane{z-index:0!important}.leaflet-bottom,.leaflet-control,.leaflet-top{z-index:1!important}.leaflet-tooltip{padding:8px;font-size:var(--ha-font-size-s);background:rgba(80,80,80,.9)!important;color:#fff!important;border-radius:var(--ha-border-radius-sm);box-shadow:none!important;text-align:center}.marker-cluster div{background-clip:padding-box;background-color:var(--primary-color);border:3px solid rgba(var(--rgb-primary-color),.2);width:32px;height:32px;border-radius:var(--ha-border-radius-2xl);text-align:center;color:var(--text-primary-color);font-size:var(--ha-font-size-m)}.marker-cluster span{line-height:var(--ha-line-height-expanded)}`)),(0,p.__decorate)([(0,v.MZ)({attribute:!1})],C.prototype,"hass",void 0),(0,p.__decorate)([(0,v.MZ)({attribute:!1})],C.prototype,"entities",void 0),(0,p.__decorate)([(0,v.MZ)({attribute:!1})],C.prototype,"paths",void 0),(0,p.__decorate)([(0,v.MZ)({attribute:!1})],C.prototype,"layers",void 0),(0,p.__decorate)([(0,v.MZ)({type:Boolean})],C.prototype,"clickable",void 0),(0,p.__decorate)([(0,v.MZ)({attribute:"auto-fit",type:Boolean})],C.prototype,"autoFit",void 0),(0,p.__decorate)([(0,v.MZ)({attribute:"render-passive",type:Boolean})],C.prototype,"renderPassive",void 0),(0,p.__decorate)([(0,v.MZ)({attribute:"interactive-zones",type:Boolean})],C.prototype,"interactiveZones",void 0),(0,p.__decorate)([(0,v.MZ)({attribute:"fit-zones",type:Boolean})],C.prototype,"fitZones",void 0),(0,p.__decorate)([(0,v.MZ)({attribute:"theme-mode",type:String})],C.prototype,"themeMode",void 0),(0,p.__decorate)([(0,v.MZ)({type:Number})],C.prototype,"zoom",void 0),(0,p.__decorate)([(0,v.MZ)({attribute:"cluster-markers",type:Boolean})],C.prototype,"clusterMarkers",void 0),(0,p.__decorate)([(0,v.wk)()],C.prototype,"_loaded",void 0),C=(0,p.__decorate)([(0,v.EM)("ha-map")],C),e()}catch(F){e(F)}})}}]);
//# sourceMappingURL=14280.615fc7cc14f350fa.js.map