"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["72006"],{41564:function(e,t,a){var o,r,i,s,n,l=a(62020),c=a(31802),h=a(21101),d=a(23180),u=(a(38606),a(69868)),v=a(84922),p=a(11991),b=a(33136),f=a(77240),_=(a(65442),a(45148),a(50809)),g=e=>e,m=function(e){function t(){var e;(0,l.A)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=(0,h.A)(this,t,[].concat(o))).mainPage=!1,e.narrow=!1,e.supervisor=!1,e}return(0,d.A)(t,e),(0,c.A)(t,[{key:"render",value:function(){var e;return(0,v.qy)(o||(o=g` <div class="toolbar"> <div class="toolbar-content"> ${0} <div class="main-title"> <slot name="header">${0}</slot> </div> <slot name="toolbar-icon"></slot> </div> </div> <div class="content ha-scrollbar" @scroll="${0}"> <slot></slot> </div> <div id="fab"> <slot name="fab"></slot> </div> `),this.mainPage||null!==(e=history.state)&&void 0!==e&&e.root?(0,v.qy)(r||(r=g` <ha-menu-button .hassio="${0}" .hass="${0}" .narrow="${0}"></ha-menu-button> `),this.supervisor,this.hass,this.narrow):this.backPath?(0,v.qy)(i||(i=g` <a href="${0}"> <ha-icon-button-arrow-prev .hass="${0}"></ha-icon-button-arrow-prev> </a> `),this.backPath,this.hass):(0,v.qy)(s||(s=g` <ha-icon-button-arrow-prev .hass="${0}" @click="${0}"></ha-icon-button-arrow-prev> `),this.hass,this._backTapped),this.header,this._saveScrollPos)}},{key:"_saveScrollPos",value:function(e){this._savedScrollPos=e.target.scrollTop}},{key:"_backTapped",value:function(){this.backCallback?this.backCallback():(0,f.O)()}}],[{key:"styles",get:function(){return[_.dp,(0,v.AH)(n||(n=g`:host{display:block;height:100%;background-color:var(--primary-background-color);overflow:hidden;position:relative}:host([narrow]){width:100%;position:fixed}.toolbar{background-color:var(--app-header-background-color);padding-top:var(--safe-area-inset-top);padding-right:var(--safe-area-inset-right)}:host([narrow]) .toolbar{padding-left:var(--safe-area-inset-left)}.toolbar-content{display:flex;align-items:center;font-size:var(--ha-font-size-xl);height:var(--header-height);font-weight:var(--ha-font-weight-normal);color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box;padding:8px 12px}.toolbar a{color:var(--sidebar-text-color);text-decoration:none}::slotted([slot=toolbar-icon]),ha-icon-button-arrow-prev,ha-menu-button{pointer-events:auto;color:var(--sidebar-icon-color)}.main-title{margin:var(--margin-title);line-height:var(--ha-line-height-normal);min-width:0;flex-grow:1;overflow-wrap:break-word;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;padding-bottom:1px}.content{position:relative;width:calc(100% - var(--safe-area-inset-right,0px));height:calc(100% - 1px - var(--header-height,0px) - var(--safe-area-inset-top,0px) - var(--hass-subpage-bottom-inset,var(--safe-area-inset-bottom,0px)));margin-bottom:var(--hass-subpage-bottom-inset,var(--safe-area-inset-bottom));margin-right:var(--safe-area-inset-right);overflow-y:auto;overflow:auto;-webkit-overflow-scrolling:touch}:host([narrow]) .content{width:calc(100% - var(--safe-area-inset-left,0px) - var(--safe-area-inset-right,0px));margin-left:var(--safe-area-inset-left)}#fab{position:absolute;right:calc(16px + var(--safe-area-inset-right,0px));inset-inline-end:calc(16px + var(--safe-area-inset-right,0px));inset-inline-start:initial;bottom:calc(16px + var(--safe-area-inset-bottom,0px));z-index:1;display:flex;flex-wrap:wrap;justify-content:flex-end;gap:var(--ha-space-2)}:host([narrow]) #fab.tabs{bottom:calc(84px + var(--safe-area-inset-bottom,0px))}#fab[is-wide]{bottom:calc(24px + var(--safe-area-inset-bottom,0px));right:calc(24px + var(--safe-area-inset-right,0px));inset-inline-end:calc(24px + var(--safe-area-inset-right,0px));inset-inline-start:initial}`))]}}])}(v.WF);(0,u.__decorate)([(0,p.MZ)({attribute:!1})],m.prototype,"hass",void 0),(0,u.__decorate)([(0,p.MZ)()],m.prototype,"header",void 0),(0,u.__decorate)([(0,p.MZ)({type:Boolean,attribute:"main-page"})],m.prototype,"mainPage",void 0),(0,u.__decorate)([(0,p.MZ)({type:String,attribute:"back-path"})],m.prototype,"backPath",void 0),(0,u.__decorate)([(0,p.MZ)({attribute:!1})],m.prototype,"backCallback",void 0),(0,u.__decorate)([(0,p.MZ)({type:Boolean,reflect:!0})],m.prototype,"narrow",void 0),(0,u.__decorate)([(0,p.MZ)({type:Boolean})],m.prototype,"supervisor",void 0),(0,u.__decorate)([(0,b.a)(".content")],m.prototype,"_savedScrollPos",void 0),(0,u.__decorate)([(0,p.Ls)({passive:!0})],m.prototype,"_saveScrollPos",null),m=(0,u.__decorate)([(0,p.EM)("hass-subpage")],m)},45180:function(e,t,a){a.a(e,async function(e,o){try{a.r(t),a.d(t,{BluetoothNetworkVisualization:function(){return C}});var r=a(15243),i=a(18202),s=a(62020),n=a(31802),l=a(97750),c=a(21101),h=a(23180),d=a(87426),u=(a(38606),a(96956),a(44941),a(35748),a(80178),a(99342),a(65315),a(837),a(84136),a(22416),a(37089),a(52885),a(45519),a(74774),a(30536),a(69868)),v=a(84922),p=a(11991),b=a(65940),f=a(94029),_=a(77240),g=a(65298),m=a(52188),y=a(3980),w=(a(41564),a(43997)),k=e([m,f,w]);[m,f,w]=k.then?(await k)():k;var x,$,D=e=>e,z="ha",A="Home Assistant",P=[[-70,"--green-color"],[-75,"--lime-color"],[-80,"--yellow-color"],[-85,"--amber-color"],[-90,"--orange-color"],[-95,"--deep-orange-color"],[-1/0,"--red-color"]],C=function(e){function t(){var e;(0,s.A)(this,t);for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return(e=(0,c.A)(this,t,[].concat(o))).narrow=!1,e.isWide=!1,e._data=[],e._scanners={},e._sourceDevices={},e._throttledUpdateData=(0,g.n)(t=>{e._data=t},1e4),e._getRssiColorVar=(0,b.A)(e=>{var t,a=(0,i.A)(P);try{for(a.s();!(t=a.n()).done;){var o=(0,r.A)(t.value,2),s=o[0],n=o[1];if(e>s)return n}}catch(l){a.e(l)}finally{a.f()}return"--red-color"}),e._formatNetworkData=(0,b.A)((t,a)=>{var o=getComputedStyle((0,l.A)(e)),r=[{name:A,symbol:"roundRect",itemStyle:{color:o.getPropertyValue("--primary-color")}},{name:e.hass.localize("ui.panel.config.bluetooth.scanners"),symbol:"circle",itemStyle:{color:o.getPropertyValue("--cyan-color")}},{name:e.hass.localize("ui.panel.config.bluetooth.known_devices"),symbol:"circle",itemStyle:{color:o.getPropertyValue("--teal-color")}},{name:e.hass.localize("ui.panel.config.bluetooth.unknown_devices"),symbol:"circle",itemStyle:{color:o.getPropertyValue("--disabled-color")}}],i=[{id:z,name:A,category:0,value:4,symbol:"roundRect",symbolSize:40,polarDistance:0}],s=[];return Object.values(a).forEach(t=>{var a=e._sourceDevices[t.source];i.push({id:t.source,name:(null==a?void 0:a.name_by_user)||(null==a?void 0:a.name)||t.name,category:1,value:5,symbol:"circle",symbolSize:30,polarDistance:.25}),s.push({source:z,target:t.source,value:0,symbol:"none",lineStyle:{width:3,color:o.getPropertyValue("--primary-color")}})}),t.forEach(t=>{if(a[t.address])s.push({source:t.source,target:t.address,value:t.rssi,symbol:"none",lineStyle:{width:e._getLineWidth(t.rssi),color:o.getPropertyValue(e._getRssiColorVar(t.rssi))}});else{var r=e._sourceDevices[t.address];i.push({id:t.address,name:e._getBluetoothDeviceName(t.address),value:r?1:0,category:r?2:3,symbolSize:20}),s.push({source:t.source,target:t.address,value:t.rssi,symbol:"none",lineStyle:{width:e._getLineWidth(t.rssi),color:r?o.getPropertyValue(e._getRssiColorVar(t.rssi)):o.getPropertyValue("--disabled-color")}})}}),{nodes:i,links:s,categories:r}}),e._tooltipFormatter=t=>{var a=t.dataType,o=t.data,r="";if("edge"===a){var i=o.source,s=o.target,n=o.value;r=`${e._getBluetoothDeviceName(i)} â†’ ${e._getBluetoothDeviceName(s)}`,i!==z&&(r+=` <b>${e.hass.localize("ui.panel.config.bluetooth.rssi")}:</b> ${n}`)}else{var l=o.id,c=e._getBluetoothDeviceName(l),h=e._data.find(e=>e.address===l);if(h)r=`<b>${c}</b><br><b>${e.hass.localize("ui.panel.config.bluetooth.address")}:</b> ${l}<br><b>${e.hass.localize("ui.panel.config.bluetooth.rssi")}:</b> ${h.rssi}<br><b>${e.hass.localize("ui.panel.config.bluetooth.source")}:</b> ${h.source}<br><b>${e.hass.localize("ui.panel.config.bluetooth.updated")}:</b> ${(0,f.K)(new Date(1e3*h.time),e.hass.locale)}`;else{var d=e._sourceDevices[l];if(d&&(r=`<b>${c}</b><br><b>${e.hass.localize("ui.panel.config.bluetooth.address")}:</b> ${l}`,d.area_id)){var u=e.hass.areas[d.area_id];u&&(r+=`<br><b>${e.hass.localize("ui.panel.config.bluetooth.area")}: </b>${u.name}`)}}}return r},e}return(0,h.A)(t,e),(0,n.A)(t,[{key:"connectedCallback",value:function(){if((0,d.A)(t,"connectedCallback",this,3)([]),this.hass){this._unsub_advertisements=(0,y.Ht)(this.hass.connection,e=>{this._data.length?this._throttledUpdateData(e):this._data=e}),this._unsub_scanners=(0,y.mj)(this.hass.connection,e=>{this._scanners=e});var e=Object.values(this.hass.devices).filter(e=>e.connections.find(e=>"bluetooth"===e[0]));this._sourceDevices=Object.fromEntries(e.map(e=>[e.connections.find(e=>"bluetooth"===e[0])[1],e]))}}},{key:"disconnectedCallback",value:function(){(0,d.A)(t,"disconnectedCallback",this,3)([]),this._unsub_advertisements&&(this._unsub_advertisements(),this._unsub_advertisements=void 0),this._throttledUpdateData.cancel(),this._unsub_scanners&&(this._unsub_scanners(),this._unsub_scanners=void 0)}},{key:"render",value:function(){return(0,v.qy)(x||(x=D` <hass-tabs-subpage .hass="${0}" .narrow="${0}" .route="${0}" header="${0}" .tabs="${0}"> <ha-network-graph .hass="${0}" .data="${0}" .tooltipFormatter="${0}" @chart-click="${0}"></ha-network-graph> </hass-tabs-subpage> `),this.hass,this.narrow,this.route,this.hass.localize("ui.panel.config.bluetooth.visualization"),w.bluetoothAdvertisementMonitorTabs,this.hass,this._formatNetworkData(this._data,this._scanners),this._tooltipFormatter,this._handleChartClick)}},{key:"_getBluetoothDeviceName",value:function(e){var t,a,o,r;return e===z?A:this._sourceDevices[e]?(null===(a=this._sourceDevices[e])||void 0===a?void 0:a.name_by_user)||(null===(o=this._sourceDevices[e])||void 0===o?void 0:o.name)||e:this._scanners[e]?(null===(r=this._scanners[e])||void 0===r?void 0:r.name)||e:(null===(t=this._data.find(t=>t.address===e))||void 0===t?void 0:t.name)||e}},{key:"_getLineWidth",value:function(e){return e>-33?3:e>-66?2:1}},{key:"_handleChartClick",value:function(e){if("node"===e.detail.dataType&&"pointer"===e.detail.event.target.cursor){var t=e.detail.data.id,a=this._sourceDevices[t];a&&(0,_.o)(`/config/devices/device/${a.id}`)}}}],[{key:"styles",get:function(){return[(0,v.AH)($||($=D`ha-network-graph{height:100%}`))]}}])}(v.WF);(0,u.__decorate)([(0,p.MZ)({attribute:!1})],C.prototype,"hass",void 0),(0,u.__decorate)([(0,p.MZ)({type:Boolean,reflect:!0})],C.prototype,"narrow",void 0),(0,u.__decorate)([(0,p.MZ)({attribute:"is-wide",type:Boolean})],C.prototype,"isWide",void 0),(0,u.__decorate)([(0,p.MZ)({attribute:!1})],C.prototype,"route",void 0),(0,u.__decorate)([(0,p.wk)()],C.prototype,"_data",void 0),(0,u.__decorate)([(0,p.wk)()],C.prototype,"_scanners",void 0),(0,u.__decorate)([(0,p.wk)()],C.prototype,"_sourceDevices",void 0),C=(0,u.__decorate)([(0,p.EM)("bluetooth-network-visualization")],C),o()}catch(S){o(S)}})},28829:function(e,t,a){a.d(t,{b:function(){return r}});var o=a(19490);function r(e,t){return+(0,o.a)(e)-+(0,o.a)(t)}},74758:function(e,t,a){a.d(t,{o:function(){return s}});var o=a(48869),r=a(27554),i=a(28829);function s(e,t,a){var s=(0,i.b)(e,t)/r.Cg;return(0,o.u)(null==a?void 0:a.roundingMethod)(s)}}}]);
//# sourceMappingURL=72006.9c4a946019f2ce5f.js.map