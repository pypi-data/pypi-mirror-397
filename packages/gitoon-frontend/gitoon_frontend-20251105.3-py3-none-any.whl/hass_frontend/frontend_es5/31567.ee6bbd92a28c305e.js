"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["31567"],{72590:function(t,e,a){a.r(e),a.d(e,{HaIconButtonPrev:function(){return p}});var i,o=a(62020),n=a(31802),s=a(21101),l=a(23180),r=(a(38606),a(69868)),c=a(84922),d=a(11991),h=a(91541),u=(a(9058),t=>t),p=function(t){function e(){var t;(0,o.A)(this,e);for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(t=(0,s.A)(this,e,[].concat(i))).disabled=!1,t._icon="rtl"===h.G.document.dir?"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z":"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z",t}return(0,l.A)(e,t),(0,n.A)(e,[{key:"render",value:function(){var t;return(0,c.qy)(i||(i=u` <ha-icon-button .disabled="${0}" .label="${0}" .path="${0}"></ha-icon-button> `),this.disabled,this.label||(null===(t=this.hass)||void 0===t?void 0:t.localize("ui.common.back"))||"Back",this._icon)}}])}(c.WF);(0,r.__decorate)([(0,d.MZ)({attribute:!1})],p.prototype,"hass",void 0),(0,r.__decorate)([(0,d.MZ)({type:Boolean})],p.prototype,"disabled",void 0),(0,r.__decorate)([(0,d.MZ)()],p.prototype,"label",void 0),(0,r.__decorate)([(0,d.wk)()],p.prototype,"_icon",void 0),p=(0,r.__decorate)([(0,d.EM)("ha-icon-button-prev")],p)},25482:function(t,e,a){var i,o=a(31802),n=a(62020),s=a(21101),l=a(23180),r=a(69868),c=a(7137),d=a(20808),h=a(84922),u=a(11991),p=function(t){function e(){return(0,n.A)(this,e),(0,s.A)(this,e,arguments)}return(0,l.A)(e,t),(0,o.A)(e)}(c.$);p.styles=[d.R,(0,h.AH)(i||(i=(t=>t)`:host{--ha-icon-display:block;--md-sys-color-primary:var(--primary-text-color);--md-sys-color-secondary:var(--secondary-text-color);--md-sys-color-surface:var(--card-background-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--secondary-text-color)}`))],p=(0,r.__decorate)([(0,u.EM)("ha-md-select-option")],p)},87870:function(t,e,a){var i,o=a(31802),n=a(62020),s=a(21101),l=a(23180),r=a(69868),c=a(58381),d=a(29512),h=a(89152),u=a(84922),p=a(11991),_=function(t){function e(){return(0,n.A)(this,e),(0,s.A)(this,e,arguments)}return(0,l.A)(e,t),(0,o.A)(e)}(c.V);_.styles=[d.R,h.R,(0,u.AH)(i||(i=(t=>t)`:host{--ha-icon-display:block;--md-sys-color-primary:var(--primary-text-color);--md-sys-color-secondary:var(--secondary-text-color);--md-sys-color-surface:var(--card-background-color);--md-sys-color-on-surface-variant:var(--secondary-text-color);--md-sys-color-surface-container-highest:var(--input-fill-color);--md-sys-color-on-surface:var(--input-ink-color);--md-sys-color-surface-container:var(--input-fill-color);--md-sys-color-on-secondary-container:var(--primary-text-color);--md-sys-color-secondary-container:var(--input-fill-color);--md-menu-container-color:var(--card-background-color)}`))],_=(0,r.__decorate)([(0,p.EM)("ha-md-select")],_)},34618:function(t,e,a){a.a(t,async function(t,e){try{var i=a(73983),o=a(62020),n=a(31802),s=a(21101),l=a(23180),r=(a(38606),a(79827),a(44784),a(80178),a(98522),a(65315),a(37089),a(45519),a(69868)),c=a(84922),d=a(11991),h=a(75907),u=a(44017),p=a(88341),_=(a(63893),a(17244),a(86160),a(71598)),g=a(71522),f=t([_]);_=(f.then?(await f)():f)[0];var m,v,y,b,k,A,$=t=>t,w=function(t){function e(){var t;(0,o.A)(this,e);for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(t=(0,s.A)(this,e,[].concat(i))).disabled=!1,t}return(0,l.A)(e,t),(0,n.A)(e,[{key:"render",value:function(){return(0,c.qy)(m||(m=$` <div class="agents"> ${0} </div> `),this.agents.map(t=>this._renderAgent(t)))}},{key:"_renderAgent",value:function(t){var e,a,i=(0,p.m)(t.agent_id),o=(0,_.q7)(this.hass.localize,t.agent_id,this.agents),n=this.disabled||(null===(e=this.disabledAgentIds)||void 0===e?void 0:e.includes(t.agent_id))||!1;return(0,c.qy)(v||(v=$` <ha-formfield> <span class="label ${0}" slot="label"> ${0} ${0} </span> <ha-checkbox .checked="${0}" .value="${0}" .disabled="${0}" @change="${0}"></ha-checkbox> </ha-formfield> `),(0,h.H)({disabled:n}),(0,_.Bi)(t.agent_id)?(0,c.qy)(y||(y=$` <ha-svg-icon .path="${0}" slot="start"> </ha-svg-icon> `),"M6,2H18A2,2 0 0,1 20,4V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V4A2,2 0 0,1 6,2M12,4A6,6 0 0,0 6,10C6,13.31 8.69,16 12.1,16L11.22,13.77C10.95,13.29 11.11,12.68 11.59,12.4L12.45,11.9C12.93,11.63 13.54,11.79 13.82,12.27L15.74,14.69C17.12,13.59 18,11.9 18,10A6,6 0 0,0 12,4M12,9A1,1 0 0,1 13,10A1,1 0 0,1 12,11A1,1 0 0,1 11,10A1,1 0 0,1 12,9M7,18A1,1 0 0,0 6,19A1,1 0 0,0 7,20A1,1 0 0,0 8,19A1,1 0 0,0 7,18M12.09,13.27L14.58,19.58L17.17,18.08L12.95,12.77L12.09,13.27Z"):(0,_.jU)(t.agent_id)?(0,c.qy)(b||(b=$` <ha-svg-icon .path="${0}" slot="start"></ha-svg-icon> `),"M4,5C2.89,5 2,5.89 2,7V17C2,18.11 2.89,19 4,19H20C21.11,19 22,18.11 22,17V7C22,5.89 21.11,5 20,5H4M4.5,7A1,1 0 0,1 5.5,8A1,1 0 0,1 4.5,9A1,1 0 0,1 3.5,8A1,1 0 0,1 4.5,7M7,7H20V17H7V7M8,8V16H11V8H8M12,8V16H15V8H12M16,8V16H19V8H16M9,9H10V10H9V9M13,9H14V10H13V9M17,9H18V10H17V9Z"):(0,c.qy)(k||(k=$` <img .src="${0}" crossorigin="anonymous" referrerpolicy="no-referrer" alt="" slot="start"> `),(0,g.MR)({domain:i,type:"icon",useFallback:!0,darkOptimized:null===(a=this.hass.themes)||void 0===a?void 0:a.darkMode})),o,this.value.includes(t.agent_id),t.agent_id,n,this._checkboxChanged)}},{key:"_checkboxChanged",value:function(t){var e=t.target,a=e.value,o=this.value.indexOf(a);e.checked&&-1===o?this.value=[].concat((0,i.A)(this.value),[a]):e.checked||-1===o||(this.value=[].concat((0,i.A)(this.value.slice(0,o)),(0,i.A)(this.value.slice(o+1)))),(0,u.r)(this,"value-changed",{value:this.value})}}])}(c.WF);w.styles=(0,c.AH)(A||(A=$`img{height:24px;width:24px}ha-svg-icon{--mdc-icon-size:24px;color:var(--primary-text-color)}.agents{display:flex;flex-direction:column}.label{display:flex;flex-direction:row;align-items:center;gap:var(--ha-space-4);font-size:var(--ha-font-size-l);font-weight:var(--ha-font-weight-normal);line-height:var(--ha-line-height-normal);letter-spacing:.5px}span.disabled{color:var(--disabled-text-color)}span.disabled ha-svg-icon{color:var(--disabled-text-color)}`)),(0,r.__decorate)([(0,d.MZ)({attribute:!1})],w.prototype,"hass",void 0),(0,r.__decorate)([(0,d.MZ)({type:Boolean})],w.prototype,"disabled",void 0),(0,r.__decorate)([(0,d.MZ)({attribute:!1})],w.prototype,"agents",void 0),(0,r.__decorate)([(0,d.MZ)({attribute:!1})],w.prototype,"disabledAgentIds",void 0),(0,r.__decorate)([(0,d.MZ)({attribute:!1})],w.prototype,"value",void 0),w=(0,r.__decorate)([(0,d.EM)("ha-backup-agents-picker")],w),e()}catch(x){e(x)}})},24152:function(t,e,a){a.a(t,async function(t,i){try{a.r(e);var o=a(98735),n=a(88486),s=a(62020),l=a(31802),r=a(21101),c=a(23180),d=a(87426),h=(a(38606),a(96956),a(79827),a(44784),a(80178),a(35058),a(65315),a(837),a(37089),a(45519),a(69868)),u=a(84922),p=a(11991),_=a(26946),g=a(44017),f=(a(94124),a(17372)),m=(a(87348),a(16520),a(9058),a(22770),a(72590),a(95069)),v=(a(75369),a(99260),a(87870),a(25482),a(80287),a(71598)),y=a(50809),b=a(49859),k=a(34618),A=t([f,m,b,k,v]);[f,m,b,k,v]=A.then?(await A)():A;var $,w,x,D,L,C,M,H,z,V,q,I=t=>t,O={data:{include_homeassistant:!0,include_database:!0,include_folders:[],include_all_addons:!0},name:"",agents_mode:"all",agent_ids:[]},Z=["data","sync"],E=[v.oJ],S=function(t){function e(){var t;(0,s.A)(this,e);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=(0,r.A)(this,e,[].concat(i)))._agents=[],t._open=!1,t}return(0,c.A)(e,t),(0,l.A)(e,[{key:"showDialog",value:function(t){this._step=Z[0],this._formData=O,this._params=t,this._open=!0,this._fetchAgents(),this._fetchBackupConfig()}},{key:"_dialogClosed",value:function(){this._params.cancel&&this._params.cancel(),this._open=!1,this._step=void 0,this._formData=void 0,this._agents=[],this._backupConfig=void 0,this._params=void 0,(0,g.r)(this,"dialog-closed",{dialog:this.localName})}},{key:"_fetchAgents",value:(h=(0,n.A)((0,o.A)().m(function t(){var e,a;return(0,o.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,(0,v.P_)(this.hass);case 1:e=t.v,a=e.agents,this._agents=a.filter(t=>{var e,a;return t.agent_id!==v.oJ||(null===(e=this._params)||void 0===e||null===(e=e.cloudStatus)||void 0===e?void 0:e.logged_in)&&(null===(a=this._params)||void 0===a||null===(a=a.cloudStatus)||void 0===a?void 0:a.active_subscription)}).sort((t,e)=>(0,v.yj)(t.agent_id,e.agent_id));case 2:return t.a(2)}},t,this)})),function(){return h.apply(this,arguments)})},{key:"_fetchBackupConfig",value:(i=(0,n.A)((0,o.A)().m(function t(){var e,a;return(0,o.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,(0,v.Xm)(this.hass);case 1:e=t.v,a=e.config,this._backupConfig=a;case 2:return t.a(2)}},t,this)})),function(){return i.apply(this,arguments)})},{key:"closeDialog",value:function(){return this._open=!1,!0}},{key:"_previousStep",value:function(){var t=Z.indexOf(this._step);0!==t&&(this._step=Z[t-1])}},{key:"_nextStep",value:function(){var t=Z.indexOf(this._step);t!==Z.length-1&&(this._step=Z[t+1])}},{key:"_allAgentIds",get:function(){return this._agents.map(t=>t.agent_id)}},{key:"willUpdate",value:function(t){if((0,d.A)(e,"willUpdate",this,3)([t]),t.has("_step")&&"sync"===this._step&&this._formData){var a=this._disabledAgentIds();if(a.length){var i=("all"===this._formData.agents_mode?this._allAgentIds:this._formData.agent_ids).filter(t=>!a.includes(t));this._formData=Object.assign(Object.assign({},this._formData),{},{agents_mode:"custom",agent_ids:i})}}}},{key:"render",value:function(){if(!this._step||!this._formData)return u.s6;var t=this.hass.localize(`ui.panel.config.backup.dialogs.generate.${this._step}.title`),e=this._step===Z[0],a=this._step===Z[Z.length-1],i=this._formData.agent_ids;return(0,u.qy)($||($=I` <ha-wa-dialog .hass="${0}" .open="${0}" @closed="${0}"> <ha-dialog-header slot="header"> ${0} <span slot="title" .title="${0}"> ${0} </span> </ha-dialog-header> <div class="content"> ${0} </div> <ha-dialog-footer slot="footer"> ${0} ${0} </ha-dialog-footer> </ha-wa-dialog> `),this.hass,this._open,this._dialogClosed,e?(0,u.qy)(w||(w=I` <ha-icon-button slot="navigationIcon" data-dialog="close" .label="${0}" .path="${0}"></ha-icon-button> `),this.hass.localize("ui.common.close"),"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"):(0,u.qy)(x||(x=I` <ha-icon-button-prev slot="navigationIcon" @click="${0}"></ha-icon-button-prev> `),this._previousStep),t,t,"data"===this._step?this._renderData():this._renderSync(),e?(0,u.qy)(D||(D=I` <ha-button slot="secondaryAction" @click="${0}" appearance="plain"> ${0} </ha-button> `),this.closeDialog,this.hass.localize("ui.common.cancel")):u.s6,a?(0,u.qy)(L||(L=I` <ha-button slot="primaryAction" @click="${0}" .disabled="${0}"> ${0} </ha-button> `),this._submit,"custom"===this._formData.agents_mode&&!i.length,this.hass.localize("ui.panel.config.backup.dialogs.generate.actions.create")):(0,u.qy)(C||(C=I` <ha-button slot="primaryAction" @click="${0}" .disabled="${0}"> ${0} </ha-button> `),this._nextStep,"data"===this._step&&this._noDataSelected,this.hass.localize("ui.common.next")))}},{key:"_noDataSelected",get:function(){var t,e,a,i,o,n=(0,_.x)(this.hass,"hassio");return!(null!==(t=this._formData)&&void 0!==t&&t.data.include_homeassistant||null!==(e=this._formData)&&void 0!==e&&e.data.include_database||n&&null!==(a=this._formData)&&void 0!==a&&null!==(a=a.data.include_folders)&&void 0!==a&&a.length||n&&null!==(i=this._formData)&&void 0!==i&&i.data.include_all_addons||n&&null!==(o=this._formData)&&void 0!==o&&null!==(o=o.data.include_addons)&&void 0!==o&&o.length)}},{key:"_renderData",value:function(){return this._formData?(0,u.qy)(M||(M=I` <ha-backup-config-data .hass="${0}" .value="${0}" @value-changed="${0}"></ha-backup-config-data> `),this.hass,this._formData.data,this._dataConfigChanged):u.s6}},{key:"_dataConfigChanged",value:function(t){t.stopPropagation();var e=t.detail.value;this._formData=Object.assign(Object.assign({},this._formData),{},{data:e})}},{key:"_renderSync",value:function(){if(!this._formData)return u.s6;var t=this._disabledAgentIds();return(0,u.qy)(H||(H=I` <ha-textfield name="name" .label="${0}" .value="${0}" @change="${0}"> </ha-textfield> <ha-md-list> <ha-md-list-item> <span slot="headline"> ${0} </span> <span slot="supporting-text"> ${0} </span> <ha-md-select slot="end" id="agents_mode" @change="${0}" .value="${0}"> <ha-md-select-option value="all" .disabled="${0}"> <div slot="headline"> ${0} </div> </ha-md-select-option> <ha-md-select-option value="custom"> <div slot="headline"> ${0} </div> </ha-md-select-option> </ha-md-select> </ha-md-list-item> </ha-md-list> ${0} ${0} `),this.hass.localize("ui.panel.config.backup.dialogs.generate.sync.name"),this._formData.name,this._nameChanged,this.hass.localize("ui.panel.config.backup.dialogs.generate.sync.locations"),this.hass.localize("ui.panel.config.backup.dialogs.generate.sync.locations_description"),this._selectChanged,this._formData.agents_mode,t.length,this.hass.localize("ui.panel.config.backup.dialogs.generate.sync.locations_options.all",{count:this._allAgentIds.length}),this.hass.localize("ui.panel.config.backup.dialogs.generate.sync.locations_options.custom"),t.length?(0,u.qy)(z||(z=I` <ha-alert alert-type="info" .title="${0}"> ${0} </ha-alert> `),this.hass.localize("ui.panel.config.backup.dialogs.generate.sync.ha_cloud_alert.title"),this.hass.localize("ui.panel.config.backup.dialogs.generate.sync.ha_cloud_alert.description")):u.s6,"custom"===this._formData.agents_mode?(0,u.qy)(V||(V=I` <ha-expansion-panel .header="${0}" outlined expanded> <ha-backup-agents-picker .hass="${0}" .value="${0}" @value-changed="${0}" .agents="${0}" .disabledAgentIds="${0}"></ha-backup-agents-picker> </ha-expansion-panel> `),this.hass.localize("ui.panel.config.backup.dialogs.generate.sync.locations"),this.hass,this._formData.agent_ids,this._agentsChanged,this._agents,t):u.s6)}},{key:"_selectChanged",value:function(t){var e=t.currentTarget;this._formData=Object.assign(Object.assign({},this._formData),{},{[e.id]:e.value})}},{key:"_agentsChanged",value:function(t){this._formData=Object.assign(Object.assign({},this._formData),{},{agent_ids:t.detail.value})}},{key:"_nameChanged",value:function(t){this._formData=Object.assign(Object.assign({},this._formData),{},{name:t.target.value})}},{key:"_disabledAgentIds",value:function(){if(!this._formData)return[];var t=this._allAgentIds;return this._formData.data.include_homeassistant?[]:E.filter(e=>t.includes(e))}},{key:"_submit",value:(a=(0,n.A)((0,o.A)().m(function t(){var e,a,i,n,s,l,r,c,d,h;return(0,o.A)().w(function(t){for(;;)switch(t.n){case 0:if(this._formData){t.n=1;break}return t.a(2);case 1:n=this._formData,s=n.agent_ids,l=n.agents_mode,r=n.name,c=n.data,d=(null===(e=this._backupConfig)||void 0===e?void 0:e.create_backup.password)||void 0,h={name:r,password:d,agent_ids:"all"===l?this._allAgentIds:s,include_homeassistant:c.include_homeassistant||c.include_database,include_database:c.include_database},(0,_.x)(this.hass,"hassio")&&(h.include_folders=c.include_folders,h.include_all_addons=c.include_all_addons,h.include_addons=c.include_addons),h.include_homeassistant||(h.agent_ids=h.agent_ids.filter(t=>!E.includes(t))),null===(a=(i=this._params).submit)||void 0===a||a.call(i,h),this.closeDialog();case 2:return t.a(2)}},t,this)})),function(){return a.apply(this,arguments)})}],[{key:"styles",get:function(){return[y.RF,y.nA,(0,u.AH)(q||(q=I`ha-wa-dialog{--dialog-content-padding:24px}ha-md-list{background:0 0;padding:0}ha-md-list-item{--md-list-item-leading-space:0;--md-list-item-trailing-space:0}ha-md-list-item ha-md-select{min-width:210px}@media all and (max-width:450px){ha-md-list-item ha-md-select{min-width:160px;width:160px}}ha-md-list-item ha-md-select>span{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}ha-md-list-item ha-md-select-option{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}ha-textfield{width:100%}.content{padding-top:0}ha-alert{margin-bottom:16px;display:block}`))]}}]);var a,i,h}(u.WF);(0,h.__decorate)([(0,p.MZ)({attribute:!1})],S.prototype,"hass",void 0),(0,h.__decorate)([(0,p.wk)()],S.prototype,"_step",void 0),(0,h.__decorate)([(0,p.wk)()],S.prototype,"_agents",void 0),(0,h.__decorate)([(0,p.wk)()],S.prototype,"_backupConfig",void 0),(0,h.__decorate)([(0,p.wk)()],S.prototype,"_params",void 0),(0,h.__decorate)([(0,p.wk)()],S.prototype,"_formData",void 0),(0,h.__decorate)([(0,p.wk)()],S.prototype,"_open",void 0),S=(0,h.__decorate)([(0,p.EM)("ha-dialog-generate-backup")],S),i()}catch(j){i(j)}})},29879:function(t,e,a){function i(t,e){return{top:Math.round(t.getBoundingClientRect().top-e.getBoundingClientRect().top),left:Math.round(t.getBoundingClientRect().left-e.getBoundingClientRect().left)}}a.d(e,{A:function(){return i}})},50833:function(t,e,a){a.d(e,{v:function(){return i}});a(96956),a(80178),a(65315),a(837),a(37089),a(45519),a(39118);function i(t){return t.split(" ").map(t=>t.trim()).filter(t=>""!==t)}},8885:function(t,e,a){a.d(e,{I7:function(){return s},JG:function(){return n},Rt:function(){return l}});a(35748),a(65152),a(45519),a(67579),a(64587),a(88238),a(34536),a(16257),a(20152),a(44711),a(72108),a(77030),a(30500),a(95013);var i=a(29879),o=new Set;function n(t){if(o.add(t),!document.documentElement.classList.contains("wa-scroll-lock")){var e=(n=document.documentElement.clientWidth,Math.abs(window.innerWidth-n)+(i=Number(getComputedStyle(document.body).paddingRight.replace(/px/,"")),isNaN(i)||!i?0:i)),a=getComputedStyle(document.documentElement).scrollbarGutter;a&&"auto"!==a||(a="stable"),e<2&&(a=""),document.documentElement.style.setProperty("--wa-scroll-lock-gutter",a),document.documentElement.classList.add("wa-scroll-lock"),document.documentElement.style.setProperty("--wa-scroll-lock-size",`${e}px`)}var i,n}function s(t){o.delete(t),0===o.size&&(document.documentElement.classList.remove("wa-scroll-lock"),document.documentElement.style.removeProperty("--wa-scroll-lock-size"))}function l(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertical",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"smooth",n=(0,i.A)(t,e),s=n.top+e.scrollTop,l=n.left+e.scrollLeft,r=e.scrollLeft,c=e.scrollLeft+e.offsetWidth,d=e.scrollTop,h=e.scrollTop+e.offsetHeight;"horizontal"!==a&&"both"!==a||(l<r?e.scrollTo({left:l,behavior:o}):l+t.clientWidth>c&&e.scrollTo({left:l-e.offsetWidth+t.clientWidth,behavior:o})),"vertical"!==a&&"both"!==a||(s<d?e.scrollTo({top:s,behavior:o}):s+t.clientHeight>h&&e.scrollTo({top:s-e.offsetHeight+t.clientHeight,behavior:o}))}}}]);
//# sourceMappingURL=31567.ee6bbd92a28c305e.js.map