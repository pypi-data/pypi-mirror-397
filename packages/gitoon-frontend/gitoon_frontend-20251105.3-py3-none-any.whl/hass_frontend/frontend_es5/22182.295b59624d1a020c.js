"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["22182"],{37749:function(e,t,a){a.a(e,async function(e,t){try{var i=a(62020),r=a(31802),n=a(21101),o=a(23180),s=a(87426),l=(a(38606),a(80178),a(35058),a(65315),a(37089),a(65152),a(45519),a(69868)),u=a(84922),c=a(11991),d=a(48893),h=a(8868),_=a(16064),v=a(54337),g=a(73538),p=e([h]);h=(p.then?(await p)():p)[0];var f,y,m,x,b,k,M,S=e=>e,$=(e,t,a)=>180*(0,g.NN)((0,g.S8)(e,t,a),t,a)/100,w=function(e){function t(){var e;(0,i.A)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=(0,n.A)(this,t,[].concat(r))).min=0,e.max=100,e.value=0,e.needle=!1,e.label="",e._angle=0,e._updated=!1,e._segment_label="",e}return(0,o.A)(t,e),(0,r.A)(t,[{key:"firstUpdated",value:function(e){(0,s.A)(t,"firstUpdated",this,3)([e]),(0,v.m)(()=>{this._updated=!0,this._angle=$(this.value,this.min,this.max),this._segment_label=this._getSegmentLabel(),this._rescaleSvg()})}},{key:"updated",value:function(e){(0,s.A)(t,"updated",this,3)([e]),this._updated&&(e.has("value")||e.has("valueText")||e.has("label")||e.has("_segment_label"))&&(this._angle=$(this.value,this.min,this.max),this._segment_label=this._getSegmentLabel(),this._rescaleSvg())}},{key:"render",value:function(){return(0,u.JW)(f||(f=S` <svg viewBox="-50 -50 100 50" class="gauge"> ${0} ${0} ${0}  </svg> <svg class="text"> <text class="value-text"> ${0}${0} </text> </svg>`),this.needle&&this.levels?"":(0,u.JW)(y||(y=S`<path class="dial" d="M -40 0 A 40 40 0 0 1 40 0"></path>`)),this.levels?this.levels.sort((e,t)=>e.level-t.level).map((e,t)=>{var a;if(0===t&&e.level!==this.min){var i=$(this.min,this.min,this.max);a=(0,u.JW)(m||(m=S`<path stroke="var(--info-color)" class="level" d="M
                          ${0}
                          ${0}
                         A 40 40 0 0 1 40 0
                        "></path>`),0-40*Math.cos(i*Math.PI/180),0-40*Math.sin(i*Math.PI/180))}var r=$(e.level,this.min,this.max);return(0,u.JW)(x||(x=S`${0}<path stroke="${0}" class="level" d="M
                        ${0}
                        ${0}
                       A 40 40 0 0 1 40 0
                      "></path>`),a,e.stroke,0-40*Math.cos(r*Math.PI/180),0-40*Math.sin(r*Math.PI/180))}):"",this.needle?(0,u.JW)(b||(b=S`<path class="needle" d="M -25 -2.5 L -47.5 0 L -25 2.5 z" style="${0}"> </path>`),(0,d.W)({transform:`rotate(${this._angle}deg)`})):(0,u.JW)(k||(k=S`<path class="value" d="M -40 0 A 40 40 0 1 0 40 0" style="${0}"></path>`),(0,d.W)({transform:`rotate(${this._angle}deg)`})),this._segment_label?this._segment_label:this.valueText||(0,h.ZV)(this.value,this.locale,this.formatOptions),this._segment_label?"":"%"===this.label?(0,_.d)(this.locale)+"%":` ${this.label}`)}},{key:"_rescaleSvg",value:function(){var e=this.shadowRoot.querySelector(".text"),t=e.querySelector("text").getBBox();e.setAttribute("viewBox",`${t.x} ${t.y} ${t.width} ${t.height}`)}},{key:"_getSegmentLabel",value:function(){if(this.levels){this.levels.sort((e,t)=>e.level-t.level);for(var e=this.levels.length-1;e>=0;e--)if(this.value>=this.levels[e].level)return this.levels[e].label}return""}}])}(u.WF);w.styles=(0,u.AH)(M||(M=S`:host{position:relative}.dial{fill:none;stroke:var(--primary-background-color);stroke-width:15}.value{fill:none;stroke-width:15;stroke:var(--gauge-color);transition:all 1s ease 0s}.needle{fill:var(--primary-text-color);transition:all 1s ease 0s}.level{fill:none;stroke-width:15}.gauge{display:block}.text{position:absolute;max-height:40%;max-width:55%;left:50%;bottom:-6%;transform:translate(-50%,0%)}.value-text{font-size:50px;fill:var(--primary-text-color);text-anchor:middle;direction:ltr}`)),(0,l.__decorate)([(0,c.MZ)({type:Number})],w.prototype,"min",void 0),(0,l.__decorate)([(0,c.MZ)({type:Number})],w.prototype,"max",void 0),(0,l.__decorate)([(0,c.MZ)({type:Number})],w.prototype,"value",void 0),(0,l.__decorate)([(0,c.MZ)({attribute:!1})],w.prototype,"formatOptions",void 0),(0,l.__decorate)([(0,c.MZ)({attribute:!1,type:String})],w.prototype,"valueText",void 0),(0,l.__decorate)([(0,c.MZ)({attribute:!1})],w.prototype,"locale",void 0),(0,l.__decorate)([(0,c.MZ)({type:Boolean})],w.prototype,"needle",void 0),(0,l.__decorate)([(0,c.MZ)({type:Array})],w.prototype,"levels",void 0),(0,l.__decorate)([(0,c.MZ)()],w.prototype,"label",void 0),(0,l.__decorate)([(0,c.wk)()],w.prototype,"_angle",void 0),(0,l.__decorate)([(0,c.wk)()],w.prototype,"_updated",void 0),(0,l.__decorate)([(0,c.wk)()],w.prototype,"_segment_label",void 0),w=(0,l.__decorate)([(0,c.EM)("ha-gauge")],w),t()}catch(A){t(A)}})},63002:function(e,t,a){a.a(e,async function(e,i){try{a.d(t,{$3:function(){return y},$O:function(){return w},$j:function(){return m},ED:function(){return l},JE:function(){return A},OQ:function(){return W},PU:function(){return N},Ph:function(){return p},Uf:function(){return $},W1:function(){return f},Wr:function(){return _},Z:function(){return d},gF:function(){return x},iY:function(){return b},jU:function(){return u},nN:function(){return S},p3:function(){return h},pJ:function(){return g},r_:function(){return c},sz:function(){return v}});var r=a(18202),n=(a(79827),a(65315),a(59023),a(45519),a(72652)),o=a(50654),s=e([o]);o=(s.then?(await s)():s)[0];var l=function(e){return e[e.NONE=0]="NONE",e[e.ARITHMETIC=1]="ARITHMETIC",e[e.CIRCULAR=2]="CIRCULAR",e}({}),u=59509==a.j?["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"]:null,c=["L","gal","ft³","m³","CCF","MCF"],d=e=>e.sendMessagePromise({type:"recorder/info"}),h=(e,t)=>e.callWS({type:"recorder/list_statistic_ids",statistic_type:t}),_=(e,t)=>e.callWS({type:"recorder/get_statistics_metadata",statistic_ids:t}),v=function(e,t,a,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"hour",n=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return e.callWS({type:"recorder/statistics_during_period",start_time:t.toISOString(),end_time:null==a?void 0:a.toISOString(),statistic_ids:i,period:r,units:n,types:o})},g=(e,t,a,i)=>e.callWS({type:"recorder/statistic_during_period",statistic_id:t,units:i,fixed_period:a.fixed_period?{start_time:a.fixed_period.start instanceof Date?a.fixed_period.start.toISOString():a.fixed_period.start,end_time:a.fixed_period.end instanceof Date?a.fixed_period.end.toISOString():a.fixed_period.end}:void 0,calendar:a.calendar?Object.assign(Object.assign({},"week"===a.calendar.period?{first_weekday:(0,o.DD)(e.locale).substring(0,3)}:{}),a.calendar):void 0,rolling_window:a.rolling_window}),p=e=>e.callWS({type:"recorder/validate_statistics"}),f=(e,t,a,i)=>e.callWS({type:"recorder/update_statistics_metadata",statistic_id:t,unit_of_measurement:a,unit_class:i}),y=(e,t)=>e.callWS({type:"recorder/clear_statistics",statistic_ids:t}),m=e=>{var t=null;if(!e)return null;var a,i=(0,r.A)(e);try{for(i.s();!(a=i.n()).done;){var n=a.value;null!==n.change&&void 0!==n.change&&(null===t?t=n.change:t+=n.change)}}catch(o){i.e(o)}finally{i.f()}return t},x=(e,t)=>{var a,i=null,n=(0,r.A)(t);try{for(n.s();!(a=n.n()).done;){var o=a.value;if(o in e){var s=m(e[o]);null!==s&&(null===i?i=s:i+=s)}}}catch(l){n.e(l)}finally{n.f()}return i},b=(e,t)=>e.some(e=>void 0!==e[t]&&null!==e[t]),k=["mean","min","max"],M=["sum","state","change"],S=(e,t)=>!(!k.includes(t)||0===e.mean_type)||!(!M.includes(t)||!e.has_sum),$=(e,t,a,i,r)=>{var n=new Date(a).toISOString();return e.callWS({type:"recorder/adjust_sum_statistics",statistic_id:t,start_time:n,adjustment:i,adjustment_unit_of_measurement:r})},w=(e,t,a)=>{var i=e.states[t];return i?(0,n.u)(i):(null==a?void 0:a.name)||t},A=(e,t,a)=>{var i,r;t&&(i=null===(r=e.states[t])||void 0===r?void 0:r.attributes.unit_of_measurement);return void 0===i?null==a?void 0:a.statistics_unit_of_measurement:i},W=e=>e.includes(":"),N=e=>e.callWS({type:"recorder/update_statistics_issues"});i()}catch(I){i(I)}})},91575:function(e,t,a){a.a(e,async function(e,i){try{a.r(t);var r=a(62020),n=a(31802),o=a(21101),s=a(23180),l=(a(38606),a(69868)),u=a(84922),c=a(11991),d=a(8868),h=(a(70490),a(37749)),_=(a(86160),a(7245)),v=a(43716),g=a(40328),p=a(8510),f=e([h,_,v,d]);[h,_,v,d]=f.then?(await f)():f;var y,m,x,b,k=e=>e,M=[{level:-1,stroke:"var(--energy-grid-consumption-color)"},{level:0,stroke:"var(--energy-grid-return-color)"}],S=function(e){function t(){var e;(0,r.A)(this,t);for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=(0,o.A)(this,t,[].concat(i))).hassSubscribeRequiredHostProps=["_config"],e}return(0,s.A)(t,e),(0,n.A)(t,[{key:"hassSubscribe",value:function(){var e;return[(0,v.tb)(this.hass,{key:null===(e=this._config)||void 0===e?void 0:e.collection_key}).subscribe(e=>{this._data=e})]}},{key:"getCardSize",value:function(){return 4}},{key:"setConfig",value:function(e){this._config=e}},{key:"shouldUpdate",value:function(e){return(0,p.xP)(this,e)||e.size>1||!e.has("hass")}},{key:"render",value:function(){var e,t;if(!this._config||!this.hass)return u.s6;if(!this._data)return(0,u.qy)(y||(y=k`${0}`),this.hass.localize("ui.panel.lovelace.cards.energy.loading"));var a,i=(0,v.gv)(this._data),r=i.summedData;i.compareSummedData;if(!("from_grid"in r.total))return u.s6;var n=null!==(e=r.total.from_grid)&&void 0!==e?e:0,o=null!==(t=r.total.to_grid)&&void 0!==t?t:0;return null!==n&&null!==o&&(a=o>n?1-n/o:o<n?-1*(1-o/n):0),(0,u.qy)(m||(m=k` <ha-card> ${0} </ha-card> `),void 0!==a?(0,u.qy)(x||(x=k` <ha-gauge min="-1" max="1" .value="${0}" .valueText="${0}" .locale="${0}" .levels="${0}" label="kWh" needle></ha-gauge> <ha-svg-icon id="info" .path="${0}"></ha-svg-icon> <ha-tooltip for="info" placement="left"> ${0} <br><br> ${0} </ha-tooltip> <div class="name"> ${0} </div> `),a,(0,d.ZV)(Math.abs(o-n),this.hass.locale,{maximumFractionDigits:2}),this.hass.locale,M,"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.energy_dependency"),this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.color_explain"),o>=n?this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.net_returned_grid"):this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.net_consumed_grid")):this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.grid_neutrality_not_calculated"))}}])}((0,g.E)(u.WF));S.styles=(0,u.AH)(b||(b=k`ha-card{height:100%;overflow:hidden;padding:16px;display:flex;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}ha-gauge{width:100%;max-width:250px;direction:ltr}.name{text-align:center;line-height:initial;color:var(--primary-text-color);width:100%;font-size:var(--ha-font-size-m);margin-top:8px}ha-svg-icon{position:absolute;right:4px;inset-inline-end:4px;inset-inline-start:initial;top:4px;color:var(--secondary-text-color)}ha-tooltip::part(base__popup){margin-top:4px}`)),(0,l.__decorate)([(0,c.MZ)({attribute:!1})],S.prototype,"hass",void 0),(0,l.__decorate)([(0,c.wk)()],S.prototype,"_config",void 0),(0,l.__decorate)([(0,c.wk)()],S.prototype,"_data",void 0),S=(0,l.__decorate)([(0,c.EM)("hui-energy-grid-neutrality-gauge-card")],S),i()}catch($){i($)}})},73538:function(e,t,a){a.d(t,{NN:function(){return r},S8:function(){return i},gN:function(){return n}});var i=(e,t,a)=>isNaN(e)||isNaN(t)||isNaN(a)?0:e>a?a:e<t?t:e,r=(e,t,a)=>100*(e-t)/(a-t),n=e=>Math.round(10*e)/10},23336:function(e,t,a){a.d(t,{e:function(){return r}});var i=a(9151);function r(e,t,a){return(0,i.P)(e,12*t,a)}}}]);
//# sourceMappingURL=22182.295b59624d1a020c.js.map