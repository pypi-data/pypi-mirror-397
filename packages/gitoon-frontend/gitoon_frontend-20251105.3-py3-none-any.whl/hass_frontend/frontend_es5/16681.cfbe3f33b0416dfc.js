"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["16681"],{77208:function(a,t,e){var i=e(31802),n=e(62020),o=e(21101),s=e(23180),r=(e(38606),e(30375),e(65152),e(69868)),c=e(39508),l=e(11991),d=function(a){function t(){var a;(0,n.A)(this,t);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return(a=(0,o.A)(this,t,[].concat(i))).name="fadeIn",a.fill="both",a.play=!0,a.iterations=1,a}return(0,s.A)(t,a),(0,i.A)(t)}(c.A);(0,r.__decorate)([(0,l.MZ)()],d.prototype,"name",void 0),(0,r.__decorate)([(0,l.MZ)()],d.prototype,"fill",void 0),(0,r.__decorate)([(0,l.MZ)({type:Boolean})],d.prototype,"play",void 0),(0,r.__decorate)([(0,l.MZ)({type:Number})],d.prototype,"iterations",void 0),d=(0,r.__decorate)([(0,l.EM)("ha-fade-in")],d)},85404:function(a,t,e){var i,n,o,s,r,c=e(98735),l=e(88486),d=e(73983),h=e(62020),p=e(31802),u=e(21101),g=e(23180),f=e(87426),_=(e(38606),e(96956),e(79827),e(80178),e(99342),e(9724),e(65315),e(837),e(37089),e(48169),e(45519),e(69868)),m=e(84922),y=e(11991),v=e(65940),b=e(26946),k=e(44017),A=e(35297),$=(e(63893),e(17244),e(62177)),x=e(60702),C=(e(56997),e(36892),a=>a),w="M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z",z={config:"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",database:"M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3M9 17H7V10H9V17M13 17H11V7H13V17M17 17H15V13H17V17Z",media:"M4,6H2V20A2,2 0 0,0 4,22H18V20H4V6M20,2H8A2,2 0 0,0 6,4V16A2,2 0 0,0 8,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M12,14.5V5.5L18,10L12,14.5Z",share:w,ssl:"M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z"},V=function(a){function t(){var a;(0,h.A)(this,t);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return(a=(0,u.A)(this,t,[].concat(i))).requiredItems=[],a.translationKeyPanel="config.backup",a.addonsDisabled=!1,a._addonIcons={},a._homeAssistantItems=(0,v.A)((t,e)=>{var i=[];return t.homeassistant_included&&i.push({label:e(`ui.panel.${a.translationKeyPanel}.data_picker.${t.database_included?"settings_and_history":"settings"}`),id:"config",version:t.homeassistant_version}),i.push.apply(i,(0,d.A)(t.folders.map(t=>({label:a._localizeFolder(t),id:t})))),i}),a._addonsItems=(0,v.A)((a,t,e)=>a.addons.map(a=>({name:a.name,slug:a.slug,version:a.version,icon:e[a.slug]}))),a._parseValue=(0,v.A)(a=>{if(!a)return{homeassistant:[],addons:[]};var t=[],e=[];a.homeassistant_included&&t.push("config");var i=a.folders;t.push.apply(t,(0,d.A)(i));var n=a.addons.map(a=>a.slug);return e.push.apply(e,(0,d.A)(n)),{homeassistant:t,addons:e}}),a._formatValue=(0,v.A)((a,t)=>({homeassistant_version:t.homeassistant_version,homeassistant_included:a.homeassistant.includes("config"),database_included:t.database_included&&a.homeassistant.includes("config"),addons:t.addons.filter(t=>a.addons.includes(t.slug)),folders:t.folders.filter(t=>a.homeassistant.includes(t))})),a}return(0,g.A)(t,a),(0,p.A)(t,[{key:"firstUpdated",value:function(a){(0,f.A)(t,"firstUpdated",this,3)([a]),this.hass&&(0,b.x)(this.hass,"hassio")&&this._fetchAddonInfo()}},{key:"_fetchAddonInfo",value:(e=(0,l.A)((0,c.A)().m(function a(){var t,e;return(0,c.A)().w(function(a){for(;;)switch(a.n){case 0:return a.n=1,(0,$.b3)(this.hass);case 1:t=a.v,e=t.addons,this._addonIcons=e.reduce((a,t)=>Object.assign(Object.assign({},a),{},{[t.slug]:t.icon}),{});case 2:return a.a(2)}},a,this)})),function(){return e.apply(this,arguments)})},{key:"_localizeFolder",value:function(a){var t=this.localize||this.hass.localize;switch(a){case"media":return t(`ui.panel.${this.translationKeyPanel}.data_picker.media`);case"share":return t(`ui.panel.${this.translationKeyPanel}.data_picker.share_folder`);case"ssl":return t(`ui.panel.${this.translationKeyPanel}.data_picker.ssl`);case"addons/local":return t(`ui.panel.${this.translationKeyPanel}.data_picker.local_addons`)}return(0,A.Z)(a)}},{key:"_homeassistantChanged",value:function(a){var t=this._parseValue(this.value),e=a.currentTarget;e.checked?t.homeassistant.push(e.id):t.homeassistant=t.homeassistant.filter(a=>a!==e.id);var i=this._formatValue(t,this.data);(0,k.r)(this,"value-changed",{value:i})}},{key:"_addonsChanged",value:function(a){a.stopPropagation();var t=this._parseValue(this.value),e=a.detail.value;t.addons=e;var i=this._formatValue(t,this.data);(0,k.r)(this,"value-changed",{value:i})}},{key:"_sectionChanged",value:function(a){var t=this._parseValue(this.value),e=this._parseValue(this.data),i=a.currentTarget,n=i.id;i.checked?t[n]=e[n]:t[n]=[];var o=this._formatValue(t,this.data);(0,k.r)(this,"value-changed",{value:o})}},{key:"render",value:function(){var a=this.localize||this.hass.localize,t=this._homeAssistantItems(this.data,a),e=this._addonsItems(this.data,a,this._addonIcons),r=this._parseValue(this.value);return(0,m.qy)(i||(i=C` ${0} ${0} `),t.length?(0,m.qy)(n||(n=C` <div class="section"> <ha-formfield> <ha-backup-formfield-label slot="label" label="GiToon" .iconPath="${0}"> </ha-backup-formfield-label> <ha-checkbox .id="${0}" .checked="${0}" .indeterminate="${0}" @change="${0}" ?disabled="${0}"></ha-checkbox> </ha-formfield> <div class="items"> ${0} </div> </div> `),x.mdiHomeAssistant,"homeassistant",r.homeassistant.length===t.length,r.homeassistant.length>0&&r.homeassistant.length<t.length,this._sectionChanged,this.requiredItems.length>0,t.map(a=>(0,m.qy)(o||(o=C` <ha-formfield> <ha-backup-formfield-label slot="label" .label="${0}" .version="${0}" .iconPath="${0}"> </ha-backup-formfield-label> <ha-checkbox .id="${0}" .checked="${0}" @change="${0}" .disabled="${0}"></ha-checkbox> </ha-formfield> `),a.label,a.version,z[a.id]||w,a.id,r.homeassistant.includes(a.id),this._homeassistantChanged,this.requiredItems.includes(a.id)))):m.s6,e.length?(0,m.qy)(s||(s=C` <div class="section"> <ha-formfield> <ha-backup-formfield-label slot="label" .label="${0}" .iconPath="${0}"> </ha-backup-formfield-label> <ha-checkbox .id="${0}" .checked="${0}" .indeterminate="${0}" @change="${0}" .disabled="${0}"></ha-checkbox> </ha-formfield> <ha-backup-addons-picker .hass="${0}" .value="${0}" @value-changed="${0}" .addons="${0}" .disabled="${0}"> </ha-backup-addons-picker> </div> `),a(`ui.panel.${this.translationKeyPanel}.data_picker.addons`),"M20.5,11H19V7C19,5.89 18.1,5 17,5H13V3.5A2.5,2.5 0 0,0 10.5,1A2.5,2.5 0 0,0 8,3.5V5H4A2,2 0 0,0 2,7V10.8H3.5C5,10.8 6.2,12 6.2,13.5C6.2,15 5,16.2 3.5,16.2H2V20A2,2 0 0,0 4,22H7.8V20.5C7.8,19 9,17.8 10.5,17.8C12,17.8 13.2,19 13.2,20.5V22H17A2,2 0 0,0 19,20V16H20.5A2.5,2.5 0 0,0 23,13.5A2.5,2.5 0 0,0 20.5,11Z","addons",r.addons.length===e.length,r.addons.length>0&&r.addons.length<e.length,this._sectionChanged,this.addonsDisabled,this.hass,r.addons,this._addonsChanged,e,this.addonsDisabled):m.s6)}}]);var e}(m.WF);V.styles=(0,m.AH)(r||(r=C`.section{margin-left:-16px;margin-inline-start:-16px;margin-inline-end:initial}.items{padding-left:40px;padding-inline-start:40px;padding-inline-end:initial;display:flex;flex-direction:column}ha-backup-addons-picker{display:block;padding-left:40px;padding-inline-start:40px;padding-inline-end:initial}`)),(0,_.__decorate)([(0,y.MZ)({attribute:!1})],V.prototype,"hass",void 0),(0,_.__decorate)([(0,y.MZ)({attribute:!1})],V.prototype,"data",void 0),(0,_.__decorate)([(0,y.MZ)({attribute:!1})],V.prototype,"value",void 0),(0,_.__decorate)([(0,y.MZ)({attribute:!1})],V.prototype,"localize",void 0),(0,_.__decorate)([(0,y.MZ)({type:Array,attribute:"required-items"})],V.prototype,"requiredItems",void 0),(0,_.__decorate)([(0,y.MZ)({attribute:"translation-key-panel"})],V.prototype,"translationKeyPanel",void 0),(0,_.__decorate)([(0,y.MZ)({type:Boolean,attribute:!1})],V.prototype,"addonsDisabled",void 0),(0,_.__decorate)([(0,y.wk)()],V.prototype,"_addonIcons",void 0),V=(0,_.__decorate)([(0,y.EM)("ha-backup-data-picker")],V)},26928:function(a,t,e){e.a(a,async function(a,i){try{e.r(t);var n=e(98735),o=e(88486),s=e(62020),r=e(31802),c=e(21101),l=e(23180),d=(e(46852),e(38606),e(44941),e(65315),e(84136),e(45519),e(69868)),h=e(84922),p=e(11991),u=e(44017),g=(e(94124),e(17372)),f=(e(78918),e(70490),e(77208),e(9058),e(75369),e(99260),e(96635)),_=(e(45988),e(71598)),m=(e(41564),e(67717)),y=(e(22433),e(85404),a([g,f,_,m]));[g,f,_,m]=y.then?(await y)():y;var v,b,k,A,$,x,C,w,z,V,M,I=a=>a,H=function(a){function t(){var a;(0,s.A)(this,t);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return(a=(0,c.A)(this,t,[].concat(i))).narrow=!1,a.agents=[],a}return(0,l.A)(t,a),(0,r.A)(t,[{key:"willUpdate",value:function(a){a.has("agentId")&&(this.agentId?this._fetchAgent():this._error="Agent id not defined")}},{key:"render",value:function(){var a;if(!this.hass)return h.s6;var t=this._isEncryptionTurnedOn(),e=this._agent&&(0,_.q7)(this.hass.localize,this.agentId,this.agents)||this.hass.localize("ui.panel.config.backup.location.header");return(0,h.qy)(v||(v=I` <hass-subpage back-path="/config/backup/settings" .hass="${0}" .narrow="${0}" .header="${0}"> <div class="content"> ${0} ${0} </div> </hass-subpage> `),this.hass,this.narrow,e,this._error&&(0,h.qy)(b||(b=I`<ha-alert alert-type="error">${0}</ha-alert>`),this._error),null===this._agent?(0,h.qy)(k||(k=I` <ha-alert alert-type="warning" .title="${0}"> ${0} </ha-alert> `),this.hass.localize("ui.panel.config.backup.location.not_found"),this.hass.localize("ui.panel.config.backup.location.not_found_description",{agentId:this.agentId})):this.agentId?(0,h.qy)($||($=I` <ha-card> <div class="card-header"> ${0} </div> ${0} </ha-card> <ha-card> <div class="card-header"> ${0} </div> <div class="card-content"> <p> ${0} </p> <ha-md-list> ${0} </ha-md-list> </div> </ha-card> `),this.hass.localize("ui.panel.config.backup.location.configuration.title"),_.oJ===this.agentId?(0,h.qy)(x||(x=I` <div class="card-content"> <p> ${0} </p> </div> `),this.hass.localize("ui.panel.config.backup.location.configuration.cloud_description")):(0,h.qy)(C||(C=I`<ha-backup-config-retention location-specific .headline="${0}" .hass="${0}" .retention="${0}" @value-changed="${0}"></ha-backup-config-retention>`),this.hass.localize("ui.panel.config.backup.location.retention_for_"+((0,_.Bi)(this.agentId)?"this_system":"location"),{location:e}),this.hass,this.config?(null===(a=this.config.agents[this.agentId])||void 0===a?void 0:a.retention)||null:void 0,this._retentionChanged),this.hass.localize("ui.panel.config.backup.location.encryption.title"),this.hass.localize("ui.panel.config.backup.location.encryption.description"),_.oJ===this.agentId?(0,h.qy)(w||(w=I` <ha-md-list-item> <span slot="headline"> ${0} </span> <span slot="supporting-text"> ${0} </span> <ha-button href="https://www.nabucasa.com/config/backups/" target="_blank" slot="end" rel="noreferrer noopener" appearance="plain" size="small"> ${0} </ha-button> </ha-md-list-item> `),this.hass.localize("ui.panel.config.backup.location.encryption.location_encrypted"),this.hass.localize("ui.panel.config.backup.location.encryption.location_encrypted_cloud_description"),this.hass.localize("ui.panel.config.backup.location.encryption.location_encrypted_cloud_learn_more")):t?(0,h.qy)(z||(z=I` <ha-md-list-item> <span slot="headline"> ${0} </span> <span slot="supporting-text"> ${0} </span> <ha-button slot="end" @click="${0}" variant="danger"> ${0} </ha-button> </ha-md-list-item> `),this.hass.localize("ui.panel.config.backup.location.encryption.location_encrypted"),this.hass.localize("ui.panel.config.backup.location.encryption.location_encrypted_description"),this._turnOffEncryption,this.hass.localize("ui.panel.config.backup.location.encryption.encryption_turn_off")):(0,h.qy)(V||(V=I` <ha-alert alert-type="warning" .title="${0}"> ${0} </ha-alert> <ha-md-list-item> <span slot="headline"> ${0} </span> <span slot="supporting-text"> ${0} </span> <ha-button slot="end" @click="${0}"> ${0} </ha-button> </ha-md-list-item> `),this.hass.localize("ui.panel.config.backup.location.encryption.warning_encryption_turn_off"),this.hass.localize("ui.panel.config.backup.location.encryption.warning_encryption_turn_off_description"),this.hass.localize("ui.panel.config.backup.location.encryption.location_unencrypted"),this.hass.localize("ui.panel.config.backup.location.encryption.location_unencrypted_description"),this._turnOnEncryption,this.hass.localize("ui.panel.config.backup.location.encryption.encryption_turn_on"))):(0,h.qy)(A||(A=I`<ha-fade-in .delay="${0}"><ha-spinner></ha-spinner></ha-fade-in>`),1e3))}},{key:"_isEncryptionTurnedOn",value:function(){var a,t=null===(a=this.config)||void 0===a?void 0:a.agents[this.agentId];return!t||t.protected}},{key:"_fetchAgent",value:(p=(0,o.A)((0,n.A)().m(function a(){var t,e,i,o;return(0,n.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:return a.p=0,a.n=1,(0,_.P_)(this.hass);case 1:if(t=a.v,e=t.agents,i=e.find(a=>a.agent_id===this.agentId)){a.n=2;break}throw new Error("Agent not found");case 2:this._agent=i,a.n=4;break;case 3:a.p=3,o=a.v,this._error=(null==o?void 0:o.message)||this.hass.localize("ui.panel.config.backup.details.error");case 4:return a.a(2)}},a,this,[[0,3]])})),function(){return p.apply(this,arguments)})},{key:"_updateAgentConfig",value:(d=(0,o.A)((0,n.A)().m(function a(t){var e,i,o;return(0,n.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:return a.p=0,(i=(null===(e=this.config)||void 0===e?void 0:e.agents)||{})[this.agentId]=Object.assign(Object.assign({},i[this.agentId]||{}),t),a.n=1,(0,_.gb)(this.hass,{agents:i});case 1:(0,u.r)(this,"ha-refresh-backup-config"),a.n=3;break;case 2:a.p=2,o=a.v,this._error=this.hass.localize("ui.panel.config.backup.location.save_error",{error:o.message});case 3:return a.a(2)}},a,this,[[0,2]])})),function(a){return d.apply(this,arguments)})},{key:"_retentionChanged",value:function(a){var t=a.detail.value;this._updateAgentConfig({retention:t})}},{key:"_updateAgentEncryption",value:(i=(0,o.A)((0,n.A)().m(function a(t){return(0,n.A)().w(function(a){for(;;)switch(a.n){case 0:this._updateAgentConfig({protected:t});case 1:return a.a(2)}},a,this)})),function(a){return i.apply(this,arguments)})},{key:"_turnOnEncryption",value:function(){this._updateAgentEncryption(!0)}},{key:"_turnOffEncryption",value:(e=(0,o.A)((0,n.A)().m(function a(){return(0,n.A)().w(function(a){for(;;)switch(a.n){case 0:return a.n=1,(0,m.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.config.backup.location.encryption.encryption_turn_off_confirm_title"),text:this.hass.localize("ui.panel.config.backup.location.encryption.encryption_turn_off_confirm_text"),confirmText:this.hass.localize("ui.panel.config.backup.location.encryption.encryption_turn_off_confirm_action"),dismissText:this.hass.localize("ui.common.cancel"),destructive:!0});case 1:a.v&&this._updateAgentEncryption(!1);case 2:return a.a(2)}},a,this)})),function(){return e.apply(this,arguments)})}]);var e,i,d,p}(h.WF);H.styles=(0,h.AH)(M||(M=I`.content{padding:28px 20px 0;max-width:690px;margin:0 auto;gap:var(--ha-space-6);display:grid;margin-bottom:24px}.card-content{padding:0 20px}.card-actions{display:flex;justify-content:flex-end}ha-md-list{background:0 0;padding:0}ha-md-list-item{--md-list-item-leading-space:0;--md-list-item-trailing-space:0;--md-list-item-two-line-container-height:64px}ha-md-list-item img{width:48px}ha-md-list-item ha-svg-icon[slot=start]{--mdc-icon-size:48px;color:var(--primary-text-color)}ha-md-list.summary ha-md-list-item{--md-list-item-supporting-text-size:1rem;--md-list-item-label-text-size:0.875rem;--md-list-item-label-text-color:var(--secondary-text-color);--md-list-item-supporting-text-color:var(--primary-text-color)}.warning{color:var(--error-color)}.warning ha-svg-icon{color:var(--error-color)}ha-button.danger{--mdc-theme-primary:var(--error-color)}ha-backup-data-picker{display:block}ha-md-list-item [slot=supporting-text]{display:flex;align-items:center;flex-direction:row;gap:var(--ha-space-2);line-height:var(--ha-line-height-condensed)}.dot{display:block;position:relative;width:8px;height:8px;background-color:var(--disabled-color);border-radius:var(--ha-border-radius-circle);flex:none}.dot.success{background-color:var(--success-color)}.dot.error{background-color:var(--error-color)}.card-header{padding-bottom:8px}ha-spinner{margin:24px auto}ha-backup-config-retention{display:block;padding:16px}`)),(0,d.__decorate)([(0,p.MZ)({attribute:!1})],H.prototype,"hass",void 0),(0,d.__decorate)([(0,p.MZ)({type:Boolean})],H.prototype,"narrow",void 0),(0,d.__decorate)([(0,p.MZ)({attribute:"agent-id"})],H.prototype,"agentId",void 0),(0,d.__decorate)([(0,p.MZ)({attribute:!1})],H.prototype,"config",void 0),(0,d.__decorate)([(0,p.MZ)({attribute:!1})],H.prototype,"agents",void 0),(0,d.__decorate)([(0,p.wk)()],H.prototype,"_agent",void 0),(0,d.__decorate)([(0,p.wk)()],H.prototype,"_error",void 0),H=(0,d.__decorate)([(0,p.EM)("ha-config-backup-location")],H),i()}catch(L){i(L)}})}}]);
//# sourceMappingURL=16681.cfbe3f33b0416dfc.js.map