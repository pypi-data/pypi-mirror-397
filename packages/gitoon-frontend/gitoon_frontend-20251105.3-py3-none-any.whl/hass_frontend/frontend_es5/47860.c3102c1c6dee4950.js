"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["47860"],{96735:function(t,e,a){a.a(t,async function(t,n){try{a.r(e);var o=a(98735),i=a(88486),r=a(62020),s=a(31802),c=a(21101),d=a(23180),l=a(87426),h=(a(46852),a(38606),a(35748),a(45519),a(95013),a(45460),a(18332),a(13484),a(81071),a(92714),a(55885),a(69868)),u=a(84922),p=a(11991),f=a(63870),_=a(41042),w=(a(65954),a(14523)),b=a(51140),g=a(91197),v=t([_]);_=(v.then?(await v)():v)[0];var y,m,k=t=>t,A=function(t){function e(){var t;(0,r.A)(this,e);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(t=(0,c.A)(this,e,[].concat(n)))._attached=!1,t._waiting=!1,t}return(0,d.A)(e,t),(0,s.A)(e,[{key:"connectedCallback",value:function(){(0,l.A)(e,"connectedCallback",this,3)([]),this._attached=!0}},{key:"disconnectedCallback",value:function(){(0,l.A)(e,"disconnectedCallback",this,3)([]),this._attached=!1}},{key:"render",value:function(){return this._attached&&this.stateObj?(0,u.qy)(y||(y=k` <ha-camera-stream .hass="${0}" .stateObj="${0}" allow-exoplayer controls></ha-camera-stream> <div class="actions"> <ha-progress-button @click="${0}" .progress="${0}" .disabled="${0}" appearance="filled"> ${0} </ha-progress-button> </div> `),this.hass,this.stateObj,this._downloadSnapshot,this._waiting,this.stateObj.state===w.Hh,this.hass.localize("ui.dialogs.more_info_control.camera.download_snapshot")):u.s6}},{key:"_downloadSnapshot",value:(a=(0,i.A)((0,o.A)().m(function t(e){var a,n,i,r,s,c,d,l;return(0,o.A)().w(function(t){for(;;)switch(t.p=t.n){case 0:return a=e.currentTarget,this._waiting=!0,t.p=1,t.n=2,this.hass.callApiRaw("GET",`camera_proxy/${this.stateObj.entity_id}`);case 2:if(n=t.v){t.n=3;break}throw new Error("No response from API");case 3:return i=n.headers.get("content-type"),r="image/png"===i?"png":"jpg",s=(new Date).toLocaleString(),c=`snapshot_${(0,f.Y)(this.stateObj.entity_id)}_${s}.${r}`,t.n=4,n.blob();case 4:d=t.v,l=window.URL.createObjectURL(d),(0,b.R)(l,c),t.n=6;break;case 5:return t.p=5,t.v,this._waiting=!1,a.actionError(),(0,g.P)(this,{message:this.hass.localize("ui.dialogs.more_info_control.camera.failed_to_download")}),t.a(2);case 6:this._waiting=!1,a.actionSuccess();case 7:return t.a(2)}},t,this,[[1,5]])})),function(t){return a.apply(this,arguments)})}]);var a}(u.WF);A.styles=(0,u.AH)(m||(m=k`:host{display:block}.actions{width:100%;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-end;box-sizing:border-box;padding:16px;z-index:1;gap:var(--ha-space-2)}`)),(0,h.__decorate)([(0,p.MZ)({attribute:!1})],A.prototype,"hass",void 0),(0,h.__decorate)([(0,p.MZ)({attribute:!1})],A.prototype,"stateObj",void 0),(0,h.__decorate)([(0,p.wk)()],A.prototype,"_attached",void 0),(0,h.__decorate)([(0,p.wk)()],A.prototype,"_waiting",void 0),customElements.define("more-info-camera",A),n()}catch(x){n(x)}})},51140:function(t,e,a){a.d(e,{h:function(){return i},R:function(){return o}});var n=a(49487),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=document.createElement("a");a.target="_blank",a.href=t,a.download=e,a.style.display="none",document.body.appendChild(a),a.dispatchEvent(new MouseEvent("click")),document.body.removeChild(a)},i=t=>{var e;return!(t=>!!t.auth.external&&n.n)(t)||!(null===(e=t.auth.external)||void 0===e||!e.config.downloadFileSupported)}},49487:function(t,e,a){a.d(e,{n:function(){return n}});a(67579),a(41190);var n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}]);
//# sourceMappingURL=47860.c3102c1c6dee4950.js.map