"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["99652"],{94029:function(e,t,n){n.a(e,async function(e,i){try{n.d(t,{K:function(){return c}});var a=n(77489),r=n(65940),o=n(22989),s=e([a,o]);[a,o]=s.then?(await s)():s;var l=(0,r.A)(e=>new Intl.RelativeTimeFormat(e.language,{numeric:"auto"})),c=function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=(0,o.x)(e,n,t);return i?l(t).format(a.value,a.unit):Intl.NumberFormat(t.language,{style:"unit",unit:a.unit,unitDisplay:"long"}).format(Math.abs(a.value))};i()}catch(d){i(d)}})},22989:function(e,t,n){n.a(e,async function(e,i){try{n.d(t,{x:function(){return m}});var a=n(41484),r=n(88258),o=n(42794),s=n(50654),l=e([s]);s=(l.then?(await l)():l)[0];var c=1e3,d=60,u=60*d;function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=Object.assign(Object.assign({},h),i||{}),p=(+e-+t)/c;if(Math.abs(p)<l.second)return{value:Math.round(p),unit:"second"};var m=p/d;if(Math.abs(m)<l.minute)return{value:Math.round(m),unit:"minute"};var _=p/u;if(Math.abs(_)<l.hour)return{value:Math.round(_),unit:"hour"};var g=new Date(e),f=new Date(t);g.setHours(0,0,0,0),f.setHours(0,0,0,0);var v=(0,a.c)(g,f);if(0===v)return{value:Math.round(_),unit:"hour"};if(Math.abs(v)<l.day)return{value:v,unit:"day"};var y=(0,s.PE)(n),b=(0,r.k)(g,{weekStartsOn:y}),w=(0,r.k)(f,{weekStartsOn:y}),k=(0,o.I)(b,w);if(0===k)return{value:v,unit:"day"};if(Math.abs(k)<l.week)return{value:k,unit:"week"};var A=g.getFullYear()-f.getFullYear(),$=12*A+g.getMonth()-f.getMonth();return 0===$?{value:k,unit:"week"}:Math.abs($)<l.month||0===A?{value:$,unit:"month"}:{value:Math.round(A),unit:"year"}}var h={second:45,minute:45,hour:22,day:5,week:4,month:11};i()}catch(p){i(p)}})},65298:function(e,t,n){n.d(t,{n:function(){return i}});n(35748),n(95013);const i=(e,t,n=!0,i=!0)=>{let a,r=0;const o=(...o)=>{const s=()=>{r=!1===n?0:Date.now(),a=void 0,e(...o)},l=Date.now();r||!1!==n||(r=l);const c=t-(l-r);c<=0||c>t?(a&&(clearTimeout(a),a=void 0),r=l,e(...o)):a||!1===i||(a=window.setTimeout(s,c))};return o.cancel=()=>{clearTimeout(a),a=void 0,r=0},o}},78918:function(e,t,n){var i,a,r=n(62020),o=n(31802),s=n(21101),l=n(23180),c=n(87426),d=(n(38606),n(65315),n(22416),n(65152),n(45519),n(30536),n(69868)),u=n(84922),h=n(11991),p=n(91541),m=(n(33574),n(61631),e=>e),_=function(e){function t(){var e;(0,r.A)(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=(0,s.A)(this,t,[].concat(i))).corner="BOTTOM_START",e.menuCorner="START",e.x=null,e.y=null,e.multi=!1,e.activatable=!1,e.disabled=!1,e.fixed=!1,e.noAnchor=!1,e}return(0,l.A)(t,e),(0,o.A)(t,[{key:"items",get:function(){var e;return null===(e=this._menu)||void 0===e?void 0:e.items}},{key:"selected",get:function(){var e;return null===(e=this._menu)||void 0===e?void 0:e.selected}},{key:"focus",value:function(){var e,t;null!==(e=this._menu)&&void 0!==e&&e.open?this._menu.focusItemAtIndex(0):null===(t=this._triggerButton)||void 0===t||t.focus()}},{key:"render",value:function(){return(0,u.qy)(i||(i=m` <div @click="${0}"> <slot name="trigger" @slotchange="${0}"></slot> </div> <ha-menu .corner="${0}" .menuCorner="${0}" .fixed="${0}" .multi="${0}" .activatable="${0}" .y="${0}" .x="${0}"> <slot></slot> </ha-menu> `),this._handleClick,this._setTriggerAria,this.corner,this.menuCorner,this.fixed,this.multi,this.activatable,this.y,this.x)}},{key:"firstUpdated",value:function(e){(0,c.A)(t,"firstUpdated",this,3)([e]),"rtl"===p.G.document.dir&&this.updateComplete.then(()=>{this.querySelectorAll("ha-list-item").forEach(e=>{var t=document.createElement("style");t.innerHTML="span.material-icons:first-of-type { margin-left: var(--mdc-list-item-graphic-margin, 32px) !important; margin-right: 0px !important;}",e.shadowRoot.appendChild(t)})})}},{key:"_handleClick",value:function(){this.disabled||(this._menu.anchor=this.noAnchor?null:this,this._menu.show())}},{key:"_triggerButton",get:function(){return this.querySelector('ha-icon-button[slot="trigger"], ha-button[slot="trigger"]')}},{key:"_setTriggerAria",value:function(){this._triggerButton&&(this._triggerButton.ariaHasPopup="menu")}}])}(u.WF);_.styles=(0,u.AH)(a||(a=m`:host{display:inline-block;position:relative}::slotted([disabled]){color:var(--disabled-text-color)}`)),(0,d.__decorate)([(0,h.MZ)()],_.prototype,"corner",void 0),(0,d.__decorate)([(0,h.MZ)({attribute:"menu-corner"})],_.prototype,"menuCorner",void 0),(0,d.__decorate)([(0,h.MZ)({type:Number})],_.prototype,"x",void 0),(0,d.__decorate)([(0,h.MZ)({type:Number})],_.prototype,"y",void 0),(0,d.__decorate)([(0,h.MZ)({type:Boolean})],_.prototype,"multi",void 0),(0,d.__decorate)([(0,h.MZ)({type:Boolean})],_.prototype,"activatable",void 0),(0,d.__decorate)([(0,h.MZ)({type:Boolean})],_.prototype,"disabled",void 0),(0,d.__decorate)([(0,h.MZ)({type:Boolean})],_.prototype,"fixed",void 0),(0,d.__decorate)([(0,h.MZ)({type:Boolean,attribute:"no-anchor"})],_.prototype,"noAnchor",void 0),(0,d.__decorate)([(0,h.P)("ha-menu",!0)],_.prototype,"_menu",void 0),_=(0,d.__decorate)([(0,h.EM)("ha-button-menu")],_)},77510:function(e,t,n){var i,a,r,o=n(62020),s=n(31802),l=n(21101),c=n(87426),d=n(23180),u=n(69868),h=n(41188),p=n(57437),m=n(84922),_=n(11991),g=e=>e,f=function(e){function t(){return(0,o.A)(this,t),(0,l.A)(this,t,arguments)}return(0,d.A)(t,e),(0,s.A)(t,[{key:"renderRipple",value:function(){return this.noninteractive?"":(0,c.A)(t,"renderRipple",this,3)([])}}],[{key:"styles",get:function(){return[p.R,(0,m.AH)(i||(i=g`:host{padding-left:var(--mdc-list-side-padding-left,var(--mdc-list-side-padding,20px));padding-inline-start:var(--mdc-list-side-padding-left,var(--mdc-list-side-padding,20px));padding-right:var(--mdc-list-side-padding-right,var(--mdc-list-side-padding,20px));padding-inline-end:var(--mdc-list-side-padding-right,var(--mdc-list-side-padding,20px))}:host([graphic=avatar]:not([twoLine])),:host([graphic=icon]:not([twoLine])){height:48px}span.material-icons:first-of-type{margin-inline-start:0px!important;margin-inline-end:var(--mdc-list-item-graphic-margin,16px)!important;direction:var(--direction)!important}span.material-icons:last-of-type{margin-inline-start:auto!important;margin-inline-end:0px!important;direction:var(--direction)!important}.mdc-deprecated-list-item__meta{display:var(--mdc-list-item-meta-display);align-items:center;flex-shrink:0}:host([graphic=icon]:not([twoline])) .mdc-deprecated-list-item__graphic{margin-inline-end:var(--mdc-list-item-graphic-margin,20px)!important}:host([multiline-secondary]){height:auto}:host([multiline-secondary]) .mdc-deprecated-list-item__text{padding:8px 0}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text{text-overflow:initial;white-space:normal;overflow:auto;display:inline-block;margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text{margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text::before{display:none}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text::before{display:none}:host([disabled]){color:var(--disabled-text-color)}:host([noninteractive]){pointer-events:unset}`)),"rtl"===document.dir?(0,m.AH)(a||(a=g`span.material-icons:first-of-type,span.material-icons:last-of-type{direction:rtl!important;--direction:rtl}`)):(0,m.AH)(r||(r=g``))]}}])}(h.J);f=(0,u.__decorate)([(0,_.EM)("ha-list-item")],f)},14532:function(e,t,n){var i=n(31802),a=n(62020),r=n(21101),o=n(23180),s=n(69868),l=n(47722),c=n(60311),d=n(11991),u=function(e){function t(){return(0,a.A)(this,t),(0,r.A)(this,t,arguments)}return(0,o.A)(t,e),(0,i.A)(t)}(l.iY);u.styles=c.R,u=(0,s.__decorate)([(0,d.EM)("ha-list")],u)},61631:function(e,t,n){var i,a=n(62020),r=n(31802),o=n(21101),s=n(23180),l=n(69868),c=n(95463),d=n(3941),u=n(84922),h=n(11991),p=n(75907),m=(n(14532),e=>e),_=function(e){function t(){return(0,a.A)(this,t),(0,o.A)(this,t,arguments)}return(0,s.A)(t,e),(0,r.A)(t,[{key:"listElement",get:function(){return this.listElement_||(this.listElement_=this.renderRoot.querySelector("ha-list")),this.listElement_}},{key:"renderList",value:function(){var e="menu"===this.innerRole?"menuitem":"option",t=this.renderListClasses();return(0,u.qy)(i||(i=m`<ha-list rootTabbable .innerAriaLabel="${0}" .innerRole="${0}" .multi="${0}" class="${0}" .itemRoles="${0}" .wrapFocus="${0}" .activatable="${0}" @action="${0}"> <slot></slot> </ha-list>`),this.innerAriaLabel,this.innerRole,this.multi,(0,p.H)(t),e,this.wrapFocus,this.activatable,this.onAction)}}])}(c.ZR);_.styles=d.R,_=(0,l.__decorate)([(0,h.EM)("ha-menu")],_)},84432:function(e,t,n){n.d(t,{A1:function(){return r},CY:function(){return l},Fn:function(){return o},Jz:function(){return d},St:function(){return c},VA:function(){return h},WI:function(){return p},iY:function(){return u},xw:function(){return s}});var i=n(98735),a=n(88486),r=(n(46852),(e,t)=>e.callWS({type:"media_source/resolve_media",media_content_id:t})),o=(e,t)=>e.callWS({type:"media_source/browse_media",media_content_id:t}),s="__MANUAL_ENTRY__",l=e=>e.startsWith(s),c=e=>e.startsWith("media-source://"),d=e=>e.startsWith("media-source://media_source"),u=e=>e.startsWith("media-source://image_upload"),h=function(){var e=(0,a.A)((0,i.A)().m(function e(t,n,a){var r,o;return(0,i.A)().w(function(e){for(;;)switch(e.n){case 0:return(r=new FormData).append("media_content_id",n),r.append("file",a),e.n=1,t.fetchWithAuth("/api/media_source/local_source/upload",{method:"POST",body:r});case 1:if(413!==(o=e.v).status){e.n=2;break}throw new Error(`Uploaded file is too large (${a.name})`);case 2:if(200===o.status){e.n=3;break}throw new Error("Unknown error");case 3:return e.a(2,o.json())}},e)}));return function(t,n,i){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.A)((0,i.A)().m(function e(t,n){return(0,i.A)().w(function(e){for(;;)if(0===e.n)return e.a(2,t.callWS({type:"media_source/local_source/remove",media_content_id:n}))},e)}));return function(t,n){return e.apply(this,arguments)}}()},76619:function(e,t,n){n.d(t,{o:function(){return a}});n(35748),n(45519),n(5934),n(95013);var i=n(44017),a=(e,t)=>new Promise(a=>{var r=t.closeDialog,o=t.logInHereAction;(0,i.r)(e,"show-dialog",{dialogTag:"dialog-cloud-already-connected",dialogImport:()=>Promise.all([n.e("3245"),n.e("79584"),n.e("48734")]).then(n.bind(n,92109)),dialogParams:Object.assign(Object.assign({},t),{},{closeDialog:()=>{null==r||r(),a(!1)},logInHereAction:()=>{null==o||o(),a(!0)}})})})},18633:function(e,t,n){n.a(e,async function(e,t){try{var i=n(98735),a=n(88486),r=n(62020),o=n(31802),s=n(97750),l=n(21101),c=n(23180),d=(n(46852),n(38606),n(54323),n(69868)),u=n(84922),h=n(11991),p=n(44017),m=n(41042),_=(n(94124),n(70490),n(17372)),g=(n(35988),n(80287),n(50809)),f=n(50991),v=n(67717),y=n(156),b=n(76619),w=n(6033),k=e([m,_,v]);[m,_,v]=k.then?(await k)():k;var A,$,x,P,M=e=>e,F=function(e){function t(){var e;(0,r.A)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=(0,l.A)(this,t,[].concat(o))).checkConnection=!1,e.translationKeyPanel="config.cloud",e.cardLess=!1,e._inProgress=!1,e._handleCloudLoginError=function(){var t=(0,a.A)((0,i.A)().m(function t(n,a,r,o){var l,c,d,u;return(0,i.A)().w(function(t){for(;;)switch(t.n){case 0:if("mfarequired"!==(l=n&&n.body&&n.body.code)){t.n=2;break}return t.n=1,(0,v.showPromptDialog)((0,s.A)(e),{title:e.localize(`ui.panel.${e.translationKeyPanel}.login.totp_code_prompt_title`),inputLabel:e.localize(`ui.panel.${e.translationKeyPanel}.login.totp_code`),inputType:"text",defaultValue:"",confirmText:e.localize(`ui.panel.${e.translationKeyPanel}.login.submit`),dismissText:e.localize(`ui.panel.${e.translationKeyPanel}.login.cancel`)});case 1:if(null===(c=t.v)||""===c){t.n=2;break}return e._login(a,r,o,c),t.a(2,"continue");case 2:if("alreadyconnectederror"!==l){t.n=4;break}return t.n=3,(0,b.o)((0,s.A)(e),{details:JSON.parse(n.body.message)});case 3:return(d=t.v)&&e._login(a,r,!1),t.a(2,d?"continue":"cancel");case 4:if("PasswordChangeRequired"!==l){t.n=5;break}return(0,v.showAlertDialog)((0,s.A)(e),{title:e.localize(`ui.panel.${e.translationKeyPanel}.login.alert_password_change_required`)}),t.a(2,"password-change");case 5:if("usernotfound"!==l||a===a.toLowerCase()){t.n=6;break}return e._login(a.toLowerCase(),r,o),t.a(2,void 0);case 6:u=l,t.n="UserNotConfirmed"===u?7:"mfarequired"===u?8:"mfaexpiredornotstarted"===u?9:"invalidtotpcode"===u?10:11;break;case 7:return t.a(2,e.localize(`ui.panel.${e.translationKeyPanel}.login.alert_email_confirm_necessary`));case 8:return t.a(2,e.localize(`ui.panel.${e.translationKeyPanel}.login.alert_mfa_code_required`));case 9:return t.a(2,e.localize(`ui.panel.${e.translationKeyPanel}.login.alert_mfa_expired_or_not_started`));case 10:return t.a(2,e.localize(`ui.panel.${e.translationKeyPanel}.login.alert_totp_code_invalid`));case 11:return t.a(2,n&&n.body&&n.body.message?n.body.message:"Unknown error");case 12:return t.a(2)}},t)}));return function(e,n,i,a){return t.apply(this,arguments)}}(),e._login=function(){var t=(0,a.A)((0,i.A)().m(function t(n,a,r,o){var l,c,d;return(0,i.A)().w(function(t){for(;;)switch(t.p=t.n){case 0:if(a||o){t.n=1;break}throw new Error("Password or code required");case 1:if(t.p=1,!e.hass){t.n=5;break}return t.n=2,(0,f.p7)(Object.assign(Object.assign({hass:e.hass,email:n},o?{code:o}:{password:a}),{},{check_connection:r}));case 2:if(!(l=t.v).cloud_pipeline){t.n=4;break}return t.n=3,(0,v.showConfirmationDialog)((0,s.A)(e),{title:e.hass.localize("ui.panel.config.cloud.login.cloud_pipeline_title"),text:e.hass.localize("ui.panel.config.cloud.login.cloud_pipeline_text"),confirmText:e.hass.localize("ui.common.yes"),dismissText:e.hass.localize("ui.common.no")});case 3:if(!t.v){t.n=4;break}(0,y.NH)(e.hass,l.cloud_pipeline);case 4:t.n=6;break;case 5:return t.n=6,(0,w.AC)(Object.assign({email:n},o?{code:o}:{password:a}));case 6:e.email="",(0,p.r)((0,s.A)(e),"ha-refresh-cloud-status"),t.n=11;break;case 7:return t.p=7,d=t.v,t.n=8,e._handleCloudLoginError(d,n,a,r);case 8:if("cancel"!==(c=t.v)){t.n=9;break}return e._inProgress=!1,e.email="",e._passwordField.value="",t.a(2);case 9:if("password-change"!==c){t.n=10;break}return e._handleForgotPassword(),t.a(2);case 10:"continue"!==c&&(e._inProgress=!1,e._error=c);case 11:return t.a(2)}},t,null,[[1,7]])}));return function(e,n,i,a){return t.apply(this,arguments)}}(),e}return(0,c.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){return this.cardLess?this._renderLoginForm():(0,u.qy)(A||(A=M` <ha-card outlined .header="${0}"> ${0} </ha-card> `),this.localize(`ui.panel.${this.translationKeyPanel}.login.sign_in`),this._renderLoginForm())}},{key:"_renderLoginForm",value:function(){var e;return(0,u.qy)($||($=M` <div class="card-content login-form"> ${0} <ha-textfield .label="${0}" id="email" name="username" type="email" autocomplete="username" required .value="${0}" @keydown="${0}" .disabled="${0}" .validationMessage="${0}"></ha-textfield> <ha-password-field id="password" name="password" .label="${0}" autocomplete="current-password" required minlength="8" @keydown="${0}" .disabled="${0}" .validationMessage="${0}"></ha-password-field> </div> <div class="card-actions"> <ha-button appearance="plain" .disabled="${0}" @click="${0}"> ${0} </ha-button> <ha-progress-button @click="${0}" .progress="${0}">${0}</ha-progress-button> </div> `),this._error?(0,u.qy)(x||(x=M`<ha-alert alert-type="error">${0}</ha-alert>`),this._error):u.s6,this.localize(`ui.panel.${this.translationKeyPanel}.login.email`),null!==(e=this.email)&&void 0!==e?e:"",this._keyDown,this._inProgress,this.localize(`ui.panel.${this.translationKeyPanel}.login.email_error_msg`),this.localize(`ui.panel.${this.translationKeyPanel}.login.password`),this._keyDown,this._inProgress,this.localize(`ui.panel.${this.translationKeyPanel}.login.password_error_msg`),this._inProgress,this._handleForgotPassword,this.localize(`ui.panel.${this.translationKeyPanel}.login.forgot_password`),this._handleLogin,this._inProgress,this.localize(`ui.panel.${this.translationKeyPanel}.login.sign_in`))}},{key:"_keyDown",value:function(e){"Enter"===e.key&&this._handleLogin()}},{key:"_handleLogin",value:(n=(0,a.A)((0,i.A)().m(function e(){return(0,i.A)().w(function(e){for(;;)switch(e.n){case 0:if(this._inProgress){e.n=3;break}if(this.emailField.reportValidity()){e.n=1;break}return this.emailField.focus(),e.a(2);case 1:if(this._passwordField.reportValidity()){e.n=2;break}return this._passwordField.focus(),e.a(2);case 2:this._inProgress=!0,this._login(this.emailField.value,this._passwordField.value,this.checkConnection);case 3:return e.a(2)}},e,this)})),function(){return n.apply(this,arguments)})},{key:"_handleForgotPassword",value:function(){(0,p.r)(this,"cloud-forgot-password")}}],[{key:"styles",get:function(){return[g.RF,(0,u.AH)(P||(P=M`ha-card{overflow:hidden}ha-card .card-header{margin-bottom:-8px}.card-actions{display:flex;justify-content:space-between;align-items:center}.login-form{display:flex;flex-direction:column}`))]}}]);var n}(u.WF);(0,d.__decorate)([(0,h.MZ)({attribute:!1})],F.prototype,"hass",void 0),(0,d.__decorate)([(0,h.MZ)({type:Boolean,attribute:"check-connection"})],F.prototype,"checkConnection",void 0),(0,d.__decorate)([(0,h.MZ)()],F.prototype,"email",void 0),(0,d.__decorate)([(0,h.MZ)({attribute:!1})],F.prototype,"localize",void 0),(0,d.__decorate)([(0,h.MZ)({attribute:"translation-key-panel"})],F.prototype,"translationKeyPanel",void 0),(0,d.__decorate)([(0,h.MZ)({type:Boolean,attribute:"card-less"})],F.prototype,"cardLess",void 0),(0,d.__decorate)([(0,h.P)("#email",!0)],F.prototype,"emailField",void 0),(0,d.__decorate)([(0,h.P)("#password",!0)],F.prototype,"_passwordField",void 0),(0,d.__decorate)([(0,h.wk)()],F.prototype,"_error",void 0),(0,d.__decorate)([(0,h.wk)()],F.prototype,"_inProgress",void 0),F=(0,d.__decorate)([(0,h.EM)("cloud-login")],F),t()}catch(C){t(C)}})}}]);
//# sourceMappingURL=99652.a434361cdee42cb2.js.map