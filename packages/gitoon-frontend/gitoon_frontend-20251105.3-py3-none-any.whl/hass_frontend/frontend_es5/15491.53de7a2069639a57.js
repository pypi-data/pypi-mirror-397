"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["15491"],{94327:function(e,t,i){i.d(t,{Vy:function(){return a},fI:function(){return o},ux:function(){return c}});i(80178),i(45519);var n=i(65940),r=i(83510),s=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function a(e){return s[e%s.length]}function o(e,t){var i=t.getPropertyValue(`--graph-color-${e+1}`)||a(e);return(0,r.RQ)(i)}var c=(0,n.A)(e=>s.map((t,i)=>o(i,e)),(e,t)=>e[0].getPropertyValue("--graph-color-1")===t[0].getPropertyValue("--graph-color-1"))},85356:function(e,t,i){i.d(t,{n:function(){return l},v:function(){return u}});var n=i(15243),r=i(73983),s=(i(96956),i(35748),i(80178),i(99342),i(35058),i(65315),i(837),i(37089),i(29726),i(45519),i(64587),i(88238),i(34536),i(16257),i(20152),i(44711),i(72108),i(77030),i(95013),i(12275)),a=i(14523),o=i(88341),c=i(24730),u={alarm_control_panel:["armed_away","armed_custom_bypass","armed_home","armed_night","armed_vacation","arming","disarmed","disarming","pending","triggered"],alert:["on","off","idle"],assist_satellite:["idle","listening","responding","processing"],automation:["on","off"],binary_sensor:["on","off"],button:[],calendar:["on","off"],camera:["idle","recording","streaming"],cover:["closed","closing","open","opening"],device_tracker:["home","not_home"],fan:["on","off"],humidifier:["on","off"],input_boolean:["on","off"],input_button:[],lawn_mower:["error","paused","mowing","returning","docked"],light:["on","off"],lock:["jammed","locked","locking","unlocked","unlocking","opening","open"],media_player:["off","on","idle","playing","paused","standby","buffering"],person:["home","not_home"],plant:["ok","problem"],remote:["on","off"],scene:[],schedule:["on","off"],script:["on","off"],siren:["on","off"],sun:["above_horizon","below_horizon"],switch:["on","off"],timer:["active","idle","paused"],update:["on","off"],vacuum:["cleaning","docked","error","idle","paused","returning"],valve:["closed","closing","open","opening"],weather:["clear-night","cloudy","exceptional","fog","hail","lightning-rainy","lightning","partlycloudy","pouring","rainy","snowy-rainy","snowy","sunny","windy-variant","windy"]},d={alarm_control_panel:{code_format:["number","text"]},binary_sensor:{device_class:["battery","battery_charging","co","cold","connectivity","door","garage_door","gas","heat","light","lock","moisture","motion","moving","occupancy","opening","plug","power","presence","problem","running","safety","smoke","sound","tamper","update","vibration","window"]},button:{device_class:["restart","update"]},camera:{frontend_stream_type:["hls","web_rtc"]},climate:{hvac_action:["off","idle","preheating","defrosting","heating","cooling","drying","fan"]},cover:{device_class:["awning","blind","curtain","damper","door","garage","gate","shade","shutter","window"]},device_tracker:{source_type:["bluetooth","bluetooth_le","gps","router"]},fan:{direction:["forward","reverse"]},humidifier:{device_class:["humidifier","dehumidifier"],action:["off","idle","humidifying","drying"]},media_player:{device_class:["tv","speaker","receiver"],media_content_type:["album","app","artist","channel","channels","composer","contributing_artist","episode","game","genre","image","movie","music","playlist","podcast","season","track","tvshow","url","video"],repeat:["off","one","all"]},number:{device_class:["temperature"]},sensor:{device_class:["apparent_power","aqi","battery","carbon_dioxide","carbon_monoxide","current","date","duration","energy","frequency","gas","humidity","illuminance","monetary","nitrogen_dioxide","nitrogen_monoxide","nitrous_oxide","ozone","ph","pm1","pm10","pm25","pm4","power_factor","power","pressure","reactive_power","signal_strength","sulphur_dioxide","temperature","timestamp","volatile_organic_compounds","volatile_organic_compounds_parts","voltage","volume_flow_rate"],state_class:["measurement","total","total_increasing"]},switch:{device_class:["outlet","switch"]},update:{device_class:["firmware"]},water_heater:{away_mode:["on","off"]}},l=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,l=(0,s.t)(t),h=[];switch(!i&&l in u?h.push.apply(h,(0,r.A)(u[l])):i&&l in d&&i in d[l]&&h.push.apply(h,(0,r.A)(d[l][i])),l){case"climate":i?"fan_mode"===i?h.push.apply(h,(0,r.A)(t.attributes.fan_modes)):"preset_mode"===i?h.push.apply(h,(0,r.A)(t.attributes.preset_modes)):"swing_mode"===i&&h.push.apply(h,(0,r.A)(t.attributes.swing_modes)):h.push.apply(h,(0,r.A)(t.attributes.hvac_modes));break;case"device_tracker":case"person":i||h.push.apply(h,(0,r.A)(Object.entries(e.states).filter(e=>{var t=(0,n.A)(e,2),i=t[0],r=t[1];return"zone"===(0,o.m)(i)&&"zone.home"!==i&&r.attributes.friendly_name}).map(e=>{var t=(0,n.A)(e,2);t[0];return t[1].attributes.friendly_name}).sort((t,i)=>(0,c.xL)(t,i,e.locale.language))));break;case"event":"event_type"===i&&h.push.apply(h,(0,r.A)(t.attributes.event_types));break;case"fan":"preset_mode"===i&&h.push.apply(h,(0,r.A)(t.attributes.preset_modes));break;case"humidifier":"mode"===i&&h.push.apply(h,(0,r.A)(t.attributes.available_modes));break;case"input_select":case"select":i||h.push.apply(h,(0,r.A)(t.attributes.options));break;case"light":"effect"===i&&t.attributes.effect_list?h.push.apply(h,(0,r.A)(t.attributes.effect_list)):"color_mode"===i&&t.attributes.supported_color_modes&&h.push.apply(h,(0,r.A)(t.attributes.supported_color_modes));break;case"media_player":"sound_mode"===i?h.push.apply(h,(0,r.A)(t.attributes.sound_mode_list)):"source"===i&&h.push.apply(h,(0,r.A)(t.attributes.source_list));break;case"remote":"current_activity"===i&&h.push.apply(h,(0,r.A)(t.attributes.activity_list));break;case"sensor":i||"enum"!==t.attributes.device_class||h.push.apply(h,(0,r.A)(t.attributes.options));break;case"vacuum":"fan_speed"===i&&h.push.apply(h,(0,r.A)(t.attributes.fan_speed_list));break;case"water_heater":i&&"operation_mode"!==i||h.push.apply(h,(0,r.A)(t.attributes.operation_list))}return i||h.push.apply(h,(0,r.A)(a.s7)),(0,r.A)(new Set(h))}},92900:function(e,t,i){i.d(t,{c:function(){return p}});i(44784),i(35748),i(34285),i(45519),i(95013);var n=i(94327),r=i(83510),s=i(6788),a=i(88341),o=i(25442),c=i(14523),u=i(45736),d=i(12275),l=i(85356),h={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};var _=0,f=new Map;function p(e,t,i){return function(e,t,i){var n;if(!i||e===c.Hh)return(0,u.a)("--history-unavailable-color",t);if(e===c.HV)return(0,u.a)("--history-unknown-color",t);var d=(0,o.mg)(i,e);if(d){var l=(0,u.a)(d,t);if(l){var _=(0,a.m)(i.entity_id),f=null===(n=h[_])||void 0===n?void 0:n[e];return f?(0,r.zm)((0,s.T)((0,r.Nc)((0,r.xp)(l)),f)):l}}}(e,t,i)||function(e,t,i){if(i){var r=(0,d.t)(i),s=(l.v[r]||"sensor"===r&&"enum"===i.attributes.device_class&&i.attributes.options||[]).indexOf(e);if(-1!==s)return(0,n.fI)(s,t)}}(e,t,i)||function(e,t){if(f.has(e))return f.get(e);var i=(0,n.fI)(_,t);return _++,f.set(e,i),i}(e,t)}},63002:function(e,t,i){i.a(e,async function(e,n){try{i.d(t,{$3:function(){return g},$O:function(){return H},$j:function(){return v},ED:function(){return c},JE:function(){return I},OQ:function(){return $},PU:function(){return O},Ph:function(){return m},Uf:function(){return S},W1:function(){return y},Wr:function(){return _},Z:function(){return l},gF:function(){return b},iY:function(){return w},jU:function(){return u},nN:function(){return x},p3:function(){return h},pJ:function(){return p},r_:function(){return d},sz:function(){return f}});var r=i(18202),s=(i(79827),i(65315),i(59023),i(45519),i(72652)),a=i(50654),o=e([a]);a=(o.then?(await o)():o)[0];var c=function(e){return e[e.NONE=0]="NONE",e[e.ARITHMETIC=1]="ARITHMETIC",e[e.CIRCULAR=2]="CIRCULAR",e}({}),u=59509==i.j?["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"]:null,d=["L","gal","ft³","m³","CCF","MCF"],l=e=>e.sendMessagePromise({type:"recorder/info"}),h=(e,t)=>e.callWS({type:"recorder/list_statistic_ids",statistic_type:t}),_=(e,t)=>e.callWS({type:"recorder/get_statistics_metadata",statistic_ids:t}),f=function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"hour",s=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;return e.callWS({type:"recorder/statistics_during_period",start_time:t.toISOString(),end_time:null==i?void 0:i.toISOString(),statistic_ids:n,period:r,units:s,types:a})},p=(e,t,i,n)=>e.callWS({type:"recorder/statistic_during_period",statistic_id:t,units:n,fixed_period:i.fixed_period?{start_time:i.fixed_period.start instanceof Date?i.fixed_period.start.toISOString():i.fixed_period.start,end_time:i.fixed_period.end instanceof Date?i.fixed_period.end.toISOString():i.fixed_period.end}:void 0,calendar:i.calendar?Object.assign(Object.assign({},"week"===i.calendar.period?{first_weekday:(0,a.DD)(e.locale).substring(0,3)}:{}),i.calendar):void 0,rolling_window:i.rolling_window}),m=e=>e.callWS({type:"recorder/validate_statistics"}),y=(e,t,i,n)=>e.callWS({type:"recorder/update_statistics_metadata",statistic_id:t,unit_of_measurement:i,unit_class:n}),g=(e,t)=>e.callWS({type:"recorder/clear_statistics",statistic_ids:t}),v=e=>{var t=null;if(!e)return null;var i,n=(0,r.A)(e);try{for(n.s();!(i=n.n()).done;){var s=i.value;null!==s.change&&void 0!==s.change&&(null===t?t=s.change:t+=s.change)}}catch(a){n.e(a)}finally{n.f()}return t},b=(e,t)=>{var i,n=null,s=(0,r.A)(t);try{for(s.s();!(i=s.n()).done;){var a=i.value;if(a in e){var o=v(e[a]);null!==o&&(null===n?n=o:n+=o)}}}catch(c){s.e(c)}finally{s.f()}return n},w=(e,t)=>e.some(e=>void 0!==e[t]&&null!==e[t]),k=["mean","min","max"],A=["sum","state","change"],x=(e,t)=>!(!k.includes(t)||0===e.mean_type)||!(!A.includes(t)||!e.has_sum),S=(e,t,i,n,r)=>{var s=new Date(i).toISOString();return e.callWS({type:"recorder/adjust_sum_statistics",statistic_id:t,start_time:s,adjustment:n,adjustment_unit_of_measurement:r})},H=(e,t,i)=>{var n=e.states[t];return n?(0,s.u)(n):(null==i?void 0:i.name)||t},I=(e,t,i)=>{var n,r;t&&(n=null===(r=e.states[t])||void 0===r?void 0:r.attributes.unit_of_measurement);return void 0===n?null==i?void 0:i.statistics_unit_of_measurement:n},$=e=>e.includes(":"),O=e=>e.callWS({type:"recorder/update_statistics_issues"});n()}catch(C){n(C)}})},18318:function(e,t,i){i.a(e,async function(e,n){try{i.r(t),i.d(t,{DEFAULT_HOURS_TO_SHOW:function(){return T},HuiHistoryGraphCard:function(){return j}});var r=i(98735),s=i(88486),a=i(62020),o=i(31802),c=i(21101),u=i(23180),d=i(87426),l=(i(46852),i(38606),i(35748),i(80178),i(65315),i(22416),i(37089),i(45519),i(5934),i(30536),i(95013),i(69868)),h=i(84922),_=i(11991),f=i(75907),p=i(26946),m=i(94372),y=i(47807),g=(i(94124),i(70490),i(42163),i(69006)),v=i(63002),b=i(3274),w=i(87916),k=i(8510),A=i(38177),x=e([y,v,g]);[y,v,g]=x.then?(await x)():x;var S,H,I,$,O,C=e=>e,T=24,j=function(e){function t(){var e;(0,a.A)(this,t);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=(0,c.A)(this,t,[].concat(n)))._names={},e._entityIds=[],e._entities=[],e._hoursToShow=T,e}return(0,u.A)(t,e),(0,o.A)(t,[{key:"getCardSize",value:function(){var e,t;return null!==(e=this._config)&&void 0!==e&&e.title?2:0+2*((null===(t=this._entityIds)||void 0===t?void 0:t.length)||1)}},{key:"getGridOptions",value:function(){return{columns:12,min_columns:6,min_rows:2}}},{key:"setConfig",value:function(e){if(!e.entities||!Array.isArray(e.entities))throw new Error("Entities need to be an array");if(!e.entities.length)throw new Error("You must include at least one entity");this._entities=e.entities?(0,A.L)(e.entities):[],this._entityIds=this._entities.map(e=>e.entity),this._hoursToShow=e.hours_to_show||T,this._config=e,this._computeNames()}},{key:"_computeNames",value:function(){this.hass&&this._config&&(this._names={},this._entities.forEach(e=>{var t=this.hass.states[e.entity];this._names[e.entity]=t?(0,w.v)(this.hass,t,e.name):e.entity}))}},{key:"willUpdate",value:function(e){(0,d.A)(t,"willUpdate",this,3)([e]),e.has("hass")&&this._computeNames()}},{key:"connectedCallback",value:function(){(0,d.A)(t,"connectedCallback",this,3)([]),this.hasUpdated&&this._subscribeHistory()}},{key:"disconnectedCallback",value:function(){(0,d.A)(t,"disconnectedCallback",this,3)([]),this._unsubscribeHistory()}},{key:"_subscribeHistory",value:(_=(0,s.A)((0,r.A)().m(function e(){var t,i;return(0,r.A)().w(function(e){for(;;)switch(e.n){case 0:if((0,p.x)(this.hass,"history")&&!this._subscribed){e.n=1;break}return e.a(2);case 1:return e.n=2,(0,b.KL)(this.hass);case 2:return t=e.v,i=t.numeric_device_classes,this._subscribed=(0,g.IQ)(this.hass,e=>{var t;this._subscribed&&(this._stateHistory=(0,g.Mm)(this.hass,e,this._entityIds,this.hass.localize,i,null===(t=this._config)||void 0===t?void 0:t.split_device_classes),this._mergeHistory())},this._hoursToShow,this._entityIds).catch(e=>{this._subscribed=void 0,this._error=e}),e.n=3,this._fetchStatistics(i);case 3:this._setRedrawTimer();case 4:return e.a(2)}},e,this)})),function(){return _.apply(this,arguments)})},{key:"_mergeHistory",value:function(){var e;this._stateHistory&&(this._history=(0,g.tG)(this._stateHistory,this._statisticsHistory,null===(e=this._config)||void 0===e?void 0:e.split_device_classes))}},{key:"_fetchStatistics",value:(l=(0,s.A)((0,r.A)().m(function e(t){var i,n,s,a;return(0,r.A)().w(function(e){for(;;)switch(e.n){case 0:return n=new Date,(s=new Date).setHours(s.getHours()-this._hoursToShow-1),e.n=1,(0,v.sz)(this.hass,s,n,this._entityIds,"hour",void 0,["mean","state"]);case 1:a=e.v,this._statisticsHistory=(0,g._1)(this.hass,a,this._entityIds,t,null===(i=this._config)||void 0===i?void 0:i.split_device_classes),this._mergeHistory();case 2:return e.a(2)}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"_redrawGraph",value:function(){this._history&&(this._history=Object.assign({},this._history))}},{key:"_setRedrawTimer",value:function(){clearInterval(this._interval),this._interval=window.setInterval(()=>this._redrawGraph(),6e4)}},{key:"_unsubscribeHistory",value:function(){clearInterval(this._interval),this._subscribed&&(this._subscribed.then(e=>null==e?void 0:e()),this._subscribed=void 0)}},{key:"shouldUpdate",value:function(e){return(0,k.pY)(this,e)||e.size>1||!e.has("hass")}},{key:"updated",value:function(e){if((0,d.A)(t,"updated",this,3)([e]),this._config&&this.hass&&this._hoursToShow&&this._entityIds.length&&(e.has("_config")||e.has("hass"))){var i=e.get("_config");!e.has("_config")||(null==i?void 0:i.entities)===this._config.entities&&(null==i?void 0:i.hours_to_show)===this._config.hours_to_show||(this._unsubscribeHistory(),this._subscribeHistory())}}},{key:"render",value:function(){var e,t,i,n;if(!this.hass||!this._config)return h.s6;var r=new Date;r.setHours(r.getHours()-this._hoursToShow);var s=`/history?${(0,m.KH)({entity_id:this._entityIds.join(","),start_date:r.toISOString()})}`,a=null!==(e=null===(t=this._config.grid_options)||void 0===t?void 0:t.columns)&&void 0!==e?e:12,o="number"==typeof a&&a<=12,c="number"==typeof(null===(i=this._config.grid_options)||void 0===i?void 0:i.rows);return(0,h.qy)(S||(S=C` <ha-card> ${0} <div class="content ${0}"> ${0} </div> </ha-card> `),this._config.title?(0,h.qy)(H||(H=C` <h1 class="card-header"> ${0} <a href="${0}"><ha-icon-next></ha-icon-next></a> </h1> `),this._config.title,s):h.s6,(0,f.H)({"has-header":!!this._config.title,"has-rows":!(null===(n=this._config.grid_options)||void 0===n||!n.rows),"has-height":c}),this._error?(0,h.qy)(I||(I=C` <ha-alert alert-type="error"> ${0}: ${0} </ha-alert> `),this.hass.localize("ui.components.history_charts.error"),this._error.message||this._error.code):(0,h.qy)($||($=C` <state-history-charts .hass="${0}" .isLoadingData="${0}" .historyData="${0}" .names="${0}" up-to-now .hoursToShow="${0}" .showNames="${0}" .logarithmicScale="${0}" .minYAxis="${0}" .maxYAxis="${0}" .fitYData="${0}" .height="${0}" .narrow="${0}" .expandLegend="${0}"></state-history-charts> `),this.hass,!this._history,this._history,this._names,this._hoursToShow,void 0===this._config.show_names||this._config.show_names,this._config.logarithmic_scale||!1,this._config.min_y_axis,this._config.max_y_axis,this._config.fit_y_data||!1,c?"100%":void 0,o,this._config.expand_legend))}}],[{key:"getConfigElement",value:(n=(0,s.A)((0,r.A)().m(function e(){return(0,r.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Promise.all([i.e("42153"),i.e("30199"),i.e("37620"),i.e("39059"),i.e("61717"),i.e("10086"),i.e("78525"),i.e("15116"),i.e("30856"),i.e("2934"),i.e("44441")]).then(i.bind(i,89227));case 1:return e.a(2,document.createElement("hui-history-graph-card-editor"))}},e)})),function(){return n.apply(this,arguments)})},{key:"getStubConfig",value:function(){return{type:"history-graph",entities:["sun.sun"]}}}]);var n,l,_}(h.WF);j.styles=(0,h.AH)(O||(O=C`ha-card{display:flex;flex-direction:column;height:100%}.card-header{justify-content:space-between;display:flex;padding-bottom:0}.card-header ha-icon-next{--mdc-icon-button-size:24px;line-height:24px;color:var(--primary-text-color)}.content{padding:0 16px 8px;flex:1;overflow:hidden}.has-header{padding-top:0}state-history-charts{--timeline-top-margin:16px}.has-height state-history-charts{height:100%}.has-rows{--chart-max-height:100%}`)),(0,l.__decorate)([(0,_.MZ)({attribute:!1})],j.prototype,"hass",void 0),(0,l.__decorate)([(0,_.wk)()],j.prototype,"_history",void 0),(0,l.__decorate)([(0,_.wk)()],j.prototype,"_statisticsHistory",void 0),(0,l.__decorate)([(0,_.wk)()],j.prototype,"_config",void 0),(0,l.__decorate)([(0,_.wk)()],j.prototype,"_error",void 0),j=(0,l.__decorate)([(0,_.EM)("hui-history-graph-card")],j),n()}catch(E){n(E)}})},74879:function(e,t,i){var n=i(87642),r=i(36196),s=i(48630),a=i(85456),o=TypeError,c=Object.defineProperty,u=r.self!==r;try{if(a){var d=Object.getOwnPropertyDescriptor(r,"self");!u&&d&&d.get&&d.enumerable||s(r,"self",{get:function(){return r},set:function(e){if(this!==r)throw new o("Illegal invocation");c(r,"self",{value:e,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else n({global:!0,simple:!0,forced:u},{self:r})}catch(l){}},28829:function(e,t,i){i.d(t,{b:function(){return r}});var n=i(19490);function r(e,t){return+(0,n.a)(e)-+(0,n.a)(t)}},74758:function(e,t,i){i.d(t,{o:function(){return a}});var n=i(48869),r=i(27554),s=i(28829);function a(e,t,i){var a=(0,s.b)(e,t)/r.Cg;return(0,n.u)(null==i?void 0:i.roundingMethod)(a)}}}]);
//# sourceMappingURL=15491.53de7a2069639a57.js.map