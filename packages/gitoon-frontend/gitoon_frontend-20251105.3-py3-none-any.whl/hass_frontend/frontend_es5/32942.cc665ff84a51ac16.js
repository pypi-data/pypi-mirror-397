"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["32942"],{94029:function(e,t,a){a.a(e,async function(e,n){try{a.d(t,{K:function(){return d}});var i=a(77489),r=a(65940),o=a(22989),s=e([i,o]);[i,o]=s.then?(await s)():s;var u=(0,r.A)(e=>new Intl.RelativeTimeFormat(e.language,{numeric:"auto"})),d=function(e,t,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=(0,o.x)(e,a,t);return n?u(t).format(i.value,i.unit):Intl.NumberFormat(t.language,{style:"unit",unit:i.unit,unitDisplay:"long"}).format(Math.abs(i.value))};n()}catch(l){n(l)}})},35297:function(e,t,a){a.d(t,{Z:function(){return n}});a(98522);var n=e=>e.charAt(0).toUpperCase()+e.slice(1)},22989:function(e,t,a){a.a(e,async function(e,n){try{a.d(t,{x:function(){return f}});var i=a(41484),r=a(88258),o=a(42794),s=a(50654),u=e([s]);s=(u.then?(await u)():u)[0];var d=1e3,l=60,c=60*l;function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=Object.assign(Object.assign({},h),n||{}),v=(+e-+t)/d;if(Math.abs(v)<u.second)return{value:Math.round(v),unit:"second"};var f=v/l;if(Math.abs(f)<u.minute)return{value:Math.round(f),unit:"minute"};var b=v/c;if(Math.abs(b)<u.hour)return{value:Math.round(b),unit:"hour"};var _=new Date(e),p=new Date(t);_.setHours(0,0,0,0),p.setHours(0,0,0,0);var m=(0,i.c)(_,p);if(0===m)return{value:Math.round(b),unit:"hour"};if(Math.abs(m)<u.day)return{value:m,unit:"day"};var y=(0,s.PE)(a),g=(0,r.k)(_,{weekStartsOn:y}),k=(0,r.k)(p,{weekStartsOn:y}),w=(0,o.I)(g,k);if(0===w)return{value:m,unit:"day"};if(Math.abs(w)<u.week)return{value:w,unit:"week"};var A=_.getFullYear()-p.getFullYear(),M=12*A+_.getMonth()-p.getMonth();return 0===M?{value:w,unit:"week"}:Math.abs(M)<u.month||0===A?{value:M,unit:"month"}:{value:Math.round(A),unit:"year"}}var h={second:45,minute:45,hour:22,day:5,week:4,month:11};n()}catch(v){n(v)}})},10547:function(e,t,a){var n,i,r,o=a(62020),s=a(31802),u=a(21101),d=a(87426),l=a(23180),c=a(69868),h=a(54500),v=a(2909),f=a(11991),b=a(84922),_=a(91541),p=e=>e,m=function(e){function t(){return(0,o.A)(this,t),(0,u.A)(this,t,arguments)}return(0,l.A)(t,e),(0,s.A)(t,[{key:"firstUpdated",value:function(e){(0,d.A)(t,"firstUpdated",this,3)([e]),this.style.setProperty("--mdc-theme-secondary","var(--primary-color)")}}])}(h.n);m.styles=[v.R,(0,b.AH)(n||(n=p`:host{--mdc-typography-button-text-transform:none;--mdc-typography-button-font-size:var(--ha-font-size-l);--mdc-typography-button-font-family:var(--ha-font-family-body);--mdc-typography-button-font-weight:var(--ha-font-weight-medium)}:host .mdc-fab--extended{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab.mdc-fab--extended .ripple{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab--extended .mdc-fab__icon{margin-inline-start:-8px;margin-inline-end:12px;direction:var(--direction)}:disabled{--mdc-theme-secondary:var(--disabled-text-color);pointer-events:none}`)),"rtl"===_.G.document.dir?(0,b.AH)(i||(i=p`:host .mdc-fab--extended .mdc-fab__icon{direction:rtl}`)):(0,b.AH)(r||(r=p``))],m=(0,c.__decorate)([(0,f.EM)("ha-fab")],m)},28652:function(e,t,a){a.a(e,async function(e,t){try{var n=a(62020),i=a(31802),r=a(21101),o=a(23180),s=a(87426),u=(a(38606),a(69868)),d=a(22103),l=a(84922),c=a(11991),h=a(94029),v=a(35297),f=e([h]);h=(f.then?(await f)():f)[0];var b=function(e){function t(){var e;(0,n.A)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=(0,r.A)(this,t,[].concat(i))).capitalize=!1,e}return(0,o.A)(t,e),(0,i.A)(t,[{key:"disconnectedCallback",value:function(){(0,s.A)(t,"disconnectedCallback",this,3)([]),this._clearInterval()}},{key:"connectedCallback",value:function(){(0,s.A)(t,"connectedCallback",this,3)([]),this.datetime&&this._startInterval()}},{key:"createRenderRoot",value:function(){return this}},{key:"firstUpdated",value:function(e){(0,s.A)(t,"firstUpdated",this,3)([e]),this._updateRelative()}},{key:"update",value:function(e){(0,s.A)(t,"update",this,3)([e]),this._updateRelative()}},{key:"_clearInterval",value:function(){this._interval&&(window.clearInterval(this._interval),this._interval=void 0)}},{key:"_startInterval",value:function(){this._clearInterval(),this._interval=window.setInterval(()=>this._updateRelative(),6e4)}},{key:"_updateRelative",value:function(){if(this.datetime){var e="string"==typeof this.datetime?(0,d.H)(this.datetime):this.datetime,t=(0,h.K)(e,this.hass.locale);this.innerHTML=this.capitalize?(0,v.Z)(t):t}else this.innerHTML=this.hass.localize("ui.components.relative_time.never")}}])}(l.mN);(0,u.__decorate)([(0,c.MZ)({attribute:!1})],b.prototype,"hass",void 0),(0,u.__decorate)([(0,c.MZ)({attribute:!1})],b.prototype,"datetime",void 0),(0,u.__decorate)([(0,c.MZ)({type:Boolean})],b.prototype,"capitalize",void 0),b=(0,u.__decorate)([(0,c.EM)("ha-relative-time")],b),t()}catch(_){t(_)}})},3980:function(e,t,a){a.d(t,{Ht:function(){return d},gO:function(){return l},mj:function(){return s},wj:function(){return c}});var n=a(73983),i=a(18202),r=(a(74048),a(99342),a(64654),a(45519),a(5934),a(47308)),o=(e,t)=>e.subscribeMessage(e=>{var a=Object.assign({},t.state||{});if(e.add){var n,r=(0,i.A)(e.add);try{for(r.s();!(n=r.n()).done;){var o=n.value;a[o.source]=o}}catch(d){r.e(d)}finally{r.f()}}if(e.remove){var s,u=(0,i.A)(e.remove);try{for(u.s();!(s=u.n()).done;){delete a[s.value.source]}}catch(d){u.e(d)}finally{u.f()}}t.setState(a,!0)},{type:"bluetooth/subscribe_scanner_details"}),s=(e,t)=>(0,r.N)("_bluetoothScannerDetails",()=>Promise.resolve({}),o,e,t),u=(e,t)=>e.subscribeMessage(e=>{var a=(0,n.A)(t.state||[]);if(e.add){var r,o=(0,i.A)(e.add);try{var s=function(){var e=r.value,t=a.findIndex(t=>t.address===e.address);-1===t?a.push(e):a[t]=e};for(o.s();!(r=o.n()).done;)s()}catch(f){o.e(f)}finally{o.f()}}if(e.change){var u,d=(0,i.A)(e.change);try{var l=function(){var e=u.value,t=a.findIndex(t=>t.address===e.address);-1!==t&&(a[t]=e)};for(d.s();!(u=d.n()).done;)l()}catch(f){d.e(f)}finally{d.f()}}if(e.remove){var c,h=(0,i.A)(e.remove);try{var v=function(){var e=c.value,t=a.findIndex(t=>t.address===e.address);-1!==t&&a.splice(t,1)};for(h.s();!(c=h.n()).done;)v()}catch(f){h.e(f)}finally{h.f()}}t.setState(a,!0)},{type:"bluetooth/subscribe_advertisements"}),d=(e,t)=>(0,r.N)("_bluetoothDeviceRows",()=>Promise.resolve([]),u,e,t),l=(e,t,a)=>{var n={type:"bluetooth/subscribe_connection_allocations"};return a&&(n.config_entry_id=a),e.subscribeMessage(e=>t(e),n)},c=(e,t,a)=>{var n={type:"bluetooth/subscribe_scanner_state"};return a&&(n.config_entry_id=a),e.subscribeMessage(e=>t(e),n)}},43997:function(e,t,a){a.a(e,async function(e,n){try{a.r(t),a.d(t,{BluetoothAdvertisementMonitorPanel:function(){return x},bluetoothAdvertisementMonitorTabs:function(){return C}});var i=a(62020),r=a(31802),o=a(21101),s=a(23180),u=a(87426),d=(a(38606),a(96956),a(44941),a(35748),a(80178),a(65315),a(837),a(84136),a(37089),a(52885),a(45519),a(74774),a(69868)),l=a(84922),c=a(11991),h=a(65940),v=a(20051),f=a(94372),b=(a(10547),a(9058),a(28652)),_=a(3980),p=a(68891),m=a(50809),y=a(87511),g=e([b,p]);[b,p]=g.then?(await g)():g;var k,w,A,M=e=>e,C=[{translationKey:"ui.panel.config.bluetooth.advertisement_monitor",path:"advertisement-monitor"},{translationKey:"ui.panel.config.bluetooth.visualization",path:"visualization"}],x=function(e){function t(){var e;(0,i.A)(this,t);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=(0,o.A)(this,t,[].concat(n))).narrow=!1,e.isWide=!1,e._data=[],e._scanners={},e._sourceDevices={},e._activeGrouping="source",e._activeCollapsed=[],e._columns=(0,h.A)(t=>({address:{title:t("ui.panel.config.bluetooth.address"),sortable:!0,filterable:!0,showNarrow:!0,main:!0,hideable:!1,moveable:!1,direction:"asc",flex:1},name:{title:t("ui.panel.config.bluetooth.name"),filterable:!0,sortable:!0},device:{title:t("ui.panel.config.bluetooth.device"),filterable:!0,sortable:!0,template:e=>(0,l.qy)(k||(k=M`${0}`),e.device||"-")},source:{title:t("ui.panel.config.bluetooth.source"),filterable:!0,sortable:!0,groupable:!0},source_address:{title:t("ui.panel.config.bluetooth.source_address"),filterable:!0,sortable:!0,defaultHidden:!0},time:{title:t("ui.panel.config.bluetooth.updated"),filterable:!1,sortable:!0,defaultHidden:!1,template:t=>(0,l.qy)(w||(w=M`<ha-relative-time .hass="${0}" .datetime="${0}" capitalize></ha-relative-time>`),e.hass,t.datetime)},rssi:{title:t("ui.panel.config.bluetooth.rssi"),type:"numeric",maxWidth:"60px",sortable:!0}})),e._dataWithNamedSourceAndIds=(0,h.A)(t=>t.map(t=>{var a=e._sourceDevices[t.address],n=e._sourceDevices[t.source],i=e._scanners[t.source];return Object.assign(Object.assign({},t),{},{id:t.address,source_address:t.source,source:(null==n?void 0:n.name_by_user)||(null==n?void 0:n.name)||(null==i?void 0:i.name)||t.source,device:(null==a?void 0:a.name_by_user)||(null==a?void 0:a.name)||void 0,datetime:new Date(1e3*t.time)})})),e}return(0,s.A)(t,e),(0,r.A)(t,[{key:"connectedCallback",value:function(){if((0,u.A)(t,"connectedCallback",this,3)([]),this.hass){this._unsub_advertisements=(0,_.Ht)(this.hass.connection,e=>{this._data=e}),this._unsub_scanners=(0,_.mj)(this.hass.connection,e=>{this._scanners=e});var e=Object.values(this.hass.devices).filter(e=>e.connections.find(e=>"bluetooth"===e[0]));this._sourceDevices=Object.fromEntries(e.map(e=>[e.connections.find(e=>"bluetooth"===e[0])[1],e]))}}},{key:"disconnectedCallback",value:function(){(0,u.A)(t,"disconnectedCallback",this,3)([]),this._unsub_advertisements&&(this._unsub_advertisements(),this._unsub_advertisements=void 0),this._unsub_scanners&&(this._unsub_scanners(),this._unsub_scanners=void 0)}},{key:"willUpdate",value:function(e){if((0,u.A)(t,"willUpdate",this,3)([e]),!this.hasUpdated){var a=(0,f.px)().address;a&&(this.address=a)}}},{key:"render",value:function(){return(0,l.qy)(A||(A=M` <hass-tabs-subpage-data-table .hass="${0}" .narrow="${0}" .route="${0}" .columns="${0}" .data="${0}" .noDataText="${0}" @row-click="${0}" .initialGroupColumn="${0}" .initialCollapsedGroups="${0}" @grouping-changed="${0}" @collapsed-changed="${0}" filter="${0}" clickable .tabs="${0}"></hass-tabs-subpage-data-table> `),this.hass,this.narrow,this.route,this._columns(this.hass.localize),this._dataWithNamedSourceAndIds(this._data),this.hass.localize("ui.panel.config.bluetooth.no_advertisements_found"),this._handleRowClicked,this._activeGrouping,this._activeCollapsed,this._handleGroupingChanged,this._handleCollapseChanged,this.address||"",C)}},{key:"_handleGroupingChanged",value:function(e){this._activeGrouping=e.detail.value}},{key:"_handleCollapseChanged",value:function(e){this._activeCollapsed=e.detail.value}},{key:"_handleRowClicked",value:function(e){var t=this._data.find(t=>t.address===e.detail.id);(0,y.a)(this,{entry:t})}}])}(l.WF);x.styles=m.RF,(0,d.__decorate)([(0,c.MZ)({attribute:!1})],x.prototype,"hass",void 0),(0,d.__decorate)([(0,c.MZ)({attribute:!1})],x.prototype,"route",void 0),(0,d.__decorate)([(0,c.MZ)({attribute:!1})],x.prototype,"address",void 0),(0,d.__decorate)([(0,c.MZ)({type:Boolean})],x.prototype,"narrow",void 0),(0,d.__decorate)([(0,c.MZ)({attribute:"is-wide",type:Boolean})],x.prototype,"isWide",void 0),(0,d.__decorate)([(0,c.wk)()],x.prototype,"_data",void 0),(0,d.__decorate)([(0,c.wk)()],x.prototype,"_scanners",void 0),(0,d.__decorate)([(0,c.wk)()],x.prototype,"_sourceDevices",void 0),(0,d.__decorate)([(0,v.I)({key:"bluetooth-advertisement-table-grouping",state:!1,subscribe:!1})],x.prototype,"_activeGrouping",void 0),(0,d.__decorate)([(0,v.I)({key:"bluetooth-advertisement-table-collapsed",state:!1,subscribe:!1})],x.prototype,"_activeCollapsed",void 0),x=(0,d.__decorate)([(0,c.EM)("bluetooth-advertisement-monitor")],x),n()}catch(I){n(I)}})},87511:function(e,t,a){a.d(t,{a:function(){return r}});a(35748),a(45519),a(5934),a(95013);var n=a(44017),i=()=>a.e("12266").then(a.bind(a,56977)),r=(e,t)=>{(0,n.r)(e,"show-dialog",{dialogTag:"dialog-bluetooth-device-info",dialogImport:i,dialogParams:t})}}}]);
//# sourceMappingURL=32942.cc665ff84a51ac16.js.map