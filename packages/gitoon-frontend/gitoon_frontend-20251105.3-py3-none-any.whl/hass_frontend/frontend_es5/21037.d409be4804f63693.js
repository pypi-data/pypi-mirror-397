"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["21037"],{70364:function(t,i,e){e.d(i,{s:function(){return n}});var n=t=>!(!t.detail.selected||"property"!==t.detail.source)&&(t.currentTarget.selected=!1,!0)},11274:function(t,i,e){e.d(i,{I$:function(){return d},I3:function(){return y},PV:function(){return m},Po:function(){return h},RK:function(){return b},TB:function(){return u},TH:function(){return $},T_:function(){return f},am:function(){return s},jR:function(){return l},ng:function(){return c},nx:function(){return v},o9:function(){return r}});e(79827);var n=e(72652),a=e(26539),o=e(59569),s=(t,i)=>t.callWS({type:"device_automation/action/list",device_id:i}),c=(t,i)=>t.callWS({type:"device_automation/condition/list",device_id:i}),r=(t,i)=>t.callWS({type:"device_automation/trigger/list",device_id:i}).then(t=>(0,a.vO)(t)),l=(t,i)=>t.callWS({type:"device_automation/action/capabilities",action:i}),d=(t,i)=>t.callWS({type:"device_automation/condition/capabilities",condition:i}),u=(t,i)=>t.callWS({type:"device_automation/trigger/capabilities",trigger:i}),p=["device_id","domain","entity_id","type","subtype","event","condition","trigger"],h=(t,i,e)=>{if(typeof i!=typeof e)return!1;for(var n in i){var a,o;if(p.includes(n))if("entity_id"!==n||(null===(a=i[n])||void 0===a?void 0:a.includes("."))===(null===(o=e[n])||void 0===o?void 0:o.includes("."))){if(!Object.is(i[n],e[n]))return!1}else if(!g(t,i[n],e[n]))return!1}for(var s in e){var c,r;if(p.includes(s))if("entity_id"!==s||(null===(c=i[s])||void 0===c?void 0:c.includes("."))===(null===(r=e[s])||void 0===r?void 0:r.includes("."))){if(!Object.is(i[s],e[s]))return!1}else if(!g(t,i[s],e[s]))return!1}return!0},g=(t,i,e)=>{if(!i||!e)return!1;if(i.includes(".")){var n=(0,o.Ox)(t)[i];if(!n)return!1;i=n.id}if(e.includes(".")){var a=(0,o.Ox)(t)[e];if(!a)return!1;e=a.id}return i===e},_=(t,i,e)=>{if(!e)return"<"+t.localize("ui.panel.config.automation.editor.unknown_entity")+">";if(e.includes(".")){var a=t.states[e];return a?(0,n.u)(a):e}var s=(0,o.P9)(i)[e];return s?(0,o.jh)(t,s)||e:"<"+t.localize("ui.panel.config.automation.editor.unknown_entity")+">"},m=(t,i,e)=>t.localize(`component.${e.domain}.device_automation.action_type.${e.type}`,{entity_name:_(t,i,e.entity_id),subtype:e.subtype?t.localize(`component.${e.domain}.device_automation.action_subtype.${e.subtype}`)||e.subtype:""})||(e.subtype?`"${e.subtype}" ${e.type}`:e.type),y=(t,i,e)=>t.localize(`component.${e.domain}.device_automation.condition_type.${e.type}`,{entity_name:_(t,i,e.entity_id),subtype:e.subtype?t.localize(`component.${e.domain}.device_automation.condition_subtype.${e.subtype}`)||e.subtype:""})||(e.subtype?`"${e.subtype}" ${e.type}`:e.type),v=(t,i,e)=>t.localize(`component.${e.domain}.device_automation.trigger_type.${e.type}`,{entity_name:_(t,i,e.entity_id),subtype:e.subtype?t.localize(`component.${e.domain}.device_automation.trigger_subtype.${e.subtype}`)||e.subtype:""})||(e.subtype?`"${e.subtype}" ${e.type}`:e.type),f=(t,i)=>e=>t.localize(`component.${i.domain}.device_automation.extra_fields.${e.name}`)||e.name,$=(t,i)=>e=>t.localize(`component.${i.domain}.device_automation.extra_fields_descriptions.${e.name}`),b=(t,i)=>{var e,n,a,o;return null===(e=t.metadata)||void 0===e||!e.secondary||null!==(n=i.metadata)&&void 0!==n&&n.secondary?null!==(a=t.metadata)&&void 0!==a&&a.secondary||null===(o=i.metadata)||void 0===o||!o.secondary?0:-1:1}},1372:function(t,i,e){e.r(i),e.d(i,{DialogDeviceAutomation:function(){return V}});var n,a,o,s,c,r,l=e(98735),d=e(88486),u=e(62020),p=e(31802),h=e(21101),g=e(23180),_=e(87426),m=(e(38606),e(35058),e(69868)),y=e(84922),v=e(11991),f=e(44017),$=e(70364),b=e(68940),A=(e(42163),e(77510),e(14532),e(26539)),w=e(11274),C=e(42699),k=e(50809),H=t=>t,V=function(t){function i(){var t;(0,u.A)(this,i);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(t=(0,h.A)(this,i,[].concat(n)))._triggers=[],t._conditions=[],t._actions=[],t._handleRowClick=i=>{if((0,$.s)(i)&&t._params){var e=i.currentTarget.type,n=t._params.script;if(t.closeDialog(),n){var a={};"action"===e&&(a.sequence=[t._actions[0]]),(0,C.AM)(a,!0)}else{var o={};"trigger"===e&&(o.triggers=[t._triggers[0]]),"condition"===e&&(o.conditions=[t._conditions[0]]),"action"===e&&(o.actions=[t._actions[0]]),(0,A.mX)(o,!0)}}},t}return(0,g.A)(i,t),(0,p.A)(i,[{key:"showDialog",value:(e=(0,d.A)((0,l.A)().m(function t(i){return(0,l.A)().w(function(t){for(;;)switch(t.n){case 0:return this._params=i,t.n=1,this.updateComplete;case 1:return t.a(2)}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"closeDialog",value:function(){this._params=void 0,(0,f.r)(this,"dialog-closed",{dialog:this.localName})}},{key:"firstUpdated",value:function(t){(0,_.A)(i,"firstUpdated",this,3)([t]),this.hass.loadBackendTranslation("device_automation")}},{key:"updated",value:function(t){if((0,_.A)(i,"updated",this,3)([t]),t.has("_params")&&(this._triggers=[],this._conditions=[],this._actions=[],this._params)){var e=this._params,n=e.device,a=e.script;(0,w.am)(this.hass,n.id).then(t=>{this._actions=t.sort(w.RK)}),a||((0,w.o9)(this.hass,n.id).then(t=>{this._triggers=t.sort(w.RK)}),(0,w.ng)(this.hass,n.id).then(t=>{this._conditions=t.sort(w.RK)}))}}},{key:"render",value:function(){if(!this._params)return y.s6;var t=this._params.script?"script":"automation",i=this.hass.localize(`ui.panel.config.devices.${t}.create`,{type:this.hass.localize(`ui.panel.config.devices.type.${this._params.device.entry_type||"device"}`)});return(0,y.qy)(n||(n=H` <ha-dialog open hideActions @closed="${0}" .heading="${0}"> <ha-list innerRole="listbox" itemRoles="option" innerAriaLabel="Create new automation" rootTabbable dialogInitialFocus> ${0} ${0} ${0} ${0} <ha-list-item hasmeta twoline graphic="icon" @request-selected="${0}"> <ha-svg-icon slot="graphic" .path="${0}"></ha-svg-icon> ${0} <span slot="secondary"> ${0} </span> <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> </ha-list> </ha-dialog> `),this.closeDialog,(0,b.l)(this.hass,i),this._triggers.length?(0,y.qy)(a||(a=H` <ha-list-item hasmeta twoline graphic="icon" .type="${0}" @request-selected="${0}"> <ha-svg-icon slot="graphic" .path="${0}"></ha-svg-icon> ${0} <span slot="secondary"> ${0} </span> <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> `),"trigger",this._handleRowClick,"M10,9A1,1 0 0,1 11,8A1,1 0 0,1 12,9V13.47L13.21,13.6L18.15,15.79C18.68,16.03 19,16.56 19,17.14V21.5C18.97,22.32 18.32,22.97 17.5,23H11C10.62,23 10.26,22.85 10,22.57L5.1,18.37L5.84,17.6C6.03,17.39 6.3,17.28 6.58,17.28H6.8L10,19V9M11,5A4,4 0 0,1 15,9C15,10.5 14.2,11.77 13,12.46V11.24C13.61,10.69 14,9.89 14,9A3,3 0 0,0 11,6A3,3 0 0,0 8,9C8,9.89 8.39,10.69 9,11.24V12.46C7.8,11.77 7,10.5 7,9A4,4 0 0,1 11,5Z",this.hass.localize("ui.panel.config.devices.automation.triggers.title"),this.hass.localize("ui.panel.config.devices.automation.triggers.description")):y.s6,this._conditions.length?(0,y.qy)(o||(o=H` <ha-list-item hasmeta twoline graphic="icon" .type="${0}" @request-selected="${0}"> <ha-svg-icon slot="graphic" .path="${0}"></ha-svg-icon> ${0} <span slot="secondary"> ${0} </span> <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> `),"condition",this._handleRowClick,"M4 2A2 2 0 0 0 2 4V12H4V8H6V12H8V4A2 2 0 0 0 6 2H4M4 4H6V6H4M22 15.5V14A2 2 0 0 0 20 12H16V22H20A2 2 0 0 0 22 20V18.5A1.54 1.54 0 0 0 20.5 17A1.54 1.54 0 0 0 22 15.5M20 20H18V18H20V20M20 16H18V14H20M5.79 21.61L4.21 20.39L18.21 2.39L19.79 3.61Z",this.hass.localize("ui.panel.config.devices.automation.conditions.title"),this.hass.localize("ui.panel.config.devices.automation.conditions.description")):y.s6,this._actions.length?(0,y.qy)(s||(s=H` <ha-list-item hasmeta twoline graphic="icon" .type="${0}" @request-selected="${0}"> <ha-svg-icon slot="graphic" .path="${0}"></ha-svg-icon> ${0} <span slot="secondary"> ${0} </span> <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> `),"action",this._handleRowClick,"M12,5A2,2 0 0,1 14,7C14,7.24 13.96,7.47 13.88,7.69C17.95,8.5 21,11.91 21,16H3C3,11.91 6.05,8.5 10.12,7.69C10.04,7.47 10,7.24 10,7A2,2 0 0,1 12,5M22,19H2V17H22V19Z",this.hass.localize(`ui.panel.config.devices.${t}.actions.title`),this.hass.localize(`ui.panel.config.devices.${t}.actions.description`)):y.s6,this._triggers.length||this._conditions.length||this._actions.length?(0,y.qy)(c||(c=H`<li divider role="separator"></li>`)):y.s6,this._handleRowClick,"M14.06,9L15,9.94L5.92,19H5V18.08L14.06,9M17.66,3C17.41,3 17.15,3.1 16.96,3.29L15.13,5.12L18.88,8.87L20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3M14.06,6.19L3,17.25V21H6.75L17.81,9.94L14.06,6.19Z",this.hass.localize(`ui.panel.config.devices.${t}.new.title`),this.hass.localize(`ui.panel.config.devices.${t}.new.description`))}}],[{key:"styles",get:function(){return[k.RF,k.nA,(0,y.AH)(r||(r=H`ha-dialog{--dialog-content-padding:0;--mdc-dialog-max-height:60vh}@media all and (min-width:550px){ha-dialog{--mdc-dialog-min-width:500px}}ha-icon-next{width:24px}`))]}}]);var e}(y.WF);(0,m.__decorate)([(0,v.MZ)({attribute:!1})],V.prototype,"hass",void 0),(0,m.__decorate)([(0,v.wk)()],V.prototype,"_triggers",void 0),(0,m.__decorate)([(0,v.wk)()],V.prototype,"_conditions",void 0),(0,m.__decorate)([(0,v.wk)()],V.prototype,"_actions",void 0),(0,m.__decorate)([(0,v.wk)()],V.prototype,"_params",void 0),V=(0,m.__decorate)([(0,v.EM)("dialog-device-automation")],V)}}]);
//# sourceMappingURL=21037.d409be4804f63693.js.map