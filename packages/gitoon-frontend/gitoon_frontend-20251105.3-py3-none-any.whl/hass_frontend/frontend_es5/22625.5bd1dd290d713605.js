"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["22625"],{4472:function(e,t,i){i.d(t,{KT:function(){return w},Bi:function(){return b},ZI:function(){return _},Yp:function(){return E}});var n=i(18202),r=i(15243),a=i(73983),s=(i(38606),i(96956),i(44941),i(79827),i(35748),i(80178),i(99342),i(35058),i(86149),i(65315),i(837),i(84136),i(22416),i(37089),i(29726),i(45519),i(74774),i(64587),i(88238),i(34536),i(16257),i(20152),i(44711),i(72108),i(77030),i(39118),i(30536),i(95013),i(23800)),o=i(88341),l=i(12275),d=i(72652),u=i(50231),p=i(24730),y=i(9171),c=i(61964),v=i(73779),h=i(47225),f=i(87916),g=new Set(["ai_task","automation","configurator","device_tracker","event","geo_location","notify","persistent_notification","script","sun","tag","todo","zone"].concat((0,a.A)(s.gt))),m=new Set(["backup","mobile_app"]),_=(e,t)=>Object.assign({type:"grid",cards:e.map(e=>({type:"tile",entity:e,show_entity_picture:["camera","image","person"].includes((0,o.m)(e))||void 0}))},t),b=function(e,t,i){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=[],y=e.states,c=[],v=i.title?i.title.toLowerCase():void 0,h=[],g=(0,n.A)(t);try{for(g.s();!(r=g.n()).done;){var m=r.value,_=y[m],w=(0,o.m)(m);if("alarm_control_panel"===w){var E={type:"alarm-panel",entity:m};l.push(E)}else if("camera"===w){var A={type:"picture-entity",entity:m};l.push(A)}else if("image"===w){var k={type:"picture",image_entity:m};l.push(k)}else if("climate"===w){var j,O,x,C={type:"thermostat",entity:m,features:(null!==(j=null===(O=y[m])||void 0===O||null===(O=O.attributes)||void 0===O||null===(O=O.hvac_modes)||void 0===O?void 0:O.length)&&void 0!==j?j:0)>1?[{type:"climate-hvac-modes",hvac_modes:null===(x=y[m])||void 0===x||null===(x=x.attributes)||void 0===x?void 0:x.hvac_modes}]:void 0};l.push(C)}else if("humidifier"===w){var W={type:"humidifier",entity:m,features:[{type:"humidifier-toggle"}]};l.push(W)}else if("media_player"===w){var L={type:"media-control",entity:m};l.push(L)}else if("plant"===w){var $={type:"plant-status",entity:m};l.push($)}else if("weather"===w){var S={type:"weather-forecast",entity:m,show_forecast:!1};l.push(S)}else if(!a||"scene"!==w&&"script"!==w){var z=void 0,I=v&&_&&(z=(0,u.p)((0,d.u)(_),v))?{entity:m,name:z}:m;c.push(I)}else{var P={entity:m,show_icon:!0,show_name:!0},V=void 0;v&&_&&(V=(0,u.p)((0,d.u)(_),v))&&(P.name=V),h.push(P)}}}catch(B){g.e(B)}finally{g.f()}if(c.sort((t,i)=>{var n="string"==typeof t?t:t.entity,r="string"==typeof i?i:i.entity,a=s.JF.includes((0,o.m)(n))?"sensor":"control";return a!==(s.JF.includes((0,o.m)(r))?"sensor":"control")?"sensor"===a?1:-1:(0,p.xL)("string"==typeof t?y[t]?(0,d.u)(y[t]):"":y[t.entity]?(0,f.v)(e,y[t.entity],t.name):"","string"==typeof i?y[i]?(0,d.u)(y[i]):"":y[i.entity]?(0,f.v)(e,y[i.entity],i.name):"")}),0===c.length&&h.length>0)return b(e,t,i,!1);if(c.length>0||h.length>0){var q=Object.assign({type:"entities",entities:c},i);h.length>0&&(q.footer={type:"buttons",entities:h}),l.unshift(q)}return l.length<2?l:[{type:"grid",square:!1,columns:1,cards:l}]},w=(e,t)=>{var i,r=[],a=(0,n.A)(t);try{for(a.s();!(i=a.n()).done;){var s={type:"entity",entity:i.value};r.push(s)}}catch(o){a.e(o)}finally{a.f()}return r},E=(e,t,i,s,u,f)=>{for(var _,w,E=e.states,A=e.areas,k=e.devices,j=e.entities,O=((e,t)=>{for(var i={},n=new Set(Object.values(t).filter(e=>e.entity_category||e.platform&&m.has(e.platform)||e.hidden).map(e=>e.entity_id)),r=0,a=Object.keys(e);r<a.length;r++){var s=a[r],o=e[s];g.has((0,l.t)(o))||n.has(o.entity_id)||(i[s]=e[s])}return i})(E,j),x={},C=0,W=Object.keys(O);C<W.length;C++){var L=W[C],$=O[L];$.attributes.order&&(x[L]=$.attributes.order)}var S=((e,t,i,n)=>{for(var a=Object.assign({},n),s={},o={},l=0,d=Object.values(i);l<d.length;l++){var u,p=d[l],y=p.area_id||p.device_id&&(null===(u=t[p.device_id])||void 0===u?void 0:u.area_id);y&&y in e&&p.entity_id in a?(y in s||(s[y]=[]),s[y].push(a[p.entity_id]),delete a[p.entity_id]):p.device_id&&p.device_id in t&&p.entity_id in a&&(p.device_id in o||(o[p.device_id]=[]),o[p.device_id].push(a[p.entity_id]),delete a[p.entity_id])}for(var c=0,v=Object.entries(o);c<v.length;c++){var h=(0,r.A)(v[c],2),f=h[0],g=h[1];1===g.length&&(a[g[0].entity_id]=g[0],delete o[f])}return{areasWithEntities:s,devicesWithEntities:o,otherEntities:a}})(A,k,j,O);if(null!=s&&s.hidden){var z,I=(0,n.A)(s.hidden);try{for(I.s();!(z=I.n()).done;){var P=z.value;delete S.areasWithEntities[P]}}catch(ae){I.e(ae)}finally{I.f()}}u&&(S.devicesWithEntities={},S.otherEntities={});var V=(e=>{var t=[],i={};return Object.keys(e).forEach(n=>{var r=e[n];"group"===(0,o.m)(n)?t.push(r):i[n]=r}),t.forEach(e=>e.attributes.entity_id.forEach(e=>{delete i[e]})),{groups:t,ungrouped:i}})(S.otherEntities);V.groups.sort((e,t)=>x[e.entity_id]-x[t.entity_id]);var q,B=[],F=(0,n.A)(V.groups);try{for(F.s();!(q=F.n()).done;){var J=q.value;B.push.apply(B,(0,a.A)(b(e,J.attributes.entity_id,{title:(0,d.u)(J),show_header_toggle:"hidden"!==J.attributes.control})))}}catch(ae){F.e(ae)}finally{F.f()}var R,U=((e,t,i,r,s)=>{for(var o={},u=e.localize,y=0,f=Object.keys(s);y<f.length;y++){var g=f[y],m=s[g],_=(0,l.t)(m);_ in o||(o[_]=[]),o[_].push(m.entity_id)}var w=[];if("person"in o){var E=[];if(1===o.person.length)w.push({type:"entities",entities:o.person});else{var A,k,j="",O=(0,n.A)(o.person);try{for(O.s();!(k=O.n()).done;){var x=k.value,C=s[x],W=C.attributes.entity_picture;if(!W){if(void 0===A){var L=getComputedStyle(document.body);A=encodeURIComponent(L.getPropertyValue("--light-primary-color").trim()),j=encodeURIComponent((L.getPropertyValue("--text-light-primary-color")||L.getPropertyValue("--primary-text-color")).trim())}W=`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' width='50' height='50' style='background-color:${A}'%3E%3Cg%3E%3Ctext font-family='roboto' x='50%25' y='50%25' text-anchor='middle' stroke='${j}' font-size='1.3em' dy='.3em'%3E${(0,v._2)(C.attributes.friendly_name||"")}%3C/text%3E%3C/g%3E%3C/svg%3E`}E.push({type:"picture-entity",entity:x,aspect_ratio:"1",show_name:!1,image:W})}}catch(ae){O.e(ae)}finally{O.f()}w.push({type:"grid",square:!0,columns:3,cards:E})}delete o.person}var $,S=[],z=(0,n.A)(h.LA);try{for(z.s();!($=z.n()).done;){var I=$.value;I in o&&(S.push.apply(S,(0,a.A)(o[I])),delete o[I])}}catch(ae){z.e(ae)}finally{z.f()}for(var P={},V=0,q=Object.keys(o);V<q.length;V++){var B=q[V];P[B]=(0,c.p$)(u,B)}S.length&&(o._helpers=S,P._helpers=u("ui.panel.lovelace.strategy.original-states.helpers")),Object.keys(o).sort((e,t)=>(0,p.xL)(P[e],P[t])).forEach(t=>{w.push.apply(w,(0,a.A)(b(e,o[t].sort((e,t)=>(0,p.xL)((0,d.u)(s[e]),(0,d.u)(s[t]))),{title:P[t]})))});var F={path:t,title:i,cards:w};return r&&(F.icon=r),F})(e,"default_view","Home",undefined,V.ungrouped),H=[],K=Object.keys(S.areasWithEntities).sort((0,y.dj)(A,null==s?void 0:s.order)),T=(0,n.A)(K);try{for(T.s();!(R=T.n()).done;){var Y=R.value,Z=S.areasWithEntities[Y],D=A[Y];H.push.apply(H,(0,a.A)(b(e,Z.map(e=>e.entity_id),{title:D.name})))}}catch(ae){T.e(ae)}finally{T.f()}var G,M,N=[],Q=Object.entries(S.devicesWithEntities).sort((e,t)=>{var i=k[e[0]],n=k[t[0]];return(0,p.xL)(i.name_by_user||i.name||"",n.name_by_user||n.name||"")}),X=(0,n.A)(Q);try{for(X.s();!(G=X.n()).done;){var ee=(0,r.A)(G.value,2),te=ee[0],ie=ee[1],ne=k[te];N.push.apply(N,(0,a.A)(b(e,ie.map(e=>e.entity_id),{title:ne.name_by_user||ne.name||t("ui.panel.config.devices.unnamed_device",{type:t(`ui.panel.config.devices.type.${ne.entry_type||"device"}`)})})))}}catch(ae){X.e(ae)}finally{X.f()}if(i&&!f){var re=i.energy_sources.find(e=>"grid"===e.type);re&&re.flow_from.length>0&&(M={title:t("ui.panel.lovelace.cards.energy.energy_distribution.title_today"),type:"energy-distribution",link_dashboard:!0})}return(_=U.cards).unshift.apply(_,H.concat(B,(0,a.A)(M?[M]:[]))),(w=U.cards).push.apply(w,N),U}}}]);
//# sourceMappingURL=22625.5bd1dd290d713605.js.map