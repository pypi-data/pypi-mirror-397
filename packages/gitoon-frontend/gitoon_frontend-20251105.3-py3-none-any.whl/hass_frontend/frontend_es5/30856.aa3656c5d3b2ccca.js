"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["30856"],{8389:function(e,t,i){i.d(t,{r:function(){return l}});var n=i(31802),r=i(62020),o=i(21101),s=i(23180),a=i(90628),l=(i(46852),function(e){function t(e,i,n){var s;return(0,r.A)(this,t),(s=(0,o.A)(this,t,[e])).name="GUISupportError",s.warnings=i,s.errors=n,s}return(0,s.A)(t,e),(0,n.A)(t)}((0,a.A)(Error)))},93064:function(e,t,i){i.a(e,async function(e,n){try{i.d(t,{m:function(){return z}});var r=i(98735),o=i(88486),s=i(62020),a=i(31802),l=i(21101),u=i(23180),h=i(87426),c=(i(38606),i(35748),i(80178),i(65315),i(22416),i(37089),i(45519),i(5934),i(30536),i(95013),i(69868)),d=i(84922),f=i(11991),g=i(60602),_=i(44017),p=i(36768),m=i(51849),v=i(29561),y=(i(94124),i(96635)),E=i(6345),k=i(8389),b=e([y,E]);[y,E]=b.then?(await b)():b;var C,w,A,$,Y,M,x,q,S,U,I,P,G=e=>e,z=function(e){function t(){var e;(0,s.A)(this,t);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=(0,l.A)(this,t,[].concat(n)))._guiMode=!0,e._yamlError=!1,e._loading=!1,e._loadCount=0,e._debounceYamlError=(0,m.s)(()=>{e._pendingYamlError&&(e._yamlError=!0,e._errors=[e._pendingYamlError],e._pendingYamlError=void 0,e._setConfig())},2e3),e}return(0,u.A)(t,e),(0,a.A)(t,[{key:"value",get:function(){return this._config},set:function(e){this._config&&(0,v.b)(e,this._config)||(this._config=e,this._errors=void 0,this._setConfig())}},{key:"_setConfig",value:function(){if(!this._errors)try{this._updateConfigElement()}catch(e){this._errors=[e.message]}this.updateComplete.then(()=>{var e;(0,_.r)(this,"config-changed",{config:this.value,error:null===(e=this._errors)||void 0===e?void 0:e.join(", "),guiModeAvailable:!(this.hasWarning||this.hasError||!1===this._guiSupported)})})}},{key:"hasWarning",get:function(){return void 0!==this._warnings&&this._warnings.length>0}},{key:"hasError",get:function(){return void 0!==this._errors&&this._errors.length>0}},{key:"GUImode",get:function(){return this._guiMode},set:function(e){this._guiMode=e,this.updateComplete.then(()=>{(0,_.r)(this,"GUImode-changed",{guiMode:e,guiModeAvailable:!(this.hasWarning||this.hasError||!1===this._guiSupported)})})}},{key:"toggleMode",value:function(){this.GUImode=!this.GUImode}},{key:"focusYamlEditor",value:function(){var e;null!==(e=this._configElement)&&void 0!==e&&e.focusYamlEditor&&this._configElement.focusYamlEditor(),this._yamlEditor&&this._yamlEditor.focus()}},{key:"getConfigElement",value:(b=(0,o.A)((0,r.A)().m(function e(){return(0,r.A)().w(function(e){for(;;)if(0===e.n)return e.a(2,void 0)},e)})),function(){return b.apply(this,arguments)})},{key:"getConfigForm",value:(E=(0,o.A)((0,r.A)().m(function e(){return(0,r.A)().w(function(e){for(;;)if(0===e.n)return e.a(2,void 0)},e)})),function(){return E.apply(this,arguments)})},{key:"renderConfigElement",value:function(){return(0,d.qy)(C||(C=G`${0}`),this._configElement)}},{key:"_renderSubElement",value:function(){return(0,d.qy)(w||(w=G` <hui-sub-element-editor .hass="${0}" .config="${0}" @go-back="${0}" @config-changed="${0}"> </hui-sub-element-editor> `),this.hass,this._subElementEditorConfig,this._goBack,this._subElementChanged)}},{key:"_subElementChanged",value:function(e){var t,i;e.stopPropagation();var n=e.detail.config;this._subElementEditorConfig=Object.assign(Object.assign({},this._subElementEditorConfig),{},{elementConfig:n}),null===(t=(i=this._subElementEditorConfig).saveElementConfig)||void 0===t||t.call(i,n)}},{key:"_goBack",value:function(e){e.stopPropagation(),this._subElementEditorConfig=void 0}},{key:"_editSubElement",value:(y=(0,o.A)((0,r.A)().m(function e(t){return(0,r.A)().w(function(e){for(;;)switch(e.n){case 0:return t.stopPropagation(),e.n=1,Promise.all([i.e("59165"),i.e("143"),i.e("86677"),i.e("70412"),i.e("86035"),i.e("93282"),i.e("58197"),i.e("10326"),i.e("89137"),i.e("88815"),i.e("75783"),i.e("53476"),i.e("34628"),i.e("78525"),i.e("5023"),i.e("15116"),i.e("17386"),i.e("7434"),i.e("22112"),i.e("2934"),i.e("17320"),i.e("92145")]).then(i.bind(i,79893));case 1:this._subElementEditorConfig={type:t.detail.type,elementConfig:t.detail.config,context:t.detail.context,saveElementConfig:t.detail.saveConfig};case 2:return e.a(2)}},e,this)})),function(e){return y.apply(this,arguments)})},{key:"render",value:function(){return(0,d.qy)(A||(A=G` <div class="wrapper"> ${0} ${0} ${0} ${0} </div> `),this.GUImode?(0,d.qy)($||($=G` <div class="gui-editor" @edit-sub-element="${0}"> ${0} </div> `),this._editSubElement,this._loading?(0,d.qy)(Y||(Y=G` <ha-spinner class="center margin-bot"></ha-spinner> `)):(0,g.P)(this._subElementEditorConfig?this._renderSubElement():this.renderConfigElement())):(0,d.qy)(M||(M=G` <div class="yaml-editor"> <ha-yaml-editor .defaultValue="${0}" autofocus .hass="${0}" @value-changed="${0}" @blur="${0}" @keydown="${0}" dir="ltr" .showErrors="${0}"></ha-yaml-editor> </div> `),this._config,this.hass,this._handleYAMLChanged,this._onBlurYaml,this._ignoreKeydown,!1),!1===this._guiSupported&&!1===this._loading?(0,d.qy)(x||(x=G` <ha-alert alert-type="info" .title="${0}"> ${0} <br> ${0} </ha-alert> `),this.hass.localize("ui.errors.config.visual_editor_not_supported"),this.hass.localize("ui.errors.config.visual_editor_not_supported_reason_type"),this.hass.localize("ui.errors.config.edit_in_yaml_supported")):d.s6,this.hasError?(0,d.qy)(q||(q=G` <ha-alert alert-type="error" .title="${0}"> <ul> ${0} </ul> </ha-alert> `),this.hass.localize("ui.errors.config.configuration_error"),this._errors.map(e=>(0,d.qy)(S||(S=G`<li>${0}</li>`),e))):d.s6,this.hasWarning?(0,d.qy)(U||(U=G` <ha-alert alert-type="warning" .title="${0}"> <ul> ${0} </ul> ${0} </ha-alert> `),this.hass.localize("ui.errors.config.visual_editor_not_supported"),this._warnings.map(e=>(0,d.qy)(I||(I=G`<li>${0}</li>`),e)),this.hass.localize("ui.errors.config.edit_in_yaml_supported")):d.s6)}},{key:"updated",value:function(e){(0,h.A)(t,"updated",this,3)([e]),this._configElement&&e.has("hass")&&(this._configElement.hass=this.hass),this._configElement&&"lovelace"in this._configElement&&e.has("lovelace")&&(this._configElement.lovelace=this.lovelace),this._configElement&&e.has("context")&&(this._configElement.context=this.context)}},{key:"_handleUIConfigChanged",value:function(e){if(e.stopPropagation(),this.GUImode){var t=e.detail.config;Object.keys(t).forEach(e=>{void 0===t[e]&&delete t[e]}),this.value=t}}},{key:"_handleYAMLChanged",value:function(e){e.stopPropagation();var t=e.detail.value;e.detail.isValid?(this._config=t,this._errors=void 0,this._pendingYamlError=void 0,this._yamlError=!1,this._debounceYamlError.cancel(),this._setConfig()):this._yamlError?this._errors=[e.detail.errorMsg]:(this._pendingYamlError=e.detail.errorMsg,this._debounceYamlError())}},{key:"_onBlurYaml",value:function(){this._debounceYamlError.cancel(),this._pendingYamlError&&(this._yamlError=!0,this._errors=[this._pendingYamlError],this._pendingYamlError=void 0,this._setConfig())}},{key:"unloadConfigElement",value:(f=(0,o.A)((0,r.A)().m(function e(){return(0,r.A)().w(function(e){for(;;)switch(e.n){case 0:this._configElement=void 0,this._guiSupported=void 0;case 1:return e.a(2)}},e,this)})),function(){return f.apply(this,arguments)})},{key:"loadConfigElement",value:(c=(0,o.A)((0,r.A)().m(function e(){var t,n,o,s,a,l;return(0,r.A)().w(function(e){for(;;)switch(e.n){case 0:if(!this._configElement){e.n=1;break}return e.a(2);case 1:return e.n=2,this.getConfigElement();case 2:if(t=e.v){e.n=5;break}return e.n=3,this.getConfigForm();case 3:if(!(n=e.v)){e.n=5;break}return e.n=4,i.e("69328").then(i.bind(i,76947));case 4:t=document.createElement("hui-form-editor"),o=n.schema,s=n.assertConfig,a=n.computeLabel,l=n.computeHelper,t.schema=o,a&&(t.computeLabel=a),l&&(t.computeHelper=l),s&&(t.assertConfig=s);case 5:t?(t.hass=this.hass,"lovelace"in t&&(t.lovelace=this.lovelace),t.context=this.context,t.addEventListener("config-changed",e=>this._handleUIConfigChanged(e)),this._guiSupported=!0):this._guiSupported=!1,this._configElement=t;case 6:return e.a(2)}},e,this)})),function(){return c.apply(this,arguments)})},{key:"_updateConfigElement",value:(n=(0,o.A)((0,r.A)().m(function e(){var t,i,n,o,s;return(0,r.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.value){e.n=1;break}return e.a(2);case 1:return t=++this._loadCount,e.p=2,this._errors=void 0,this._warnings=void 0,e.n=3,this.loadConfigElement();case 3:if(!this._configElement){e.n=7;break}e.p=4,this._configElement.setConfig(this.value),e.n=6;break;case 5:throw e.p=5,o=e.v,i=(0,p._)(this.hass,o),new k.r("Config is not supported",i.warnings,i.errors);case 6:e.n=8;break;case 7:this._guiSupported=!1,this.GUImode=!1;case 8:e.n=11;break;case 9:if(e.p=9,s=e.v,t===this._loadCount){e.n=10;break}return e.a(2);case 10:s instanceof k.r?(this._warnings=null!==(n=s.warnings)&&void 0!==n?n:[s.message],this._errors=s.errors||void 0):this._errors=[s.message],this.GUImode=!1;case 11:return e.p=11,this._loading=!1,e.f(11);case 12:return e.a(2)}},e,this,[[4,5],[2,9,11,12]])})),function(){return n.apply(this,arguments)})},{key:"_ignoreKeydown",value:function(e){e.stopPropagation()}}]);var n,c,f,y,E,b}(d.WF);z.styles=(0,d.AH)(P||(P=G`:host{display:flex}.wrapper{width:100%}.gui-editor,.yaml-editor{padding:8px 0px}ha-code-editor{--code-mirror-max-height:calc(100vh - 245px)}ha-spinner{display:block;margin:auto}`)),(0,c.__decorate)([(0,f.MZ)({attribute:!1})],z.prototype,"hass",void 0),(0,c.__decorate)([(0,f.MZ)({attribute:!1})],z.prototype,"lovelace",void 0),(0,c.__decorate)([(0,f.MZ)({attribute:!1})],z.prototype,"context",void 0),(0,c.__decorate)([(0,f.wk)()],z.prototype,"_config",void 0),(0,c.__decorate)([(0,f.wk)()],z.prototype,"_configElement",void 0),(0,c.__decorate)([(0,f.wk)()],z.prototype,"_subElementEditorConfig",void 0),(0,c.__decorate)([(0,f.wk)()],z.prototype,"_guiMode",void 0),(0,c.__decorate)([(0,f.wk)()],z.prototype,"_errors",void 0),(0,c.__decorate)([(0,f.wk)()],z.prototype,"_pendingYamlError",void 0),(0,c.__decorate)([(0,f.wk)()],z.prototype,"_yamlError",void 0),(0,c.__decorate)([(0,f.wk)()],z.prototype,"_warnings",void 0),(0,c.__decorate)([(0,f.wk)()],z.prototype,"_guiSupported",void 0),(0,c.__decorate)([(0,f.wk)()],z.prototype,"_loading",void 0),(0,c.__decorate)([(0,f.P)("ha-yaml-editor")],z.prototype,"_yamlEditor",void 0),n()}catch(T){n(T)}})},3003:function(e,t,i){i.a(e,async function(e,n){try{i.d(t,{U:function(){return _}});var r=i(98735),o=i(88486),s=i(62020),a=i(31802),l=i(21101),u=i(87426),h=i(23180),c=(i(46852),i(69868)),d=i(11991),f=i(93064),g=e([f]),_=function(e){function t(){return(0,s.A)(this,t),(0,l.A)(this,t,arguments)}return(0,h.A)(t,e),(0,a.A)(t,[{key:"configElementType",get:function(){return this.value?this.value.type:void 0}},{key:"loadConfigElement",value:(i=(0,o.A)((0,r.A)().m(function e(){return(0,r.A)().w(function(e){for(;;)switch(e.n){case 0:if(this._configElementType===this.configElementType){e.n=2;break}if(this.unloadConfigElement(),this.configElementType){e.n=1;break}throw new Error(this.hass.localize("ui.errors.config.no_type_provided"));case 1:this._configElementType=this.configElementType;case 2:return e.a(2,(0,u.A)(t,"loadConfigElement",this,3)([]))}},e,this)})),function(){return i.apply(this,arguments)})}]);var i}((f=(g.then?(await g)():g)[0]).m);(0,c.__decorate)([(0,d.wk)()],_.prototype,"_configElementType",void 0),n()}catch(p){n(p)}})},60602:function(e,t,i){i.d(t,{P:function(){return d}});var n=i(15243),r=i(62020),o=i(31802),s=i(21101),a=i(23180),l=(i(35748),i(45519),i(66168),i(95013),i(11681)),u=i(64363),h=i(67851),c=e=>(0,h.ps)(e)?e._$litType$.h:e.strings,d=(0,u.u$)(function(e){function t(e){var i;return(0,r.A)(this,t),(i=(0,s.A)(this,t,[e])).et=new WeakMap,i}return(0,a.A)(t,e),(0,o.A)(t,[{key:"render",value:function(e){return[e]}},{key:"update",value:function(e,t){var i=(0,n.A)(t,1)[0],r=(0,h.qb)(this.it)?c(this.it):null,o=(0,h.qb)(i)?c(i):null;if(null!==r&&(null===o||r!==o)){var s=(0,h.cN)(e).pop(),a=this.et.get(r);if(void 0===a){var u=document.createDocumentFragment();(a=(0,l.XX)(l.s6,u)).setConnected(!1),this.et.set(r,a)}(0,h.mY)(a,[s]),(0,h.Dx)(a,void 0,s)}if(null!==o){if(null===r||r!==o){var d=this.et.get(o);if(void 0!==d){var f=(0,h.cN)(d).pop();(0,h.Jz)(e),(0,h.Dx)(e,void 0,f),(0,h.mY)(e,[f])}}this.it=i}else this.it=void 0;return this.render(i)}}])}(u.WL))}}]);
//# sourceMappingURL=30856.aa3656c5d3b2ccca.js.map