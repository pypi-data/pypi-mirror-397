"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["53135"],{71770:function(o,e,t){var r,i,n,a,s=t(62020),l=t(31802),c=t(21101),d=t(23180),h=t(87426),u=(t(38606),t(69868)),p=t(30103),v=t(86811),g=t(49377),f=t(34800),_=t(84922),b=t(11991),m=o=>o,y=function(o){function e(){var o;(0,s.A)(this,e);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(o=(0,c.A)(this,e,[].concat(r))).filled=!1,o.active=!1,o}return(0,d.A)(e,o),(0,l.A)(e,[{key:"renderOutline",value:function(){return this.filled?(0,_.qy)(r||(r=m`<span class="filled"></span>`)):(0,h.A)(e,"renderOutline",this,3)([])}},{key:"getContainerClasses",value:function(){return Object.assign(Object.assign({},(0,h.A)(e,"getContainerClasses",this,3)([])),{},{active:this.active})}},{key:"renderPrimaryContent",value:function(){return(0,_.qy)(i||(i=m` <span class="leading icon" aria-hidden="true"> ${0} </span> <span class="label">${0}</span> <span class="touch"></span> <span class="trailing leading icon" aria-hidden="true"> ${0} </span> `),this.renderLeadingIcon(),this.label,this.renderTrailingIcon())}},{key:"renderTrailingIcon",value:function(){return(0,_.qy)(n||(n=m`<slot name="trailing-icon"></slot>`))}}])}(p.k);y.styles=[g.R,f.R,v.R,(0,_.AH)(a||(a=m`:host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-assist-chip-container-shape:var(
          --ha-assist-chip-container-shape,
          16px
        );--md-assist-chip-outline-color:var(--outline-color);--md-assist-chip-label-text-weight:400}.filled{display:flex;pointer-events:none;border-radius:inherit;inset:0;position:absolute;background-color:var(--ha-assist-chip-filled-container-color)}::slotted([slot=icon]),::slotted([slot=trailing-icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px);font-size:var(--_label-text-size)!important}.trailing.icon ::slotted(*),.trailing.icon svg{margin-inline-end:unset;margin-inline-start:var(--_icon-label-space)}::before{background:var(--ha-assist-chip-container-color,transparent);opacity:var(--ha-assist-chip-container-opacity, 1)}:where(.active)::before{background:var(--ha-assist-chip-active-container-color);opacity:var(--ha-assist-chip-active-container-opacity)}.label{font-family:var(--ha-font-family-body)}`))],(0,u.__decorate)([(0,b.MZ)({type:Boolean,reflect:!0})],y.prototype,"filled",void 0),(0,u.__decorate)([(0,b.MZ)({type:Boolean})],y.prototype,"active",void 0),y=(0,u.__decorate)([(0,b.EM)("ha-assist-chip")],y)},45619:function(o,e,t){var r,i,n=t(23191),a=t(18202),s=t(62020),l=t(31802),c=t(21101),d=t(23180),h=t(87426),u=(t(38606),t(79827),t(44784),t(99342),t(65315),t(22416),t(45519),t(67579),t(30536),t(69868)),p=t(84922),v=t(11991),g=t(75907),f=o=>o,_=function(o){function e(){var o;(0,s.A)(this,e);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(o=(0,c.A)(this,e,[].concat(r))).wrapDisabled=!1,o._filter="",o}return(0,d.A)(e,o),(0,l.A)(e,[{key:"render",value:function(){return(0,p.qy)(r||(r=f`<pre class="${0}"></pre>`),(0,g.H)({wrap:!this.wrapDisabled}))}},{key:"firstUpdated",value:function(o){(0,h.A)(e,"firstUpdated",this,3)([o]),this.content&&this.parseTextToColoredPre(this.content)}},{key:"parseLinesToColoredPre",value:function(o){var e,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,a.A)(o);try{for(r.s();!(e=r.n()).done;){var i=e.value;this.parseLineToColoredPre(i,t)}}catch(n){r.e(n)}finally{r.f()}}},{key:"parseLineToColoredPre",value:function(o){for(var e,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=document.createElement("div"),i=/\x1b(?:\[(.*?)[@-~]|\].*?(?:\x07|\x1b\\))/g,n=0,a={bold:!1,italic:!1,underline:!1,strikethrough:!1,foregroundColor:null,backgroundColor:null},s=o=>{var e=document.createElement("span");a.bold&&e.classList.add("bold"),a.italic&&e.classList.add("italic"),a.underline&&e.classList.add("underline"),a.strikethrough&&e.classList.add("strikethrough"),null!==a.foregroundColor&&e.classList.add(`fg-${a.foregroundColor}`),null!==a.backgroundColor&&e.classList.add(`bg-${a.backgroundColor}`),e.appendChild(document.createTextNode(o)),r.appendChild(e)};null!==(e=i.exec(o));){var l=e.index,c=o.substring(n,l);c&&s(c),n=l+e[0].length,void 0!==e[1]&&e[1].split(";").forEach(o=>{switch(parseInt(o,10)){case 0:a.bold=!1,a.italic=!1,a.underline=!1,a.strikethrough=!1,a.foregroundColor=null,a.backgroundColor=null;break;case 1:a.bold=!0;break;case 3:a.italic=!0;break;case 4:a.underline=!0;break;case 9:a.strikethrough=!0;break;case 22:a.bold=!1;break;case 23:a.italic=!1;break;case 24:a.underline=!1;break;case 29:a.strikethrough=!1;break;case 30:case 39:a.foregroundColor=null;break;case 31:a.foregroundColor="red";break;case 32:a.foregroundColor="green";break;case 33:a.foregroundColor="yellow";break;case 34:a.foregroundColor="blue";break;case 35:a.foregroundColor="magenta";break;case 36:a.foregroundColor="cyan";break;case 37:a.foregroundColor="white";break;case 40:a.backgroundColor="black";break;case 41:a.backgroundColor="red";break;case 42:a.backgroundColor="green";break;case 43:a.backgroundColor="yellow";break;case 44:a.backgroundColor="blue";break;case 45:a.backgroundColor="magenta";break;case 46:a.backgroundColor="cyan";break;case 47:a.backgroundColor="white";break;case 49:a.backgroundColor=null}})}var d,h,u=o.substring(n);(u&&s(u),t)?(null===(d=this._pre)||void 0===d||d.prepend(r),r.animate([{opacity:0},{opacity:1}],{duration:500})):null===(h=this._pre)||void 0===h||h.appendChild(r);this._filter&&this.filterLines(this._filter)}},{key:"parseTextToColoredPre",value:function(o){var e,t=o.split("\n"),r=(0,a.A)(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;this.parseLineToColoredPre(i)}}catch(n){r.e(n)}finally{r.f()}}},{key:"filterLines",value:function(o){var e;this._filter=o;var t=(null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelectorAll("div"))||[],r=0;if(o){var i=[];t.forEach(e=>{var t;null!==(t=e.textContent)&&void 0!==t&&t.toLowerCase().includes(o.toLowerCase())?(e.style.display="",r++,CSS.highlights&&null!==e.firstChild&&e.textContent&&e.querySelectorAll("span").forEach(e=>{for(var t=e.textContent.toLowerCase(),r=[],n=0;n<t.length;){var a=t.indexOf(o.toLowerCase(),n);if(-1===a)break;r.push(a),n=a+o.length}r.forEach(t=>{var r=new Range;r.setStart(e.firstChild,t),r.setEnd(e.firstChild,t+o.length),i.push(r)})})):e.style.display="none"}),CSS.highlights&&CSS.highlights.set("search-results",(0,n.A)(Highlight,i))}else t.forEach(o=>{o.style.display=""}),r=t.length,CSS.highlights&&CSS.highlights.delete("search-results");return!!r}},{key:"clear",value:function(){this._pre&&(this._pre.innerHTML="")}}])}(p.WF);_.styles=(0,p.AH)(i||(i=f`pre{overflow-x:auto;margin:0}pre.wrap{white-space:pre-wrap;overflow-wrap:break-word}.bold{font-weight:var(--ha-font-weight-bold)}.italic{font-style:italic}.underline{text-decoration:underline}.strikethrough{text-decoration:line-through}.underline.strikethrough{text-decoration:underline line-through}.fg-red{color:var(--error-color)}.fg-green{color:var(--success-color)}.fg-yellow{color:var(--warning-color)}.fg-blue{color:var(--info-color)}.fg-magenta{color:#762671}.fg-cyan{color:#2cb5e9}.fg-white{color:#ccc}.bg-black{background-color:#000}.bg-red{background-color:var(--error-color)}.bg-green{background-color:var(--success-color)}.bg-yellow{background-color:var(--warning-color)}.bg-blue{background-color:var(--info-color)}.bg-magenta{background-color:#762671}.bg-cyan{background-color:#2cb5e9}.bg-white{background-color:#ccc}::highlight(search-results){background-color:var(--primary-color);color:var(--text-primary-color)}`)),(0,u.__decorate)([(0,v.MZ)()],_.prototype,"content",void 0),(0,u.__decorate)([(0,v.MZ)({type:Boolean,attribute:"wrap-disabled"})],_.prototype,"wrapDisabled",void 0),(0,u.__decorate)([(0,v.P)("pre")],_.prototype,"_pre",void 0),(0,u.__decorate)([(0,v.wk)()],_.prototype,"_filter",void 0),_=(0,u.__decorate)([(0,v.EM)("ha-ansi-to-html")],_)},28565:function(o,e,t){var r,i=t(31802),n=t(62020),a=t(21101),s=t(23180),l=t(69868),c=t(61320),d=t(41715),h=t(84922),u=t(11991),p=function(o){function e(){return(0,n.A)(this,e),(0,a.A)(this,e,arguments)}return(0,s.A)(e,o),(0,i.A)(e)}(c.c);p.styles=[d.R,(0,h.AH)(r||(r=(o=>o)`:host{--md-divider-color:var(--divider-color)}`))],p=(0,l.__decorate)([(0,u.EM)("ha-md-divider")],p)},92409:function(o,e,t){var r,i=t(31802),n=t(62020),a=t(21101),s=t(23180),l=t(69868),c=t(45369),d=t(20808),h=t(84922),u=t(11991),p=function(o){function e(){return(0,n.A)(this,e),(0,a.A)(this,e,arguments)}return(0,s.A)(e,o),(0,i.A)(e)}(c.K);p.styles=[d.R,(0,h.AH)(r||(r=(o=>o)`:host{--ha-icon-display:block;--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-primary:var(--primary-text-color);--md-sys-color-secondary:var(--secondary-text-color);--md-sys-color-surface:var(--card-background-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--secondary-text-color);--md-sys-color-secondary-container:rgba(
          var(--rgb-primary-color),
          0.15
        );--md-sys-color-on-secondary-container:var(--text-primary-color);--mdc-icon-size:16px;--md-sys-color-on-primary-container:var(--primary-text-color);--md-sys-color-on-secondary-container:var(--primary-text-color);--md-menu-item-label-text-font:Roboto,sans-serif}:host(.warning){--md-menu-item-label-text-color:var(--error-color);--md-menu-item-leading-icon-color:var(--error-color)}::slotted([slot=headline]){text-wrap:nowrap}`))],(0,l.__decorate)([(0,u.MZ)({attribute:!1})],p.prototype,"clickAction",void 0),p=(0,l.__decorate)([(0,u.EM)("ha-md-menu-item")],p)},68937:function(o,e,t){var r,i=t(62020),n=t(31802),a=t(21101),s=t(87426),l=t(23180),c=t(69868),d=t(5673),h=t(89591),u=t(18396),p=t(84922),v=t(11991),g=function(o){function e(){return(0,i.A)(this,e),(0,a.A)(this,e,arguments)}return(0,l.A)(e,o),(0,n.A)(e,[{key:"connectedCallback",value:function(){(0,s.A)(e,"connectedCallback",this,3)([]),this.addEventListener("close-menu",this._handleCloseMenu)}},{key:"_handleCloseMenu",value:function(o){var e,t;o.detail.reason.kind===u.fi.KEYDOWN&&o.detail.reason.key===u.NV.ESCAPE||null===(e=(t=o.detail.initiator).clickAction)||void 0===e||e.call(t,o.detail.initiator)}}])}(d.W1);g.styles=[h.R,(0,p.AH)(r||(r=(o=>o)`:host{--md-sys-color-surface-container:var(--card-background-color)}`))],g=(0,c.__decorate)([(0,v.EM)("ha-md-menu")],g)},47241:function(o,e,t){t.d(e,{L:function(){return n},_:function(){return a}});var r=t(26946),i=t(99106),n=o=>o.callApi("GET","error_log"),a=o=>(0,r.x)(o,"hassio")&&(0,i.v)(o.config.version,2025,10)?"/api/hassio/core/logs/latest":"/api/error_log"},63625:function(o,e,t){t.d(e,{PS:function(){return s},Tv:function(){return d},VR:function(){return l},lE:function(){return h}});var r,i=t(98735),n=t(88486),a=(t(79827),t(35748),t(45519),t(64587),t(88238),t(34536),t(16257),t(20152),t(44711),t(72108),t(77030),t(95013),t(99106)),s=o=>o.data,l=o=>"object"==typeof o?"object"==typeof o.body?o.body.message||"Unknown error, see supervisor logs":o.body||o.message||"Unknown error, see supervisor logs":o,c=new Set([502,503,504]),d=o=>!!(o&&o.status_code&&c.has(o.status_code))||!(!o||!o.message||!o.message.includes("ERR_CONNECTION_CLOSED")&&!o.message.includes("ERR_CONNECTION_RESET")),h=59509==t.j?(r=(0,n.A)((0,i.A)().m(function o(e,t){var r;return(0,i.A)().w(function(o){for(;;)switch(o.n){case 0:if(!(0,a.v)(e.config.version,2021,2,4)){o.n=1;break}return o.a(2,e.callWS({type:"supervisor/api",endpoint:`/${t}/stats`,method:"get"}));case 1:return r=s,o.n=2,e.callApi("GET",`hassio/${t}/stats`);case 2:return o.a(2,r(o.v))}},o)})),function(o,e){return r.apply(this,arguments)}):null},52154:function(o,e,t){t.d(e,{GM:function(){return u},IK:function(){return g},MU:function(){return p},OV:function(){return h},RE:function(){return f},Vo:function(){return m},Yd:function(){return y},h$:function(){return v},w9:function(){return k},xL:function(){return b},y0:function(){return _}});var r,i,n,a,s=t(98735),l=t(88486),c=(t(79827),t(99106)),d=t(63625),h=59509==t.j?(r=(0,l.A)((0,s.A)().m(function o(e){return(0,s.A)().w(function(o){for(;;)switch(o.n){case 0:if(!(0,c.v)(e.config.version,2021,2,4)){o.n=2;break}return o.n=1,e.callWS({type:"supervisor/api",endpoint:"/supervisor/reload",method:"post"});case 1:case 3:return o.a(2);case 2:return o.n=3,e.callApi("POST","hassio/supervisor/reload")}},o)})),function(o){return r.apply(this,arguments)}):null,u=59509==t.j?(i=(0,l.A)((0,s.A)().m(function o(e){var t;return(0,s.A)().w(function(o){for(;;)switch(o.n){case 0:if(!(0,c.v)(e.config.version,2021,2,4)){o.n=1;break}return o.a(2,e.callWS({type:"supervisor/api",endpoint:"/supervisor/info",method:"get"}));case 1:return t=d.PS,o.n=2,e.callApi("GET","hassio/supervisor/info");case 2:return o.a(2,t(o.v))}},o)})),function(o){return i.apply(this,arguments)}):null,p=59509==t.j?(n=(0,l.A)((0,s.A)().m(function o(e){var t;return(0,s.A)().w(function(o){for(;;)switch(o.n){case 0:if(!(0,c.v)(e.config.version,2021,2,4)){o.n=1;break}return o.a(2,e.callWS({type:"supervisor/api",endpoint:"/info",method:"get"}));case 1:return t=d.PS,o.n=2,e.callApi("GET","hassio/info");case 2:return o.a(2,t(o.v))}},o)})),function(o){return n.apply(this,arguments)}):null,v=function(){var o=(0,l.A)((0,s.A)().m(function o(e){return(0,s.A)().w(function(o){for(;;)if(0===o.n)return o.a(2,e.callApi("GET","hassio/host/logs/boots"))},o)}));return function(e){return o.apply(this,arguments)}}(),g=function(){var o=(0,l.A)((0,s.A)().m(function o(e,t){return(0,s.A)().w(function(o){for(;;)if(0===o.n)return o.a(2,e.callApi("GET",`hassio/${t.includes("_")?`addons/${t}`:t}/logs`))},o)}));return function(e,t){return o.apply(this,arguments)}}(),f=function(){var o=(0,l.A)((0,s.A)().m(function o(e,t,r){var i,n=arguments;return(0,s.A)().w(function(o){for(;;)if(0===o.n)return i=n.length>3&&void 0!==n[3]?n[3]:0,o.a(2,e.callApiRaw("GET",`hassio/${t.includes("_")?`addons/${t}`:t}/logs${0!==i?`/boots/${i}`:""}`,void 0,r?{Range:r}:void 0))},o)}));return function(e,t,r){return o.apply(this,arguments)}}(),_=function(){var o=(0,l.A)((0,s.A)().m(function o(e,t,r){var i,n,a=arguments;return(0,s.A)().w(function(o){for(;;)if(0===o.n)return i=a.length>3&&void 0!==a[3]?a[3]:100,n=a.length>4&&void 0!==a[4]?a[4]:0,o.a(2,e.callApiRaw("GET",`hassio/${t.includes("_")?`addons/${t}`:t}/logs${0!==n?`/boots/${n}`:""}/follow?lines=${i}`,void 0,void 0,r))},o)}));return function(e,t,r){return o.apply(this,arguments)}}(),b=function(){var o=(0,l.A)((0,s.A)().m(function o(e,t,r,i,n){var a,l,c=arguments;return(0,s.A)().w(function(o){for(;;)if(0===o.n)return a=c.length>5&&void 0!==c[5]?c[5]:100,l=c.length>6&&void 0!==c[6]?c[6]:0,o.a(2,e.callApiRaw("GET",`hassio/${t.includes("_")?`addons/${t}`:t}/logs${0!==l?`/boots/${l}`:""}/follow`,void 0,{Range:`entries=${i}:${n}:${a}`},r))},o)}));return function(e,t,r,i,n){return o.apply(this,arguments)}}(),m=o=>`/api/hassio/${o.includes("_")?`addons/${o}`:o}/logs`,y=function(o,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return`/api/hassio/${o.includes("_")?`addons/${o}`:o}/logs${0!==t?`/boots/${t}`:""}?lines=${e}`},k=59509==t.j?(a=(0,l.A)((0,s.A)().m(function o(e,t){return(0,s.A)().w(function(o){for(;;)switch(o.n){case 0:if(!(0,c.v)(e.config.version,2021,2,4)){o.n=2;break}return o.n=1,e.callWS({type:"supervisor/api",endpoint:"/supervisor/options",method:"post",data:t});case 1:case 3:return o.a(2);case 2:return o.n=3,e.callApi("POST","hassio/supervisor/options",t)}},o)})),function(o,e){return a.apply(this,arguments)}):null},48786:function(o,e,t){t.a(o,async function(o,e){try{var r=t(98735),i=t(88486),n=t(62020),a=t(31802),s=t(97750),l=t(21101),c=t(23180),d=t(87426),h=(t(46852),t(38606),t(96956),t(80178),t(89958),t(35058),t(64654),t(65315),t(837),t(37089),t(65152),t(45519),t(67579),t(30500),t(39118),t(69868)),u=t(84922),p=t(75907),v=t(73305),g=t(11991),f=(t(71770),t(94124),t(45619),t(17372)),_=(t(78918),t(70490),t(9058),t(77510),t(28565),t(68937),t(92409),t(96635)),b=(t(86160),t(72094)),m=t(26946),y=(t(99106),t(44017)),k=t(51849),w=t(47241),A=t(63625),C=t(52154),S=t(51140),x=t(52739),$=o([f,_]);[f,_]=$.then?(await $)():$;var L,H,T,E,M,V,B,P,R,O,q,Z,I,F,z,W,j,U=o=>o,N="M19.92,12.08L12,20L4.08,12.08L5.5,10.67L11,16.17V2H13V16.17L18.5,10.66L19.92,12.08M12,20H2V22H22V20H12Z",G="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",D=function(o){function e(){var o;(0,n.A)(this,e);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(o=(0,l.A)(this,e,[].concat(r))).filter="",o.allowSwitch=!1,o._scrolledToBottomController=new v.Q((0,s.A)(o),{callback(o){return o[0].isIntersecting}}),o._scrolledToTopController=new v.Q((0,s.A)(o),{}),o._loadingState="loading",o._noSearchResults=!1,o._boot=0,o._showBootsSelect=!1,o._wrapLines=!0,o._debounceSearch=(0,k.s)(()=>{var e;o._noSearchResults=!(null!==(e=o._ansiToHtmlElement)&&void 0!==e&&e.filterLines(o.filter)),o.filter||o._scrollToBottom()},150),o._debounceScrollToBottom=(0,k.s)(()=>{o._logElement.scrollTop=o._logElement.scrollHeight},300),o._handleConnectionStatus=e=>{"disconnected"===e.detail&&o._logStreamAborter&&(o._logStreamAborter.abort(),o._loadingState="loading"),"connected"===e.detail&&o._loadLogs(!0)},o._handleTopScroll=e=>{var t=e[0].isIntersecting;return!o._firstCursor||!t||"loaded"!==o._loadingState||o._loadingPrevState&&"loaded"!==o._loadingPrevState||o.filter||o._loadMoreLogs(),t},o}return(0,c.A)(e,o),(0,a.A)(e,[{key:"render",value:function(){var o=this._streamSupported&&this.provider&&(0,m.x)(this.hass,"hassio")&&"loading"!==this._loadingState,e=this._streamSupported&&Array.isArray(this._boots),t=this.localizeFunc||this.hass.localize;return(0,u.qy)(L||(L=U` <div class="error-log-intro"> ${0} <ha-card outlined> <div class="header"> <h1 class="card-header"> ${0} </h1> <div class="action-buttons"> ${0} ${0} <ha-icon-button .path="${0}" @click="${0}" .label="${0}"></ha-icon-button> ${0} ${0} </div> </div> <div class="card-content error-log"> <div id="scroll-top-marker"></div> ${0} ${0} ${0} <ha-ansi-to-html ?wrap-disabled="${0}"></ha-ansi-to-html> <div id="scroll-bottom-marker"></div> </div> <ha-button class="new-logs-indicator ${0}" size="small" appearance="filled" @click="${0}"> <ha-svg-icon .path="${0}" slot="start"></ha-svg-icon> ${0} <ha-svg-icon .path="${0}" slot="end"></ha-svg-icon> </ha-button> ${0} </ha-card> </div> `),this._error?(0,u.qy)(H||(H=U`<ha-alert alert-type="error">${0}</ha-alert>`),this._error):u.s6,this.header||t("ui.panel.config.logs.show_full_logs"),e&&this._showBootsSelect?(0,u.qy)(T||(T=U` <ha-assist-chip .title="${0}" .label="${0}" id="boots-anchor" @click="${0}"> <ha-svg-icon slot="trailing-icon" .path="${0}"></ha-svg-icon></ha-assist-chip> <ha-md-menu anchor="boots-anchor" id="boots-menu" positioning="fixed"> ${0} </ha-md-menu> `),t("ui.panel.config.logs.haos_boots_title"),0===this._boot?t("ui.panel.config.logs.current"):-1===this._boot?t("ui.panel.config.logs.previous"):t("ui.panel.config.logs.startups_ago",{boot:-1*this._boot}),this._toggleBootsMenu,"M7,10L12,15L17,10H7Z",this._boots.map(o=>(0,u.qy)(E||(E=U` <ha-md-menu-item .value="${0}" @click="${0}" .selected="${0}"> ${0} </ha-md-menu-item> ${0} `),o,this._setBoot,o===this._boot,0===o?t("ui.panel.config.logs.current"):-1===o?t("ui.panel.config.logs.previous"):t("ui.panel.config.logs.startups_ago",{boot:-1*o}),0===o?(0,u.qy)(M||(M=U`<ha-md-divider role="separator"></ha-md-divider>`)):u.s6))):u.s6,this._downloadSupported?(0,u.qy)(V||(V=U` <ha-icon-button .path="${0}" @click="${0}" .label="${0}"></ha-icon-button> `),G,this._downloadLogs,t("ui.panel.config.logs.download_logs")):this._logsFileLink?(0,u.qy)(B||(B=U` <a href="${0}" target="_blank" class="download-link"> <ha-icon-button .path="${0}" .label="${0}"></ha-icon-button> </a> `),this._logsFileLink,G,t("ui.panel.config.logs.download_logs")):u.s6,this._wrapLines?"M16,7H3V5H16V7M3,19H16V17H3V19M22,12L18,9V11H3V13H18V15L22,12Z":"M21,5H3V7H21V5M3,19H10V17H3V19M3,13H18C19,13 20,13.43 20,15C20,16.57 19,17 18,17H16V15L12,18L16,21V19H18C20.95,19 22,17.73 22,15C22,12.28 21,11 18,11H3V13Z",this._toggleLineWrap,t("ui.panel.config.logs."+(this._wrapLines?"full_width":"wrap_lines")),!o||this._error?(0,u.qy)(P||(P=U`<ha-icon-button .path="${0}" @click="${0}" .label="${0}"></ha-icon-button>`),"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",this._handleRefresh,t("ui.common.refresh")):u.s6,this.allowSwitch&&"core"===this.provider||e?(0,u.qy)(R||(R=U` <ha-button-menu @action="${0}"> <ha-icon-button slot="trigger" .path="${0}"> </ha-icon-button> ${0} ${0} </ha-button-menu> `),this._handleOverflowAction,"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",this.allowSwitch&&"core"===this.provider?(0,u.qy)(O||(O=U`<ha-list-item graphic="icon"> <ha-svg-icon slot="graphic" .path="${0}"></ha-svg-icon> ${0} </ha-list-item>`),"M20,18H4V8H20M20,6H12L10,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8A2,2 0 0,0 20,6M15,16H6V14H15V16M18,12H6V10H18V12Z",this.hass.localize("ui.panel.config.logs.show_condensed_logs")):u.s6,e?(0,u.qy)(q||(q=U`<ha-list-item graphic="icon"> <ha-svg-icon slot="graphic" .path="${0}"></ha-svg-icon> ${0} </ha-list-item>`),"M7,13V11H21V13H7M7,19V17H21V19H7M7,7V5H21V7H7M3,8V5H2V4H4V8H3M2,17V16H5V20H2V19H4V18.5H3V17.5H4V17H2M4.25,10A0.75,0.75 0 0,1 5,10.75C5,10.95 4.92,11.14 4.79,11.27L3.12,13H5V14H2V13.08L4,11H2V10H4.25Z",t(`ui.panel.config.logs.${this._showBootsSelect?"hide":"show"}_haos_boots`)):u.s6):u.s6,"loading"===this._loadingPrevState?(0,u.qy)(Z||(Z=U`<div class="loading-old"> <ha-spinner></ha-spinner> </div>`)):u.s6,"loading"===this._loadingState?(0,u.qy)(I||(I=U`<div>${0}</div>`),t("ui.panel.config.logs.loading_log")):"empty"===this._loadingState?(0,u.qy)(F||(F=U`<div>${0}</div>`),t("ui.panel.config.logs.no_errors")):u.s6,"loaded"===this._loadingState&&this.filter&&this._noSearchResults?(0,u.qy)(z||(z=U`<div> ${0} </div>`),t("ui.panel.config.logs.no_issues_search",{term:this.filter})):u.s6,!this._wrapLines,(0,p.H)({visible:this._newLogsIndicator&&!this._scrolledToBottomController.value||!1}),this._scrollToBottom,N,t("ui.panel.config.logs.scroll_down_button"),N,o&&0===this._boot&&!this._error?(0,u.qy)(W||(W=U`<div class="live-indicator"> <ha-svg-icon path="${0}"></ha-svg-icon> Live </div>`),"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"):u.s6)}},{key:"willUpdate",value:function(o){(0,d.A)(e,"willUpdate",this,3)([o]),this.hasUpdated||(this._downloadSupported=(0,S.h)(this.hass),this._streamSupported=!0,this._loadBoots(),window.addEventListener("connection-status",this._handleConnectionStatus),this.hass.loadFragmentTranslation("config")),o.has("provider")&&(this._boot=0,this._loadLogs())}},{key:"firstUpdated",value:function(o){(0,d.A)(e,"firstUpdated",this,3)([o]),this._scrolledToBottomController.observe(this._scrollBottomMarkerElement),this._scrolledToTopController.callback=this._handleTopScroll,this._scrolledToTopController.observe(this._scrollTopMarkerElement)}},{key:"updated",value:function(o){(0,d.A)(e,"updated",this,3)([o]),this._newLogsIndicator&&this._scrolledToBottomController.value&&(this._newLogsIndicator=!1),o.has("filter")&&this._debounceSearch(),o.has("_loadingState")&&"loaded"===this._loadingState&&this._scrolledToTopController.value&&this._firstCursor&&!this._loadingPrevState&&this._loadMoreLogs()}},{key:"disconnectedCallback",value:function(){(0,d.A)(e,"disconnectedCallback",this,3)([]),this._logStreamAborter&&this._logStreamAborter.abort(),window.removeEventListener("connection-status",this._handleConnectionStatus)}},{key:"_downloadLogs",value:(f=(0,i.A)((0,r.A)().m(function o(){var e,t,i,n;return(0,r.A)().w(function(o){for(;;)switch(o.n){case 0:if(!this._streamSupported||!this.provider){o.n=1;break}(0,x.$)(this,{header:this.header,provider:this.provider,defaultLineCount:this._numberOfLines,boot:this._boot}),o.n=3;break;case 1:return e=(new Date).toISOString().replace(/:/g,"-"),t=this.provider&&"core"!==this.provider?(0,C.Vo)(this.provider):(0,w._)(this.hass),i=this.provider&&"core"!==this.provider?`${this.provider}_${e}.log`:`home-assistant_${e}.log`,o.n=2,(0,b.e0)(this.hass,t);case 2:n=o.v,(0,S.R)(n.path,i);case 3:return o.a(2)}},o,this)})),function(){return f.apply(this,arguments)})},{key:"_loadLogs",value:(g=(0,i.A)((0,r.A)().m(function o(){var e,t,i,n,a,s,l,c,d,h,u,p,v,g,f,_,y,k,S,x,$,L=arguments;return(0,r.A)().w(function(o){for(;;)switch(o.p=o.n){case 0:if(t=L.length>0&&void 0!==L[0]&&L[0],this._error=void 0,this._loadingState="loading",this._numberOfLines=t&&null!==(e=this._numberOfLines)&&void 0!==e?e:0,t||(this._loadingPrevState=void 0,this._firstCursor=void 0,null===(i=this._ansiToHtmlElement)||void 0===i||i.clear()),n=this._streamSupported&&(0,m.x)(this.hass,"hassio")&&this.provider,o.p=1,this._logStreamAborter&&(this._logStreamAborter.abort(),this._logStreamAborter=void 0),!n){o.n=13;break}if(this._logStreamAborter=new AbortController,t){o.n=4;break}return o.n=2,(0,C.RE)(this.hass,this.provider,"entries=:-1:",this._boot);case 2:return a=o.v,o.n=3,a.text();case 3:o.v.trim()||(this._loadingState="empty");case 4:if(!t||!this._firstCursor){o.n=6;break}return o.n=5,(0,C.xL)(this.hass,this.provider,this._logStreamAborter.signal,this._firstCursor,this._numberOfLines,100,this._boot);case 5:s=o.v,o.n=8;break;case 6:return o.n=7,(0,C.y0)(this.hass,this.provider,this._logStreamAborter.signal,100,this._boot);case 7:s=o.v;case 8:if(s.headers.has("X-First-Cursor")&&(this._firstCursor=s.headers.get("X-First-Cursor")),s.body){o.n=9;break}throw new Error("No stream body found");case 9:this._loadingState="empty",l="",c=s.body.getReader(),d=new TextDecoder,h=!1;case 10:if(h){o.n=12;break}return o.n=11,c.read();case 11:u=o.v,p=u.value,v=u.done,h=v,p&&(g=d.decode(p,{stream:!h}),f=this._scrolledToBottomController.value,_=`${l}${g}`.split("\n").filter(o=>""!==o.trim()),l=g.endsWith("\n")?"":_.splice(-1,1)[0],_.length&&(null===(y=this._ansiToHtmlElement)||void 0===y||y.parseLinesToColoredPre(_),this._numberOfLines+=_.length,"empty"===this._loadingState&&setTimeout(()=>{this._loadingState="loaded"},100)),f&&this._logElement?this._scrollToBottom():this._newLogsIndicator=!0,this._downloadSupported||(k=(0,C.Yd)(this.provider,this._numberOfLines,this._boot),(0,b.e0)(this.hass,k).then(o=>{this._logsFileLink=o.path})),t=!1),o.n=10;break;case 12:o.n=18;break;case 13:if(this._streamSupported=!1,S="",!(0,m.x)(this.hass,"hassio")||!this.provider){o.n=15;break}return o.n=14,(0,C.IK)(this.hass,this.provider);case 14:S=o.v,o.n=17;break;case 15:return o.n=16,(0,w.L)(this.hass);case 16:S=o.v;case 17:S&&(null===(x=this._ansiToHtmlElement)||void 0===x||x.parseTextToColoredPre(S),this._loadingState="loaded",this._scrollToBottom());case 18:o.n=22;break;case 19:if(o.p=19,"AbortError"!==($=o.v).name){o.n=20;break}return o.a(2);case 20:if(t||!n){o.n=21;break}return this._loadLogs(!0),o.a(2);case 21:this._error=(this.localizeFunc||this.hass.localize)("ui.panel.config.logs.failed_get_logs",{provider:this.provider,error:(0,A.VR)($)});case 22:return o.a(2)}},o,this,[[1,19]])})),function(){return g.apply(this,arguments)})},{key:"_scrollToBottom",value:function(){this._logElement&&(this._newLogsIndicator=!1,"core"!==this.provider?this._logElement.scrollTo(0,this._logElement.scrollHeight):this._debounceScrollToBottom())}},{key:"_loadMoreLogs",value:(h=(0,i.A)((0,r.A)().m(function o(){var e,t,i,n,a,s;return(0,r.A)().w(function(o){for(;;)switch(o.n){case 0:if(this._firstCursor&&"loading"!==this._loadingPrevState&&"loaded"===this._loadingState&&this._logElement&&this.provider){o.n=1;break}return o.a(2);case 1:return e=this._scrolledToBottomController.value,t=this._logElement.scrollHeight-this._logElement.scrollTop,this._loadingPrevState="loading",o.n=2,(0,C.RE)(this.hass,this.provider,`entries=${this._firstCursor}:-100:100`,this._boot);case 2:if(!(i=o.v).headers.has("X-First-Cursor")){o.n=4;break}if(this._firstCursor!==i.headers.get("X-First-Cursor")){o.n=3;break}return this._loadingPrevState="end",o.a(2);case 3:this._firstCursor=i.headers.get("X-First-Cursor");case 4:return o.n=5,i.text();case 5:(n=o.v)?(s=n.split("\n").filter(o=>""!==o.trim()).reverse(),null===(a=this._ansiToHtmlElement)||void 0===a||a.parseLinesToColoredPre(s,!0),this._numberOfLines+=s.length,this._loadingPrevState="loaded"):this._loadingPrevState="end",e?this._scrollToBottom():"end"!==this._loadingPrevState&&this._logElement&&window.requestAnimationFrame(()=>{this._logElement.scrollTop=this._logElement.scrollHeight-t});case 6:return o.a(2)}},o,this)})),function(){return h.apply(this,arguments)})},{key:"_loadBoots",value:(t=(0,i.A)((0,r.A)().m(function o(){var e,t,i,n;return(0,r.A)().w(function(o){for(;;)switch(o.p=o.n){case 0:if(!this._streamSupported||!(0,m.x)(this.hass,"hassio")){o.n=4;break}return o.p=1,o.n=2,(0,C.h$)(this.hass);case 2:e=o.v,t=e.data,(i=Object.keys(t.boots).map(Number).sort((o,e)=>e-o)).length>1&&(this._boots=i),o.n=4;break;case 3:o.p=3,n=o.v,console.error(n);case 4:return o.a(2)}},o,this,[[1,3]])})),function(){return t.apply(this,arguments)})},{key:"_toggleLineWrap",value:function(){this._wrapLines=!this._wrapLines}},{key:"_handleRefresh",value:function(){this._loadLogs()}},{key:"_handleOverflowAction",value:function(o){var e=o.detail.index;switch("core"===this.provider&&e--,e){case-1:(0,y.r)(this,"switch-log-view");break;case 0:this._showBootsSelect=!this._showBootsSelect}}},{key:"_toggleBootsMenu",value:function(){this._bootsMenu&&(this._bootsMenu.open=!this._bootsMenu.open)}},{key:"_setBoot",value:function(o){this._boot=o.target.value,this._loadLogs()}}]);var t,h,g,f}(u.WF);D.styles=(0,u.AH)(j||(j=U`:host{direction:var(--direction)}.error-log-intro{text-align:center;margin:16px}ha-card{padding-top:8px;position:relative}ha-card.hidden{display:none}ha-card .action-buttons{display:flex;align-items:center;height:100%}.header{display:flex;justify-content:space-between;padding:0 16px}.card-header{color:var(--ha-card-header-color,var(--primary-text-color));font-family:var(--ha-card-header-font-family, inherit);font-size:var(--ha-card-header-font-size, var(--ha-font-size-2xl));letter-spacing:-.012em;line-height:var(--ha-line-height-expanded);display:block;margin-block-start:0px;font-weight:var(--ha-font-weight-normal);white-space:nowrap;max-width:calc(100% - 150px);overflow:hidden;text-overflow:ellipsis}ha-icon-button{float:right}.error-log{position:relative;font-family:var(--ha-font-family-code);clear:both;text-align:start;padding-top:16px;padding-bottom:16px;overflow-y:scroll;min-height:var(--error-log-card-height,calc(100vh - 244px));max-height:var(--error-log-card-height,calc(100vh - 244px));border-top:1px solid var(--divider-color);direction:ltr}@media all and (max-width:870px){.error-log{min-height:var(--error-log-card-height,calc(100vh - 190px));max-height:var(--error-log-card-height,calc(100vh - 190px))}}.error-log>div{overflow:auto;overflow-wrap:break-word}.error-log>div:hover{background-color:var(--secondary-background-color)}.new-logs-indicator{overflow:hidden;position:absolute;bottom:4px;left:4px;height:0;transition:height .4s ease-out}.new-logs-indicator.visible{height:32px}.error{color:var(--error-color)}.warning{color:var(--warning-color)}.loading-old{display:flex;width:100%;justify-content:center;padding:16px}ha-assist-chip{--ha-assist-chip-container-shape:10px;--md-assist-chip-trailing-space:8px}@keyframes breathe{from{opacity:.8}to{opacity:0}}.live-indicator{position:absolute;bottom:0;inset-inline-end:16px;border-top-right-radius:8px;border-top-left-radius:8px;background-color:var(--primary-color);color:var(--text-primary-color);padding:4px 8px;opacity:.8}.live-indicator ha-svg-icon{animation:breathe 1s cubic-bezier(.5,0,1,1) infinite alternate;height:14px;width:14px}.download-link{color:var(--text-color)}`)),(0,h.__decorate)([(0,g.MZ)({attribute:!1})],D.prototype,"hass",void 0),(0,h.__decorate)([(0,g.MZ)({attribute:!1})],D.prototype,"localizeFunc",void 0),(0,h.__decorate)([(0,g.MZ)()],D.prototype,"filter",void 0),(0,h.__decorate)([(0,g.MZ)()],D.prototype,"header",void 0),(0,h.__decorate)([(0,g.MZ)()],D.prototype,"provider",void 0),(0,h.__decorate)([(0,g.MZ)({attribute:"allow-switch",type:Boolean})],D.prototype,"allowSwitch",void 0),(0,h.__decorate)([(0,g.P)(".error-log")],D.prototype,"_logElement",void 0),(0,h.__decorate)([(0,g.P)("#scroll-top-marker")],D.prototype,"_scrollTopMarkerElement",void 0),(0,h.__decorate)([(0,g.P)("#scroll-bottom-marker")],D.prototype,"_scrollBottomMarkerElement",void 0),(0,h.__decorate)([(0,g.P)("ha-ansi-to-html")],D.prototype,"_ansiToHtmlElement",void 0),(0,h.__decorate)([(0,g.P)("#boots-menu")],D.prototype,"_bootsMenu",void 0),(0,h.__decorate)([(0,g.wk)()],D.prototype,"_firstCursor",void 0),(0,h.__decorate)([(0,g.wk)()],D.prototype,"_scrolledToBottomController",void 0),(0,h.__decorate)([(0,g.wk)()],D.prototype,"_scrolledToTopController",void 0),(0,h.__decorate)([(0,g.wk)()],D.prototype,"_newLogsIndicator",void 0),(0,h.__decorate)([(0,g.wk)()],D.prototype,"_error",void 0),(0,h.__decorate)([(0,g.wk)()],D.prototype,"_logStreamAborter",void 0),(0,h.__decorate)([(0,g.wk)()],D.prototype,"_streamSupported",void 0),(0,h.__decorate)([(0,g.wk)()],D.prototype,"_loadingState",void 0),(0,h.__decorate)([(0,g.wk)()],D.prototype,"_loadingPrevState",void 0),(0,h.__decorate)([(0,g.wk)()],D.prototype,"_noSearchResults",void 0),(0,h.__decorate)([(0,g.wk)()],D.prototype,"_numberOfLines",void 0),(0,h.__decorate)([(0,g.wk)()],D.prototype,"_boot",void 0),(0,h.__decorate)([(0,g.wk)()],D.prototype,"_boots",void 0),(0,h.__decorate)([(0,g.wk)()],D.prototype,"_showBootsSelect",void 0),(0,h.__decorate)([(0,g.wk)()],D.prototype,"_wrapLines",void 0),(0,h.__decorate)([(0,g.wk)()],D.prototype,"_downloadSupported",void 0),(0,h.__decorate)([(0,g.wk)()],D.prototype,"_logsFileLink",void 0),D=(0,h.__decorate)([(0,g.EM)("error-log-card")],D),e()}catch(X){e(X)}})},52739:function(o,e,t){t.d(e,{$:function(){return i}});t(35748),t(45519),t(5934),t(95013);var r=t(44017),i=(o,e)=>{(0,r.r)(o,"show-dialog",{dialogTag:"dialog-download-logs",dialogImport:()=>Promise.all([t.e("51370"),t.e("39551"),t.e("17824"),t.e("37186")]).then(t.bind(t,58657)),dialogParams:e})}},51140:function(o,e,t){t.d(e,{h:function(){return n},R:function(){return i}});var r=t(49487),i=function(o){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=document.createElement("a");t.target="_blank",t.href=o,t.download=e,t.style.display="none",document.body.appendChild(t),t.dispatchEvent(new MouseEvent("click")),document.body.removeChild(t)},n=o=>{var e;return!(o=>!!o.auth.external&&r.n)(o)||!(null===(e=o.auth.external)||void 0===e||!e.config.downloadFileSupported)}},49487:function(o,e,t){t.d(e,{n:function(){return r}});t(67579),t(41190);var r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},73305:function(o,e,t){t.d(e,{Q:function(){return c}});var r=t(98735),i=t(88486),n=t(18202),a=t(62020),s=t(31802),l=(t(35748),t(45519),t(64587),t(88238),t(34536),t(16257),t(20152),t(44711),t(72108),t(77030),t(95013),t(19886)),c=function(){return(0,s.A)(function o(e,t){var r=t.target,i=t.config,n=t.callback,s=t.skipInitial;(0,a.A)(this,o),this.t=new Set,this.o=!1,this.i=!1,this.h=e,null!==r&&this.t.add(null!=r?r:e),this.o=null!=s?s:this.o,this.callback=n,l.S||(window.IntersectionObserver?(this.u=new IntersectionObserver(o=>{var e=this.i;this.i=!1,this.o&&e||(this.handleChanges(o),this.h.requestUpdate())},i),e.addController(this)):console.warn("IntersectionController error: browser does not support IntersectionObserver."))},[{key:"handleChanges",value:function(o){var e;this.value=null===(e=this.callback)||void 0===e?void 0:e.call(this,o,this.u)}},{key:"hostConnected",value:function(){var o,e=(0,n.A)(this.t);try{for(e.s();!(o=e.n()).done;){var t=o.value;this.observe(t)}}catch(r){e.e(r)}finally{e.f()}}},{key:"hostDisconnected",value:function(){this.disconnect()}},{key:"hostUpdated",value:(o=(0,i.A)((0,r.A)().m(function o(){var e;return(0,r.A)().w(function(o){for(;;)switch(o.n){case 0:(e=this.u.takeRecords()).length&&this.handleChanges(e);case 1:return o.a(2)}},o,this)})),function(){return o.apply(this,arguments)})},{key:"observe",value:function(o){this.t.add(o),this.u.observe(o),this.i=!0}},{key:"unobserve",value:function(o){this.t.delete(o),this.u.unobserve(o)}},{key:"disconnect",value:function(){this.u.disconnect()}}]);var o}()},41715:function(o,e,t){t.d(e,{R:function(){return i}});var r,i=(0,t(84922).AH)(r||(r=(o=>o)`:host{box-sizing:border-box;color:var(--md-divider-color,var(--md-sys-color-outline-variant,#cac4d0));display:flex;height:var(--md-divider-thickness,1px);width:100%}:host([inset-start]),:host([inset]){padding-inline-start:16px}:host([inset-end]),:host([inset]){padding-inline-end:16px}:host::before{background:currentColor;content:"";height:100%;width:100%}@media(forced-colors:active){:host::before{background:CanvasText}}`))},61320:function(o,e,t){t.d(e,{c:function(){return d}});var r=t(31802),i=t(62020),n=t(21101),a=t(23180),s=t(69868),l=t(84922),c=t(11991),d=function(o){function e(){var o;return(0,i.A)(this,e),(o=(0,n.A)(this,e,arguments)).inset=!1,o.insetStart=!1,o.insetEnd=!1,o}return(0,a.A)(e,o),(0,r.A)(e)}(l.WF);(0,s.__decorate)([(0,c.MZ)({type:Boolean,reflect:!0})],d.prototype,"inset",void 0),(0,s.__decorate)([(0,c.MZ)({type:Boolean,reflect:!0,attribute:"inset-start"})],d.prototype,"insetStart",void 0),(0,s.__decorate)([(0,c.MZ)({type:Boolean,reflect:!0,attribute:"inset-end"})],d.prototype,"insetEnd",void 0)}}]);
//# sourceMappingURL=53135.5cf4f736377c55ea.js.map