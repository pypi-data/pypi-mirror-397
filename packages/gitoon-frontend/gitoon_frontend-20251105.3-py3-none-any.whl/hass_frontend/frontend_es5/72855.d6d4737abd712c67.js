"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["72855"],{63002:function(t,e,i){i.a(t,async function(t,s){try{i.d(e,{$3:function(){return y},$O:function(){return x},$j:function(){return m},ED:function(){return l},JE:function(){return C},OQ:function(){return S},PU:function(){return $},Ph:function(){return v},Uf:function(){return O},W1:function(){return g},Wr:function(){return _},Z:function(){return u},gF:function(){return k},iY:function(){return D},jU:function(){return c},nN:function(){return A},p3:function(){return d},pJ:function(){return p},r_:function(){return h},sz:function(){return f}});var a=i(18202),n=(i(79827),i(65315),i(59023),i(45519),i(72652)),r=i(50654),o=t([r]);r=(o.then?(await o)():o)[0];var l=function(t){return t[t.NONE=0]="NONE",t[t.ARITHMETIC=1]="ARITHMETIC",t[t.CIRCULAR=2]="CIRCULAR",t}({}),c=59509==i.j?["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"]:null,h=["L","gal","ft³","m³","CCF","MCF"],u=t=>t.sendMessagePromise({type:"recorder/info"}),d=(t,e)=>t.callWS({type:"recorder/list_statistic_ids",statistic_type:e}),_=(t,e)=>t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:e}),f=function(t,e,i,s){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"hour",n=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0;return t.callWS({type:"recorder/statistics_during_period",start_time:e.toISOString(),end_time:null==i?void 0:i.toISOString(),statistic_ids:s,period:a,units:n,types:r})},p=(t,e,i,s)=>t.callWS({type:"recorder/statistic_during_period",statistic_id:e,units:s,fixed_period:i.fixed_period?{start_time:i.fixed_period.start instanceof Date?i.fixed_period.start.toISOString():i.fixed_period.start,end_time:i.fixed_period.end instanceof Date?i.fixed_period.end.toISOString():i.fixed_period.end}:void 0,calendar:i.calendar?Object.assign(Object.assign({},"week"===i.calendar.period?{first_weekday:(0,r.DD)(t.locale).substring(0,3)}:{}),i.calendar):void 0,rolling_window:i.rolling_window}),v=t=>t.callWS({type:"recorder/validate_statistics"}),g=(t,e,i,s)=>t.callWS({type:"recorder/update_statistics_metadata",statistic_id:e,unit_of_measurement:i,unit_class:s}),y=(t,e)=>t.callWS({type:"recorder/clear_statistics",statistic_ids:e}),m=t=>{var e=null;if(!t)return null;var i,s=(0,a.A)(t);try{for(s.s();!(i=s.n()).done;){var n=i.value;null!==n.change&&void 0!==n.change&&(null===e?e=n.change:e+=n.change)}}catch(r){s.e(r)}finally{s.f()}return e},k=(t,e)=>{var i,s=null,n=(0,a.A)(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r in t){var o=m(t[r]);null!==o&&(null===s?s=o:s+=o)}}}catch(l){n.e(l)}finally{n.f()}return s},D=(t,e)=>t.some(t=>void 0!==t[e]&&null!==t[e]),b=["mean","min","max"],w=["sum","state","change"],A=(t,e)=>!(!b.includes(e)||0===t.mean_type)||!(!w.includes(e)||!t.has_sum),O=(t,e,i,s,a)=>{var n=new Date(i).toISOString();return t.callWS({type:"recorder/adjust_sum_statistics",statistic_id:e,start_time:n,adjustment:s,adjustment_unit_of_measurement:a})},x=(t,e,i)=>{var s=t.states[e];return s?(0,n.u)(s):(null==i?void 0:i.name)||e},C=(t,e,i)=>{var s,a;e&&(s=null===(a=t.states[e])||void 0===a?void 0:a.attributes.unit_of_measurement);return void 0===s?null==i?void 0:i.statistics_unit_of_measurement:s},S=t=>t.includes(":"),$=t=>t.callWS({type:"recorder/update_statistics_issues"});s()}catch(z){s(z)}})},17478:function(t,e,i){i.a(t,async function(t,s){try{i.r(e),i.d(e,{HuiEnergyDateSelectionCard:function(){return g}});var a=i(62020),n=i(31802),r=i(21101),o=i(23180),l=i(69868),c=i(84922),h=i(11991),u=(i(70490),i(8510)),d=i(62269),_=t([d]);d=(_.then?(await _)():_)[0];var f,p,v=t=>t,g=function(t){function e(){return(0,a.A)(this,e),(0,r.A)(this,e,arguments)}return(0,o.A)(e,t),(0,n.A)(e,[{key:"getCardSize",value:function(){return 1}},{key:"getGridOptions",value:function(){return{rows:1,columns:12}}},{key:"setConfig",value:function(t){this._config=t}},{key:"shouldUpdate",value:function(t){return(0,u.xP)(this,t)||t.size>1||!t.has("hass")}},{key:"render",value:function(){return this.hass&&this._config?(0,c.qy)(f||(f=v` <ha-card> <div class="card-content"> <hui-energy-period-selector .hass="${0}" .collectionKey="${0}"></hui-energy-period-selector> </div> </ha-card> `),this.hass,this._config.collection_key):c.s6}}])}(c.WF);g.styles=(0,c.AH)(p||(p=v`ha-card{height:100%;display:flex;flex-direction:column;justify-content:center}`)),(0,l.__decorate)([(0,h.MZ)({attribute:!1})],g.prototype,"hass",void 0),(0,l.__decorate)([(0,h.wk)()],g.prototype,"_config",void 0),g=(0,l.__decorate)([(0,h.EM)("hui-energy-date-selection-card")],g),s()}catch(y){s(y)}})},62269:function(t,e,i){i.a(t,async function(t,e){try{var s=i(15243),a=i(98735),n=i(88486),r=i(62020),o=i(31802),l=i(21101),c=i(23180),h=i(87426),u=i(10629),d=(i(38606),i(45519),i(69868)),_=i(41484),f=i(80850),p=i(78320),v=i(99904),g=i(70162),y=i(3313),m=i(88258),k=i(25223),D=i(13486),b=i(76174),w=i(84922),A=i(11991),O=i(65940),x=i(30883),C=i(50654),S=i(46089),$=i(51849),z=(i(78918),i(17372)),E=(i(7475),i(39155)),P=(i(75542),i(72590),i(43716)),W=i(40328),I=i(76037),M=t([u,z,E,S,C,I,x,P]);[u,z,E,S,C,I,x,P]=M.then?(await M)():M;var j,R,U,N=t=>t,q=["today","yesterday","this_week","this_month","this_quarter","this_year","now-7d","now-30d","now-12m"],T=function(t){function e(){var t;(0,r.A)(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(t=(0,l.A)(this,e,[].concat(s)))._ranges={},t._compare=!1,t._simpleRange=(0,O.A)((t,e,i,s)=>{if(0===(0,_.c)(e,t))return"day";if((0,x.xo)(t,f.e,i,s)&&(0,x.xo)(e,p.c,i,s)){if(0===(0,x.EO)(e,t,v.W,i,s))return"month";if(2===(0,x.EO)(e,t,v.W,i,s)&&t.getMonth()%3==0)return"quarter"}return(0,x.xo)(t,f.e,i,s)&&(0,x.xo)(e,p.c,i,s)&&11===(0,x.EO)(e,t,v.W,i,s)?"year":"other"}),t}return(0,c.A)(e,t),(0,o.A)(e,[{key:"hassSubscribe",value:function(){return[(0,P.tb)(this.hass,{key:this.collectionKey}).subscribe(t=>this._updateDates(t))]}},{key:"_measure",value:function(){this.narrow=this.offsetWidth<450}},{key:"_attachObserver",value:(i=(0,n.A)((0,a.A)().m(function t(){return(0,a.A)().w(function(t){for(;;)switch(t.n){case 0:this._resizeObserver||(this._resizeObserver=new ResizeObserver((0,$.s)(()=>this._measure(),250,!1))),this._resizeObserver.observe(this);case 1:return t.a(2)}},t,this)})),function(){return i.apply(this,arguments)})},{key:"firstUpdated",value:function(){this._attachObserver()}},{key:"connectedCallback",value:function(){(0,h.A)(e,"connectedCallback",this,3)([]),this.updateComplete.then(()=>this._attachObserver())}},{key:"disconnectedCallback",value:function(){(0,h.A)(e,"disconnectedCallback",this,3)([]),this._resizeObserver&&this._resizeObserver.disconnect()}},{key:"willUpdate",value:function(t){var i,s;(0,h.A)(e,"willUpdate",this,3)([t]),this.hasUpdated||this._measure(),(!this.hasUpdated||t.has("hass")&&(null===(i=this.hass)||void 0===i?void 0:i.localize)!==(null===(s=t.get("hass"))||void 0===s?void 0:s.localize))&&(this._ranges={},q.forEach(t=>{this._ranges[this.hass.localize(`ui.components.date-range-picker.ranges.${t}`)]=(0,I.b)(this.hass,t)}))}},{key:"render",value:function(){if(!this.hass||!this._startDate)return w.s6;var t=this._simpleRange(this._startDate,this._endDate,this.hass.locale,this.hass.config);return(0,w.qy)(j||(j=N` <div class="row"> <div class="label"> ${0} </div> <div class="time-handle"> <ha-icon-button-prev .label="${0}" @click="${0}"></ha-icon-button-prev> <ha-icon-button-next .label="${0}" @click="${0}"></ha-icon-button-next> <ha-date-range-picker .hass="${0}" .startDate="${0}" .endDate="${0}" .ranges="${0}" @value-changed="${0}" @preset-selected="${0}" minimal header-position></ha-date-range-picker> </div> ${0} <ha-button-menu> <ha-icon-button slot="trigger" .label="${0}" .path="${0}"></ha-icon-button> <ha-check-list-item left @request-selected="${0}" .selected="${0}"> ${0} </ha-check-list-item> <slot name="overflow-menu"></slot> </ha-button-menu> </div> `),"day"===t?this.narrow?(0,S.kz)(this._startDate,this.hass.locale,this.hass.config):(0,S.Yq)(this._startDate,this.hass.locale,this.hass.config):"month"===t?(0,S.fr)(this._startDate,this.hass.locale,this.hass.config):"year"===t?(0,S.Pm)(this._startDate,this.hass.locale,this.hass.config):`${(0,S.sl)(this._startDate,this.hass.locale,this.hass.config)} – ${(0,S.sl)(this._endDate||new Date,this.hass.locale,this.hass.config)}`,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.previous"),this._pickPrevious,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.next"),this._pickNext,this.hass,this._startDate,this._endDate||new Date,this._ranges,this._dateRangeChanged,this._presetSelected,this.narrow?w.s6:(0,w.qy)(R||(R=N`<ha-button appearance="filled" size="small" @click="${0}"> ${0} </ha-button>`),this._pickNow,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.now")),this.hass.localize("ui.common.menu"),"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",this._toggleCompare,this._compare,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.compare"))}},{key:"_updateCollectionPeriod",value:function(){var t=(0,P.tb)(this.hass,{key:this.collectionKey});t.setPeriod(this._startDate,this._endDate),t.refresh()}},{key:"_dateRangeChanged",value:function(t){this._startDate=(0,x.ol)(t.detail.value.startDate,g.o,this.hass.locale,this.hass.config),this._endDate=(0,x.ol)(t.detail.value.endDate,y.D,this.hass.locale,this.hass.config),this._updateCollectionPeriod()}},{key:"_presetSelected",value:function(t){localStorage.setItem(`energy-default-period-_${this.collectionKey||"energy"}`,q[t.detail.index])}},{key:"_pickNow",value:function(){if(this._startDate){var t=this._simpleRange(this._startDate,this._endDate,this.hass.locale,this.hass.config),e=new Date;if("month"===t){var i=(0,I.b)(this.hass,"this_month"),a=(0,s.A)(i,2);this._startDate=a[0],this._endDate=a[1]}else if("quarter"===t){var n=(0,I.b)(this.hass,"this_quarter"),r=(0,s.A)(n,2);this._startDate=r[0],this._endDate=r[1]}else if("year"===t){var o=(0,I.b)(this.hass,"this_year"),l=(0,s.A)(o,2);this._startDate=l[0],this._endDate=l[1]}else{var c=(0,C.PE)(this.hass.locale),h=(0,x.ol)(this._endDate,m.k,this.hass.locale,this.hass.config,{weekStartsOn:c}),u=(0,x.ol)(this._endDate,k.$,this.hass.locale,this.hass.config,{weekStartsOn:c});if(this._startDate.getTime()===h.getTime()&&this._endDate.getTime()===u.getTime()){var d=(0,I.b)(this.hass,"this_week"),f=(0,s.A)(d,2);this._startDate=f[0],this._endDate=f[1]}else{var p=(0,x.EO)(this._endDate,this._startDate,_.c,this.hass.locale,this.hass.config);this._startDate=(0,x.ol)((0,x.ol)(e,D.e,this.hass.locale,this.hass.config,p),g.o,this.hass.locale,this.hass.config,{weekStartsOn:c}),this._endDate=(0,x.ol)(e,y.D,this.hass.locale,this.hass.config,{weekStartsOn:c})}}this._updateCollectionPeriod()}}},{key:"_pickPrevious",value:function(){this._shift(!1)}},{key:"_pickNext",value:function(){this._shift(!0)}},{key:"_shift",value:function(t){if(this._startDate){var e=(0,x.eE)(this._startDate,this._endDate,t,this.hass.locale,this.hass.config),i=e.start,s=e.end;this._startDate=i,this._endDate=s,this._updateCollectionPeriod()}}},{key:"_updateDates",value:function(t){this._compare=void 0!==t.startCompare,this._startDate=t.start,this._endDate=t.end||(0,b.o)()}},{key:"_toggleCompare",value:function(t){if("interaction"===t.detail.source){this._compare=t.detail.selected;var e=(0,P.tb)(this.hass,{key:this.collectionKey});e.setCompare(this._compare?P.lh.PREVIOUS:P.lh.NONE),e.refresh()}}}]);var i}((0,W.E)(w.WF));T.styles=(0,w.AH)(U||(U=N`.row{display:flex;align-items:center}:host .time-handle{display:flex;justify-content:flex-end;align-items:center}:host([narrow]) .time-handle{margin-left:auto;margin-inline-start:auto;margin-inline-end:initial}.label{display:flex;align-items:center;justify-content:flex-end;font-size:var(--ha-font-size-xl);margin-left:auto;margin-inline-start:auto;margin-inline-end:initial}:host([narrow]) .label{margin-left:unset;margin-inline-start:unset;margin-inline-end:initial}ha-button{margin-left:8px;margin-inline-start:8px;margin-inline-end:initial;flex-shrink:0;--ha-button-theme-color:currentColor}`)),(0,d.__decorate)([(0,A.MZ)({attribute:!1})],T.prototype,"hass",void 0),(0,d.__decorate)([(0,A.MZ)({attribute:"collection-key"})],T.prototype,"collectionKey",void 0),(0,d.__decorate)([(0,A.MZ)({type:Boolean,reflect:!0})],T.prototype,"narrow",void 0),(0,d.__decorate)([(0,A.wk)()],T.prototype,"_startDate",void 0),(0,d.__decorate)([(0,A.wk)()],T.prototype,"_endDate",void 0),(0,d.__decorate)([(0,A.wk)()],T.prototype,"_ranges",void 0),(0,d.__decorate)([(0,A.wk)()],T.prototype,"_compare",void 0),T=(0,d.__decorate)([(0,A.EM)("hui-energy-period-selector")],T),e()}catch(K){e(K)}})},74879:function(t,e,i){var s=i(87642),a=i(36196),n=i(48630),r=i(85456),o=TypeError,l=Object.defineProperty,c=a.self!==a;try{if(r){var h=Object.getOwnPropertyDescriptor(a,"self");!c&&h&&h.get&&h.enumerable||n(a,"self",{get:function(){return a},set:function(t){if(this!==a)throw new o("Illegal invocation");l(a,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else s({global:!0,simple:!0,forced:c},{self:a})}catch(u){}},23336:function(t,e,i){i.d(e,{e:function(){return a}});var s=i(9151);function a(t,e,i){return(0,s.P)(t,12*e,i)}},76174:function(t,e,i){i.d(e,{o:function(){return a}});var s=i(3313);function a(t){return(0,s.D)(Date.now(),t)}}}]);
//# sourceMappingURL=72855.d6d4737abd712c67.js.map