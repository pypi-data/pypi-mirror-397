"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["50435"],{58126:function(e,t,a){a.r(t);var n=a(18202),i=a(73983),r=a(15243),s=a(98735),o=a(88486),c=a(62020),h=a(31802),l=(a(46852),a(38606),a(96956),a(79827),a(35748),a(80178),a(65315),a(12840),a(837),a(37089),a(59023),a(45519),a(5934),a(67579),a(41190),a(47849),a(95013),a(45460),a(18332),a(13484),a(81071),a(92714),a(55885),function(){function e(t,a,n,i,r){(0,c.A)(this,e),this._legacyCanvasSize=e.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=t,this.$canvas=document.createElement("canvas"),n&&"object"==typeof n?this._onDecode=a:(n||i||r?console.warn("You're using a deprecated version of the QrScanner constructor which will be removed in the future"):console.warn("Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=a),a="object"==typeof n?n:{},this._onDecodeError=a.onDecodeError||("function"==typeof n?n:this._onDecodeError),this._calculateScanRegion=a.calculateScanRegion||("function"==typeof i?i:this._calculateScanRegion),this._preferredCamera=a.preferredCamera||r||this._preferredCamera,this._legacyCanvasSize="number"==typeof n?n:"number"==typeof i?i:this._legacyCanvasSize,this._maxScansPerSecond=a.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),t.disablePictureInPicture=!0,t.playsInline=!0,t.muted=!0;var s=!1;if(t.hidden&&(t.hidden=!1,s=!0),document.body.contains(t)||(document.body.appendChild(t),s=!0),n=t.parentElement,a.highlightScanRegion||a.highlightCodeOutline){if(i=!!a.overlay,this.$overlay=a.overlay||document.createElement("div"),(r=this.$overlay.style).position="absolute",r.display="none",r.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!i&&a.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch(o){}n.insertBefore(this.$overlay,this.$video.nextSibling)}a.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(t),requestAnimationFrame(()=>{var e=window.getComputedStyle(t);"none"===e.display&&(t.style.setProperty("display","block","important"),s=!0),"visible"!==e.visibility&&(t.style.setProperty("visibility","visible","important"),s=!0),s&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),t.style.opacity="0",t.style.width="0",t.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),t.addEventListener("play",this._onPlay),t.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=e.createQrEngine()}return(0,h.A)(e,[{key:"hasFlash",value:(S=(0,o.A)((0,s.A)().m(function t(){var a;return(0,s.A)().w(function(t){for(;;)switch(t.p=t.n){case 0:if(t.p=0,!this.$video.srcObject){t.n=2;break}if(this.$video.srcObject instanceof MediaStream){t.n=1;break}return t.a(2,!1);case 1:a=this.$video.srcObject,t.n=4;break;case 2:return t.n=3,this._getCameraStream();case 3:a=t.v.stream;case 4:return t.a(2,"torch"in a.getVideoTracks()[0].getSettings());case 5:return t.p=5,t.v,t.a(2,!1);case 6:return t.p=6,a&&a!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),e._stopVideoStream(a)),t.f(6);case 7:return t.a(2)}},t,this,[[0,5,6,7]])})),function(){return S.apply(this,arguments)})},{key:"isFlashOn",value:function(){return this._flashOn}},{key:"toggleFlash",value:(A=(0,o.A)((0,s.A)().m(function e(){return(0,s.A)().w(function(e){for(;;)switch(e.n){case 0:if(!this._flashOn){e.n=2;break}return e.n=1,this.turnFlashOff();case 1:e.n=3;break;case 2:return e.n=3,this.turnFlashOn();case 3:return e.a(2)}},e,this)})),function(){return A.apply(this,arguments)})},{key:"turnFlashOn",value:(k=(0,o.A)((0,s.A)().m(function e(){var t;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this._flashOn||this._destroyed||(this._flashOn=!0,!this._active||this._paused)){e.n=6;break}return e.p=1,e.n=2,this.hasFlash();case 2:if(e.v){e.n=3;break}throw"No flash available";case 3:return e.n=4,this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]});case 4:e.n=6;break;case 5:throw e.p=5,t=e.v,this._flashOn=!1,t;case 6:return e.a(2)}},e,this,[[1,5]])})),function(){return k.apply(this,arguments)})},{key:"turnFlashOff",value:(b=(0,o.A)((0,s.A)().m(function e(){return(0,s.A)().w(function(e){for(;;)switch(e.n){case 0:if(!this._flashOn){e.n=1;break}return this._flashOn=!1,e.n=1,this._restartVideoStream();case 1:return e.a(2)}},e,this)})),function(){return b.apply(this,arguments)})},{key:"destroy",value:function(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),e._postWorkerMessage(this._qrEnginePromise,"close")}},{key:"start",value:(w=(0,o.A)((0,s.A)().m(function t(){var a,n,i,r;return(0,s.A)().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!this._destroyed){t.n=1;break}throw Error("The QR scanner can not be started as it had been destroyed.");case 1:if(this._active&&!this._paused){t.n=9;break}if("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,document.hidden){t.n=9;break}if(this._paused=!1,!this.$video.srcObject){t.n=3;break}return t.n=2,this.$video.play();case 2:t.n=9;break;case 3:return t.p=3,t.n=4,this._getCameraStream();case 4:if(a=t.v,n=a.stream,i=a.facingMode,this._active&&!this._paused){t.n=5;break}e._stopVideoStream(n),t.n=7;break;case 5:return this._setVideoMirror(i),this.$video.srcObject=n,t.n=6,this.$video.play();case 6:this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{}));case 7:t.n=9;break;case 8:if(t.p=8,r=t.v,this._paused){t.n=9;break}throw this._active=!1,r;case 9:return t.a(2)}},t,this,[[3,8]])})),function(){return w.apply(this,arguments)})},{key:"stop",value:function(){this.pause(),this._active=!1}},{key:"pause",value:(_=(0,o.A)((0,s.A)().m(function t(){var a,n,i=arguments;return(0,s.A)().w(function(t){for(;;)switch(t.n){case 0:if(a=i.length>0&&void 0!==i[0]&&i[0],this._paused=!0,this._active){t.n=1;break}return t.a(2,!0);case 1:if(this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none"),n=()=>{this.$video.srcObject instanceof MediaStream&&(e._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)},!a){t.n=2;break}return t.a(2,(n(),!0));case 2:return t.n=3,new Promise(e=>setTimeout(e,300));case 3:if(this._paused){t.n=4;break}return t.a(2,!1);case 4:return n(),t.a(2,!0)}},t,this)})),function(){return _.apply(this,arguments)})},{key:"setCamera",value:(y=(0,o.A)((0,s.A)().m(function e(t){return(0,s.A)().w(function(e){for(;;)switch(e.n){case 0:if(t===this._preferredCamera){e.n=1;break}return this._preferredCamera=t,e.n=1,this._restartVideoStream();case 1:return e.a(2)}},e,this)})),function(e){return y.apply(this,arguments)})},{key:"setGrayscaleWeights",value:function(t,a,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:t,green:a,blue:n,useIntegerApproximation:i})}},{key:"setInversionMode",value:function(t){e._postWorkerMessage(this._qrEnginePromise,"inversionMode",t)}},{key:"_onPlay",value:function(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}},{key:"_onLoadedMetaData",value:function(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}},{key:"_onVisibilityChange",value:function(){document.hidden?this.pause():this._active&&this.start()}},{key:"_calculateScanRegion",value:function(e){var t=Math.round(2/3*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}},{key:"_updateOverlay",value:function(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,t=e.videoWidth,a=e.videoHeight,n=e.offsetWidth,i=e.offsetHeight,s=e.offsetLeft,o=e.offsetTop,c=window.getComputedStyle(e),h=c.objectFit,l=t/a,d=n/i;switch(h){case"none":var u=t,v=a;break;case"fill":u=n,v=i;break;default:("cover"===h?l>d:l<d)?u=(v=i)*l:v=(u=n)/l,"scale-down"===h&&(u=Math.min(u,t),v=Math.min(v,a))}var f=c.objectPosition.split(" ").map((e,t)=>{var a=parseFloat(e);return e.endsWith("%")?(t?i-v:n-u)*a/100:a}),g=(0,r.A)(f,2),m=g[0],p=g[1];c=this._scanRegion.width||t,d=this._scanRegion.height||a,h=this._scanRegion.x||0;var y=this._scanRegion.y||0;(l=this.$overlay.style).width=c/t*u+"px",l.height=d/a*v+"px",l.top=`${o+p+y/a*v}px`,a=/scaleX\(-1\)/.test(e.style.transform),l.left=`${s+(a?n-m-u:m)+(a?t-h-c:h)/t*u}px`,l.transform=e.style.transform}})}},{key:"_scanFrame",value:function(){var t=this;!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)((0,o.A)((0,s.A)().m(function a(){var n,i,r,o,c,h,l;return(0,s.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:if(1>=t.$video.readyState){a.n=10;break}if(n=Date.now()-t._lastScanTimestamp,i=1e3/t._maxScansPerSecond,!(n<i)){a.n=1;break}return a.n=1,new Promise(e=>setTimeout(e,i-n));case 1:return t._lastScanTimestamp=Date.now(),a.p=2,a.n=3,e.scanImage(t.$video,{scanRegion:t._scanRegion,qrEngine:t._qrEnginePromise,canvas:t.$canvas});case 3:r=a.v,a.n=6;break;case 4:if(a.p=4,o=a.v,t._active){a.n=5;break}return a.a(2);case 5:t._onDecodeError(o);case 6:if(c=!e._disableBarcodeDetector){a.n=8;break}return a.n=7,t._qrEnginePromise;case 7:h=a.v,l=Worker,c=h instanceof l;case 8:if(c){a.n=9;break}t._qrEnginePromise=e.createQrEngine();case 9:r?(t._onDecode?t._onDecode(r):t._legacyOnDecode&&t._legacyOnDecode(r.data),t.$codeOutlineHighlight&&(clearTimeout(t._codeOutlineHighlightRemovalTimeout),t._codeOutlineHighlightRemovalTimeout=void 0,t.$codeOutlineHighlight.setAttribute("viewBox",`${t._scanRegion.x||0} ${t._scanRegion.y||0} ${t._scanRegion.width||t.$video.videoWidth} ${t._scanRegion.height||t.$video.videoHeight}`),t.$codeOutlineHighlight.firstElementChild.setAttribute("points",r.cornerPoints.map(e=>`${e.x},${e.y}`).join(" ")),t.$codeOutlineHighlight.style.display="")):t.$codeOutlineHighlight&&!t._codeOutlineHighlightRemovalTimeout&&(t._codeOutlineHighlightRemovalTimeout=setTimeout(()=>t.$codeOutlineHighlight.style.display="none",100));case 10:t._scanFrame();case 11:return a.a(2)}},a,null,[[2,4]])})))}},{key:"_onDecodeError",value:function(t){t!==e.NO_QR_CODE_FOUND&&console.log(t)}},{key:"_getCameraStream",value:(p=(0,o.A)((0,s.A)().m(function e(){var t,a,n,r,o,c,h,l;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(navigator.mediaDevices){e.n=1;break}throw"Camera not found.";case 1:t=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",n=(a=[{width:{min:1024}},{width:{min:768}},{}]).map(e=>Object.assign({},e,{[t]:{exact:this._preferredCamera}})),r=0,o=[].concat((0,i.A)(n),a);case 2:if(!(r<o.length)){e.n=7;break}return c=o[r],e.p=3,e.n=4,navigator.mediaDevices.getUserMedia({video:c,audio:!1});case 4:return h=e.v,l=this._getFacingMode(h)||(c.facingMode?this._preferredCamera:"environment"===this._preferredCamera?"user":"environment"),e.a(2,{stream:h,facingMode:l});case 5:e.p=5,e.v;case 6:r++,e.n=2;break;case 7:throw"Camera not found.";case 8:return e.a(2)}},e,this,[[3,5]])})),function(){return p.apply(this,arguments)})},{key:"_restartVideoStream",value:(m=(0,o.A)((0,s.A)().m(function e(){var t,a,n;return(0,s.A)().w(function(e){for(;;)switch(e.n){case 0:return t=this._paused,e.n=1,this.pause(!0);case 1:if(!(n=e.v)){e.n=2;break}n=!t;case 2:if(!(a=n)){e.n=3;break}a=this._active;case 3:if(!a){e.n=4;break}return e.n=4,this.start();case 4:return e.a(2)}},e,this)})),function(){return m.apply(this,arguments)})},{key:"_setVideoMirror",value:function(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}},{key:"_getFacingMode",value:function(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}}],[{key:"WORKER_PATH",set:function(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}},{key:"hasCamera",value:(g=(0,o.A)((0,s.A)().m(function t(){return(0,s.A)().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.listCameras(!1);case 1:return t.a(2,!!t.v.length);case 2:return t.p=2,t.v,t.a(2,!1)}},t,null,[[0,2]])})),function(){return g.apply(this,arguments)})},{key:"listCameras",value:(f=(0,o.A)((0,s.A)().m(function t(){var a,n,i,r,c=arguments;return(0,s.A)().w(function(t){for(;;)switch(t.p=t.n){case 0:if(a=c.length>0&&void 0!==c[0]&&c[0],navigator.mediaDevices){t.n=1;break}return t.a(2,[]);case 1:if(n=function(){var e=(0,o.A)((0,s.A)().m(function e(){return(0,s.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,navigator.mediaDevices.enumerateDevices();case 1:return e.a(2,e.v.filter(e=>"videoinput"===e.kind))}},e)}));return function(){return e.apply(this,arguments)}}(),t.p=2,!(r=a)){t.n=4;break}return t.n=3,n();case 3:r=t.v.every(e=>!e.label);case 4:if(!r){t.n=6;break}return t.n=5,navigator.mediaDevices.getUserMedia({audio:!1,video:!0});case 5:i=t.v;case 6:t.n=8;break;case 7:t.p=7,t.v;case 8:return t.p=8,t.n=9,n();case 9:return t.a(2,t.v.map((e,t)=>({id:e.deviceId,label:e.label||(0===t?"Default Camera":`Camera ${t+1}`)})));case 10:return t.p=10,i&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),e._stopVideoStream(i)),t.f(10);case 11:return t.a(2)}},t,null,[[8,,10,11],[2,7]])})),function(){return f.apply(this,arguments)})},{key:"scanImage",value:(v=(0,o.A)((0,s.A)().m(function t(a,n,i,c){var h,l,d,u,v,f,g,m,p,y,_,w,b,k,A=arguments;return(0,s.A)().w(function(t){for(;;)switch(t.p=t.n){case 0:return h=A.length>4&&void 0!==A[4]&&A[4],l=A.length>5&&void 0!==A[5]&&A[5],u=!1,n&&("scanRegion"in n||"qrEngine"in n||"canvas"in n||"disallowCanvasResizing"in n||"alsoTryWithoutScanRegion"in n||"returnDetailedScanResult"in n)?(d=n.scanRegion,i=n.qrEngine,c=n.canvas,h=n.disallowCanvasResizing||!1,l=n.alsoTryWithoutScanRegion||!1,u=!0):n||i||c||h||l?console.warn("You're using a deprecated api for scanImage which will be removed in the future."):console.warn("Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),n=!!i,t.p=1,t.n=2,Promise.all([i||e.createQrEngine(),e._loadImage(a)]);case 2:if(g=t.v,m=(0,r.A)(g,2),i=m[0],v=m[1],p=e._drawToCanvas(v,d,c,h),y=(0,r.A)(p,2),c=y[0],f=y[1],!(i instanceof Worker)){t.n=4;break}return w=i,n||e._postWorkerMessageSync(w,"inversionMode","both"),t.n=3,new Promise((t,a)=>{var n,i,r,s=-1;i=o=>{o.data.id===s&&(w.removeEventListener("message",i),w.removeEventListener("error",r),clearTimeout(n),null!==o.data.data?t({data:o.data.data,cornerPoints:e._convertPoints(o.data.cornerPoints,d)}):a(e.NO_QR_CODE_FOUND))},r=e=>{w.removeEventListener("message",i),w.removeEventListener("error",r),clearTimeout(n),a("Scanner error: "+(e?e.message||e:"Unknown Error"))},w.addEventListener("message",i),w.addEventListener("error",r),n=setTimeout(()=>r("timeout"),1e4);var o=f.getImageData(0,0,c.width,c.height);s=e._postWorkerMessageSync(w,"decode",o,[o.data.buffer])});case 3:_=t.v,t.n=6;break;case 4:return t.n=5,Promise.race([new Promise((e,t)=>window.setTimeout(()=>t("Scanner error: timeout"),1e4)),(0,o.A)((0,s.A)().m(function t(){var n,o,u,v;return(0,s.A)().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,i.detect(c);case 1:if(n=t.v,o=(0,r.A)(n,1),u=o[0]){t.n=2;break}throw e.NO_QR_CODE_FOUND;case 2:return t.a(2,{data:u.rawValue,cornerPoints:e._convertPoints(u.cornerPoints,d)});case 3:if(t.p=3,v=t.v,u=v.message||v,!/not implemented|service unavailable/.test(u)){t.n=4;break}return t.a(2,(e._disableBarcodeDetector=!0,e.scanImage(a,{scanRegion:d,canvas:c,disallowCanvasResizing:h,alsoTryWithoutScanRegion:l})));case 4:throw`Scanner error: ${u}`;case 5:return t.a(2)}},t,null,[[0,3]])}))()]);case 5:_=t.v;case 6:return t.a(2,u?_:_.data);case 7:if(t.p=7,k=t.v,d&&l){t.n=8;break}throw k;case 8:return t.n=9,e.scanImage(a,{qrEngine:i,canvas:c,disallowCanvasResizing:h});case 9:return b=t.v,t.a(2,u?b:b.data);case 10:return t.p=10,n||e._postWorkerMessage(i,"close"),t.f(10);case 11:return t.a(2)}},t,null,[[1,7,10,11]])})),function(e,t,a,n){return v.apply(this,arguments)})},{key:"createQrEngine",value:(u=(0,o.A)((0,s.A)().m(function t(n){var i,r,o,c;return(0,s.A)().w(function(t){for(;;)switch(t.n){case 0:if(n&&console.warn("Specifying a worker path is not required and not supported anymore."),n=()=>a.e("74698").then(a.bind(a,85137)).then(e=>e.createWorker()),!(r=!e._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats)){t.n=2;break}return t.n=1,BarcodeDetector.getSupportedFormats();case 1:r=t.v.includes("qr_code");case 2:if(r){t.n=3;break}return t.a(2,n());case 3:if(i=navigator.userAgentData,!(o=i&&i.brands.some(e=>{var t=e.brand;return/Chromium/i.test(t)})&&/mac ?OS/i.test(i.platform))){t.n=5;break}return t.n=4,i.getHighEntropyValues(["architecture","platformVersion"]).then(e=>{var t=e.architecture,a=e.platformVersion;return/arm/i.test(t||"arm")&&13<=parseInt(a||"13")}).catch(()=>!0);case 4:o=t.v;case 5:if(!o){t.n=6;break}c=n(),t.n=7;break;case 6:c=new BarcodeDetector({formats:["qr_code"]});case 7:return t.a(2,c)}},t)})),function(e){return u.apply(this,arguments)})},{key:"_convertPoints",value:function(e,t){if(!t)return e;var a=t.x||0,i=t.y||0,r=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1;var s,o=(0,n.A)(e);try{for(o.s();!(s=o.n()).done;){var c=s.value;c.x=c.x*r+a,c.y=c.y*t+i}}catch(h){o.e(h)}finally{o.f()}return e}},{key:"_stopVideoStream",value:function(e){var t,a=(0,n.A)(e.getTracks());try{for(a.s();!(t=a.n()).done;){var i=t.value;i.stop(),e.removeTrack(i)}}catch(r){a.e(r)}finally{a.f()}}},{key:"_drawToCanvas",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];a=a||document.createElement("canvas");var i=t&&t.x?t.x:0,r=t&&t.y?t.y:0,s=t&&t.width?t.width:e.videoWidth||e.width,o=t&&t.height?t.height:e.videoHeight||e.height;return n||(n=t&&t.downScaledWidth?t.downScaledWidth:s,t=t&&t.downScaledHeight?t.downScaledHeight:o,a.width!==n&&(a.width=n),a.height!==t&&(a.height=t)),(t=a.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,t.drawImage(e,i,r,s,o,0,0,a.width,a.height),[a,t]}},{key:"_loadImage",value:(d=(0,o.A)((0,s.A)().m(function t(a){var n;return(0,s.A)().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!(a instanceof Image)){t.n=2;break}return t.n=1,e._awaitImageLoad(a);case 1:return t.a(2,a);case 2:if(!(a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement||a instanceof SVGImageElement||"OffscreenCanvas"in window&&a instanceof OffscreenCanvas||"ImageBitmap"in window&&a instanceof ImageBitmap)){t.n=3;break}return t.a(2,a);case 3:if(!(a instanceof File||a instanceof Blob||a instanceof URL||"string"==typeof a)){t.n=8;break}return(n=new Image).src=a instanceof File||a instanceof Blob?URL.createObjectURL(a):a.toString(),t.p=4,t.n=5,e._awaitImageLoad(n);case 5:return t.a(2,n);case 6:return t.p=6,(a instanceof File||a instanceof Blob)&&URL.revokeObjectURL(n.src),t.f(6);case 7:t.n=9;break;case 8:throw"Unsupported image type.";case 9:return t.a(2)}},t,null,[[4,,6,7]])})),function(e){return d.apply(this,arguments)})},{key:"_awaitImageLoad",value:(l=(0,o.A)((0,s.A)().m(function e(t){return(0,s.A)().w(function(e){for(;;)switch(e.n){case 0:if(t.complete&&0!==t.naturalWidth){e.n=1;break}return e.n=1,new Promise((e,a)=>{var n=i=>{t.removeEventListener("load",n),t.removeEventListener("error",n),i instanceof ErrorEvent?a("Image load error"):e()};t.addEventListener("load",n),t.addEventListener("error",n)});case 1:return e.a(2)}},e)})),function(e){return l.apply(this,arguments)})},{key:"_postWorkerMessage",value:(t=(0,o.A)((0,s.A)().m(function t(a,n,i,r){var o;return(0,s.A)().w(function(t){for(;;)switch(t.n){case 0:return o=e,t.n=1,a;case 1:return t.a(2,o._postWorkerMessageSync.call(o,t.v,n,i,r))}},t)})),function(e,a,n,i){return t.apply(this,arguments)})},{key:"_postWorkerMessageSync",value:function(t,a,n,i){if(!(t instanceof Worker))return-1;var r=e._workerMessageId++;return t.postMessage({id:r,type:a,data:n},i),r}}]);var t,l,d,u,v,f,g,m,p,y,_,w,b,k,A,S}());l.DEFAULT_CANVAS_SIZE=400,l.NO_QR_CODE_FOUND="No QR code found",l._disableBarcodeDetector=!1,l._workerMessageId=0,t.default=l}}]);
//# sourceMappingURL=50435.fa2949a198636f91.js.map