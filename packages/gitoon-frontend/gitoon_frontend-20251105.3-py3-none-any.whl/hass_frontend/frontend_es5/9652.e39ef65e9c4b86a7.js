"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["9652"],{73275:function(t,i,e){e.d(i,{e:function(){return n}});var n=t=>`/api/image_proxy/${t.entity_id}?token=${t.attributes.access_token}&state=${t.state}`},84432:function(t,i,e){e.d(i,{A1:function(){return o},CY:function(){return c},Fn:function(){return s},Jz:function(){return u},St:function(){return h},VA:function(){return f},WI:function(){return d},iY:function(){return _},xw:function(){return r}});var n=e(98735),a=e(88486),o=(e(46852),(t,i)=>t.callWS({type:"media_source/resolve_media",media_content_id:i})),s=(t,i)=>t.callWS({type:"media_source/browse_media",media_content_id:i}),r="__MANUAL_ENTRY__",c=t=>t.startsWith(r),h=t=>t.startsWith("media-source://"),u=t=>t.startsWith("media-source://media_source"),_=t=>t.startsWith("media-source://image_upload"),f=function(){var t=(0,a.A)((0,n.A)().m(function t(i,e,a){var o,s;return(0,n.A)().w(function(t){for(;;)switch(t.n){case 0:return(o=new FormData).append("media_content_id",e),o.append("file",a),t.n=1,i.fetchWithAuth("/api/media_source/local_source/upload",{method:"POST",body:o});case 1:if(413!==(s=t.v).status){t.n=2;break}throw new Error(`Uploaded file is too large (${a.name})`);case 2:if(200===s.status){t.n=3;break}throw new Error("Unknown error");case 3:return t.a(2,s.json())}},t)}));return function(i,e,n){return t.apply(this,arguments)}}(),d=function(){var t=(0,a.A)((0,n.A)().m(function t(i,e){return(0,n.A)().w(function(t){for(;;)if(0===t.n)return t.a(2,i.callWS({type:"media_source/local_source/remove",media_content_id:e}))},t)}));return function(i,e){return t.apply(this,arguments)}}()},89823:function(t,i,e){e.r(i),e.d(i,{HuiPictureCard:function(){return S}});var n,a,o,s=e(98735),r=e(88486),c=e(62020),h=e(31802),u=e(21101),_=e(87426),f=e(23180),d=(e(46852),e(35748),e(45519),e(5934),e(95013),e(69868)),g=e(84922),l=e(11991),m=e(75907),p=e(13802),v=e(91634),y=e(88341),w=(e(70490),e(73275)),b=e(46407),k=e(47426),A=e(3922),$=e(8510),W=e(78709),C=e(84432),I=t=>t,S=function(t){function i(){return(0,c.A)(this,i),(0,u.A)(this,i,arguments)}return(0,f.A)(i,t),(0,h.A)(i,[{key:"getCardSize",value:function(){return 5}},{key:"setConfig",value:function(t){if(!t||!t.image&&!t.image_entity)throw new Error("Image required");this._config=Object.assign({tap_action:{action:"more-info"}},t)}},{key:"shouldUpdate",value:function(t){if(!this._config||(0,$.xP)(this,t)||t.has("_resolvedImage"))return!0;if(this._config.image_entity&&t.has("hass")){var i=t.get("hass");if(!i||i.states[this._config.image_entity]!==this.hass.states[this._config.image_entity])return!0}return!1}},{key:"willUpdate",value:function(t){var e,n,a;if((0,_.A)(i,"willUpdate",this,3)([t]),this._config&&this.hass){var o=t.has("hass")&&void 0===t.get("hass"),s=t.has("_config")&&(null===(e=t.get("_config"))||void 0===e?void 0:e.image)!==(null===(n=this._config)||void 0===n?void 0:n.image),r="object"==typeof(null===(a=this._config)||void 0===a?void 0:a.image)&&this._config.image.media_content_id||this._config.image;(o||s)&&"string"==typeof r&&(0,C.St)(r)?(this._resolvedImage=void 0,(0,C.A1)(this.hass,r).then(t=>{this._resolvedImage=t.url})):s&&(this._resolvedImage=r)}}},{key:"updated",value:function(t){if((0,_.A)(i,"updated",this,3)([t]),this._config&&this.hass){var e=t.get("hass"),n=t.get("_config");e&&n&&e.themes===this.hass.themes&&n.theme===this._config.theme||(0,v.Q)(this,this.hass.themes,this._config.theme)}}},{key:"render",value:function(){var t,i;if(!this._config||!this.hass)return g.s6;if(this._config.image_entity&&!(i=this.hass.states[this._config.image_entity]))return(0,g.qy)(n||(n=I`<hui-warning .hass="${0}"> ${0} </hui-warning>`),this.hass,(0,W.j)(this.hass,this._config.image_entity));var e=this._resolvedImage;if(this._config.image_entity)switch((0,y.m)(this._config.image_entity)){case"image":e=(0,w.e)(i);break;case"person":i.attributes.entity_picture&&(e=i.attributes.entity_picture)}return void 0===e?g.s6:(0,g.qy)(a||(a=I` <ha-card @action="${0}" .actionHandler="${0}" tabindex="${0}" class="${0}"> <img alt="${0}" src="${0}"> </ha-card> `),this._handleAction,(0,b.T)({hasHold:(0,A.h)(this._config.hold_action),hasDoubleClick:(0,A.h)(this._config.double_tap_action)}),(0,p.J)((0,A.h)(this._config.tap_action)||this._config.image_entity?"0":void 0),(0,m.H)({clickable:Boolean(this._config.image_entity&&!this._config.tap_action||this._config.tap_action&&"none"!==this._config.tap_action.action||this._config.hold_action&&"none"!==this._config.hold_action.action||this._config.double_tap_action&&"none"!==this._config.double_tap_action.action)}),(0,p.J)(this._config.alt_text||(null===(t=i)||void 0===t?void 0:t.attributes.friendly_name)),this.hass.hassUrl(e))}},{key:"_handleAction",value:function(t){(0,k.$)(this,this.hass,this._config,t.detail.action)}}],[{key:"getConfigElement",value:(o=(0,r.A)((0,s.A)().m(function t(){return(0,s.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Promise.all([e.e("42153"),e.e("89088"),e.e("30199"),e.e("37620"),e.e("29166"),e.e("60493"),e.e("61717"),e.e("30578"),e.e("21107"),e.e("67529"),e.e("49917")]).then(e.bind(e,41464));case 1:return t.a(2,document.createElement("hui-picture-card-editor"))}},t)})),function(){return o.apply(this,arguments)})},{key:"getStubConfig",value:function(){return{type:"picture",image:"https://demo.home-assistant.io/stub_config/t-shirt-promo.png"}}}]);var o}(g.WF);S.styles=(0,g.AH)(o||(o=I`ha-card{overflow:hidden;height:100%}ha-card.clickable{cursor:pointer}img{display:block;width:100%}`)),(0,d.__decorate)([(0,l.MZ)({attribute:!1})],S.prototype,"hass",void 0),(0,d.__decorate)([(0,l.wk)()],S.prototype,"_config",void 0),(0,d.__decorate)([(0,l.wk)()],S.prototype,"_resolvedImage",void 0),S=(0,d.__decorate)([(0,l.EM)("hui-picture-card")],S)}}]);
//# sourceMappingURL=9652.e39ef65e9c4b86a7.js.map