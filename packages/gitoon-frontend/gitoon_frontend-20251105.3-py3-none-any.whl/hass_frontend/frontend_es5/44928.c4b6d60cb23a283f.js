"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["44928"],{79101:function(e,t,s){s.a(e,async function(e,n){try{s.r(t),s.d(t,{EnergySetupWizard:function(){return N}});var r=s(98735),i=s(88486),a=s(62020),h=s(31802),c=s(21101),u=s(23180),o=(s(38606),s(69868)),l=s(84922),p=s(11991),f=s(44017),g=s(43716),y=s(15241),_=s(50809),d=s(1736),v=s(47005),k=s(87448),$=s(77639),b=s(99460),x=s(96094),A=s(17372),w=e([d,v,k,$,b,x,A,g]);[d,v,k,$,b,x,A,g]=w.then?(await w)():w;var C,q,m,D,z,F,M,O,W,E,K,H,L=e=>e,N=function(e){function t(){var e;(0,a.A)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=(0,c.A)(this,t,[].concat(n)))._step=0,e._preferences={energy_sources:[],device_consumption:[]},e}return(0,u.A)(t,e),(0,h.A)(t,[{key:"getCardSize",value:function(){return 10}},{key:"setConfig",value:function(e){e.preferences&&(this._preferences=e.preferences)}},{key:"firstUpdated",value:function(){this.hass.loadFragmentTranslation("config"),this._fetchconfig()}},{key:"render",value:function(){return(0,l.qy)(C||(C=L` <p> ${0} </p> ${0} <div class="buttons"> ${0} ${0} </div> `),this.hass.localize("ui.panel.energy.setup.step",{step:this._step+1,steps:6}),0===this._step?(0,l.qy)(q||(q=L`<ha-energy-grid-settings .hass="${0}" .preferences="${0}" @value-changed="${0}"></ha-energy-grid-settings>`),this.hass,this._preferences,this._prefsChanged):1===this._step?(0,l.qy)(m||(m=L`<ha-energy-solar-settings .hass="${0}" .preferences="${0}" .info="${0}" @value-changed="${0}"></ha-energy-solar-settings>`),this.hass,this._preferences,this._info,this._prefsChanged):2===this._step?(0,l.qy)(D||(D=L`<ha-energy-battery-settings .hass="${0}" .preferences="${0}" @value-changed="${0}"></ha-energy-battery-settings>`),this.hass,this._preferences,this._prefsChanged):3===this._step?(0,l.qy)(z||(z=L`<ha-energy-gas-settings .hass="${0}" .preferences="${0}" @value-changed="${0}"></ha-energy-gas-settings>`),this.hass,this._preferences,this._prefsChanged):4===this._step?(0,l.qy)(F||(F=L`<ha-energy-water-settings .hass="${0}" .preferences="${0}" @value-changed="${0}"></ha-energy-water-settings>`),this.hass,this._preferences,this._prefsChanged):(0,l.qy)(M||(M=L`<ha-energy-device-settings .hass="${0}" .preferences="${0}" @value-changed="${0}"></ha-energy-device-settings>`),this.hass,this._preferences,this._prefsChanged),this._step>0?(0,l.qy)(O||(O=L`<ha-button appearance="plain" @click="${0}">${0}</ha-button>`),this._back,this.hass.localize("ui.panel.energy.setup.back")):(0,l.qy)(W||(W=L`<div></div>`)),this._step<4?(0,l.qy)(E||(E=L`<ha-button @click="${0}">${0}</ha-button>`),this._next,this.hass.localize("ui.panel.energy.setup.next")):(0,l.qy)(K||(K=L`<ha-button @click="${0}"> ${0} </ha-button>`),this._setupDone,this.hass.localize("ui.panel.energy.setup.done")))}},{key:"_fetchconfig",value:(n=(0,i.A)((0,r.A)().m(function e(){return(0,r.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,g.BV)(this.hass);case 1:this._info=e.v;case 2:return e.a(2)}},e,this)})),function(){return n.apply(this,arguments)})},{key:"_prefsChanged",value:function(e){this._preferences=e.detail.value}},{key:"_back",value:function(){0!==this._step&&this._step--}},{key:"_next",value:function(){5!==this._step&&this._step++}},{key:"_setupDone",value:(s=(0,i.A)((0,r.A)().m(function e(){var t;return(0,r.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this._preferences){e.n=1;break}return e.a(2);case 1:if(0!==this._preferences.device_consumption.length||0!==this._preferences.energy_sources.length){e.n=2;break}return(0,y.showAlertDialog)(this,{title:this.hass.localize("ui.panel.energy.setup.no_statistics_selected_title"),text:this.hass.localize("ui.panel.energy.setup.no_statistics_selected_description")}),e.a(2);case 2:return e.p=2,e.n=3,(0,g.WN)(this.hass,this._preferences);case 3:this._preferences=e.v,e.n=5;break;case 4:e.p=4,t=e.v,(0,y.showAlertDialog)(this,{title:`Failed to save config: ${t.message}`});case 5:(0,f.r)(this,"reload-energy-panel");case 6:return e.a(2)}},e,this,[[2,4]])})),function(){return s.apply(this,arguments)})}],[{key:"styles",get:function(){return[_.RF,(0,l.AH)(H||(H=L`:host{display:block;padding:16px;max-width:700px;margin:0 auto}ha-button{margin-top:8px}.buttons{display:flex;justify-content:space-between}`))]}}]);var s,n}(l.WF);(0,o.__decorate)([(0,p.MZ)({attribute:!1})],N.prototype,"hass",void 0),(0,o.__decorate)([(0,p.MZ)({attribute:!1})],N.prototype,"lovelace",void 0),(0,o.__decorate)([(0,p.wk)()],N.prototype,"_info",void 0),(0,o.__decorate)([(0,p.wk)()],N.prototype,"_step",void 0),(0,o.__decorate)([(0,p.wk)()],N.prototype,"_preferences",void 0),N=(0,o.__decorate)([(0,p.EM)("energy-setup-wizard-card")],N),n()}catch(S){n(S)}})},33055:function(e,t,s){s.d(t,{u:function(){return f}});var n=s(15243),r=s(18202),i=s(62020),a=s(31802),h=s(21101),c=s(23180),u=(s(46852),s(35748),s(34285),s(45519),s(95013),s(11681)),o=s(64363),l=s(67851),p=(e,t,s)=>{for(var n=new Map,r=t;r<=s;r++)n.set(e[r],r);return n},f=(0,o.u$)(function(e){function t(e){var s;if((0,i.A)(this,t),s=(0,h.A)(this,t,[e]),e.type!==o.OA.CHILD)throw Error("repeat() can only be used in text expressions");return s}return(0,c.A)(t,e),(0,a.A)(t,[{key:"dt",value:function(e,t,s){var n;void 0===s?s=t:void 0!==t&&(n=t);var i,a=[],h=[],c=0,u=(0,r.A)(e);try{for(u.s();!(i=u.n()).done;){var o=i.value;a[c]=n?n(o,c):c,h[c]=s(o,c),c++}}catch(l){u.e(l)}finally{u.f()}return{values:h,keys:a}}},{key:"render",value:function(e,t,s){return this.dt(e,t,s).values}},{key:"update",value:function(e,t){var s,r=(0,n.A)(t,3),i=r[0],a=r[1],h=r[2],c=(0,l.cN)(e),o=this.dt(i,a,h),f=o.values,g=o.keys;if(!Array.isArray(c))return this.ut=g,f;for(var y,_,d=null!==(s=this.ut)&&void 0!==s?s:this.ut=[],v=[],k=0,$=c.length-1,b=0,x=f.length-1;k<=$&&b<=x;)if(null===c[k])k++;else if(null===c[$])$--;else if(d[k]===g[b])v[b]=(0,l.lx)(c[k],f[b]),k++,b++;else if(d[$]===g[x])v[x]=(0,l.lx)(c[$],f[x]),$--,x--;else if(d[k]===g[x])v[x]=(0,l.lx)(c[k],f[x]),(0,l.Dx)(e,v[x+1],c[k]),k++,x--;else if(d[$]===g[b])v[b]=(0,l.lx)(c[$],f[b]),(0,l.Dx)(e,c[k],c[$]),$--,b++;else if(void 0===y&&(y=p(g,b,x),_=p(d,k,$)),y.has(d[k]))if(y.has(d[$])){var A=_.get(g[b]),w=void 0!==A?c[A]:null;if(null===w){var C=(0,l.Dx)(e,c[k]);(0,l.lx)(C,f[b]),v[b]=C}else v[b]=(0,l.lx)(w,f[b]),(0,l.Dx)(e,c[k],w),c[A]=null;b++}else(0,l.KO)(c[$]),$--;else(0,l.KO)(c[k]),k++;for(;b<=x;){var q=(0,l.Dx)(e,v[x+1]);(0,l.lx)(q,f[b]),v[b++]=q}for(;k<=$;){var m=c[k++];null!==m&&(0,l.KO)(m)}return this.ut=g,(0,l.mY)(e,v),u.c0}}])}(o.WL))}}]);
//# sourceMappingURL=44928.c4b6d60cb23a283f.js.map