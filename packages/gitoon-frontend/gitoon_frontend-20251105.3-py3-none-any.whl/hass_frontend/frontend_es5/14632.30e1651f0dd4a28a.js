"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["14632"],{94327:function(e,t,a){a.d(t,{Vy:function(){return n},fI:function(){return s},ux:function(){return c}});a(80178),a(45519);var r=a(65940),i=a(83510),o=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function n(e){return o[e%o.length]}function s(e,t){var a=t.getPropertyValue(`--graph-color-${e+1}`)||n(e);return(0,i.RQ)(a)}var c=(0,r.A)(e=>o.map((t,a)=>s(a,e)),(e,t)=>e[0].getPropertyValue("--graph-color-1")===t[0].getPropertyValue("--graph-color-1"))},6969:function(e,t,a){var r,i,o,n,s,c,h=a(62020),d=a(31802),l=a(21101),u=a(23180),p=(a(38606),a(69868)),g=a(84922),v=a(11991),f=a(50809),y=(a(86160),e=>e),b=function(e){function t(){var e;(0,h.A)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=(0,l.A)(this,t,[].concat(r))).label=!1,e.raised=!1,e.notEnabled=!1,e.lastItem=!1,e._showMore=!1,e}return(0,u.A)(t,e),(0,d.A)(t,[{key:"render",value:function(){return(0,g.qy)(r||(r=y` <div class="timeline-start"> ${0} ${0} </div> <div class="content"> <slot></slot> ${0} </div> `),this.label?"":(0,g.qy)(i||(i=y` <ha-svg-icon .path="${0}"></ha-svg-icon> `),this.icon||"M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"),this.lastItem?"":(0,g.qy)(o||(o=y`<div class="line"></div>`)),this.moreItems?(0,g.qy)(n||(n=y` <div> ${0} </div> `),this._showMore||1===this.moreItems.length?this.moreItems:(0,g.qy)(s||(s=y` <button class="link" @click="${0}"> Show ${0} more items </button> `),this._handleShowMore,this.moreItems.length)):"")}},{key:"_handleShowMore",value:function(){this._showMore=!0}}],[{key:"styles",get:function(){return[(0,g.AH)(c||(c=y`:host{display:flex;flex-direction:row}:host(:not([lastItem])){min-height:50px}:host([label]){margin-top:-8px;font-style:italic;color:var(--timeline-label-color,var(--secondary-text-color))}.timeline-start{display:flex;flex-direction:column;align-items:center;margin-right:8px;margin-inline-end:8px;margin-inline-start:initial;width:24px}:host([not-enabled]) ha-svg-icon{opacity:.5}ha-svg-icon{color:var(--timeline-ball-color,var(--timeline-color,var(--secondary-text-color)));border-radius:var(--ha-border-radius-circle)}:host([raised]) ha-svg-icon{transform:scale(1.3)}.line{flex:1;width:2px;background-color:var(--timeline-line-color,var(--timeline-color,var(--secondary-text-color)));margin:4px 0}.content{margin-top:2px}:host(:not([lastItem])) .content{padding-bottom:16px}:host([label]) .content{margin-top:0;padding-top:6px}`)),f.og]}}])}(g.WF);(0,p.__decorate)([(0,v.MZ)({type:Boolean,reflect:!0})],b.prototype,"label",void 0),(0,p.__decorate)([(0,v.MZ)({type:Boolean,reflect:!0})],b.prototype,"raised",void 0),(0,p.__decorate)([(0,v.MZ)({attribute:"not-enabled",reflect:!0,type:Boolean})],b.prototype,"notEnabled",void 0),(0,p.__decorate)([(0,v.MZ)({attribute:"last-item",type:Boolean})],b.prototype,"lastItem",void 0),(0,p.__decorate)([(0,v.MZ)({type:String})],b.prototype,"icon",void 0),(0,p.__decorate)([(0,v.MZ)({attribute:!1})],b.prototype,"moreItems",void 0),(0,p.__decorate)([(0,v.wk)()],b.prototype,"_showMore",void 0),b=(0,p.__decorate)([(0,v.EM)("ha-timeline")],b)},64798:function(e,t,a){a.a(e,async function(e,t){try{var r=a(62020),i=a(31802),o=a(21101),n=a(23180),s=(a(28358),a(69868)),c=a(90227),h=a(84922),d=a(11991),l=a(59435),u=(a(9058),e([l]));l=(u.then?(await u)():u)[0];var p,g=e=>e,v=function(e){function t(){return(0,r.A)(this,t),(0,o.A)(this,t,arguments)}return(0,n.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){return(0,h.qy)(p||(p=g` <ha-code-editor .value="${0}" read-only dir="ltr"></ha-code-editor> `),(0,c.dump)(this.trace.blueprint_inputs||"").trimRight())}}])}(h.WF);(0,s.__decorate)([(0,d.MZ)({attribute:!1})],v.prototype,"hass",void 0),(0,s.__decorate)([(0,d.MZ)({attribute:!1})],v.prototype,"trace",void 0),v=(0,s.__decorate)([(0,d.EM)("ha-trace-blueprint-config")],v),t()}catch(f){t(f)}})},55108:function(e,t,a){a.a(e,async function(e,t){try{var r=a(62020),i=a(31802),o=a(21101),n=a(23180),s=(a(28358),a(69868)),c=a(90227),h=a(84922),d=a(11991),l=a(59435),u=(a(9058),e([l]));l=(u.then?(await u)():u)[0];var p,g,v=e=>e,f=function(e){function t(){return(0,r.A)(this,t),(0,o.A)(this,t,arguments)}return(0,n.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){return(0,h.qy)(p||(p=v` <ha-code-editor .value="${0}" read-only dir="ltr"></ha-code-editor> `),(0,c.dump)(this.trace.config).trimRight())}}],[{key:"styles",get:function(){return[(0,h.AH)(g||(g=v``))]}}])}(h.WF);(0,s.__decorate)([(0,d.MZ)({attribute:!1})],f.prototype,"hass",void 0),(0,s.__decorate)([(0,d.MZ)({attribute:!1})],f.prototype,"trace",void 0),f=(0,s.__decorate)([(0,d.EM)("ha-trace-config")],f),t()}catch(y){t(y)}})},87155:function(e,t,a){a.a(e,async function(e,t){try{var r=a(62020),i=a(31802),o=a(21101),n=a(23180),s=(a(38606),a(69868)),c=a(84922),h=a(11991),d=(a(40580),a(94806)),l=e([d]);d=(l.then?(await l)():l)[0];var u,p,g,v=e=>e,f=function(e){function t(){var e;(0,r.A)(this,t);for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=(0,o.A)(this,t,[].concat(i))).narrow=!1,e}return(0,n.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){return this.logbookEntries.length?(0,c.qy)(u||(u=v` <ha-logbook-renderer relative-time .hass="${0}" .entries="${0}" .narrow="${0}"></ha-logbook-renderer> <hat-logbook-note .hass="${0}" .domain="${0}"></hat-logbook-note> `),this.hass,this.logbookEntries,this.narrow,this.hass,this.trace.domain):(0,c.qy)(p||(p=v`<div class="padded-box"> No Logbook entries found for this step. </div>`))}}],[{key:"styles",get:function(){return[(0,c.AH)(g||(g=v`.padded-box{padding:16px}`))]}}])}(c.WF);(0,s.__decorate)([(0,h.MZ)({attribute:!1})],f.prototype,"hass",void 0),(0,s.__decorate)([(0,h.MZ)({type:Boolean,reflect:!0})],f.prototype,"narrow",void 0),(0,s.__decorate)([(0,h.MZ)({attribute:!1})],f.prototype,"trace",void 0),(0,s.__decorate)([(0,h.MZ)({attribute:!1})],f.prototype,"logbookEntries",void 0),f=(0,s.__decorate)([(0,h.EM)("ha-trace-logbook")],f),t()}catch(y){t(y)}})},8718:function(e,t,a){a.a(e,async function(e,t){try{var r=a(52012),i=a(18202),o=a(62020),n=a(31802),s=a(21101),c=a(23180),h=(a(38606),a(74048),a(79827),a(44784),a(80178),a(99342),a(98522),a(65315),a(37089),a(45519),a(28358),a(69868)),d=a(90227),l=a(97809),u=a(84922),p=a(11991),g=a(75907),v=a(6149),f=a(59435),y=(a(9058),a(40580),a(26399)),b=a(94806),_=a(82342),m=a(51414),$=a(32293),k=a(77142),A=e([f,b,k,m,v]);[f,b,k,m,v]=A.then?(await A)():A;var x,M,H,V,L,w,q,E,N,C,I,Z,R,P,z,D,F,T,S,W,O,B,j,J,U,K,Q=["path","timestamp","result","error","changed_variables"],G=e=>e,X=["step_config","changed_variables","logbook"],Y=function(e){function t(){var e;(0,o.A)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=(0,s.A)(this,t,[].concat(r))).narrow=!1,e.renderedNodes={},e._view="step_config",e}return(0,c.A)(t,e),(0,n.A)(t,[{key:"render",value:function(){return(0,u.qy)(x||(x=G` <div class="padded-box trace-info"> ${0} </div> <div class="tabs top"> ${0} </div> ${0} `),this._renderSelectedTraceInfo(),X.map(e=>(0,u.qy)(M||(M=G` <button .view="${0}" class="${0}" @click="${0}"> ${0} </button> `),e,(0,g.H)({active:this._view===e}),this._showTab,this.hass.localize(`ui.panel.config.automation.trace.tabs.${e}`))),"step_config"===this._view?this._renderSelectedConfig():"changed_variables"===this._view?this._renderChangedVars():this._renderLogbook())}},{key:"_renderSelectedTraceInfo",value:function(){var e,t=this,a=this.trace.trace;if(null===(e=this.selected)||void 0===e||!e.path)return this.hass.localize("ui.panel.config.automation.trace.path.choose");var o=this.selected.path.split("/");if("default"===o[o.length-1]){var n,s=a[o.slice(0,o.length-1).join("/")];if(s&&"default"===(null===(n=s[0])||void 0===n||null===(n=n.result)||void 0===n?void 0:n.choice))return this.hass.localize("ui.panel.config.automation.trace.path.default_action_executed")}if(!(this.selected.path in a))return this.hass.localize("ui.panel.config.automation.trace.path.no_further_execution");for(var c=[],h=!1,l=function(){var e=g[p];if(h){if(e in t.renderedNodes)return 0}else{if(e!==t.selected.path)return 1;h=!0}var n,s=a[e],l=e.substring(t.selected.path.length+1).split("/"),f=t.selected.config,y=(0,i.A)(l);try{for(y.s();!(n=y.n()).done;){var b=n.value;["undefined","string"].includes(typeof f[b])||(f=f[b])}}catch(_){y.e(_)}finally{y.f()}c.push(s.map((a,i)=>{a.path;var n=a.timestamp,c=a.result,h=a.error,l=(a.changed_variables,(0,r.A)(a,Q));if(!1===(null==c?void 0:c.enabled))return(0,u.qy)(H||(H=G`${0}`),t.hass.localize("ui.panel.config.automation.trace.path.disabled_step"));var p=t.selected.type;return(0,u.qy)(V||(V=G` ${0} ${0} ${0} ${0} <br> ${0} ${0} ${0} ${0} `),e===t.selected.path?f.alias?(0,u.qy)(L||(L=G`<h2>${0}</h2>`),f.alias):"trigger"===p?(0,u.qy)(w||(w=G`<h2> ${0} </h2>`),(0,m.g)(f,t.hass,t._entityReg)):"condition"===p?(0,u.qy)(q||(q=G`<h2> ${0} </h2>`),(0,m.p)(f,t.hass,t._entityReg)):"action"===p?(0,u.qy)(E||(E=G`<h2> ${0} </h2>`),(0,k.u)(t.hass,t._entityReg,t._labelReg,t._floorReg,f)):"chooseOption"===p?(0,u.qy)(N||(N=G`<h2> ${0} </h2>`),t.hass.localize("ui.panel.config.automation.editor.actions.type.choose.option",{number:o[o.length-1]})):u.s6:(0,u.qy)(C||(C=G`<h2> ${0} </h2>`),e.substring(t.selected.path.length+1)),1===s.length?u.s6:(0,u.qy)(I||(I=G`<h3> ${0} </h3>`),t.hass.localize("ui.panel.config.automation.trace.path.iteration",{number:i+1})),e.substring(t.selected.path.length+1).includes("condition")?(0,u.qy)(Z||(Z=G`[${0}]<br>`),(0,m.p)(f,t.hass,t._entityReg)):u.s6,t.hass.localize("ui.panel.config.automation.trace.path.executed",{time:(0,v.yg)(new Date(n),t.hass.locale,t.hass.config)}),h?(0,u.qy)(R||(R=G`<div class="error"> ${0} </div>`),t.hass.localize("ui.panel.config.automation.trace.path.error",{error:h})):u.s6,c?(0,u.qy)(P||(P=G`${0} <pre>${0}</pre>`),t.hass.localize("ui.panel.config.automation.trace.path.result"),(0,d.dump)(c)):u.s6,0===Object.keys(l).length?u.s6:(0,u.qy)(z||(z=G`<pre>${0}</pre>`),(0,d.dump)(l)),f.entity_id&&e.substring(t.selected.path.length+1).includes("entity_id")?(0,u.qy)(D||(D=G`<pre>entity: ${0}</pre>`),f.entity_id):u.s6)}))},p=0,g=Object.keys(this.trace.trace);p<g.length&&0!==l();p++);return c}},{key:"_renderSelectedConfig",value:function(){var e;if(null===(e=this.selected)||void 0===e||!e.path)return u.s6;var t=(0,y.Ci)(this.trace.config,this.selected.path);return t?(0,u.qy)(F||(F=G`<ha-code-editor .value="${0}" read-only dir="ltr"></ha-code-editor>`),(0,d.dump)(t).trimEnd()):this.hass.localize("ui.panel.config.automation.trace.path.unable_to_find_config")}},{key:"_renderChangedVars",value:function(){var e=this.trace.trace[this.selected.path];return void 0===e?(0,u.qy)(T||(T=G`<div class="padded-box"> ${0} </div>`),this.hass.localize("ui.panel.config.automation.trace.path.step_not_executed")):(0,u.qy)(S||(S=G` <div class="padded-box"> ${0} </div> `),e.map((t,a)=>(0,u.qy)(W||(W=G` ${0} ${0} `),e.length>1?(0,u.qy)(O||(O=G`<p> ${0} </p>`),this.hass.localize("ui.panel.config.automation.trace.path.iteration",{number:a+1})):"",0===Object.keys(t.changed_variables||{}).length?this.hass.localize("ui.panel.config.automation.trace.path.no_variables_changed"):(0,u.qy)(B||(B=G`<pre>${0}</pre>`),(0,d.dump)(t.changed_variables).trimEnd()))))}},{key:"_renderLogbook",value:function(){var e,t=this.trace.trace,a=t[this.selected.path],r=Object.keys(this.trackedNodes),o=r.indexOf(this.selected.path);if(-1===o)return(0,u.qy)(j||(j=G`<div class="padded-box"> ${0} </div>`),this.hass.localize("ui.panel.config.automation.trace.path.step_not_executed"));if(o===r.length-1){var n=new Date(a[0].timestamp),s=this.logbookEntries.findIndex(e=>new Date(1e3*e.when)>=n);e=-1===s?[]:this.logbookEntries.slice(s)}else{var c=t[r[o+1]],h=new Date(a[0].timestamp),d=new Date(c[0].timestamp);e=[];var l,p=(0,i.A)(this.logbookEntries||[]);try{for(p.s();!(l=p.n()).done;){var g=l.value,v=new Date(1e3*g.when);if(v>=h){if(!(v<d))break;e.push(g)}}}catch(f){p.e(f)}finally{p.f()}}return e.length?(0,u.qy)(J||(J=G` <ha-logbook-renderer relative-time .hass="${0}" .entries="${0}" .narrow="${0}"></ha-logbook-renderer> <hat-logbook-note .hass="${0}" .domain="${0}"></hat-logbook-note> `),this.hass,e,this.narrow,this.hass,this.trace.domain):(0,u.qy)(U||(U=G`<div class="padded-box"> ${0} </div>`),this.hass.localize("ui.panel.config.automation.trace.path.no_logbook_entries"))}},{key:"_showTab",value:function(e){this._view=e.target.view}}],[{key:"styles",get:function(){return[_.h,(0,u.AH)(K||(K=G`.padded-box{margin:16px}:host(:not([narrow])) .trace-info{min-height:250px}pre{margin:0}.error{color:var(--error-color)}`))]}}])}(u.WF);(0,h.__decorate)([(0,p.MZ)({attribute:!1})],Y.prototype,"hass",void 0),(0,h.__decorate)([(0,p.MZ)({type:Boolean,reflect:!0})],Y.prototype,"narrow",void 0),(0,h.__decorate)([(0,p.MZ)({attribute:!1})],Y.prototype,"trace",void 0),(0,h.__decorate)([(0,p.MZ)({attribute:!1})],Y.prototype,"logbookEntries",void 0),(0,h.__decorate)([(0,p.MZ)({attribute:!1})],Y.prototype,"selected",void 0),(0,h.__decorate)([(0,p.MZ)({attribute:!1})],Y.prototype,"renderedNodes",void 0),(0,h.__decorate)([(0,p.MZ)({attribute:!1})],Y.prototype,"trackedNodes",void 0),(0,h.__decorate)([(0,p.wk)()],Y.prototype,"_view",void 0),(0,h.__decorate)([(0,p.wk)(),(0,l.Fg)({context:$.ih,subscribe:!0})],Y.prototype,"_entityReg",void 0),(0,h.__decorate)([(0,p.wk)(),(0,l.Fg)({context:$.HD,subscribe:!0})],Y.prototype,"_labelReg",void 0),(0,h.__decorate)([(0,p.wk)(),(0,l.Fg)({context:$.rf,subscribe:!0})],Y.prototype,"_floorReg",void 0),Y=(0,h.__decorate)([(0,p.EM)("ha-trace-path-details")],Y),t()}catch(ee){t(ee)}})},33653:function(e,t,a){a.a(e,async function(e,t){try{var r=a(62020),i=a(31802),o=a(21101),n=a(23180),s=a(69868),c=a(84922),h=a(11991),d=(a(40580),a(89289)),l=e([d]);d=(l.then?(await l)():l)[0];var u,p,g=e=>e,v=function(e){function t(){return(0,r.A)(this,t),(0,o.A)(this,t,arguments)}return(0,n.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){return(0,c.qy)(u||(u=g` <hat-trace-timeline .hass="${0}" .trace="${0}" .logbookEntries="${0}" .selectedPath="${0}" allow-pick> </hat-trace-timeline> <hat-logbook-note .hass="${0}" .domain="${0}"></hat-logbook-note> `),this.hass,this.trace,this.logbookEntries,this.selected.path,this.hass,this.trace.domain)}}],[{key:"styles",get:function(){return[(0,c.AH)(p||(p=g`:host{display:block;padding:16px}`))]}}])}(c.WF);(0,s.__decorate)([(0,h.MZ)({attribute:!1})],v.prototype,"hass",void 0),(0,s.__decorate)([(0,h.MZ)({attribute:!1})],v.prototype,"trace",void 0),(0,s.__decorate)([(0,h.MZ)({attribute:!1})],v.prototype,"logbookEntries",void 0),(0,s.__decorate)([(0,h.MZ)({attribute:!1})],v.prototype,"selected",void 0),v=(0,s.__decorate)([(0,h.EM)("ha-trace-timeline")],v),t()}catch(f){t(f)}})},46097:function(e,t,a){var r,i,o,n,s,c,h,d=a(62020),l=a(31802),u=a(21101),p=a(23180),g=(a(38606),a(80178),a(99342),a(35058),a(65315),a(22416),a(37089),a(45519),a(30536),a(69868)),v=a(84922),f=a(11991),y=a(75907),b=a(83034),_=e=>e,m=function(e){function t(){var e;(0,d.A)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=(0,u.A)(this,t,[].concat(r))).disabled=!1,e.selected=!1,e.start=!1,e.short=!1,e._branches=[],e._totalWidth=0,e._maxHeight=0,e}return(0,p.A)(t,e),(0,l.A)(t,[{key:"_updateBranches",value:function(e){var t=0,a=[],r=[];e.target.assignedElements().forEach(e=>{var i=e.clientWidth,o=e.clientHeight;r.push({x:i/2+t,height:o,start:e.hasAttribute("graph-start"),end:e.hasAttribute("graph-end"),track:e.hasAttribute("track")}),t+=i,a.push(o)}),this._totalWidth=t,this._maxHeight=Math.max.apply(Math,a),this._branches=r.sort((e,t)=>e.track&&!t.track?1:e.track&&t.track?0:-1)}},{key:"render",value:function(){return(0,v.qy)(r||(r=_` <slot name="head"></slot> ${0} <div id="branches"> <svg id="lines" width="${0}" height="${0}"> ${0} </svg> <slot @slotchange="${0}"></slot> </div> ${0} `),this.start?v.s6:(0,v.qy)(i||(i=_` <svg id="top" width="${0}"> ${0} </svg> `),this._totalWidth,this._branches.map(e=>e.start?"":(0,v.JW)(o||(o=_` <path class="${0}" d="
                      M ${0} 0
                      L ${0} ${0}
                      "/> `),(0,y.H)({track:e.track}),this._totalWidth/2,e.x,b.dc))),this._totalWidth,this._maxHeight,this._branches.map(e=>e.end?"":(0,v.JW)(n||(n=_` <path class="${0}" d="
                        M ${0} ${0}
                        v ${0}
                        "/> `),(0,y.H)({track:e.track}),e.x,e.height,this._maxHeight-e.height)),this._updateBranches,this.short?v.s6:(0,v.qy)(s||(s=_` <svg id="bottom" width="${0}"> ${0} </svg> `),this._totalWidth,this._branches.map(e=>e.end?"":(0,v.JW)(c||(c=_` <path class="${0}" d="
                      M ${0} 0
                      V ${0}
                      L ${0} ${0}
                      "/> `),(0,y.H)({track:e.track}),e.x,b.Es,this._totalWidth/2,b.dc+b.Es))))}}])}(v.WF);m.styles=(0,v.AH)(h||(h=_`:host{position:relative;display:flex;flex-direction:column;align-items:center}:host(:focus){outline:0}#branches{position:relative;display:flex;flex-direction:row;align-items:start}::slotted(*){z-index:1}::slotted([slot=head]){margin-bottom:calc(var(--hat-graph-branch-height)/ -2)}#lines{position:absolute}#top{height:var(--hat-graph-branch-height)}#bottom{height:calc(var(--hat-graph-branch-height) + var(--hat-graph-spacing))}path{stroke:var(--stroke-clr);stroke-width:2;fill:none}path.track{stroke:var(--track-clr)}:host([disabled]) path{stroke:var(--disabled-clr)}`)),(0,g.__decorate)([(0,f.MZ)({type:Boolean,reflect:!0})],m.prototype,"disabled",void 0),(0,g.__decorate)([(0,f.MZ)({type:Boolean})],m.prototype,"selected",void 0),(0,g.__decorate)([(0,f.MZ)({type:Boolean})],m.prototype,"start",void 0),(0,g.__decorate)([(0,f.MZ)({type:Boolean})],m.prototype,"short",void 0),(0,g.__decorate)([(0,f.wk)()],m.prototype,"_branches",void 0),m=(0,g.__decorate)([(0,f.EM)("hat-graph-branch")],m)},83034:function(e,t,a){a.d(t,{Es:function(){return r},dc:function(){return o},hD:function(){return i}});var r=10,i=30,o=20},49501:function(e,t,a){var r,i,o,n,s,c,h,d=a(62020),l=a(31802),u=a(21101),p=a(23180),g=(a(38606),a(65152),a(69868)),v=a(84922),f=a(11991),y=a(49487),b=a(83034),_=e=>e,m=function(e){function t(){var e;(0,d.A)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=(0,u.A)(this,t,[].concat(r))).disabled=!1,e.error=!1,e.notEnabled=!1,e.graphStart=!1,e.noFocus=!1,e}return(0,p.A)(t,e),(0,l.A)(t,[{key:"updated",value:function(e){e.has("noFocus")&&(this.hasAttribute("tabindex")||this.noFocus?void 0!==e.get("noFocus")&&this.noFocus&&this.removeAttribute("tabindex"):this.setAttribute("tabindex","0"))}},{key:"render",value:function(){var e=b.hD+(this.graphStart?2:b.Es+1),t=b.Es+b.hD;return(0,v.qy)(r||(r=_` <svg class="${0}" width="${0}px" height="${0}px" viewBox="-${0} -${0} ${0} ${0}"> ${0} <g class="node"> <circle cx="0" cy="0" r="${0}"/> ${0} ${0} <g style="pointer-events:none" transform="translate(-12 -12)"> ${0} </g> </g> </svg> `),y.n?"safari":"",t,e,Math.ceil(t/2),this.graphStart?Math.ceil(e/2):Math.ceil((b.hD+2*b.Es)/2),t,e,this.graphStart?v.s6:(0,v.JW)(i||(i=_` <path class="connector" d="
              M 0 ${0}
              L 0 0
            " line-caps="round"/> `),-b.Es-b.hD/2),b.hD/2,this.error?(0,v.JW)(o||(o=_` <g class="error"> <circle cx="-12" cy="${0}" r="8"></circle> <path transform="translate(-18 -21) scale(.5)" class="exclamation" d="${0}/"> </path></g> `),-b.hD/2,"M10 3H14V14H10V3M10 21V17H14V21H10Z"):v.s6,this.badge?(0,v.JW)(n||(n=_` <g class="number"> <circle cx="12" cy="${0}" r="8"></circle> <text x="12" y="${0}" text-anchor="middle" alignment-baseline="middle">${0}</text> </g> `),-b.hD/2,-b.hD/2,this.badge>9?"9+":this.badge):v.s6,this.iconPath?(0,v.JW)(s||(s=_`<path class="icon" d="${0}/"></path>`),this.iconPath):(0,v.JW)(c||(c=_`<foreignObject><span class="icon"><slot name="icon"></slot></span></foreignObject>`)))}}])}(v.WF);m.styles=(0,v.AH)(h||(h=_`:host{display:flex;flex-direction:column;min-width:calc(var(--hat-graph-node-size) + var(--hat-graph-spacing));height:calc(var(--hat-graph-node-size) + var(--hat-graph-spacing) + 1px)}:host([graph-start]){height:calc(var(--hat-graph-node-size) + 2px)}:host([track]){--stroke-clr:var(--track-clr);--icon-clr:var(--default-icon-clr)}:host([active]) circle{--stroke-clr:var(--active-clr);--icon-clr:var(--default-icon-clr)}:host(:focus){outline:0}:host(:hover) circle{--stroke-clr:var(--hover-clr);--icon-clr:var(--default-icon-clr)}:host([not-enabled]) circle{--stroke-clr:var(--disabled-clr)}:host([not-enabled][active]) circle{--stroke-clr:var(--disabled-active-clr)}:host([not-enabled]:hover) circle{--stroke-clr:var(--disabled-hover-clr)}svg:not(.safari){width:100%;height:100%}circle,path.connector{stroke:var(--stroke-clr);stroke-width:2;fill:none}circle{fill:var(--background-clr);stroke:var(--circle-clr,var(--stroke-clr))}.error circle{fill:var(--error-color);stroke:none;stroke-width:0}.error .exclamation{fill:var(--text-primary-color)}.number circle{fill:var(--track-clr);stroke:none;stroke-width:0}.number text{font-size:var(--ha-font-size-xs);fill:var(--text-primary-color)}path.icon{fill:var(--icon-clr)}foreignObject{width:24px;height:24px}.icon{color:var(--icon-clr)}`)),(0,g.__decorate)([(0,f.MZ)({attribute:!1})],m.prototype,"iconPath",void 0),(0,g.__decorate)([(0,f.MZ)({type:Boolean,reflect:!0})],m.prototype,"disabled",void 0),(0,g.__decorate)([(0,f.MZ)({type:Boolean})],m.prototype,"error",void 0),(0,g.__decorate)([(0,f.MZ)({attribute:"not-enabled",reflect:!0,type:Boolean})],m.prototype,"notEnabled",void 0),(0,g.__decorate)([(0,f.MZ)({attribute:"graph-start",reflect:!0,type:Boolean})],m.prototype,"graphStart",void 0),(0,g.__decorate)([(0,f.MZ)({type:Boolean,attribute:"nofocus"})],m.prototype,"noFocus",void 0),(0,g.__decorate)([(0,f.MZ)({reflect:!0,type:Number})],m.prototype,"badge",void 0),m=(0,g.__decorate)([(0,f.EM)("hat-graph-node")],m)},99357:function(e,t,a){var r,i,o=a(62020),n=a(31802),s=a(21101),c=a(23180),h=(a(38606),a(69868)),d=a(84922),l=a(11991),u=a(83034),p=e=>e,g=function(e){function t(){var e;(0,o.A)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=(0,s.A)(this,t,[].concat(r))).disabled=!1,e}return(0,c.A)(t,e),(0,n.A)(t,[{key:"render",value:function(){return(0,d.qy)(r||(r=p` <svg viewBox="-${0} 0 10 ${0}"> <path d="
              M 0 ${0}
              V 0
            " line-caps="round"/> } </svg> `),u.Es/2,u.Es+u.hD+1,u.Es+u.hD+1)}}])}(d.WF);g.styles=(0,d.AH)(i||(i=p`:host{display:flex;flex-direction:column;align-items:center}svg{width:var(--hat-graph-spacing);height:calc(var(--hat-graph-spacing) + var(--hat-graph-node-size) + 1px)}:host([track]){--stroke-clr:var(--track-clr)}:host-context([disabled]){--stroke-clr:var(--disabled-clr)}path{stroke:var(--stroke-clr);stroke-width:2;fill:none}`)),(0,h.__decorate)([(0,l.MZ)({reflect:!0,type:Boolean})],g.prototype,"disabled",void 0),g=(0,h.__decorate)([(0,l.EM)("hat-graph-spacer")],g)},40580:function(e,t,a){var r,i=a(62020),o=a(31802),n=a(21101),s=a(23180),c=(a(38606),a(69868)),h=a(84922),d=a(11991),l=function(e){function t(){var e;(0,i.A)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=(0,n.A)(this,t,[].concat(r))).domain="automation",e}return(0,s.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){return"script"===this.domain?this.hass.localize("ui.panel.config.automation.trace.messages.not_all_entries_are_related_script_note"):this.hass.localize("ui.panel.config.automation.trace.messages.not_all_entries_are_related_automation_note")}}])}(h.WF);l.styles=(0,h.AH)(r||(r=(e=>e)`:host{display:block;text-align:center;font-style:italic;padding:16px;margin-top:8px}`)),(0,c.__decorate)([(0,d.MZ)({attribute:!1})],l.prototype,"hass",void 0),(0,c.__decorate)([(0,d.MZ)()],l.prototype,"domain",void 0),l=(0,c.__decorate)([(0,d.EM)("hat-logbook-note")],l)},73396:function(e,t,a){a.a(e,async function(e,t){try{var r=a(18202),i=a(62020),o=a(31802),n=a(21101),s=a(23180),c=a(87426),h=(a(38606),a(44941),a(79827),a(44784),a(80178),a(35058),a(65315),a(84136),a(37089),a(59023),a(45519),a(69868)),d=a(84922),l=a(11991),u=a(11111),p=a(44017),g=a(26539),v=a(42699),f=(a(9058),a(13948)),y=(a(46097),a(83034)),b=(a(49501),a(99357),a(59054)),_=e([f]);f=(_.then?(await _)():_)[0];var m,$,k,A,x,M,H,V,L,w,q,E,N,C,I,Z,R,P,z,D,F,T,S=e=>e,W=function(e){function t(){var e;(0,i.A)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=(0,n.A)(this,t,[].concat(r))).renderedNodes={},e.trackedNodes={},e._typeRenderers={condition:e._renderConditionNode,and:e._renderConditionNode,or:e._renderConditionNode,not:e._renderConditionNode,service:e._renderServiceNode,wait_template:e._renderWaitNode,wait_for_trigger:e._renderWaitNode,repeat:e._renderRepeatNode,choose:e._renderChooseNode,if:e._renderIfNode,sequence:e._renderSequenceNode,parallel:e._renderParallelNode,other:e._renderOtherNode},e}return(0,s.A)(t,e),(0,o.A)(t,[{key:"_selectNode",value:function(e,t,a){return()=>{(0,p.r)(this,"graph-node-selected",{config:e,path:t,type:a})}}},{key:"_renderTrigger",value:function(e,t){var a,r=`trigger/${t}`,i=this.trace&&r in this.trace.trace;return this.renderedNodes[r]={config:e,path:r,type:"trigger"},i&&(this.trackedNodes[r]=this.renderedNodes[r]),(0,d.qy)(m||(m=S` <hat-graph-node graph-start ?track="${0}" @focus="${0}" ?active="${0}" .iconPath="${0}" .notEnabled="${0}" .error="${0}" tabindex="${0}"></hat-graph-node> `),i,this._selectNode(e,r,"trigger"),this.selected===r,"M21 13H14.4L19.1 17.7L17.7 19.1L13 14.4V21H11V14.3L6.3 19L4.9 17.6L9.4 13H3V11H9.6L4.9 6.3L6.3 4.9L11 9.6V3H13V9.4L17.6 4.8L19 6.3L14.3 11H21V13Z","enabled"in e&&!1===e.enabled,null===(a=this.trace.trace[r])||void 0===a?void 0:a.some(e=>e.error),i?"0":"-1")}},{key:"_renderCondition",value:function(e,t){var a=`condition/${t}`;return this.renderedNodes[a]={config:e,path:a,type:"condition"},this.trace&&a in this.trace.trace&&(this.trackedNodes[a]=this.renderedNodes[a]),this._renderConditionNode(e,a)}},{key:"_renderActionNode",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=Object.keys(this._typeRenderers).find(t=>t in e)||"other";return this.renderedNodes[t]={config:e,path:t,type:"action"},this.trace&&t in this.trace.trace&&(this.trackedNodes[t]=this.renderedNodes[t]),this._typeRenderers[i].bind(this)(e,t,a,r)}},{key:"_renderChooseNode",value:function(e,t){var a,r,i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=this.trace.trace[t],c=s?s.map(e=>void 0===e.result||"default"===e.result.choice?"default":e.result.choice):[],h=c.includes("default");return(0,d.qy)($||($=S` <hat-graph-branch tabindex="${0}" @focus="${0}" ?track="${0}" ?active="${0}" .notEnabled="${0}"> <hat-graph-node .graphStart="${0}" .iconPath="${0}" ?track="${0}" ?active="${0}" .notEnabled="${0}" .error="${0}" slot="head" nofocus></hat-graph-node> ${0} <div ?track="${0}"> <hat-graph-spacer ?track="${0}"></hat-graph-spacer> ${0} </div> </hat-graph-branch> `),void 0===s?"-1":"0",this._selectNode(e,t,"action"),void 0!==s,this.selected===t,n||!1===e.enabled,o,"M11,5H8L12,1L16,5H13V9.43C12.25,9.89 11.58,10.46 11,11.12V5M22,11L18,7V10C14.39,9.85 11.31,12.57 11,16.17C9.44,16.72 8.62,18.44 9.17,20C9.72,21.56 11.44,22.38 13,21.83C14.56,21.27 15.38,19.56 14.83,18C14.53,17.14 13.85,16.47 13,16.17C13.47,12.17 17.47,11.97 17.95,11.97V14.97L22,11M10.63,11.59C9.3,10.57 7.67,10 6,10V7L2,11L6,15V12C7.34,12.03 8.63,12.5 9.64,13.4C9.89,12.76 10.22,12.15 10.63,11.59Z",void 0!==s,this.selected===t,n||!1===e.enabled,null===(a=this.trace.trace[t])||void 0===a?void 0:a.some(e=>e.error),e.choose?null===(r=(0,u.e)(e.choose))||void 0===r?void 0:r.map((a,r)=>{var i=`${t}/choose/${r}`,o=c.includes(r);return this.renderedNodes[i]={config:a,path:i,type:"chooseOption"},o&&(this.trackedNodes[i]=this.renderedNodes[i]),(0,d.qy)(k||(k=S` <div class="graph-container" ?track="${0}"> <hat-graph-node .iconPath="${0}" @focus="${0}" ?track="${0}" ?active="${0}" .notEnabled="${0}"></hat-graph-node> ${0} </div> `),o,!s||o?"M19,19H5V5H15V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V11H19M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z":"M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z",this._selectNode(a,i,"chooseOption"),o,this.selected===i,n||!1===e.enabled,null!==a.sequence?(0,u.e)(a.sequence).map((t,a)=>this._renderActionNode(t,`${i}/sequence/${a}`,!1,n||!1===e.enabled)):"")}):"",h,h,null!==e.default?null===(i=(0,u.e)(e.default))||void 0===i?void 0:i.map((a,r)=>this._renderActionNode(a,`${t}/default/${r}`,!1,n||!1===e.enabled)):"")}},{key:"_renderIfNode",value:function(e,t){var a,i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=this.trace.trace[t],c=!1,h=!1,l=(0,r.A)(s||[]);try{for(l.s();!(i=l.n()).done;){var p,g,v=i.value;if(c||"then"!==(null===(p=v.result)||void 0===p?void 0:p.choice)||(c=!0),(h||"else"!==(null===(g=v.result)||void 0===g?void 0:g.choice))&&v.result||(h=!0),h&&c)break}}catch(f){l.e(f)}finally{l.f()}return(0,d.qy)(A||(A=S` <hat-graph-branch tabindex="${0}" @focus="${0}" ?track="${0}" ?active="${0}" .notEnabled="${0}"> <hat-graph-node .graphStart="${0}" .iconPath="${0}" ?track="${0}" ?active="${0}" .notEnabled="${0}" slot="head" nofocus></hat-graph-node> ${0} <div class="graph-container" ?track="${0}"> <hat-graph-node .iconPath="${0}" ?track="${0}" ?active="${0}" .notEnabled="${0}" nofocus></hat-graph-node> ${0} </div> </hat-graph-branch> `),void 0===s?"-1":"0",this._selectNode(e,t,"action"),void 0!==s,this.selected===t,n||!1===e.enabled,o,"M14,4L16.29,6.29L13.41,9.17L14.83,10.59L17.71,7.71L20,10V4M10,4H4V10L6.29,7.71L11,12.41V20H13V11.59L7.71,6.29",void 0!==s,this.selected===t,n||!1===e.enabled,e.else?(0,d.qy)(x||(x=S`<div class="graph-container" ?track="${0}"> <hat-graph-node .iconPath="${0}" ?track="${0}" ?active="${0}" .notEnabled="${0}" nofocus></hat-graph-node>${0} </div>`),h,"M19.59,7L12,14.59L6.41,9H11V7H3V15H5V10.41L12,17.41L21,8.41",h,this.selected===t,n||!1===e.enabled,(0,u.e)(e.else).map((a,r)=>this._renderActionNode(a,`${t}/else/${r}`,!1,n||!1===e.enabled))):(0,d.qy)(M||(M=S`<hat-graph-spacer ?track="${0}"></hat-graph-spacer>`),h),c,"M20,5.41L18.59,4L7,15.59V9H5V19H15V17H8.41",c,this.selected===t,n||!1===e.enabled,(0,u.e)(null!==(a=e.then)&&void 0!==a?a:[]).map((a,r)=>this._renderActionNode(a,`${t}/then/${r}`,!1,n||!1===e.enabled)))}},{key:"_renderConditionNode",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.trace.trace[t],n=!1,s=!1,c=!1;if(o){var h,l=(0,r.A)(o);try{for(l.s();!(h=l.n()).done;){var u=h.value;if(u.result&&(n=!0,u.result.result?s=!0:c=!0),s&&c)break}}catch(p){l.e(p)}finally{l.f()}}return(0,d.qy)(H||(H=S` <hat-graph-branch @focus="${0}" ?track="${0}" ?active="${0}" .notEnabled="${0}" tabindex="${0}" short> <hat-graph-node .graphStart="${0}" slot="head" ?track="${0}" ?active="${0}" .notEnabled="${0}" .iconPath="${0}" nofocus></hat-graph-node> <div style="${0}" graph-start graph-end></div> <div ?track="${0}"></div> <hat-graph-node .iconPath="${0}" nofocus ?track="${0}" ?active="${0}" .notEnabled="${0}"></hat-graph-node> </hat-graph-branch> `),this._selectNode(e,t,"condition"),n,this.selected===t,i||!1===e.enabled,void 0===o?"-1":"0",a,n,this.selected===t,i||!1===e.enabled,"M4 2A2 2 0 0 0 2 4V12H4V8H6V12H8V4A2 2 0 0 0 6 2H4M4 4H6V6H4M22 15.5V14A2 2 0 0 0 20 12H16V22H20A2 2 0 0 0 22 20V18.5A1.54 1.54 0 0 0 20.5 17A1.54 1.54 0 0 0 22 15.5M20 20H18V18H20V20M20 16H18V14H20M5.79 21.61L4.21 20.39L18.21 2.39L19.79 3.61Z",`width: ${y.hD+y.Es}px;`,s,"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",c,this.selected===t,i||!1===e.enabled)}},{key:"_renderRepeatNode",value:function(e,t){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.trace.trace[t],n=null===(a=this.trace)||void 0===a||null===(a=a.trace[`${t}/repeat/sequence/0`])||void 0===a?void 0:a.length;return(0,d.qy)(V||(V=S` <hat-graph-branch tabindex="${0}" @focus="${0}" ?track="${0}" ?active="${0}" .notEnabled="${0}"> <hat-graph-node .graphStart="${0}" .iconPath="${0}" ?track="${0}" ?active="${0}" .notEnabled="${0}" slot="head" nofocus></hat-graph-node> <hat-graph-node .iconPath="${0}" ?track="${0}" ?active="${0}" .notEnabled="${0}" nofocus .badge="${0}"></hat-graph-node> <div ?track="${0}"> ${0} </div> </hat-graph-branch> `),void 0===o?"-1":"0",this._selectNode(e,t,"action"),t in this.trace.trace,this.selected===t,i||!1===e.enabled,r,"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",t in this.trace.trace,this.selected===t,i||!1===e.enabled,"M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z",n>1,this.selected===t,i||!1===e.enabled,n>1?n:void 0,o,(0,u.e)(e.repeat.sequence).map((a,r)=>this._renderActionNode(a,`${t}/repeat/sequence/${r}`,!1,i||!1===e.enabled)))}},{key:"_renderServiceNode",value:function(e,t){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,d.qy)(L||(L=S` <hat-graph-node .graphStart="${0}" .iconPath="${0}" @focus="${0}" ?track="${0}" ?active="${0}" .notEnabled="${0}" .error="${0}" tabindex="${0}"> ${0} </hat-graph-node> `),r,e.action?void 0:"M12,5A2,2 0 0,1 14,7C14,7.24 13.96,7.47 13.88,7.69C17.95,8.5 21,11.91 21,16H3C3,11.91 6.05,8.5 10.12,7.69C10.04,7.47 10,7.24 10,7A2,2 0 0,1 12,5M22,19H2V17H22V19Z",this._selectNode(e,t,"action"),t in this.trace.trace,this.selected===t,i||!1===e.enabled,null===(a=this.trace.trace[t])||void 0===a?void 0:a.some(e=>e.error),this.trace&&t in this.trace.trace?"0":"-1",e.action?(0,d.qy)(w||(w=S`<ha-service-icon slot="icon" .hass="${0}" .service="${0}"></ha-service-icon>`),this.hass,e.action):d.s6)}},{key:"_renderWaitNode",value:function(e,t){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,d.qy)(q||(q=S` <hat-graph-node .graphStart="${0}" .iconPath="${0}" @focus="${0}" ?track="${0}" ?active="${0}" .notEnabled="${0}" .error="${0}" tabindex="${0}"></hat-graph-node> `),r,"M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z",this._selectNode(e,t,"action"),t in this.trace.trace,this.selected===t,i||!1===e.enabled,null===(a=this.trace.trace[t])||void 0===a?void 0:a.some(e=>e.error),this.trace&&t in this.trace.trace?"0":"-1")}},{key:"_renderSequenceNode",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.trace.trace[t];return(0,d.qy)(E||(E=S` <hat-graph-branch tabindex="${0}" @focus="${0}" ?track="${0}" ?active="${0}" .notEnabled="${0}"> <div class="graph-container" ?track="${0}"> <hat-graph-node .graphStart="${0}" .iconPath="${0}" ?track="${0}" ?active="${0}" .notEnabled="${0}" slot="head" nofocus></hat-graph-node> ${0} </div> </hat-graph-branch> `),void 0===i?"-1":"0",this._selectNode(e,t,"action"),t in this.trace.trace,this.selected===t,r||!1===e.enabled,t in this.trace.trace,a,"M7,13V11H21V13H7M7,19V17H21V19H7M7,7V5H21V7H7M3,8V5H2V4H4V8H3M2,17V16H5V20H2V19H4V18.5H3V17.5H4V17H2M4.25,10A0.75,0.75 0 0,1 5,10.75C5,10.95 4.92,11.14 4.79,11.27L3.12,13H5V14H2V13.08L4,11H2V10H4.25Z",t in this.trace.trace,this.selected===t,r||!1===e.enabled,(0,u.e)(e.sequence).map((a,i)=>this._renderActionNode(a,`${t}/sequence/${i}`,!1,r||!1===e.enabled)))}},{key:"_renderParallelNode",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.trace.trace[t];return(0,d.qy)(N||(N=S` <hat-graph-branch tabindex="${0}" @focus="${0}" ?track="${0}" ?active="${0}" .notEnabled="${0}"> <hat-graph-node .graphStart="${0}" .iconPath="${0}" ?track="${0}" ?active="${0}" .notEnabled="${0}" slot="head" nofocus></hat-graph-node> ${0} </hat-graph-branch> `),void 0===i?"-1":"0",this._selectNode(e,t,"action"),t in this.trace.trace,this.selected===t,r||!1===e.enabled,a,"M16,4.5V7H5V9H16V11.5L19.5,8M16,12.5V15H5V17H16V19.5L19.5,16",t in this.trace.trace,this.selected===t,r||!1===e.enabled,(0,u.e)(e.parallel).map((a,i)=>"sequence"in a?(0,d.qy)(C||(C=S`<div ?track="${0}"> ${0} </div>`),t in this.trace.trace,(0,u.e)(a.sequence).map((a,o)=>this._renderActionNode(a,`${t}/parallel/${i}/sequence/${o}`,!1,r||!1===e.enabled))):this._renderActionNode(a,`${t}/parallel/${i}/sequence/0`,!1,r||!1===e.enabled)))}},{key:"_renderOtherNode",value:function(e,t){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,d.qy)(I||(I=S` <hat-graph-node .graphStart="${0}" .iconPath="${0}" @focus="${0}" ?track="${0}" ?active="${0}" .error="${0}" .notEnabled="${0}"></hat-graph-node> `),r,b.O$[(0,v.pq)(e)]||"M15,4V6H18V18H15V20H20V4M4,4V20H9V18H6V6H9V4H4Z",this._selectNode(e,t,"action"),t in this.trace.trace,this.selected===t,null===(a=this.trace.trace[t])||void 0===a?void 0:a.some(e=>e.error),i||!1===e.enabled)}},{key:"render",value:function(){var e="triggers"in this.trace.config?"triggers":"trigger",t="conditions"in this.trace.config?"conditions":"condition",a="actions"in this.trace.config?"actions":"action",r=Object.keys(this.trackedNodes),i=e in this.trace.config?(0,g.aI)((0,u.e)(this.trace.config[e])).map((e,t)=>this._renderTrigger(e,t)):void 0;try{var o;return(0,d.qy)(Z||(Z=S` <div class="parent graph-container"> ${0} ${0} ${0} ${0} </div> <div class="actions"> <ha-icon-button .disabled="${0}" @click="${0}" .path="${0}"></ha-icon-button> <ha-icon-button .disabled="${0}" @click="${0}" .path="${0}"></ha-icon-button> </div> `),i?(0,d.qy)(R||(R=S`<hat-graph-branch start .short="${0}"> ${0} </hat-graph-branch>`),i.length<2,i):"",t in this.trace.config?(0,d.qy)(P||(P=S`${0}`),null===(o=(0,u.e)(this.trace.config[t]))||void 0===o?void 0:o.map((e,t)=>this._renderCondition(e,t))):"",a in this.trace.config?(0,d.qy)(z||(z=S`${0}`),(0,u.e)(this.trace.config[a]).map((e,t)=>this._renderActionNode(e,`action/${t}`))):"","sequence"in this.trace.config?(0,d.qy)(D||(D=S`${0}`),(0,u.e)(this.trace.config.sequence).map((e,t)=>this._renderActionNode(e,`sequence/${t}`,0===t))):"",0===r.length||r[0]===this.selected,this._previousTrackedNode,"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",0===r.length||r[r.length-1]===this.selected,this._nextTrackedNode,"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z")}catch(n){return(0,d.qy)(F||(F=S` <div class="error"> Error rendering graph. Please download trace and share with the developers. </div> `))}}},{key:"willUpdate",value:function(e){(0,c.A)(t,"willUpdate",this,3)([e]),e.has("trace")&&(this.renderedNodes={},this.trackedNodes={})}},{key:"updated",value:function(e){if((0,c.A)(t,"updated",this,3)([e]),e.has("trace")){if(!this.selected||!(this.selected in this.trackedNodes)){var a=this.trackedNodes[Object.keys(this.trackedNodes)[0]];a&&(0,p.r)(this,"graph-node-selected",a)}if(this.trace){var i,o=Object.keys(this.trace.trace),n=Object.keys(this.renderedNodes).sort((e,t)=>o.indexOf(e)-o.indexOf(t)),s={},h={},d=(0,r.A)(n);try{for(d.s();!(i=d.n()).done;){var l=i.value;h[l]=this.renderedNodes[l],l in this.trackedNodes&&(s[l]=this.trackedNodes[l])}}catch(u){d.e(u)}finally{d.f()}this.renderedNodes=h,this.trackedNodes=s}}}},{key:"_previousTrackedNode",value:function(){var e=Object.keys(this.trackedNodes),t=e.indexOf(this.selected)-1;t>=0&&(0,p.r)(this,"graph-node-selected",this.trackedNodes[e[t]])}},{key:"_nextTrackedNode",value:function(){var e=Object.keys(this.trackedNodes),t=e.indexOf(this.selected)+1;t<e.length&&(0,p.r)(this,"graph-node-selected",this.trackedNodes[e[t]])}}],[{key:"styles",get:function(){return(0,d.AH)(T||(T=S`:host{display:flex;--stroke-clr:var(--stroke-color, var(--secondary-text-color));--active-clr:var(--active-color, var(--primary-color));--track-clr:var(--track-color, var(--accent-color));--hover-clr:var(--hover-color, var(--primary-color));--disabled-clr:var(--disabled-color, var(--disabled-text-color));--disabled-active-clr:rgba(var(--rgb-primary-color), 0.5);--disabled-hover-clr:rgba(var(--rgb-primary-color), 0.7);--default-trigger-color:3,169,244;--rgb-trigger-color:var(--trigger-color, var(--default-trigger-color));--background-clr:var(--background-color, white);--default-icon-clr:var(--icon-color, black);--icon-clr:var(--stroke-clr);--hat-graph-spacing:${0}px;--hat-graph-node-size:${0}px;--hat-graph-branch-height:${0}px}.graph-container{display:flex;flex-direction:column;align-items:center}.actions{display:flex;flex-direction:column}.parent{margin-left:8px;margin-top:16px}.error{padding:16px;max-width:300px}`),y.Es,y.hD,y.dc)}}])}(d.WF);(0,h.__decorate)([(0,l.MZ)({attribute:!1})],W.prototype,"trace",void 0),(0,h.__decorate)([(0,l.MZ)({attribute:!1})],W.prototype,"selected",void 0),W=(0,h.__decorate)([(0,l.EM)("hat-script-graph")],W),t()}catch(O){t(O)}})},89289:function(e,t,a){a.a(e,async function(e,t){try{var r=a(21101),i=a(23180),o=a(87426),n=a(62020),s=a(31802),c=(a(1415),a(32203),a(38606),a(35748),a(99342),a(65315),a(22416),a(45519),a(67579),a(30500),a(30536),a(95013),a(69868)),h=a(97809),d=a(84922),l=a(11991),u=a(13802),p=a(6149),g=a(94029),v=a(44017),f=a(27409),y=a(32293),b=a(42699),_=a(77142),m=a(26399),$=(a(6969),e([g,_,p]));[g,_,p]=$.then?(await $)():$;var k,A,x,M,H,V,L,w,q,E,N=e=>e,C="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",I="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",Z=(e,t)=>Math.abs(t.getTime()-e.getTime())>1e3,R=function(){return(0,s.A)(function e(t,a,r){(0,n.A)(this,e),this.hass=t,this.entries=a,this.lastReportedTime=new Date(r.timestamp.start)},[{key:"setLastReportedTime",value:function(e){this.lastReportedTime=e}},{key:"renderTime",value:function(e,t){this.entries.push((0,d.qy)(k||(k=N` <ha-timeline label> ${0} later </ha-timeline> `),(0,g.K)(e,this.hass.locale,t,!1))),this.lastReportedTime=t}},{key:"maybeRenderTime",value:function(e){return Z(e,this.lastReportedTime)?(this.renderTime(this.lastReportedTime,e),!0):(this.lastReportedTime=e,!1)}}])}(),P=function(){return(0,s.A)(function e(t,a,r){(0,n.A)(this,e),this.entries=t,this.timeTracker=a,this.logbookEntries=r,this.pendingItems=[],this.curIndex=r.length>0&&"automation"===r[0].domain?1:0},[{key:"curItem",get:function(){return this.logbookEntries[this.curIndex]}},{key:"hasNext",get:function(){return this.curIndex<this.logbookEntries.length}},{key:"maybeRenderItem",value:function(){var e=this.curItem;this.curIndex++;var t=new Date(1e3*e.when);if(0!==this.pendingItems.length){var a=this.pendingItems[this.pendingItems.length-1][0];Z(a,t)&&(this._renderLogbookEntries(),this.timeTracker.renderTime(a,t)),this.pendingItems.push([t,e])}else this.pendingItems.push([t,e])}},{key:"flush",value:function(){this.pendingItems.length>0&&this._renderLogbookEntries()}},{key:"_renderLogbookEntries",value:function(){this.timeTracker.maybeRenderTime(this.pendingItems[0][0]);var e,t,a=[];for(e=0;e<Math.min(this.pendingItems.length,2);e++)a.push(this._renderLogbookEntryHelper(this.pendingItems[e][1]));if(e<this.pendingItems.length)for(t=[];e<this.pendingItems.length;e++)t.push(this._renderLogbookEntryHelper(this.pendingItems[e][1]));this.entries.push((0,d.qy)(A||(A=N` <ha-timeline .icon="${0}" .moreItems="${0}"> ${0} </ha-timeline> `),"M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",t,a)),this.timeTracker.setLastReportedTime(this.pendingItems[this.pendingItems.length-1][0]),this.pendingItems=[]}},{key:"_renderLogbookEntryHelper",value:function(e){return(0,d.qy)(x||(x=N`${0} (${0}) ${0}<br>`),e.name,e.entity_id,e.message||`turned ${e.state}`)}}])}(),z=function(){return(0,s.A)(function e(t,a,r,i,o,s,c,h){(0,n.A)(this,e),this.hass=t,this.entityReg=a,this.labelReg=r,this.floorReg=i,this.entries=o,this.trace=s,this.logbookRenderer=c,this.timeTracker=h,this.curIndex=0,this.keys=Object.keys(s.trace)},[{key:"curItem",get:function(){return this._getItem(this.curIndex)}},{key:"hasNext",get:function(){return this.curIndex<this.keys.length}},{key:"renderItem",value:function(){this.curIndex=this._renderItem(this.curIndex)}},{key:"_getItem",value:function(e){return this.trace.trace[this.keys[e]]}},{key:"_renderItem",value:function(e,t,a){var r=this._getItem(e);if(a){var i=0;return r.forEach(a=>{i=this._renderIteration(e,a,t)}),i}return this._renderIteration(e,r[0],t)}},{key:"_renderIteration",value:function(e,t,a){if((0,m.AB)(t.path))return this._handleTrigger(e,t);for(var r=new Date(t.timestamp);this.logbookRenderer.hasNext&&new Date(1e3*this.logbookRenderer.curItem.when)<r;)this.logbookRenderer.maybeRenderItem();this.logbookRenderer.flush(),this.timeTracker.maybeRenderTime(r);var i,o=t.path;try{i=(0,m.Ci)(this.trace.config,o)}catch(c){return this._renderEntry(o,this.hass.localize("ui.panel.config.automation.trace.messages.path_error",{path:o})),e+1}var n=o.split("/");if(!(2===n.length)&&!a)return this._renderEntry(o,o.replace(/\//g," ")),e+1;if(a||(a=(0,b.pq)(i)),"choose"===a)return this._handleChoose(e);if("repeat"===a)return this._handleRepeat(e);if("if"===a)return this._handleIf(e);if("sequence"===a)return this._handleSequence(e);if("parallel"===a)return this._handleParallel(e);this._renderEntry(o,(0,_.u)(this.hass,this.entityReg,this.labelReg,this.floorReg,i,a),void 0,!1===i.enabled);for(var s=e+1;s<this.keys.length&&this.keys[s].split("/").length!==n.length;s++);return s}},{key:"_handleTrigger",value:function(e,t){var a,r;return this._renderEntry(t.path,this.hass.localize("ui.panel.config.automation.trace.messages.triggered_by",{triggeredBy:null!==(a=t.changed_variables.trigger)&&void 0!==a&&a.alias?"alias":"other",alias:null===(r=t.changed_variables.trigger)||void 0===r?void 0:r.alias,triggeredPath:"trigger"===t.path?"manual":"trigger",trigger:this.trace.trigger,time:(0,p.yg)(new Date(t.timestamp),this.hass.locale,this.hass.config)}),I),e+1}},{key:"_handleChoose",value:function(e){var t,a,r=this.keys[e],i=r.split("/").length,o=this._getItem(e)[0],n="default"===(null===(t=o.result)||void 0===t?void 0:t.choice),s=this._getDataFromPath(this.keys[e]),c=!1===s.enabled,h=s.alias||this.hass.localize("ui.panel.config.automation.trace.messages.choose");if(n)this._renderEntry(r,this.hass.localize("ui.panel.config.automation.trace.messages.default_action_executed",{name:h}),void 0,c);else if(o.result){var d="default"!==o.result.choice?o.result.choice+1:void 0,l=this._getDataFromPath(`${this.keys[e]}/choose/${o.result.choice}`),u=l?`${l.alias||this.hass.localize("ui.panel.config.automation.trace.messages.option_executed",{option:d})}`:this.hass.localize("ui.panel.config.automation.trace.messages.error",{error:o.error});this._renderEntry(r,`${h}: ${u}`,void 0,c)}else this._renderEntry(r,this.hass.localize("ui.panel.config.automation.trace.messages.no_action_executed",{name:h}),void 0,c);for(a=e+1;a<this.keys.length;a++){var p=this.keys[a].split("/");if(p.length<=i)return a;if(n&&"default"===p[i+1]||!n&&"sequence"===p[i+3])break}for(;a<this.keys.length;){var g=this.keys[a];if(g.split("/").length<=i)return a;a=this._renderItem(a,(0,b.pq)(this._getDataFromPath(g)))}return a}},{key:"_handleRepeat",value:function(e){var t,a=this.keys[e],r=a.split("/").length,i=this._getDataFromPath(this.keys[e]),o=!1===i.enabled,n=i.alias||(0,_.u)(this.hass,this.entityReg,this.labelReg,this.floorReg,i);for(this._renderEntry(a,n,void 0,o),t=e+1;t<this.keys.length;t++){var s=this.keys[t];if(s.split("/").length<=r)return t;t=this._renderItem(t,(0,b.pq)(this._getDataFromPath(s)),!0)}return t}},{key:"_handleIf",value:function(e){var t,a,r=this.keys[e],i=r.split("/").length,o=this._getItem(e)[0],n=this._getDataFromPath(this.keys[e]),s=!1===n.enabled,c=n.alias||this.hass.localize("ui.panel.config.automation.trace.messages.if");if(null!==(t=o.result)&&void 0!==t&&t.choice){var h=this._getDataFromPath(`${this.keys[e]}/${o.result.choice}/`),d=h?h.alias||this.hass.localize("ui.panel.config.automation.trace.messages.action_executed",{action:o.result.choice}):this.hass.localize("ui.panel.config.automation.trace.messages.error",{error:o.error});this._renderEntry(r,`${c}: ${d}`,void 0,s)}else this._renderEntry(r,this.hass.localize("ui.panel.config.automation.trace.messages.no_action_executed",{name:c}),void 0,s);for(a=e+1;a<this.keys.length;a++){var l=this.keys[a],u=this.keys[a].split("/");if(u.length<=i)return a;"condition"===u[i+1]||u.length<i+2||(a=this._renderItem(a,(0,b.pq)(this._getDataFromPath(l))))}return a}},{key:"_handleSequence",value:function(e){var t,a=this.keys[e],r=this._getDataFromPath(this.keys[e]);for(this._renderEntry(a,r.alias||(0,_.u)(this.hass,this.entityReg,this.labelReg,this.floorReg,r,"sequence"),void 0,!1===r.enabled),t=e+1;t<this.keys.length;t++){var i=this.keys[t];this._renderItem(t,(0,b.pq)(this._getDataFromPath(i)))}return t}},{key:"_handleParallel",value:function(e){var t,a=this.keys[e],r=a.split("/").length,i=this._getDataFromPath(this.keys[e]),o=!1===i.enabled,n=i.alias||this.hass.localize("ui.panel.config.automation.trace.messages.execute_in_parallel");for(this._renderEntry(a,n,void 0,o),t=e+1;t<this.keys.length;t++){var s=this.keys[t];if(s.split("/").length<=r)return t;t=this._renderItem(t,(0,b.pq)(this._getDataFromPath(s)))}return t}},{key:"_renderEntry",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.entries.push((0,d.qy)(M||(M=N` <ha-timeline .icon="${0}" data-path="${0}" .notEnabled="${0}"> ${0}${0} </ha-timeline> `),a,e,r,t,r?(0,d.qy)(H||(H=N`<span class="disabled"> ${0}</span>`),this.hass.localize("ui.panel.config.automation.trace.messages.disabled")):""))}},{key:"_getDataFromPath",value:function(e){return(0,m.Ci)(this.trace.config,e)}}])}(),D=function(e){function t(){var e;(0,n.A)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=(0,r.A)(this,t,[].concat(i))).allowPick=!1,e}return(0,i.A)(t,e),(0,s.A)(t,[{key:"render",value:function(){if(!this.trace)return d.s6;for(var e=[],t=new R(this.hass,e,this.trace),a=new P(e,t,this.logbookEntries||[]),r=new z(this.hass,this._entityReg,this._labelReg,this._floorReg,e,this.trace,a,t);r.hasNext;)r.renderItem();for(;a.hasNext;)a.maybeRenderItem();a.flush();var i,o=()=>(0,p.yg)(new Date(this.trace.timestamp.finish),this.hass.locale,this.hass.config),n=()=>((new Date(this.trace.timestamp.finish).getTime()-new Date(this.trace.timestamp.start).getTime())/1e3).toFixed(2);if("running"===this.trace.state)i={description:this.hass.localize("ui.panel.config.automation.trace.messages.still_running"),icon:"M13,2.03V2.05L13,4.05C17.39,4.59 20.5,8.58 19.96,12.97C19.5,16.61 16.64,19.5 13,19.93V21.93C18.5,21.38 22.5,16.5 21.95,11C21.5,6.25 17.73,2.5 13,2.03M11,2.06C9.05,2.25 7.19,3 5.67,4.26L7.1,5.74C8.22,4.84 9.57,4.26 11,4.06V2.06M4.26,5.67C3,7.19 2.25,9.04 2.05,11H4.05C4.24,9.58 4.8,8.23 5.69,7.1L4.26,5.67M2.06,13C2.26,14.96 3.03,16.81 4.27,18.33L5.69,16.9C4.81,15.77 4.24,14.42 4.06,13H2.06M7.1,18.37L5.67,19.74C7.18,21 9.04,21.79 11,22V20C9.58,19.82 8.23,19.25 7.1,18.37M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z"};else if("debugged"===this.trace.state)i={description:this.hass.localize("ui.panel.config.automation.trace.messages.debugged"),icon:"M13,2.03V2.05L13,4.05C17.39,4.59 20.5,8.58 19.96,12.97C19.5,16.61 16.64,19.5 13,19.93V21.93C18.5,21.38 22.5,16.5 21.95,11C21.5,6.25 17.73,2.5 13,2.03M11,2.06C9.05,2.25 7.19,3 5.67,4.26L7.1,5.74C8.22,4.84 9.57,4.26 11,4.06V2.06M4.26,5.67C3,7.19 2.25,9.04 2.05,11H4.05C4.24,9.58 4.8,8.23 5.69,7.1L4.26,5.67M2.06,13C2.26,14.96 3.03,16.81 4.27,18.33L5.69,16.9C4.81,15.77 4.24,14.42 4.06,13H2.06M7.1,18.37L5.67,19.74C7.18,21 9.04,21.79 11,22V20C9.58,19.82 8.23,19.25 7.1,18.37M16.82,15.19L12.71,11.08C13.12,10.04 12.89,8.82 12.03,7.97C11.13,7.06 9.78,6.88 8.69,7.38L10.63,9.32L9.28,10.68L7.29,8.73C6.75,9.82 7,11.17 7.88,12.08C8.74,12.94 9.96,13.16 11,12.76L15.11,16.86C15.29,17.05 15.56,17.05 15.74,16.86L16.78,15.83C17,15.65 17,15.33 16.82,15.19Z"};else if("finished"===this.trace.script_execution)i={description:this.hass.localize("ui.panel.config.automation.trace.messages.finished",{time:o(),executiontime:n()}),icon:I};else if("aborted"===this.trace.script_execution)i={description:this.hass.localize("ui.panel.config.automation.trace.messages.aborted",{time:o(),executiontime:n()}),icon:C};else if("cancelled"===this.trace.script_execution)i={description:this.hass.localize("ui.panel.config.automation.trace.messages.cancelled",{time:o(),executiontime:n()}),icon:C};else{var s,c,h=!1;switch(this.trace.script_execution){case"failed_conditions":s="stopped_failed_conditions";break;case"failed_single":s="stopped_failed_single";break;case"failed_max_runs":s="stopped_failed_max_runs";break;case"error":h=!0,s="stopped_error",c=(0,d.qy)(V||(V=N`<br><br>${0}`),this.trace.error);break;default:h=!0,s="stopped_unknown_reason"}i={description:(0,d.qy)(L||(L=N`${0} ${0}`),this.hass.localize(`ui.panel.config.automation.trace.messages.${s}`,{reason:this.trace.script_execution,time:o(),executiontime:n()}),c||""),icon:C,className:h?"error":void 0}}return e.push((0,d.qy)(w||(w=N` <ha-timeline last-item .icon="${0}" class="${0}"> ${0} </ha-timeline> `),i.icon,(0,u.J)(i.className),i.description)),(0,d.qy)(q||(q=N`${0}`),e)}},{key:"updated",value:function(e){if((0,o.A)(t,"updated",this,3)([e]),this.allowPick&&e.has("trace")&&this.trace&&this.selectedPath&&!(this.selectedPath in this.trace.trace)){var a=this.shadowRoot.querySelector("ha-timeline[data-path]");a&&((0,v.r)(this,"value-changed",{value:a.dataset.path}),this.selectedPath=a.dataset.path)}(e.has("trace")||e.has("selectedPath"))&&this.shadowRoot.querySelectorAll("ha-timeline[data-path]").forEach(e=>{if((0,f.j)(e,"selected",this.selectedPath===e.dataset.path),this.allowPick&&0!==e.tabIndex){e.tabIndex=0;var t=()=>{this.selectedPath=e.dataset.path,(0,v.r)(this,"value-changed",{value:e.dataset.path})};e.addEventListener("click",t),e.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||t()}),e.addEventListener("mouseover",()=>{e.raised=!0}),e.addEventListener("mouseout",()=>{e.raised=!1})}})}}],[{key:"styles",get:function(){return[(0,d.AH)(E||(E=N`ha-timeline[lastItem].condition{--timeline-ball-color:var(--error-color)}ha-timeline[data-path]{cursor:pointer}ha-timeline[selected]{--timeline-ball-color:var(--primary-color)}ha-timeline:focus{outline:0;--timeline-ball-color:var(--accent-color)}.error{--timeline-ball-color:var(--error-color);color:var(--error-color)}`))]}}])}(d.WF);(0,c.__decorate)([(0,l.MZ)({attribute:!1})],D.prototype,"hass",void 0),(0,c.__decorate)([(0,l.MZ)({attribute:!1})],D.prototype,"trace",void 0),(0,c.__decorate)([(0,l.MZ)({attribute:!1})],D.prototype,"logbookEntries",void 0),(0,c.__decorate)([(0,l.MZ)({attribute:!1})],D.prototype,"selectedPath",void 0),(0,c.__decorate)([(0,l.MZ)({attribute:"allow-pick",type:Boolean})],D.prototype,"allowPick",void 0),(0,c.__decorate)([(0,l.wk)(),(0,h.Fg)({context:y.ih,subscribe:!0})],D.prototype,"_entityReg",void 0),(0,c.__decorate)([(0,l.wk)(),(0,h.Fg)({context:y.HD,subscribe:!0})],D.prototype,"_labelReg",void 0),(0,c.__decorate)([(0,l.wk)(),(0,h.Fg)({context:y.rf,subscribe:!0})],D.prototype,"_floorReg",void 0),D=(0,c.__decorate)([(0,l.EM)("hat-trace-timeline")],D),t()}catch(F){t(F)}})},82342:function(e,t,a){a.d(t,{h:function(){return i}});var r,i=(0,a(84922).AH)(r||(r=(e=>e)`.tabs{background-color:var(--primary-background-color);border-top:1px solid var(--divider-color);border-bottom:1px solid var(--divider-color);display:flex;padding-left:4px;padding-inline-start:4px;padding-inline-end:initial}.tabs.top{border-top:none}.tabs>*{padding:2px 16px;cursor:pointer;position:relative;bottom:-1px;border:none;border-bottom:2px solid transparent;user-select:none;background:0 0;color:var(--primary-text-color);outline:0;transition:background 15ms linear}.tabs>.active{border-bottom-color:var(--primary-color)}.tabs>:focus,.tabs>:hover{background:var(--secondary-background-color)}`))},49487:function(e,t,a){a.d(t,{n:function(){return r}});a(67579),a(41190);var r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},25958:function(e,t,a){var r=a(206).end,i=a(58758);e.exports=i("trimEnd")?function(){return r(this)}:"".trimEnd},28358:function(e,t,a){a(89613);var r=a(87642),i=a(25958);r({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==i},{trimEnd:i})},89613:function(e,t,a){var r=a(87642),i=a(25958);r({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==i},{trimRight:i})}}]);
//# sourceMappingURL=14632.30e1651f0dd4a28a.js.map