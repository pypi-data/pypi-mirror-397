"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["93076"],{83790:function(t,e,i){i.d(e,{A:function(){return o}});var a=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=""+t,a=1;a<e;a++)i=parseInt(i)<Math.pow(10,a)?`0${i}`:i;return i};function o(t){var e=Math.floor(t/1e3/3600),i=Math.floor(t/1e3%3600/60),o=Math.floor(t/1e3%3600%60),r=Math.floor(t%1e3);return e>0?`${e}:${a(i)}:${a(o)}`:i>0?`${i}:${a(o)}`:o>0||r>0?`${o}${r>0?`.${a(r,3)}`:""}`:null}},33136:function(t,e,i){i.d(e,{a:function(){return o}});i(46852);var a=(0,i(65298).n)(t=>{history.replaceState({scrollPosition:t},"")},300);function o(t){return(e,i)=>{if("object"==typeof i)throw new Error("This decorator does not support this compilation type.");var o=e.connectedCallback;e.connectedCallback=function(){o.call(this);var e=this[i];e&&this.updateComplete.then(()=>{var i=this.renderRoot.querySelector(t);i&&setTimeout(()=>{i.scrollTop=e},0)})};var r,s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s)r={get(){var t;return this[`__${String(i)}`]||(null===(t=history.state)||void 0===t?void 0:t.scrollPosition)},set(t){a(t),this[`__${String(i)}`]=t},configurable:!0,enumerable:!0};else{var n=s.set;r=Object.assign(Object.assign({},s),{},{set(t){a(t),this[`__${String(i)}`]=t,null==n||n.call(this,t)}})}Object.defineProperty(e,i,r)}}},37382:function(t,e,i){i.d(e,{D:function(){return r}});var a=i(10416),o=i.n(a),r=t=>o()(t,{whiteList:{},stripIgnoreTag:!0,stripIgnoreTagBody:!0})},4575:function(t,e,i){i.a(t,async function(t,e){try{var a=i(18202),o=i(62020),r=i(31802),s=i(97750),n=i(21101),h=i(23180),d=(i(38606),i(44941),i(35748),i(80178),i(99342),i(65315),i(84136),i(22416),i(59023),i(65152),i(45519),i(64587),i(88238),i(34536),i(16257),i(20152),i(44711),i(72108),i(77030),i(30536),i(95013),i(69868)),l=i(84922),c=i(11991),u=i(48893),m=i(94327),p=i(54e3),_=i(68717),y=i(6149),v=i(8868),f=i(35083),g=i(44017),x=i(87437),b=i(70303),w=t([y,v,_]);[y,v,_]=w.then?(await w)():w;var M,A=t=>t,$=t=>{var e=parseFloat(t);return isFinite(e)?e:null},T=function(t){function e(){var t;(0,o.A)(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=(0,n.A)(this,e,[].concat(a))).data=[],t.showNames=!0,t.clickForMoreInfo=!0,t.paddingYAxis=0,t.logarithmicScale=!1,t.fitYData=!1,t._chartData=[],t._entityIds=[],t._datasetToDataIndex=[],t._hiddenStats=new Set,t._yWidth=25,t._chartTime=new Date,t._previousYAxisLabelValue=0,t._yAxisMaximumFractionDigits=0,t._renderTooltip=e=>{var i=e[0].axisValue,a=(0,y.yg)(new Date(i),t.hass.locale,t.hass.config)+"<br>",o=[];t._chartData.forEach((a,r)=>{var s;if(!1!==(null===(s=a.tooltip)||void 0===s?void 0:s.show)&&!t._hiddenStats.has(a.id)){var n=e.find(t=>t.seriesIndex===r);if(n)o.push(n);else{for(var h,d=a.data||[],l=d.length-1;l>=0;l--){var c=d[l];if(c&&c[0]<=i&&"number"==typeof c[1]){h=c;break}}h&&o.push({seriesName:a.name,seriesIndex:r,value:h,marker:`<span style="display:inline-block;margin-right:4px;margin-inline-end:4px;margin-inline-start:initial;border-radius:10px;width:10px;height:10px;background-color:${a.color};"></span>`})}}});var r=t.unit?`${(0,b.A)(t.unit,t.hass.locale)}${t.unit}`:"";return a+o.map(e=>{var i=t._entityIds[e.seriesIndex],a=t.hass.states[i],o=t.hass.entities[i],s=String(e.value[1]),n=a?t.hass.formatEntityState(a,s):`${(0,v.ZV)(s,t.hass.locale,(0,v.ZQ)(void 0,o))}${r}`,h=t._datasetToDataIndex[e.seriesIndex],d=t.data[h];d.statistics&&d.statistics.length>0&&(n+="<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",n+=0===d.states.length||e.value[0]<d.states[0].last_changed?`${t.hass.localize("ui.components.history_charts.source_stats")}`:`${t.hass.localize("ui.components.history_charts.source_history")}`);return e.seriesName?`${e.marker} ${e.seriesName}: ${n}`:`${e.marker} ${n}`}).join("<br>")},t._formatYAxisLabel=e=>{var i=Math.max(1,-Math.floor(Math.log10(Math.abs(e-t._previousYAxisLabelValue||1))));t._yAxisMaximumFractionDigits=Math.max(t._yAxisMaximumFractionDigits,i);var a=(0,v.ZV)(e,t.hass.locale,{maximumFractionDigits:t._yAxisMaximumFractionDigits}),o=(0,f.W)(a,12)+5;return o>t._yWidth&&(t._yWidth=o,(0,g.r)((0,s.A)(t),"y-width-changed",{value:t._yWidth,chartIndex:t.chartIndex})),t._previousYAxisLabelValue=e,a},t}return(0,h.A)(e,t),(0,r.A)(e,[{key:"render",value:function(){return(0,l.qy)(M||(M=A` <ha-chart-base .hass="${0}" .data="${0}" .options="${0}" .height="${0}" style="${0}" @dataset-hidden="${0}" @dataset-unhidden="${0}" @chart-zoom="${0}" .expandLegend="${0}" .hideResetButton="${0}"></ha-chart-base> `),this.hass,this._chartData,this._chartOptions,this.height,(0,u.W)({height:this.height}),this._datasetHidden,this._datasetUnhidden,this._handleDataZoom,this.expandLegend,this.hideResetButton)}},{key:"_datasetHidden",value:function(t){this._hiddenStats.add(t.detail.id)}},{key:"_datasetUnhidden",value:function(t){this._hiddenStats.delete(t.detail.id)}},{key:"zoom",value:function(t,e){this.shadowRoot.querySelector("ha-chart-base").zoom(t,e,!0)}},{key:"_handleDataZoom",value:function(t){var e,i;(0,g.r)(this,"chart-zoom-with-index",{start:null!==(e=t.detail.start)&&void 0!==e?e:0,end:null!==(i=t.detail.end)&&void 0!==i?i:100,chartIndex:this.chartIndex})}},{key:"willUpdate",value:function(t){if((t.has("data")||t.has("startTime")||t.has("endTime")||this._chartTime<new Date(this.endTime.getTime()-_.p))&&this._generateData(),!this.hasUpdated||t.has("showNames")||t.has("startTime")||t.has("endTime")||t.has("unit")||t.has("logarithmicScale")||t.has("minYAxis")||t.has("maxYAxis")||t.has("fitYData")||t.has("paddingYAxis")||t.has("_visualMap")||t.has("_yWidth")){var e=(0,p.qC)(this.hass),i=this.minYAxis,a=this.maxYAxis;"number"==typeof i?this.fitYData&&(i=t=>{var e=t.min;return Math.min(this._roundYAxis(e,Math.floor),this.minYAxis)}):this.logarithmicScale&&(i=t=>{var e=t.min,i=e>0?.95*e:1.05*e;return this._roundYAxis(i,Math.floor)}),"number"==typeof a?this.fitYData&&(a=t=>{var e=t.max;return Math.max(this._roundYAxis(e,Math.ceil),this.maxYAxis)}):this.logarithmicScale&&(a=t=>{var e=t.max,i=e>0?1.05*e:.95*e;return this._roundYAxis(i,Math.ceil)}),this._chartOptions={xAxis:{type:"time",min:this.startTime,max:this.endTime},yAxis:{type:this.logarithmicScale?"log":"value",name:this.unit,min:this._clampYAxis(i),max:this._clampYAxis(a),position:e?"right":"left",scale:!0,nameGap:2,nameTextStyle:{align:"left"},axisLine:{show:!1},axisLabel:{margin:5,formatter:this._formatYAxisLabel}},legend:{type:"custom",show:this.showNames},grid:{top:15,left:e?1:Math.max(this.paddingYAxis,this._yWidth),right:e?Math.max(this.paddingYAxis,this._yWidth):1,bottom:20},visualMap:this._visualMap,tooltip:{trigger:"axis",appendTo:document.body,formatter:this._renderTooltip}}}}},{key:"_generateData",value:function(){var t=0,e=getComputedStyle(this),i=this.data,o=[],r=[],s=[];if(0!==i.length){this._chartTime=new Date;var n=this.endTime,h=this.names||{};i.forEach((i,d)=>{var l=i.domain,c=h[i.entity_id]||i.name,u=null,p=[],_=(t,e)=>{e&&(t>n||(p.forEach((i,a)=>{null===e[a]&&u&&null!==u[a]&&i.data.push([t,u[a]]),i.data.push([t,e[a]])}),u=e))},y=function(a,o,n){var h=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n||(n=(0,m.fI)(t,e),t++),p.push({id:a,data:[],type:"line",cursor:"default",name:o,color:n,symbol:"circle",symbolSize:1,step:"end",sampling:"minmax",animationDurationUpdate:0,lineStyle:{width:h?0:1.5},areaStyle:h?{color:n+"7F"}:void 0,tooltip:{show:!h}}),r.push(i.entity_id),s.push(d)};if("thermostat"===l||"climate"===l||"water_heater"===l){var v=i.states.some(t=>{var e;return null===(e=t.attributes)||void 0===e?void 0:e.hvac_action}),f="climate"===l&&v?t=>{var e;return"heat"===x.sx[null===(e=t.attributes)||void 0===e?void 0:e.hvac_action]}:t=>"heat"===t.state,g="climate"===l&&v?t=>{var e;return"cool"===x.sx[null===(e=t.attributes)||void 0===e?void 0:e.hvac_action]}:t=>"cool"===t.state,b=i.states.some(f),w=i.states.some(g),M=i.states.some(t=>t.attributes&&t.attributes.target_temp_high!==t.attributes.target_temp_low);y(i.entity_id+"-current_temperature",this.showNames?this.hass.localize("ui.card.climate.current_temperature",{name:c}):this.hass.localize("component.climate.entity_component._.state_attributes.current_temperature.name")),b&&y(i.entity_id+"-heating",this.showNames?this.hass.localize("ui.card.climate.heating",{name:c}):this.hass.localize("component.climate.entity_component._.state_attributes.hvac_action.state.heating"),e.getPropertyValue("--state-climate-heat-color"),!0),w&&y(i.entity_id+"-cooling",this.showNames?this.hass.localize("ui.card.climate.cooling",{name:c}):this.hass.localize("component.climate.entity_component._.state_attributes.hvac_action.state.cooling"),e.getPropertyValue("--state-climate-cool-color"),!0),M?(y(i.entity_id+"-target_temperature_mode",this.showNames?this.hass.localize("ui.card.climate.target_temperature_mode",{name:c,mode:this.hass.localize("ui.card.climate.high")}):this.hass.localize("component.climate.entity_component._.state_attributes.target_temp_high.name")),y(i.entity_id+"-target_temperature_mode_low",this.showNames?this.hass.localize("ui.card.climate.target_temperature_mode",{name:c,mode:this.hass.localize("ui.card.climate.low")}):this.hass.localize("component.climate.entity_component._.state_attributes.target_temp_low.name"))):y(i.entity_id+"-target_temperature",this.showNames?this.hass.localize("ui.card.climate.target_temperature_entity",{name:c}):this.hass.localize("component.climate.entity_component._.state_attributes.temperature.name")),i.states.forEach(t=>{if(t.attributes){var e=$(t.attributes.current_temperature),i=[e];if(b&&i.push(f(t)?e:null),w&&i.push(g(t)?e:null),M){var a=$(t.attributes.target_temp_high),o=$(t.attributes.target_temp_low);i.push(a,o),_(new Date(t.last_changed),i)}else{var r=$(t.attributes.temperature);i.push(r),_(new Date(t.last_changed),i)}}})}else if("humidifier"===l){var A=i.states.some(t=>{var e;return null===(e=t.attributes)||void 0===e?void 0:e.action}),T=i.states.some(t=>{var e;return null===(e=t.attributes)||void 0===e?void 0:e.current_humidity}),k=A&&i.states.some(t=>{var e;return"humidifying"===(null===(e=t.attributes)||void 0===e?void 0:e.action)}),D=A&&i.states.some(t=>{var e;return"drying"===(null===(e=t.attributes)||void 0===e?void 0:e.action)});y(i.entity_id+"-target_humidity",this.showNames?this.hass.localize("ui.card.humidifier.target_humidity_entity",{name:c}):this.hass.localize("component.humidifier.entity_component._.state_attributes.humidity.name")),T&&y(i.entity_id+"-current_humidity",this.showNames?this.hass.localize("ui.card.humidifier.current_humidity_entity",{name:c}):this.hass.localize("component.humidifier.entity_component._.state_attributes.current_humidity.name")),k?y(i.entity_id+"-humidifying",this.showNames?this.hass.localize("ui.card.humidifier.humidifying",{name:c}):this.hass.localize("component.humidifier.entity_component._.state_attributes.action.state.humidifying"),e.getPropertyValue("--state-humidifier-on-color"),!0):D?y(i.entity_id+"-drying",this.showNames?this.hass.localize("ui.card.humidifier.drying",{name:c}):this.hass.localize("component.humidifier.entity_component._.state_attributes.action.state.drying"),e.getPropertyValue("--state-humidifier-on-color"),!0):y(i.entity_id+"-on",this.showNames?this.hass.localize("ui.card.humidifier.on_entity",{name:c}):this.hass.localize("component.humidifier.entity_component._.state.on"),void 0,!0),i.states.forEach(t=>{var e;if(t.attributes){var i,a=$(t.attributes.humidity),o=T?$(null===(e=t.attributes)||void 0===e?void 0:e.current_humidity):a,r=[a];if(T&&r.push(o),k)r.push("humidifying"===(null===(i=t.attributes)||void 0===i?void 0:i.action)?o:null);else if(D){var s;r.push("drying"===(null===(s=t.attributes)||void 0===s?void 0:s.action)?o:null)}else r.push("on"===t.state?o:null);_(new Date(t.last_changed),r)}})}else{var z,Z;y(i.entity_id,c);var Y=null,S=t=>{var e=$(t.state),i=new Date(t.last_changed);if(null!==e&&Y){var a,o=i.getTime(),r=Y.getTime(),s=null===(a=Z)||void 0===a?void 0:a.getTime();_(Y,[(r-s)/(o-s)*(e-z)+z]),_(new Date(r+1),[null]),_(i,[e]),Z=i,z=e,Y=null}else null!==e&&null===Y?(_(i,[e]),Z=i,z=e):null===e&&null===Y&&void 0!==z&&(Y=i)};if(i.statistics){var I,C=i.states&&0!==i.states.length?i.states[0].last_changed:0,N=(0,a.A)(i.statistics);try{for(N.s();!(I=N.n()).done;){var W=I.value;if(C&&W.last_changed>=C)break;S(W)}}catch(B){N.e(B)}finally{N.f()}}i.states.forEach(t=>{S(t)}),null!==Y&&_(Y,[null])}_(n,u),Array.prototype.push.apply(o,p)}),this._chartData=o,this._entityIds=r,this._datasetToDataIndex=s;var d=[];this._chartData.forEach((t,e)=>{var i,a,o=this._datasetToDataIndex[e],r=this.data[o];if(r.statistics&&0!==r.statistics.length){var s=null!==(i=null===(a=r.states[0])||void 0===a?void 0:a.last_changed)&&void 0!==i?i:this.endTime.getTime();d.push({show:!1,seriesIndex:e,dimension:0,pieces:[{max:s-.01,colorAlpha:.5},{min:s,colorAlpha:1}]})}}),this._visualMap=d.length>0?d:void 0}}},{key:"_clampYAxis",value:function(t){if(this.logarithmicScale){if("number"==typeof t)return Math.max(t,Number.EPSILON);if("function"==typeof t)return e=>Math.max(t(e),Number.EPSILON)}return t}},{key:"_roundYAxis",value:function(t,e){return Math.abs(t)<1?t:e(t)}}])}(l.WF);(0,d.__decorate)([(0,c.MZ)({attribute:!1})],T.prototype,"hass",void 0),(0,d.__decorate)([(0,c.MZ)({attribute:!1})],T.prototype,"data",void 0),(0,d.__decorate)([(0,c.MZ)({attribute:!1})],T.prototype,"names",void 0),(0,d.__decorate)([(0,c.MZ)()],T.prototype,"unit",void 0),(0,d.__decorate)([(0,c.MZ)()],T.prototype,"identifier",void 0),(0,d.__decorate)([(0,c.MZ)({attribute:"show-names",type:Boolean})],T.prototype,"showNames",void 0),(0,d.__decorate)([(0,c.MZ)({attribute:"click-for-more-info",type:Boolean})],T.prototype,"clickForMoreInfo",void 0),(0,d.__decorate)([(0,c.MZ)({attribute:!1})],T.prototype,"startTime",void 0),(0,d.__decorate)([(0,c.MZ)({attribute:!1})],T.prototype,"endTime",void 0),(0,d.__decorate)([(0,c.MZ)({attribute:!1,type:Number})],T.prototype,"paddingYAxis",void 0),(0,d.__decorate)([(0,c.MZ)({attribute:!1,type:Number})],T.prototype,"chartIndex",void 0),(0,d.__decorate)([(0,c.MZ)({attribute:"logarithmic-scale",type:Boolean})],T.prototype,"logarithmicScale",void 0),(0,d.__decorate)([(0,c.MZ)({attribute:!1,type:Number})],T.prototype,"minYAxis",void 0),(0,d.__decorate)([(0,c.MZ)({attribute:!1,type:Number})],T.prototype,"maxYAxis",void 0),(0,d.__decorate)([(0,c.MZ)({attribute:"fit-y-data",type:Boolean})],T.prototype,"fitYData",void 0),(0,d.__decorate)([(0,c.MZ)({type:String})],T.prototype,"height",void 0),(0,d.__decorate)([(0,c.MZ)({attribute:"expand-legend",type:Boolean})],T.prototype,"expandLegend",void 0),(0,d.__decorate)([(0,c.MZ)({attribute:"hide-reset-button",type:Boolean})],T.prototype,"hideResetButton",void 0),(0,d.__decorate)([(0,c.wk)()],T.prototype,"_chartData",void 0),(0,d.__decorate)([(0,c.wk)()],T.prototype,"_entityIds",void 0),(0,d.__decorate)([(0,c.wk)()],T.prototype,"_chartOptions",void 0),(0,d.__decorate)([(0,c.wk)()],T.prototype,"_yWidth",void 0),(0,d.__decorate)([(0,c.wk)()],T.prototype,"_visualMap",void 0),customElements.define("state-history-chart-line",T),e()}catch(k){e(k)}})},69166:function(t,e,i){i.a(t,async function(t,e){try{var a=i(62020),o=i(31802),r=i(21101),s=i(23180),n=(i(38606),i(44941),i(99342),i(65315),i(84136),i(22416),i(65152),i(45519),i(67579),i(30500),i(40598),i(30536),i(69868)),h=i(84922),d=i(11991),l=i(6149),c=i(83790),u=i(54e3),m=i(68717),p=i(92900),_=i(62428),y=i(10320),v=i(83510),f=i(35083),g=i(44017),x=t([l,m]);[l,m]=x.then?(await x)():x;var b,w,M=t=>t,A=function(t){function e(){var t;(0,a.A)(this,e);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(t=(0,r.A)(this,e,[].concat(o))).data=[],t.narrow=!1,t.showNames=!0,t.clickForMoreInfo=!0,t.chunked=!1,t.paddingYAxis=0,t._chartData=[],t._yWidth=0,t._chartTime=new Date,t._renderItem=(t,e)=>{var i=e.value(0),a=e.coord([e.value(1),i]),o=e.coord([e.value(2),i]),r=t.coordSys,s=_.default.graphic.clipRectByRect({x:a[0],y:a[1]-10,width:o[0]-a[0],height:20},{x:r.x,y:r.y,width:r.width,height:r.height});if(!s)return null;var n={type:"rect",transition:"shape",shape:s,style:{fill:e.value(4)}},h=e.value(3).replaceAll("\n"," ");return(0,f.W)(h,12)<s.width-8?{type:"group",children:[n,{type:"text",style:Object.assign(Object.assign({},s),{},{x:s.x+4,text:h,fill:e.value(5),fontSize:12,lineHeight:s.height})}]}:n},t._renderTooltip=e=>{var i=Array.isArray(e)?e[0]:e,a=i.value,o=i.name,r=i.marker,s=i.seriesName,n=i.color,h=s?`<h4 style="text-align: center; margin: 0;">${s}</h4>`:"",d=a[2]-a[1],m=`${t.hass.localize("ui.components.history_charts.duration")}: ${(0,c.A)(d)}`;return[h,[((0,u.qC)(t.hass)?`<span style="direction: rtl;display:inline-block;margin-right:4px;margin-inline-end:4px;border-radius:10px;width:10px;height:10px;background-color:${n};"></span>`:r)+o,(0,l.yg)(new Date(a[1]),t.hass.locale,t.hass.config),(0,l.yg)(new Date(a[2]),t.hass.locale,t.hass.config),m].join("<br>")].join("")},t}return(0,s.A)(e,t),(0,o.A)(e,[{key:"render",value:function(){return(0,h.qy)(b||(b=M` <ha-chart-base .hass="${0}" .options="${0}" .height="${0}" .data="${0}" small-controls @chart-click="${0}" @chart-zoom="${0}" .hideResetButton="${0}"></ha-chart-base> `),this.hass,this._chartOptions,30*this.data.length+30+"px",this._chartData,this._handleChartClick,this._handleDataZoom,this.hideResetButton)}},{key:"willUpdate",value:function(t){(t.has("startTime")||t.has("endTime")||t.has("data")||this._chartTime<new Date(this.endTime.getTime()-m.p))&&this._generateData(),(!this.hasUpdated||t.has("startTime")||t.has("endTime")||t.has("showNames")||t.has("paddingYAxis")||t.has("_yWidth"))&&this._createOptions()}},{key:"_createOptions",value:function(){var t=this.narrow,e=this.chunked||this.showNames,i=t?105:185,a=e?Math.max(this.paddingYAxis,this._yWidth):0,o=(0,u.qC)(this.hass);this._chartOptions={xAxis:{type:"time",min:this.startTime,max:this.endTime,axisTick:{show:!0},splitLine:{show:!1}},yAxis:{type:"category",inverse:!0,position:o?"right":"left",triggerEvent:!0,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:e,width:a,overflow:"truncate",margin:5,formatter:t=>{var e,a=null===(e=this._chartData.find(e=>e.id===t))||void 0===e?void 0:e.name,o=a?Math.min((0,f.W)(a,12)+5,i):0;return o>this._yWidth&&(this._yWidth=o,(0,g.r)(this,"y-width-changed",{value:this._yWidth,chartIndex:this.chartIndex})),a},hideOverlap:!0}},grid:{top:10,bottom:30,left:o?1:a,right:o?a:1},tooltip:{appendTo:document.body,formatter:this._renderTooltip}}}},{key:"zoom",value:function(t,e){this.shadowRoot.querySelector("ha-chart-base").zoom(t,e,!0)}},{key:"_handleDataZoom",value:function(t){var e,i;(0,g.r)(this,"chart-zoom-with-index",{start:null!==(e=t.detail.start)&&void 0!==e?e:0,end:null!==(i=t.detail.end)&&void 0!==i?i:100,chartIndex:this.chartIndex})}},{key:"_generateData",value:function(){var t=getComputedStyle(this),e=this.data;e||(e=[]),this._chartTime=new Date;var i=this.startTime,a=this.endTime,o=[],r=this.names||{};e.forEach(e=>{var s,n=null,h=null,d=i,l=this.showNames?r[e.entity_id]||e.name||e.entity_id:"",c=[];if(e.data.forEach(i=>{var o=i.state;if(o||(o=null),!(new Date(i.last_changed)>a))if(null===n)n=o,h=i.state_localize,d=new Date(i.last_changed);else if(o!==n){s=new Date(i.last_changed);var r=(0,p.c)(n,t,this.hass.states[e.entity_id]);c.push({value:[e.entity_id,d,s,h,r,(0,y.EP)((0,v.xp)(r))>.5?"#000":"#fff"],itemStyle:{color:r}}),n=o,h=i.state_localize,d=s}}),null!==n){var u=(0,p.c)(n,t,this.hass.states[e.entity_id]);c.push({value:[e.entity_id,d,a,h,u,(0,y.EP)((0,v.xp)(u))>.5?"#000":"#fff"],itemStyle:{color:u}})}o.push({id:e.entity_id,data:c,name:l,dimensions:["id","start","end","name","color","textColor"],type:"custom",encode:{x:[1,2],y:0,itemName:3},renderItem:this._renderItem})}),this._chartData=o}},{key:"_handleChartClick",value:function(t){if("axisLabel"===t.detail.targetType){var e=this._chartData[t.detail.dataIndex];e&&(0,g.r)(this,"hass-more-info",{entityId:e.id})}}}])}(h.WF);A.styles=(0,h.AH)(w||(w=M`ha-chart-base{--chart-max-height:none}`)),(0,n.__decorate)([(0,d.MZ)({attribute:!1})],A.prototype,"hass",void 0),(0,n.__decorate)([(0,d.MZ)({attribute:!1})],A.prototype,"data",void 0),(0,n.__decorate)([(0,d.MZ)({type:Boolean})],A.prototype,"narrow",void 0),(0,n.__decorate)([(0,d.MZ)({attribute:!1})],A.prototype,"names",void 0),(0,n.__decorate)([(0,d.MZ)()],A.prototype,"unit",void 0),(0,n.__decorate)([(0,d.MZ)()],A.prototype,"identifier",void 0),(0,n.__decorate)([(0,d.MZ)({attribute:"show-names",type:Boolean})],A.prototype,"showNames",void 0),(0,n.__decorate)([(0,d.MZ)({attribute:"click-for-more-info",type:Boolean})],A.prototype,"clickForMoreInfo",void 0),(0,n.__decorate)([(0,d.MZ)({type:Boolean})],A.prototype,"chunked",void 0),(0,n.__decorate)([(0,d.MZ)({attribute:!1})],A.prototype,"startTime",void 0),(0,n.__decorate)([(0,d.MZ)({attribute:!1})],A.prototype,"endTime",void 0),(0,n.__decorate)([(0,d.MZ)({attribute:!1,type:Number})],A.prototype,"paddingYAxis",void 0),(0,n.__decorate)([(0,d.MZ)({attribute:!1,type:Number})],A.prototype,"chartIndex",void 0),(0,n.__decorate)([(0,d.MZ)({attribute:"hide-reset-button",type:Boolean})],A.prototype,"hideResetButton",void 0),(0,n.__decorate)([(0,d.wk)()],A.prototype,"_chartData",void 0),(0,n.__decorate)([(0,d.wk)()],A.prototype,"_chartOptions",void 0),(0,n.__decorate)([(0,d.wk)()],A.prototype,"_yWidth",void 0),A=(0,n.__decorate)([(0,d.EM)("state-history-chart-timeline")],A),e()}catch($){e($)}})},47807:function(t,e,i){i.a(t,async function(t,e){try{var a=i(73983),o=i(62020),r=i(31802),s=i(21101),n=i(23180),h=(i(38606),i(79827),i(35748),i(80178),i(99342),i(9724),i(65315),i(22416),i(37089),i(48169),i(65152),i(45519),i(74774),i(30536),i(95013),i(69868)),d=i(84922),l=i(11991),c=i(26946),u=i(33136),m=i(78100),p=(i(10547),i(86160),i(4575)),_=i(69166),y=t([p,_]);[p,_]=y.then?(await y)():y;var v,f,g,x,b,w,M,A,$,T,k,D=t=>t,z=function(t){function e(){var t;(0,o.A)(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=(0,s.A)(this,e,[].concat(a))).narrow=!1,t.virtualize=!1,t.upToNow=!1,t.showNames=!0,t.clickForMoreInfo=!0,t.isLoadingData=!1,t.logarithmicScale=!1,t.fitYData=!1,t.syncCharts=!1,t._maxYWidth=0,t._childYWidths=[],t._chartCount=0,t._hasZoomedCharts=!1,t._isSyncing=!1,t._renderHistoryItem=(e,i)=>e&&void 0!==i?Array.isArray(e)?(0,d.qy)(g||(g=D`<div class="entry-container timeline"> <state-history-chart-timeline .hass="${0}" .data="${0}" .startTime="${0}" .endTime="${0}" .showNames="${0}" .names="${0}" .narrow="${0}" .chunked="${0}" .paddingYAxis="${0}" .chartIndex="${0}" .clickForMoreInfo="${0}" @y-width-changed="${0}" @chart-zoom-with-index="${0}" ?hide-reset-button="${0}"></state-history-chart-timeline> </div> `),t.hass,e,t._computedStartTime,t._computedEndTime,t.showNames,t.names,t.narrow,t.virtualize,t._maxYWidth,i,t.clickForMoreInfo,t._yWidthChanged,t._handleTimelineSync,t.syncCharts):(0,d.qy)(f||(f=D`<div class="entry-container line"> <state-history-chart-line .hass="${0}" .unit="${0}" .data="${0}" .identifier="${0}" .showNames="${0}" .startTime="${0}" .endTime="${0}" .paddingYAxis="${0}" .names="${0}" .chartIndex="${0}" .clickForMoreInfo="${0}" .logarithmicScale="${0}" .minYAxis="${0}" .maxYAxis="${0}" .fitYData="${0}" @y-width-changed="${0}" @chart-zoom-with-index="${0}" .height="${0}" .expandLegend="${0}" ?hide-reset-button="${0}"></state-history-chart-line> </div> `),t.hass,e.unit,e.data,e.identifier,t.showNames,t._computedStartTime,t._computedEndTime,t._maxYWidth,t.names,i,t.clickForMoreInfo,t.logarithmicScale,t.minYAxis,t.maxYAxis,t.fitYData,t._yWidthChanged,t._handleTimelineSync,t.virtualize?void 0:t.height,t.expandLegend,t.syncCharts):(0,d.qy)(v||(v=D``)),t}return(0,n.A)(e,t),(0,r.A)(e,[{key:"render",value:function(){if(!(0,c.x)(this.hass,"history"))return(0,d.qy)(x||(x=D`<div class="info"> ${0} </div>`),this.hass.localize("ui.components.history_charts.history_disabled"));if(this.isLoadingData&&!this.historyData)return(0,d.qy)(b||(b=D`<div class="info"> ${0} </div>`),this.hass.localize("ui.components.history_charts.loading_history"));if(this._isHistoryEmpty())return(0,d.qy)(w||(w=D`<div class="info"> ${0} </div>`),this.hass.localize("ui.components.history_charts.no_history_found"));var t,e,i=this.historyData.timeline.length?(this.virtualize?(t=this.historyData.timeline,e=10,t.reduce((t,i,a)=>{var o=Math.floor(a/e);return t[o]||(t[o]=[]),t[o].push(i),t},[])):[this.historyData.timeline]).concat(this.historyData.line):this.historyData.line;return this._chartCount=i.length,(0,d.qy)(M||(M=D` ${0} ${0} `),this.virtualize?(0,d.qy)(A||(A=D`<div class="container ha-scrollbar" @scroll="${0}"> <lit-virtualizer scroller class="ha-scrollbar" .items="${0}" .renderItem="${0}"> </lit-virtualizer> </div>`),this._saveScrollPos,i,this._renderHistoryItem):(0,d.qy)($||($=D`${0}`),i.map((t,e)=>this._renderHistoryItem(t,e))),this.syncCharts&&this._hasZoomedCharts?(0,d.qy)(T||(T=D`<ha-fab slot="fab" class="reset-button" .label="${0}" @click="${0}"> <ha-svg-icon slot="icon" .path="${0}"></ha-svg-icon> </ha-fab>`),this.hass.localize("ui.components.history_charts.zoom_reset"),this._handleGlobalZoomReset,"M12,4C14.1,4 16.1,4.8 17.6,6.3C20.7,9.4 20.7,14.5 17.6,17.6C15.8,19.5 13.3,20.2 10.9,19.9L11.4,17.9C13.1,18.1 14.9,17.5 16.2,16.2C18.5,13.9 18.5,10.1 16.2,7.7C15.1,6.6 13.5,6 12,6V10.6L7,5.6L12,0.6V4M6.3,17.6C3.7,15 3.3,11 5.1,7.9L6.6,9.4C5.5,11.6 5.9,14.4 7.8,16.2C8.3,16.7 8.9,17.1 9.6,17.4L9,19.4C8,19 7.1,18.4 6.3,17.6Z"):d.s6)}},{key:"shouldUpdate",value:function(t){return(1!==t.size||!t.has("hass"))&&(1!==t.size||!t.has("_maxYWidth")||t.get("_maxYWidth")!==this._maxYWidth)}},{key:"willUpdate",value:function(t){if(this.hasUpdated||(0,m.i)(),(0,a.A)(t.keys()).some(t=>!["_maxYWidth","_childYWidths","_chartCount"].includes(t))){var e=new Date;if(this._computedEndTime=this.upToNow||!this.endTime||this.endTime>e?e:this.endTime,this.startTime)this._computedStartTime=this.startTime;else if(this.hoursToShow)this._computedStartTime=new Date((new Date).getTime()-3600*this.hoursToShow*1e3);else{var i,o,r,s,n=(null!==(i=null===(o=this.historyData)||void 0===o?void 0:o.timeline)&&void 0!==i?i:[]).reduce((t,e)=>Math.min(t,new Date(e.data[0].last_changed).getTime()),(new Date).getTime());n=(null!==(r=null===(s=this.historyData)||void 0===s?void 0:s.line)&&void 0!==r?r:[]).reduce((t,e)=>Math.min(t,e.data.reduce((t,e)=>Math.min(t,new Date(e.states[0].last_changed).getTime()),t)),n),this._computedStartTime=new Date(n)}}}},{key:"updated",value:function(t){t.has("_chartCount")&&this._chartCount<this._childYWidths.length&&(this._childYWidths.length=this._chartCount,this._maxYWidth=Math.max.apply(Math,(0,a.A)(Object.values(this._childYWidths)).concat([0])))}},{key:"_yWidthChanged",value:function(t){this._childYWidths[t.detail.chartIndex]=t.detail.value,this._maxYWidth=Math.max.apply(Math,(0,a.A)(Object.values(this._childYWidths)).concat([0]))}},{key:"_handleTimelineSync",value:function(t){if(this.syncCharts&&!this._isSyncing){var e=t.detail,i=e.start,a=e.end,o=e.chartIndex;this._hasZoomedCharts=0!==i||100!==a,this._syncZoomToAllCharts(i,a,o)}}},{key:"_syncZoomToAllCharts",value:function(t,e,i){this._isSyncing=!0,requestAnimationFrame(()=>{this.renderRoot.querySelectorAll("state-history-chart-line, state-history-chart-timeline").forEach((a,o)=>{o!==i&&"zoom"in a&&a.zoom(t,e)}),this._isSyncing=!1})}},{key:"_handleGlobalZoomReset",value:function(){this._hasZoomedCharts=!1,this._isSyncing=!0,requestAnimationFrame(()=>{this.renderRoot.querySelectorAll("state-history-chart-line, state-history-chart-timeline").forEach(t=>{var e,i=null===(e=t.renderRoot)||void 0===e?void 0:e.querySelector("ha-chart-base");i&&i.chart&&i.zoom(0,100)}),this._isSyncing=!1})}},{key:"_isHistoryEmpty",value:function(){var t=!this.historyData||!this.historyData.timeline||!this.historyData.line||0===this.historyData.timeline.length&&0===this.historyData.line.length;return!this.isLoadingData&&t}},{key:"_saveScrollPos",value:function(t){this._savedScrollPos=t.target.scrollTop}}])}(d.WF);z.styles=(0,d.AH)(k||(k=D`:host{display:flex;flex-direction:column;min-height:60px}:host([virtualize]){height:100%}.info{text-align:center;line-height:60px;color:var(--secondary-text-color)}.container{max-height:var(--history-max-height)}.entry-container{width:100%}.entry-container.line{flex:1;padding-top:8px;overflow:hidden}.entry-container:hover{z-index:1}:host([virtualize]) .entry-container{padding-left:1px;padding-right:1px;padding-inline-start:1px;padding-inline-end:1px}.entry-container.timeline:first-child{margin-top:var(--timeline-top-margin)}.entry-container:not(:first-child){border-top:2px solid var(--divider-color);margin-top:16px}.container,lit-virtualizer{height:100%;width:100%}lit-virtualizer{contain:size layout!important}state-history-chart-line,state-history-chart-timeline{width:100%}.reset-button{position:fixed;bottom:calc(24px + var(--safe-area-inset-bottom));right:calc(24px + var(--safe-area-inset-bottom));z-index:1}`)),(0,h.__decorate)([(0,l.MZ)({attribute:!1})],z.prototype,"hass",void 0),(0,h.__decorate)([(0,l.MZ)({attribute:!1})],z.prototype,"historyData",void 0),(0,h.__decorate)([(0,l.MZ)({type:Boolean})],z.prototype,"narrow",void 0),(0,h.__decorate)([(0,l.MZ)({attribute:!1})],z.prototype,"names",void 0),(0,h.__decorate)([(0,l.MZ)({type:Boolean,reflect:!0})],z.prototype,"virtualize",void 0),(0,h.__decorate)([(0,l.MZ)({attribute:!1})],z.prototype,"endTime",void 0),(0,h.__decorate)([(0,l.MZ)({attribute:!1})],z.prototype,"startTime",void 0),(0,h.__decorate)([(0,l.MZ)({type:Boolean,attribute:"up-to-now"})],z.prototype,"upToNow",void 0),(0,h.__decorate)([(0,l.MZ)({attribute:!1,type:Number})],z.prototype,"hoursToShow",void 0),(0,h.__decorate)([(0,l.MZ)({attribute:"show-names",type:Boolean})],z.prototype,"showNames",void 0),(0,h.__decorate)([(0,l.MZ)({attribute:"click-for-more-info",type:Boolean})],z.prototype,"clickForMoreInfo",void 0),(0,h.__decorate)([(0,l.MZ)({attribute:"is-loading-data",type:Boolean})],z.prototype,"isLoadingData",void 0),(0,h.__decorate)([(0,l.MZ)({attribute:"logarithmic-scale",type:Boolean})],z.prototype,"logarithmicScale",void 0),(0,h.__decorate)([(0,l.MZ)({attribute:!1,type:Number})],z.prototype,"minYAxis",void 0),(0,h.__decorate)([(0,l.MZ)({attribute:!1,type:Number})],z.prototype,"maxYAxis",void 0),(0,h.__decorate)([(0,l.MZ)({attribute:"fit-y-data",type:Boolean})],z.prototype,"fitYData",void 0),(0,h.__decorate)([(0,l.MZ)({type:String})],z.prototype,"height",void 0),(0,h.__decorate)([(0,l.MZ)({attribute:"expand-legend",type:Boolean})],z.prototype,"expandLegend",void 0),(0,h.__decorate)([(0,l.MZ)({attribute:"sync-charts",type:Boolean})],z.prototype,"syncCharts",void 0),(0,h.__decorate)([(0,l.wk)()],z.prototype,"_maxYWidth",void 0),(0,h.__decorate)([(0,l.wk)()],z.prototype,"_childYWidths",void 0),(0,h.__decorate)([(0,l.wk)()],z.prototype,"_chartCount",void 0),(0,h.__decorate)([(0,l.wk)()],z.prototype,"_hasZoomedCharts",void 0),(0,h.__decorate)([(0,u.a)(".container")],z.prototype,"_savedScrollPos",void 0),(0,h.__decorate)([(0,l.Ls)({passive:!0})],z.prototype,"_saveScrollPos",null),z=(0,h.__decorate)([(0,l.EM)("state-history-charts")],z),e()}catch(Z){e(Z)}})},71770:function(t,e,i){var a,o,r,s,n=i(62020),h=i(31802),d=i(21101),l=i(23180),c=i(87426),u=(i(38606),i(69868)),m=i(30103),p=i(86811),_=i(49377),y=i(34800),v=i(84922),f=i(11991),g=t=>t,x=function(t){function e(){var t;(0,n.A)(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(t=(0,d.A)(this,e,[].concat(a))).filled=!1,t.active=!1,t}return(0,l.A)(e,t),(0,h.A)(e,[{key:"renderOutline",value:function(){return this.filled?(0,v.qy)(a||(a=g`<span class="filled"></span>`)):(0,c.A)(e,"renderOutline",this,3)([])}},{key:"getContainerClasses",value:function(){return Object.assign(Object.assign({},(0,c.A)(e,"getContainerClasses",this,3)([])),{},{active:this.active})}},{key:"renderPrimaryContent",value:function(){return(0,v.qy)(o||(o=g` <span class="leading icon" aria-hidden="true"> ${0} </span> <span class="label">${0}</span> <span class="touch"></span> <span class="trailing leading icon" aria-hidden="true"> ${0} </span> `),this.renderLeadingIcon(),this.label,this.renderTrailingIcon())}},{key:"renderTrailingIcon",value:function(){return(0,v.qy)(r||(r=g`<slot name="trailing-icon"></slot>`))}}])}(m.k);x.styles=[_.R,y.R,p.R,(0,v.AH)(s||(s=g`:host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-assist-chip-container-shape:var(
          --ha-assist-chip-container-shape,
          16px
        );--md-assist-chip-outline-color:var(--outline-color);--md-assist-chip-label-text-weight:400}.filled{display:flex;pointer-events:none;border-radius:inherit;inset:0;position:absolute;background-color:var(--ha-assist-chip-filled-container-color)}::slotted([slot=icon]),::slotted([slot=trailing-icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px);font-size:var(--_label-text-size)!important}.trailing.icon ::slotted(*),.trailing.icon svg{margin-inline-end:unset;margin-inline-start:var(--_icon-label-space)}::before{background:var(--ha-assist-chip-container-color,transparent);opacity:var(--ha-assist-chip-container-opacity, 1)}:where(.active)::before{background:var(--ha-assist-chip-active-container-color);opacity:var(--ha-assist-chip-active-container-opacity)}.label{font-family:var(--ha-font-family-body)}`))],(0,u.__decorate)([(0,f.MZ)({type:Boolean,reflect:!0})],x.prototype,"filled",void 0),(0,u.__decorate)([(0,f.MZ)({type:Boolean})],x.prototype,"active",void 0),x=(0,u.__decorate)([(0,f.EM)("ha-assist-chip")],x)},10547:function(t,e,i){var a,o,r,s=i(62020),n=i(31802),h=i(21101),d=i(87426),l=i(23180),c=i(69868),u=i(54500),m=i(2909),p=i(11991),_=i(84922),y=i(91541),v=t=>t,f=function(t){function e(){return(0,s.A)(this,e),(0,h.A)(this,e,arguments)}return(0,l.A)(e,t),(0,n.A)(e,[{key:"firstUpdated",value:function(t){(0,d.A)(e,"firstUpdated",this,3)([t]),this.style.setProperty("--mdc-theme-secondary","var(--primary-color)")}}])}(u.n);f.styles=[m.R,(0,_.AH)(a||(a=v`:host{--mdc-typography-button-text-transform:none;--mdc-typography-button-font-size:var(--ha-font-size-l);--mdc-typography-button-font-family:var(--ha-font-family-body);--mdc-typography-button-font-weight:var(--ha-font-weight-medium)}:host .mdc-fab--extended{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab.mdc-fab--extended .ripple{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab--extended .mdc-fab__icon{margin-inline-start:-8px;margin-inline-end:12px;direction:var(--direction)}:disabled{--mdc-theme-secondary:var(--disabled-text-color);pointer-events:none}`)),"rtl"===y.G.document.dir?(0,_.AH)(o||(o=v`:host .mdc-fab--extended .mdc-fab__icon{direction:rtl}`)):(0,_.AH)(r||(r=v``))],f=(0,c.__decorate)([(0,p.EM)("ha-fab")],f)},62428:function(t,e,i){i.r(e);var a=i(69582),o=i(38372),r=i(27816),s=i(4913),n=i(73174),h=i(25359),d=i(68951),l=i(13815),c=i(81418),u=i(56230),m=i(21120),p=i(85997),_=i(30174),y=i(11828),v=i(35092),f=i(5682);a.Y([r.a,s.a,n.a,h.a,d.a,l.a,c.a,u.a,m.a,p.a,y._,v.i,f.a,_.a]),e.default=o},78100:function(t,e,i){i.d(e,{i:function(){return r}});var a=i(98735),o=i(88486),r=(i(35748),i(45519),i(5934),i(95013),function(){var t=(0,o.A)((0,a.A)().m(function t(){return(0,a.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Promise.all([i.e("33767"),i.e("44986")]).then(i.bind(i,29338));case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}())},35083:function(t,e,i){var a;function o(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Roboto, Noto, sans-serif";a||(a=document.createElement("canvas"));var o=a.getContext("2d");if(!o)return 0;o.font=`${e}px ${i}`;var r=o.measureText(t);return Math.ceil(Math.max(r.actualBoundingBoxRight+r.actualBoundingBoxLeft,r.width))}i.d(e,{W:function(){return o}})}}]);
//# sourceMappingURL=93076.fb15e016e3a4bee5.js.map