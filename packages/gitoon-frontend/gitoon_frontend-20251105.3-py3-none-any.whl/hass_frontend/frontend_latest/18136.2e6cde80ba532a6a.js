export const __webpack_id__="18136";export const __webpack_ids__=["18136"];export const __webpack_modules__={94029:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{K:()=>d});var o=i(77489),n=i(65940),r=i(22989),s=e([o,r]);[o,r]=s.then?(await s)():s;const l=(0,n.A)(e=>new Intl.RelativeTimeFormat(e.language,{numeric:"auto"})),d=(e,t,i,a=!0)=>{const o=(0,r.x)(e,i,t);return a?l(t).format(o.value,o.unit):Intl.NumberFormat(t.language,{style:"unit",unit:o.unit,unitDisplay:"long"}).format(Math.abs(o.value))};a()}catch(e){a(e)}})},8795:function(e,t,i){i.d(t,{i:()=>o});var a=i(35297);const o=(e,t)=>(e=>{switch(e){case"de":case"lb":return!0;default:return!1}})(t)?(0,a.Z)(e):e.toLocaleLowerCase(t)},22989:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{x:()=>u});var o=i(41484),n=i(88258),r=i(42794),s=i(50654);const l=1e3,d=60,c=60*d;function u(e,t=Date.now(),i,a={}){const u={...h,...a||{}},p=(+e-+t)/l;if(Math.abs(p)<u.second)return{value:Math.round(p),unit:"second"};const m=p/d;if(Math.abs(m)<u.minute)return{value:Math.round(m),unit:"minute"};const _=p/c;if(Math.abs(_)<u.hour)return{value:Math.round(_),unit:"hour"};const g=new Date(e),y=new Date(t);g.setHours(0,0,0,0),y.setHours(0,0,0,0);const f=(0,o.c)(g,y);if(0===f)return{value:Math.round(_),unit:"hour"};if(Math.abs(f)<u.day)return{value:f,unit:"day"};const v=(0,s.PE)(i),w=(0,n.k)(g,{weekStartsOn:v}),b=(0,n.k)(y,{weekStartsOn:v}),x=(0,r.I)(w,b);if(0===x)return{value:f,unit:"day"};if(Math.abs(x)<u.week)return{value:x,unit:"week"};const $=g.getFullYear()-y.getFullYear(),P=12*$+g.getMonth()-y.getMonth();return 0===P?{value:x,unit:"week"}:Math.abs(P)<u.month||0===$?{value:P,unit:"month"}:{value:Math.round($),unit:"year"}}const h={second:45,minute:45,hour:22,day:5,week:4,month:11};a()}catch(p){a(p)}})},65298:function(e,t,i){i.d(t,{n:()=>a});const a=(e,t,i=!0,a=!0)=>{let o,n=0;const r=(...r)=>{const s=()=>{n=!1===i?0:Date.now(),o=void 0,e(...r)},l=Date.now();n||!1!==i||(n=l);const d=t-(l-n);d<=0||d>t?(o&&(clearTimeout(o),o=void 0),n=l,e(...r)):o||!1===a||(o=window.setTimeout(s,d))};return r.cancel=()=>{clearTimeout(o),o=void 0,n=0},r}},78918:function(e,t,i){i(65315),i(22416);var a=i(69868),o=i(84922),n=i(22019),r=i(91541);i(33574),i(61631);class s extends o.WF{get items(){return this._menu?.items}get selected(){return this._menu?.selected}focus(){this._menu?.open?this._menu.focusItemAtIndex(0):this._triggerButton?.focus()}render(){return o.qy` <div @click="${this._handleClick}"> <slot name="trigger" @slotchange="${this._setTriggerAria}"></slot> </div> <ha-menu .corner="${this.corner}" .menuCorner="${this.menuCorner}" .fixed="${this.fixed}" .multi="${this.multi}" .activatable="${this.activatable}" .y="${this.y}" .x="${this.x}"> <slot></slot> </ha-menu> `}firstUpdated(e){super.firstUpdated(e),"rtl"===r.G.document.dir&&this.updateComplete.then(()=>{this.querySelectorAll("ha-list-item").forEach(e=>{const t=document.createElement("style");t.innerHTML="span.material-icons:first-of-type { margin-left: var(--mdc-list-item-graphic-margin, 32px) !important; margin-right: 0px !important;}",e.shadowRoot.appendChild(t)})})}_handleClick(){this.disabled||(this._menu.anchor=this.noAnchor?null:this,this._menu.show())}get _triggerButton(){return this.querySelector('ha-icon-button[slot="trigger"], ha-button[slot="trigger"]')}_setTriggerAria(){this._triggerButton&&(this._triggerButton.ariaHasPopup="menu")}constructor(...e){super(...e),this.corner="BOTTOM_START",this.menuCorner="START",this.x=null,this.y=null,this.multi=!1,this.activatable=!1,this.disabled=!1,this.fixed=!1,this.noAnchor=!1}}s.styles=o.AH`:host{display:inline-block;position:relative}::slotted([disabled]){color:var(--disabled-text-color)}`,(0,a.__decorate)([(0,n.MZ)()],s.prototype,"corner",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:"menu-corner"})],s.prototype,"menuCorner",void 0),(0,a.__decorate)([(0,n.MZ)({type:Number})],s.prototype,"x",void 0),(0,a.__decorate)([(0,n.MZ)({type:Number})],s.prototype,"y",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean})],s.prototype,"multi",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean})],s.prototype,"activatable",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean})],s.prototype,"disabled",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean})],s.prototype,"fixed",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean,attribute:"no-anchor"})],s.prototype,"noAnchor",void 0),(0,a.__decorate)([(0,n.P)("ha-menu",!0)],s.prototype,"_menu",void 0),s=(0,a.__decorate)([(0,n.EM)("ha-button-menu")],s)},77510:function(e,t,i){var a=i(69868),o=i(41188),n=i(57437),r=i(84922),s=i(22019);class l extends o.J{renderRipple(){return this.noninteractive?"":super.renderRipple()}static get styles(){return[n.R,r.AH`:host{padding-left:var(--mdc-list-side-padding-left,var(--mdc-list-side-padding,20px));padding-inline-start:var(--mdc-list-side-padding-left,var(--mdc-list-side-padding,20px));padding-right:var(--mdc-list-side-padding-right,var(--mdc-list-side-padding,20px));padding-inline-end:var(--mdc-list-side-padding-right,var(--mdc-list-side-padding,20px))}:host([graphic=avatar]:not([twoLine])),:host([graphic=icon]:not([twoLine])){height:48px}span.material-icons:first-of-type{margin-inline-start:0px!important;margin-inline-end:var(--mdc-list-item-graphic-margin,16px)!important;direction:var(--direction)!important}span.material-icons:last-of-type{margin-inline-start:auto!important;margin-inline-end:0px!important;direction:var(--direction)!important}.mdc-deprecated-list-item__meta{display:var(--mdc-list-item-meta-display);align-items:center;flex-shrink:0}:host([graphic=icon]:not([twoline])) .mdc-deprecated-list-item__graphic{margin-inline-end:var(--mdc-list-item-graphic-margin,20px)!important}:host([multiline-secondary]){height:auto}:host([multiline-secondary]) .mdc-deprecated-list-item__text{padding:8px 0}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text{text-overflow:initial;white-space:normal;overflow:auto;display:inline-block;margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text{margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text::before{display:none}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text::before{display:none}:host([disabled]){color:var(--disabled-text-color)}:host([noninteractive]){pointer-events:unset}`,"rtl"===document.dir?r.AH`span.material-icons:first-of-type,span.material-icons:last-of-type{direction:rtl!important;--direction:rtl}`:r.AH``]}}l=(0,a.__decorate)([(0,s.EM)("ha-list-item")],l)},14532:function(e,t,i){var a=i(69868),o=i(47722),n=i(60311),r=i(22019);class s extends o.iY{}s.styles=n.R,s=(0,a.__decorate)([(0,r.EM)("ha-list")],s)},61631:function(e,t,i){var a=i(69868),o=i(95463),n=i(3941),r=i(84922),s=i(22019),l=i(75907);i(14532);class d extends o.ZR{get listElement(){return this.listElement_||(this.listElement_=this.renderRoot.querySelector("ha-list")),this.listElement_}renderList(){const e="menu"===this.innerRole?"menuitem":"option",t=this.renderListClasses();return r.qy`<ha-list rootTabbable .innerAriaLabel="${this.innerAriaLabel}" .innerRole="${this.innerRole}" .multi="${this.multi}" class="${(0,l.H)(t)}" .itemRoles="${e}" .wrapFocus="${this.wrapFocus}" .activatable="${this.activatable}" @action="${this.onAction}"> <slot></slot> </ha-list>`}}d.styles=n.R,d=(0,a.__decorate)([(0,s.EM)("ha-menu")],d)},84432:function(e,t,i){i.d(t,{A1:()=>a,CY:()=>r,Fn:()=>o,Jz:()=>l,St:()=>s,VA:()=>c,WI:()=>u,iY:()=>d,xw:()=>n});const a=(e,t)=>e.callWS({type:"media_source/resolve_media",media_content_id:t}),o=(e,t)=>e.callWS({type:"media_source/browse_media",media_content_id:t}),n="__MANUAL_ENTRY__",r=e=>e.startsWith(n),s=e=>e.startsWith("media-source://"),l=e=>e.startsWith("media-source://media_source"),d=e=>e.startsWith("media-source://image_upload"),c=async(e,t,i)=>{const a=new FormData;a.append("media_content_id",t),a.append("file",i);const o=await e.fetchWithAuth("/api/media_source/local_source/upload",{method:"POST",body:a});if(413===o.status)throw new Error(`Uploaded file is too large (${i.name})`);if(200!==o.status)throw new Error("Unknown error");return o.json()},u=async(e,t)=>e.callWS({type:"media_source/local_source/remove",media_content_id:t})},7595:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{CT:()=>h,M1:()=>f,aK:()=>u,gs:()=>_,oF:()=>g,pC:()=>c,pk:()=>m,sw:()=>w,t0:()=>v});var o=i(26946),n=i(88341),r=i(76085),s=i(13725),l=i(69006),d=e([s,l]);[s,l]=d.then?(await d)():d;const c=["camera","configurator"],u=["scene","automation"],h=["script"],p=["alarm_control_panel","cover","climate","conversation","fan","humidifier","input_boolean","light","lock","siren","script","switch","valve","water_heater","weather","media_player"],m=["update"],_=["alarm_control_panel","automation","camera","climate","configurator","conversation","counter","cover","date","datetime","fan","group","humidifier","image","input_boolean","input_datetime","lawn_mower","light","lock","media_player","person","remote","script","scene","siren","sun","switch","time","timer","update","vacuum","valve","water_heater","weather"],g=["input_number","input_select","input_text","number","scene","select","text","update","event"],y=["camera","configurator"],f=(e,t)=>(0,o.x)(e,"history")&&!y.includes((0,n.m)(t)),v=(e,t,i=[])=>{if(!(0,o.x)(e,"logbook"))return!1;const a=e.states[t];if(!a)return!1;const r=(0,n.m)(t);return!(s.cj.includes(r)||"sensor"===r&&(0,l.Fp)(r,a,void 0,i)||y.includes(r))},w=e=>{const t=(0,n.m)(e.entity_id);if("group"===t){const t=(0,r.z)(e);return null!=t&&"group"!==t&&p.includes(t)}return p.includes(t)};a()}catch(e){a(e)}})},76619:function(e,t,i){i.d(t,{o:()=>o});var a=i(44017);const o=(e,t)=>new Promise(o=>{const n=t.closeDialog,r=t.logInHereAction;(0,a.r)(e,"show-dialog",{dialogTag:"dialog-cloud-already-connected",dialogImport:()=>Promise.all([i.e("3245"),i.e("79584"),i.e("48734")]).then(i.bind(i,92109)),dialogParams:{...t,closeDialog:()=>{n?.(),o(!1)},logInHereAction:()=>{r?.(),o(!0)}}})})},18633:function(e,t,i){i.a(e,async function(e,t){try{i(54323);var a=i(69868),o=i(84922),n=i(22019),r=i(44017),s=i(41042),l=(i(94124),i(70490),i(17372)),d=(i(35988),i(80287),i(50809)),c=i(50991),u=i(67717),h=i(156),p=i(76619),m=i(6033),_=e([s,l,u]);[s,l,u]=_.then?(await _)():_;class g extends o.WF{render(){return this.cardLess?this._renderLoginForm():o.qy` <ha-card outlined .header="${this.localize(`ui.panel.${this.translationKeyPanel}.login.sign_in`)}"> ${this._renderLoginForm()} </ha-card> `}_renderLoginForm(){return o.qy` <div class="card-content login-form"> ${this._error?o.qy`<ha-alert alert-type="error">${this._error}</ha-alert>`:o.s6} <ha-textfield .label="${this.localize(`ui.panel.${this.translationKeyPanel}.login.email`)}" id="email" name="username" type="email" autocomplete="username" required .value="${this.email??""}" @keydown="${this._keyDown}" .disabled="${this._inProgress}" .validationMessage="${this.localize(`ui.panel.${this.translationKeyPanel}.login.email_error_msg`)}"></ha-textfield> <ha-password-field id="password" name="password" .label="${this.localize(`ui.panel.${this.translationKeyPanel}.login.password`)}" autocomplete="current-password" required minlength="8" @keydown="${this._keyDown}" .disabled="${this._inProgress}" .validationMessage="${this.localize(`ui.panel.${this.translationKeyPanel}.login.password_error_msg`)}"></ha-password-field> </div> <div class="card-actions"> <ha-button appearance="plain" .disabled="${this._inProgress}" @click="${this._handleForgotPassword}"> ${this.localize(`ui.panel.${this.translationKeyPanel}.login.forgot_password`)} </ha-button> <ha-progress-button @click="${this._handleLogin}" .progress="${this._inProgress}">${this.localize(`ui.panel.${this.translationKeyPanel}.login.sign_in`)}</ha-progress-button> </div> `}_keyDown(e){"Enter"===e.key&&this._handleLogin()}async _handleLogin(){if(!this._inProgress){if(!this.emailField.reportValidity())return void this.emailField.focus();if(!this._passwordField.reportValidity())return void this._passwordField.focus();this._inProgress=!0,this._login(this.emailField.value,this._passwordField.value,this.checkConnection)}}_handleForgotPassword(){(0,r.r)(this,"cloud-forgot-password")}static get styles(){return[d.RF,o.AH`ha-card{overflow:hidden}ha-card .card-header{margin-bottom:-8px}.card-actions{display:flex;justify-content:space-between;align-items:center}.login-form{display:flex;flex-direction:column}`]}constructor(...e){super(...e),this.checkConnection=!1,this.translationKeyPanel="config.cloud",this.cardLess=!1,this._inProgress=!1,this._handleCloudLoginError=async(e,t,i,a)=>{const o=e&&e.body&&e.body.code;if("mfarequired"===o){const e=await(0,u.showPromptDialog)(this,{title:this.localize(`ui.panel.${this.translationKeyPanel}.login.totp_code_prompt_title`),inputLabel:this.localize(`ui.panel.${this.translationKeyPanel}.login.totp_code`),inputType:"text",defaultValue:"",confirmText:this.localize(`ui.panel.${this.translationKeyPanel}.login.submit`),dismissText:this.localize(`ui.panel.${this.translationKeyPanel}.login.cancel`)});if(null!==e&&""!==e)return this._login(t,i,a,e),"continue"}if("alreadyconnectederror"===o){const a=await(0,p.o)(this,{details:JSON.parse(e.body.message)});return a&&this._login(t,i,!1),a?"continue":"cancel"}if("PasswordChangeRequired"===o)return(0,u.showAlertDialog)(this,{title:this.localize(`ui.panel.${this.translationKeyPanel}.login.alert_password_change_required`)}),"password-change";if("usernotfound"!==o||t===t.toLowerCase())switch(o){case"UserNotConfirmed":return this.localize(`ui.panel.${this.translationKeyPanel}.login.alert_email_confirm_necessary`);case"mfarequired":return this.localize(`ui.panel.${this.translationKeyPanel}.login.alert_mfa_code_required`);case"mfaexpiredornotstarted":return this.localize(`ui.panel.${this.translationKeyPanel}.login.alert_mfa_expired_or_not_started`);case"invalidtotpcode":return this.localize(`ui.panel.${this.translationKeyPanel}.login.alert_totp_code_invalid`);default:return e&&e.body&&e.body.message?e.body.message:"Unknown error"}else this._login(t.toLowerCase(),i,a)},this._login=async(e,t,i,a)=>{if(!t&&!a)throw new Error("Password or code required");try{if(this.hass){const o=await(0,c.p7)({hass:this.hass,email:e,...a?{code:a}:{password:t},check_connection:i});o.cloud_pipeline&&await(0,u.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.config.cloud.login.cloud_pipeline_title"),text:this.hass.localize("ui.panel.config.cloud.login.cloud_pipeline_text"),confirmText:this.hass.localize("ui.common.yes"),dismissText:this.hass.localize("ui.common.no")})&&(0,h.NH)(this.hass,o.cloud_pipeline)}else await(0,m.AC)({email:e,...a?{code:a}:{password:t}});this.email="",(0,r.r)(this,"ha-refresh-cloud-status")}catch(a){const o=await this._handleCloudLoginError(a,e,t,i);if("cancel"===o)return this._inProgress=!1,this.email="",void(this._passwordField.value="");if("password-change"===o)return void this._handleForgotPassword();"continue"!==o&&(this._inProgress=!1,this._error=o)}}}}(0,a.__decorate)([(0,n.MZ)({attribute:!1})],g.prototype,"hass",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean,attribute:"check-connection"})],g.prototype,"checkConnection",void 0),(0,a.__decorate)([(0,n.MZ)()],g.prototype,"email",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],g.prototype,"localize",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:"translation-key-panel"})],g.prototype,"translationKeyPanel",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean,attribute:"card-less"})],g.prototype,"cardLess",void 0),(0,a.__decorate)([(0,n.P)("#email",!0)],g.prototype,"emailField",void 0),(0,a.__decorate)([(0,n.P)("#password",!0)],g.prototype,"_passwordField",void 0),(0,a.__decorate)([(0,n.wk)()],g.prototype,"_error",void 0),(0,a.__decorate)([(0,n.wk)()],g.prototype,"_inProgress",void 0),g=(0,a.__decorate)([(0,n.EM)("cloud-login")],g),t()}catch(e){t(e)}})}};
//# sourceMappingURL=18136.2e6cde80ba532a6a.js.map