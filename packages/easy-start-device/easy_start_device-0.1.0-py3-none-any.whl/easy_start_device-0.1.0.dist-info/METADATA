Metadata-Version: 2.4
Name: easy-start-device
Version: 0.1.0
Summary: A Python package for device integration, easy to start
Home-page: https://gitee.com/guolei19850528/easy_start_device
Author: guolei
Author-email: 174000902@qq.com
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.6
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: httpx>=0.26.0
Requires-Dist: pydantic>=2.0.0
Requires-Dist: diskcache>=5.6.1
Requires-Dist: redis>=4.5.4
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: license-file
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

# easy_start_device

## 项目简介

easy_start_device 是一个用于设备集成的 Python 包，旨在简化与各种设备平台的交互。目前主要实现了 17来麦语音平台的客户端功能，支持同步和异步方式发送通知消息。

## 功能特点

- 支持同步和异步两种发送消息方式
- 灵活的配置选项，支持自定义 API 基础 URL、认证信息等
- 完善的错误处理机制
- 支持复用 HTTP 客户端，提高性能
- 提供详细的文档和示例

## 安装方法

### 使用 pip 安装

```bash
pip install easy-start-device
```

### 从源代码安装

```bash
git clone https://gitee.com/guolei19850528/easy_start_device.git
cd easy_start_device
pip install -e .
```

## 依赖项

- httpx>=0.26.0
- pydantic>=2.0.0
- diskcache>=5.6.1
- redis>=4.5.4

## 快速开始

### 同步方式发送通知

```python
from easy_start_device.tjbrhk import Speaker

# 创建 Speaker 实例
speaker = Speaker(
    base_url="https://speaker.17laimai.cn/",
    token="your_token",
    id="your_id"
)

# 发送通知
success, response_json, response = speaker.notify(message="测试通知")

print(f"发送结果: {'成功' if success else '失败'}")
print(f"响应内容: {response_json}")
```

### 异步方式发送通知

```python
import asyncio
from easy_start_device.tjbrhk import Speaker

async def main():
    # 创建 Speaker 实例
    speaker = Speaker(
        base_url="https://speaker.17laimai.cn/",
        token="your_token",
        id="your_id"
    )

    # 发送异步通知
    success, response_json, response = await speaker.async_notify(message="测试异步通知")

    print(f"发送结果: {'成功' if success else '失败'}")
    print(f"响应内容: {response_json}")

if __name__ == "__main__":
    asyncio.run(main())
```

### 复用 HTTP 客户端

```python
from easy_start_device.tjbrhk import Speaker

# 创建 Speaker 实例
speaker = Speaker(
    base_url="https://speaker.17laimai.cn/",
    token="your_token",
    id="your_id"
)

# 创建客户端并复用
with speaker.client() as client:
    # 发送多条通知
    for i in range(5):
        success, response_json, response = speaker.notify(
            client=client, 
            message=f"测试通知 {i+1}"
        )
        print(f"通知 {i+1} 发送结果: {'成功' if success else '失败'}")
```

## API 文档

### Speaker 类

#### 初始化参数

| 参数名 | 类型 | 默认值 | 描述 |
|-------|------|--------|------|
| base_url | str | "https://speaker.17laimai.cn" | API 基础 URL |
| token | str | "" | 认证令牌 |
| id | str | "" | 设备或用户 ID |
| version | str | "1" | API 版本号 |

#### 方法

##### client(**kwargs)

创建并返回一个同步 HTTP 客户端。

- **参数**: 传递给 httpx.Client 的额外参数
- **返回值**: httpx.Client 实例

##### async_client(**kwargs)

创建并返回一个异步 HTTP 客户端。

- **参数**: 传递给 httpx.AsyncClient 的额外参数
- **返回值**: httpx.AsyncClient 实例

##### notify(client=None, message="", **kwargs)

发送同步通知消息。

- **参数**:
  - client: httpx.Client 实例，可选，如果为 None 则自动创建
  - message: 要发送的通知消息内容
  - **kwargs: 传递给 client.request 的额外参数
- **返回值**: 元组 (success, response_json, response)
  - success: 布尔值，表示操作是否成功
  - response_json: 字典，API 返回的 JSON 响应数据
  - response: httpx.Response 实例，原始响应对象

##### async_notify(client=None, message="", **kwargs)

发送异步通知消息。

- **参数**:
  - client: httpx.AsyncClient 实例，可选，如果为 None 则自动创建
  - message: 要发送的通知消息内容
  - **kwargs: 传递给 client.request 的额外参数
- **返回值**: 元组 (success, response_json, response)
  - success: 布尔值，表示操作是否成功
  - response_json: 字典，API 返回的 JSON 响应数据
  - response: httpx.Response 实例，原始响应对象

## 运行测试

```bash
python -m unittest tests/test_17laimai.py
```

## 项目结构
