var gt=Object.defineProperty;var Oe=t=>{throw TypeError(t)};var vt=(t,e,s)=>e in t?gt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var N=(t,e,s)=>vt(t,typeof e!="symbol"?e+"":e,s),he=(t,e,s)=>e.has(t)||Oe("Cannot "+s);var S=(t,e,s)=>(he(t,e,"read from private field"),s?s.call(t):e.get(t)),U=(t,e,s)=>e.has(t)?Oe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),X=(t,e,s,r)=>(he(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),q=(t,e,s)=>(he(t,e,"access private method"),s);import{aQ as _t,aR as pt,aS as mt,A as oe,D as C,P as Ke,V as Se,B as Y,W as Ye,Y as xe,F as K,X as Qe,_ as Xe,g as x,af as yt,Q as bt,R as wt,S as ke,T as ge,U as z,a7 as St,aJ as At,aq as Le,a0 as Tt,ao as Me,aH as Je,M as Ze,aT as ue,Z as ze,aU as fe,aV as Pt,aW as ve,C as ee,az as Et,aX as It,aG as Nt,aY as Ct,a2 as Ot,O as kt,H as We,aZ as et,a_ as Lt,a8 as tt,a$ as Mt,b0 as Rt,G as Dt,b1 as Ft,b2 as Gt,b3 as Ht,b4 as Ut,b5 as qt,b6 as Vt,b7 as $t,b8 as jt,aP as Bt,aO as Kt,y as Ae,i as G,x as le,d as Re,e as De,h as Fe,m as Ge,b as Yt}from"./DkbXUtyG.js";import{c as xt,d as Qt}from"./D9SC3jBb.js";import{i as Xt,n as Jt,a as Zt}from"./eAy8rZzC.js";import{c as st}from"./DtWZc_tl.js";import{G as zt}from"./BpLiSKgx.js";import{R as Wt,j as es,e as ts,k as ss,l as rs,m as is}from"./MErlcOXj.js";function Hs(t,e,s){C&&Ke();var r=t,i=Qe,n,a,u=null,h=_t()?pt:mt;function v(){n&&Xe(n),u!==null&&(u.lastChild.remove(),r.before(u),u=null),n=a}oe(()=>{if(h(i,i=e())){var p=r,y=xe();y&&(u=document.createDocumentFragment(),u.append(p=Se())),a=Y(()=>s(p)),y?Ye.add_callback(v):v()}}),C&&(r=K)}function Us(t,e){return e}function as(t,e,s){for(var r=t.items,i=[],n=e.length,a=0;a<n;a++)It(e[a].e,i,!0);var u=n>0&&i.length===0&&s!==null;if(u){var h=s.parentNode;Nt(h),h.append(s),r.clear(),R(t,e[0].prev,e[n-1].next)}Ct(i,()=>{for(var v=0;v<n;v++){var p=e[v];u||(r.delete(p.k),R(t,p.prev,p.next)),ee(p.e,!u)}})}function qs(t,e,s,r,i,n=null){var a=t,u={flags:e,items:new Map,first:null},h=(e&et)!==0;if(h){var v=t;a=C?ge(Ot(v)):v.appendChild(Se())}C&&Ke();var p=null,y=!1,g=new Map,A=yt(()=>{var T=s();return Ze(T)?T:T==null?[]:Je(T)}),c,_;function d(){ns(_,c,u,g,a,i,e,r,s),n!==null&&(c.length===0?p?ze(p):p=Y(()=>n(a)):p!==null&&Xe(p,()=>{p=null}))}oe(()=>{_??(_=kt),c=x(A);var T=c.length;if(y&&T===0)return;y=T===0;let P=!1;if(C){var b=bt(a)===wt;b!==(T===0)&&(a=ke(),ge(a),z(!1),P=!0)}if(C){for(var m=null,w,o=0;o<T;o++){if(K.nodeType===St&&K.data===At){a=K,P=!0,z(!1);break}var f=c[o],l=r(f,o);w=ye(K,u,m,null,f,l,o,i,e,s),u.items.set(l,w),m=w}T>0&&ge(ke())}if(C)T===0&&n&&(p=Y(()=>n(a)));else if(xe()){var E=new Set,I=Ye;for(o=0;o<T;o+=1){f=c[o],l=r(f,o);var H=u.items.get(l)??g.get(l);H?e&(fe|ue)&&rt(H,f,o,e):(w=ye(null,u,null,null,f,l,o,i,e,s,!0),g.set(l,w)),E.add(l)}for(const[k,ie]of u.items)E.has(k)||I.skipped_effects.add(ie.e);I.add_callback(d)}else d();P&&z(!0),x(A)}),C&&(a=K)}function ns(t,e,s,r,i,n,a,u,h){var Pe,Ee,Ie,Ne;var v=(a&Lt)!==0,p=(a&(fe|ue))!==0,y=e.length,g=s.items,A=s.first,c=A,_,d=null,T,P=[],b=[],m,w,o,f;if(v)for(f=0;f<y;f+=1)m=e[f],w=u(m,f),o=g.get(w),o!==void 0&&((Pe=o.a)==null||Pe.measure(),(T??(T=new Set)).add(o));for(f=0;f<y;f+=1){if(m=e[f],w=u(m,f),o=g.get(w),o===void 0){var l=r.get(w);if(l!==void 0){r.delete(w),g.set(w,l);var E=d?d.next:c;R(s,d,l),R(s,l,E),_e(l,E,i),d=l}else{var I=c?c.e.nodes_start:i;d=ye(I,s,d,d===null?s.first:d.next,m,w,f,n,a,h)}g.set(w,d),P=[],b=[],c=d.next;continue}if(p&&rt(o,m,f,a),o.e.f&ve&&(ze(o.e),v&&((Ee=o.a)==null||Ee.unfix(),(T??(T=new Set)).delete(o))),o!==c){if(_!==void 0&&_.has(o)){if(P.length<b.length){var H=b[0],k;d=H.prev;var ie=P[0],ce=P[P.length-1];for(k=0;k<P.length;k+=1)_e(P[k],H,i);for(k=0;k<b.length;k+=1)_.delete(b[k]);R(s,ie.prev,ce.next),R(s,d,ie),R(s,ce,H),c=H,d=ce,f-=1,P=[],b=[]}else _.delete(o),_e(o,c,i),R(s,o.prev,o.next),R(s,o,d===null?s.first:d.next),R(s,d,o),d=o;continue}for(P=[],b=[];c!==null&&c.k!==w;)c.e.f&ve||(_??(_=new Set)).add(c),b.push(c),c=c.next;if(c===null)continue;o=c}P.push(o),d=o,c=o.next}if(c!==null||_!==void 0){for(var Q=_===void 0?[]:Je(_);c!==null;)c.e.f&ve||Q.push(c),c=c.next;var de=Q.length;if(de>0){var dt=a&et&&y===0?i:null;if(v){for(f=0;f<de;f+=1)(Ie=Q[f].a)==null||Ie.measure();for(f=0;f<de;f+=1)(Ne=Q[f].a)==null||Ne.fix()}as(s,Q,dt)}}v&&We(()=>{var Ce;if(T!==void 0)for(o of T)(Ce=o.a)==null||Ce.apply()}),t.first=s.first&&s.first.e,t.last=d&&d.e;for(var ht of r.values())ee(ht.e);r.clear()}function rt(t,e,s,r){r&fe&&Le(t.v,e),r&ue?Le(t.i,s):t.i=s}function ye(t,e,s,r,i,n,a,u,h,v,p){var y=(h&fe)!==0,g=(h&Pt)===0,A=y?g?Tt(i,!1,!1):Me(i):i,c=h&ue?Me(a):a,_={i:c,v:A,k:n,a:null,e:null,prev:s,next:r};try{if(t===null){var d=document.createDocumentFragment();d.append(t=Se())}return _.e=Y(()=>u(t,A,c,v),C),_.e.prev=s&&s.e,_.e.next=r&&r.e,s===null?p||(e.first=_):(s.next=_,s.e.next=_.e),r!==null&&(r.prev=_,r.e.prev=_.e),_}finally{}}function _e(t,e,s){for(var r=t.next?t.next.e.nodes_start:s,i=e?e.e.nodes_start:s,n=t.e.nodes_start;n!==null&&n!==r;){var a=Et(n);i.before(n),n=a}}function R(t,e,s){e===null?t.first=s:(e.next=s,e.e.next=s&&s.e),s!==null&&(s.prev=e,s.e.prev=e&&e.e)}function os(t,e){var s=void 0,r;oe(()=>{s!==(s=e())&&(r&&(ee(r),r=null),s&&(r=Y(()=>{tt(()=>s(t))})))})}function it(t){var e,s,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(s=it(t[e]))&&(r&&(r+=" "),r+=s)}else for(s in t)t[s]&&(r&&(r+=" "),r+=s);return r}function us(){for(var t,e,s=0,r="",i=arguments.length;s<i;s++)(t=arguments[s])&&(e=it(t))&&(r&&(r+=" "),r+=e);return r}function fs(t){return typeof t=="object"?us(t):t??""}const He=[...` 	
\r\fÂ \v\uFEFF`];function ls(t,e,s){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),s){for(var i in s)if(s[i])r=r?r+" "+i:i;else if(r.length)for(var n=i.length,a=0;(a=r.indexOf(i,a))>=0;){var u=a+n;(a===0||He.includes(r[a-1]))&&(u===r.length||He.includes(r[u]))?r=(a===0?"":r.substring(0,a))+r.substring(u+1):a=u}}return r===""?null:r}function Ue(t,e=!1){var s=e?" !important;":";",r="";for(var i in t){var n=t[i];n!=null&&n!==""&&(r+=" "+i+": "+n+s)}return r}function pe(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function cs(t,e){if(e){var s="",r,i;if(Array.isArray(e)?(r=e[0],i=e[1]):r=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var n=!1,a=0,u=!1,h=[];r&&h.push(...Object.keys(r).map(pe)),i&&h.push(...Object.keys(i).map(pe));var v=0,p=-1;const _=t.length;for(var y=0;y<_;y++){var g=t[y];if(u?g==="/"&&t[y-1]==="*"&&(u=!1):n?n===g&&(n=!1):g==="/"&&t[y+1]==="*"?u=!0:g==='"'||g==="'"?n=g:g==="("?a++:g===")"&&a--,!u&&n===!1&&a===0){if(g===":"&&p===-1)p=y;else if(g===";"||y===_-1){if(p!==-1){var A=pe(t.substring(v,p).trim());if(!h.includes(A)){g!==";"&&y++;var c=t.substring(v,y).trim();s+=" "+c+";"}}v=y+1,p=-1}}}}return r&&(s+=Ue(r)),i&&(s+=Ue(i,!0)),s=s.trim(),s===""?null:s}return t==null?null:String(t)}function ds(t,e,s,r,i,n){var a=t.__className;if(C||a!==s||a===void 0){var u=ls(s,r,n);(!C||u!==t.getAttribute("class"))&&(u==null?t.removeAttribute("class"):e?t.className=u:t.setAttribute("class",u)),t.__className=s}else if(n&&i!==n)for(var h in n){var v=!!n[h];(i==null||v!==!!i[h])&&t.classList.toggle(h,v)}return n}function me(t,e={},s,r){for(var i in s){var n=s[i];e[i]!==n&&(s[i]==null?t.style.removeProperty(i):t.style.setProperty(i,n,r))}}function hs(t,e,s,r){var i=t.__style;if(C||i!==e){var n=cs(e,r);(!C||n!==t.getAttribute("style"))&&(n==null?t.removeAttribute("style"):t.style.cssText=n),t.__style=e}else r&&(Array.isArray(r)?(me(t,s==null?void 0:s[0],r[0]),me(t,s==null?void 0:s[1],r[1],"important")):me(t,s,r));return r}function be(t,e,s=!1){if(t.multiple){if(e==null)return;if(!Ze(e))return Mt();for(var r of t.options)r.selected=e.includes(qe(r));return}for(r of t.options){var i=qe(r);if(Rt(i,e)){r.selected=!0;return}}(!s||e!==void 0)&&(t.selectedIndex=-1)}function gs(t){var e=new MutationObserver(()=>{be(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Dt(()=>{e.disconnect()})}function qe(t){return"__value"in t?t.__value:t.value}const J=Symbol("class"),Z=Symbol("style"),at=Symbol("is custom element"),nt=Symbol("is html");function vs(t){if(C){var e=!1,s=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;ae(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var i=t.checked;ae(t,"checked",null),t.checked=i}}};t.__on_r=s,We(s),$t()}}function Vs(t,e){var s=Te(t);s.value===(s.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function _s(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function ae(t,e,s,r){var i=Te(t);C&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||i[e]!==(i[e]=s)&&(e==="loading"&&(t[jt]=s),s==null?t.removeAttribute(e):typeof s!="string"&&ot(t).includes(e)?t[e]=s:t.setAttribute(e,s))}function ps(t,e,s,r,i=!1,n=!1){if(C&&i&&t.tagName==="INPUT"){var a=t,u=a.type==="checkbox"?"defaultChecked":"defaultValue";u in s||vs(a)}var h=Te(t),v=h[at],p=!h[nt];let y=C&&v;y&&z(!1);var g=e||{},A=t.tagName==="OPTION";for(var c in e)c in s||(s[c]=null);s.class?s.class=fs(s.class):(r||s[J])&&(s.class=null),s[Z]&&(s.style??(s.style=null));var _=ot(t);for(const o in s){let f=s[o];if(A&&o==="value"&&f==null){t.value=t.__value="",g[o]=f;continue}if(o==="class"){var d=t.namespaceURI==="http://www.w3.org/1999/xhtml";ds(t,d,f,r,e==null?void 0:e[J],s[J]),g[o]=f,g[J]=s[J];continue}if(o==="style"){hs(t,f,e==null?void 0:e[Z],s[Z]),g[o]=f,g[Z]=s[Z];continue}var T=g[o];if(!(f===T&&!(f===void 0&&t.hasAttribute(o)))){g[o]=f;var P=o[0]+o[1];if(P!=="$$")if(P==="on"){const l={},E="$$"+o;let I=o.slice(2);var b=Zt(I);if(Xt(I)&&(I=I.slice(0,-7),l.capture=!0),!b&&T){if(f!=null)continue;t.removeEventListener(I,g[E],l),g[E]=null}if(f!=null)if(b)t[`__${I}`]=f,Qt([I]);else{let H=function(k){g[o].call(this,k)};g[E]=xt(I,t,H,l)}else b&&(t[`__${I}`]=void 0)}else if(o==="style")ae(t,o,f);else if(o==="autofocus")Vt(t,!!f);else if(!v&&(o==="__value"||o==="value"&&f!=null))t.value=t.__value=f;else if(o==="selected"&&A)_s(t,f);else{var m=o;p||(m=Jt(m));var w=m==="defaultValue"||m==="defaultChecked";if(f==null&&!v&&!w)if(h[o]=null,m==="value"||m==="checked"){let l=t;const E=e===void 0;if(m==="value"){let I=l.defaultValue;l.removeAttribute(m),l.defaultValue=I,l.value=l.__value=E?I:null}else{let I=l.defaultChecked;l.removeAttribute(m),l.defaultChecked=I,l.checked=E?I:!1}}else t.removeAttribute(o);else w||_.includes(m)&&(v||typeof f!="string")?(t[m]=f,m in h&&(h[m]=Qe)):typeof f!="function"&&ae(t,m,f)}}}return y&&z(!0),g}function $s(t,e,s=[],r=[],i,n=!1,a=!1){Ft(s,r,u=>{var h=void 0,v={},p=t.nodeName==="SELECT",y=!1;if(oe(()=>{var A=e(...u.map(x)),c=ps(t,h,A,i,n,a);y&&p&&"value"in A&&be(t,A.value);for(let d of Object.getOwnPropertySymbols(v))A[d]||ee(v[d]);for(let d of Object.getOwnPropertySymbols(A)){var _=A[d];d.description===Ut&&(!h||_!==h[d])&&(v[d]&&ee(v[d]),v[d]=Y(()=>os(t,()=>_))),c[d]=_}h=c}),p){var g=t;tt(()=>{be(g,h.value,!0),gs(g)})}y=!0})}function Te(t){return t.__attributes??(t.__attributes={[at]:t.nodeName.includes("-"),[nt]:t.namespaceURI===Gt})}var Ve=new Map;function ot(t){var e=t.getAttribute("is")||t.nodeName,s=Ve.get(e);if(s)return s;Ve.set(e,s=[]);for(var r,i=t,n=Element.prototype;n!==i;){r=qt(i);for(var a in r)r[a].set&&s.push(a);i=Ht(i)}return s}const ms="data-no-translate",js="paraglide:lang",Bs="paraglide_lang",ut={},ys=()=>Kt(ut),Ks=t=>{Bt(ut,t)};function Ys(){const t=ys();function e(r,i){return typeof r!="string"||!t?r:t.translateHref(r,i)}function s(r,i){if(r[ms])return r;for(const{attribute_name:n,lang_attribute_name:a}of i)if(n in r){const u=r[n],h=a?r[a]:void 0;r[n]=e(u,typeof h=="string"?h:void 0)}return r}return[e,s]}const ft={setting_id:"00000000-0000-0000-0000-000000000000",grid_view_sample_rendering:"contain",key_hide_annotations:"v",key_go_back:"Escape",key_toggle_edit_mode:"e",show_annotation_text_labels:!0,show_sample_filenames:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},M=le(ft),$=le(!1),B=le(null),W=le(!1),bs=Ae(M,t=>t.grid_view_sample_rendering||"contain"),ws=Ae(M,t=>t.show_annotation_text_labels??!0),Ss=Ae(M,t=>t.show_sample_filenames??!0),$e=async()=>{if(M.set(ft),!(G(W)||G($))){$.set(!0),B.set(null);try{const{data:t}=await zt();t&&(M.set(t),W.set(!0))}catch(t){B.set(String(t))}finally{$.set(!1)}}},lt=async t=>{$.set(!0),B.set(null);try{const e=G(M),s={setting_id:e.setting_id||"",grid_view_sample_rendering:t.grid_view_sample_rendering||e.grid_view_sample_rendering||"contain",key_hide_annotations:t.key_hide_annotations||e.key_hide_annotations||"v",key_go_back:t.key_go_back||e.key_go_back||"Escape",key_toggle_edit_mode:t.key_toggle_edit_mode||e.key_toggle_edit_mode||"e",show_annotation_text_labels:t.show_annotation_text_labels!==void 0?t.show_annotation_text_labels:e.show_annotation_text_labels??!0,show_sample_filenames:t.show_sample_filenames!==void 0?t.show_sample_filenames:e.show_sample_filenames??!0,created_at:e.created_at||new Date().toISOString(),updated_at:new Date().toISOString()},r=await st.POST("/api/settings",{body:s,headers:{"Content-Type":"application/json"}});if(r.error){const i=JSON.stringify(r.error);return console.error("Settings API error:",i),B.set(i),{success:!1,error:i}}return r.data?(M.set(r.data),{success:!0}):{success:!1,error:"No data returned from API"}}catch(e){const s=String(e);return console.error("Error saving settings:",s),B.set(s),{success:!1,error:s}}finally{$.set(!1)}},As=async t=>lt({grid_view_sample_rendering:t}),Ts=async t=>{const e=!!t,r={...G(M),show_annotation_text_labels:e};try{const i=await st.POST("/api/settings",{body:r,headers:{"Content-Type":"application/json"}});return i.error?(console.error("API error saving setting:",i.error),{success:!1,error:JSON.stringify(i.error)}):i.data?(M.set(i.data),{success:!0}):{success:!1,error:"No data returned from API"}}catch(i){return console.error("Error saving annotation text label setting:",i),{success:!1,error:String(i)}}};function xs(){return!G(W)&&!G($)&&$e(),{settingsStore:M,isLoadingStore:$,errorStore:B,isLoadedStore:W,gridViewSampleRenderingStore:bs,showAnnotationTextLabelsStore:ws,showSampleFilenamesStore:Ss,initSettings:$e,saveSettings:lt,updateGridViewSampleRendering:As,updateShowAnnotationTextLabels:Ts,get settings(){return G(M)},get isLoading(){return G($)},get error(){return G(B)},get isLoaded(){return G(W)}}}var D,O,j,F,V,Be,Qs=(Be=class extends Wt{constructor(e){super();U(this,F);U(this,D);U(this,O);U(this,j);this.mutationId=e.mutationId,X(this,O,e.mutationCache),X(this,D,[]),this.state=e.state||Ps(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){S(this,D).includes(e)||(S(this,D).push(e),this.clearGcTimeout(),S(this,O).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){X(this,D,S(this,D).filter(s=>s!==e)),this.scheduleGc(),S(this,O).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){S(this,D).length||(this.state.status==="pending"?this.scheduleGc():S(this,O).remove(this))}continue(){var e;return((e=S(this,j))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,n,a,u,h,v,p,y,g,A,c,_,d,T,P,b,m,w,o,f;X(this,j,es({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(l,E)=>{q(this,F,V).call(this,{type:"failed",failureCount:l,error:E})},onPause:()=>{q(this,F,V).call(this,{type:"pause"})},onContinue:()=>{q(this,F,V).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>S(this,O).canRun(this)}));const s=this.state.status==="pending",r=!S(this,j).canStart();try{if(!s){q(this,F,V).call(this,{type:"pending",variables:e,isPaused:r}),await((n=(i=S(this,O).config).onMutate)==null?void 0:n.call(i,e,this));const E=await((u=(a=this.options).onMutate)==null?void 0:u.call(a,e));E!==this.state.context&&q(this,F,V).call(this,{type:"pending",context:E,variables:e,isPaused:r})}const l=await S(this,j).start();return await((v=(h=S(this,O).config).onSuccess)==null?void 0:v.call(h,l,e,this.state.context,this)),await((y=(p=this.options).onSuccess)==null?void 0:y.call(p,l,e,this.state.context)),await((A=(g=S(this,O).config).onSettled)==null?void 0:A.call(g,l,null,this.state.variables,this.state.context,this)),await((_=(c=this.options).onSettled)==null?void 0:_.call(c,l,null,e,this.state.context)),q(this,F,V).call(this,{type:"success",data:l}),l}catch(l){try{throw await((T=(d=S(this,O).config).onError)==null?void 0:T.call(d,l,e,this.state.context,this)),await((b=(P=this.options).onError)==null?void 0:b.call(P,l,e,this.state.context)),await((w=(m=S(this,O).config).onSettled)==null?void 0:w.call(m,void 0,l,this.state.variables,this.state.context,this)),await((f=(o=this.options).onSettled)==null?void 0:f.call(o,void 0,l,e,this.state.context)),l}finally{q(this,F,V).call(this,{type:"error",error:l})}}finally{S(this,O).runNext(this)}}},D=new WeakMap,O=new WeakMap,j=new WeakMap,F=new WeakSet,V=function(e){const s=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),ts.batch(()=>{S(this,D).forEach(r=>{r.onMutationUpdate(e)}),S(this,O).notify({mutation:this,type:"updated",action:e})})},Be);function Ps(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}function Xs(t){return{onFetch:(e,s)=>{var p,y,g,A,c;const r=e.options,i=(g=(y=(p=e.fetchOptions)==null?void 0:p.meta)==null?void 0:y.fetchMore)==null?void 0:g.direction,n=((A=e.state.data)==null?void 0:A.pages)||[],a=((c=e.state.data)==null?void 0:c.pageParams)||[];let u={pages:[],pageParams:[]},h=0;const v=async()=>{let _=!1;const d=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?_=!0:e.signal.addEventListener("abort",()=>{_=!0}),e.signal)})},T=ss(e.options,e.fetchOptions),P=async(b,m,w)=>{if(_)return Promise.reject();if(m==null&&b.pages.length)return Promise.resolve(b);const o={client:e.client,queryKey:e.queryKey,pageParam:m,direction:w?"backward":"forward",meta:e.options.meta};d(o);const f=await T(o),{maxPages:l}=e.options,E=w?rs:is;return{pages:E(b.pages,f,l),pageParams:E(b.pageParams,m,l)}};if(i&&n.length){const b=i==="backward",m=b?ct:we,w={pages:n,pageParams:a},o=m(r,w);u=await P(w,o,b)}else{const b=t??n.length;do{const m=h===0?a[0]??r.initialPageParam:we(r,u);if(h>0&&m==null)break;u=await P(u,m),h++}while(h<b)}return u};e.options.persister?e.fetchFn=()=>{var _,d;return(d=(_=e.options).persister)==null?void 0:d.call(_,v,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=v}}}function we(t,{pages:e,pageParams:s}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,s[r],s):void 0}function ct(t,{pages:e,pageParams:s}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,s[0],s):void 0}function Js(t,e){return e?we(t,e)!=null:!1}function Zs(t,e){return!e||!t.getPreviousPageParam?!1:ct(t,e)!=null}function zs(...t){return t.filter(Boolean).join(" ")}const Es=typeof document<"u";let je=0;var te,se,re;class Is{constructor(){U(this,te,Re(De([])));U(this,se,Re(De([])));U(this,re,e=>{const s=this.toasts.findIndex(r=>r.id===e);return s===-1?null:s});N(this,"addToast",e=>{Es&&this.toasts.unshift(e)});N(this,"updateToast",({id:e,data:s,type:r,message:i})=>{const n=this.toasts.findIndex(u=>u.id===e),a=this.toasts[n];this.toasts[n]={...a,...s,id:e,title:i,type:r,updated:!0}});N(this,"create",e=>{var u;const{message:s,...r}=e,i=typeof(e==null?void 0:e.id)=="number"||e.id&&((u=e.id)==null?void 0:u.length)>0?e.id:je++,n=e.dismissable===void 0?!0:e.dismissable,a=e.type===void 0?"default":e.type;return Ge(()=>{this.toasts.find(v=>v.id===i)?this.updateToast({id:i,data:e,type:a,message:s,dismissable:n}):this.addToast({...r,id:i,title:s,dismissable:n,type:a})}),i});N(this,"dismiss",e=>(Ge(()=>{if(e===void 0){this.toasts=this.toasts.map(r=>({...r,dismiss:!0}));return}const s=this.toasts.findIndex(r=>r.id===e);this.toasts[s]&&(this.toasts[s]={...this.toasts[s],dismiss:!0})}),e));N(this,"remove",e=>{if(e===void 0){this.toasts=[];return}const s=S(this,re).call(this,e);if(s!==null)return this.toasts.splice(s,1),e});N(this,"message",(e,s)=>this.create({...s,type:"default",message:e}));N(this,"error",(e,s)=>this.create({...s,type:"error",message:e}));N(this,"success",(e,s)=>this.create({...s,type:"success",message:e}));N(this,"info",(e,s)=>this.create({...s,type:"info",message:e}));N(this,"warning",(e,s)=>this.create({...s,type:"warning",message:e}));N(this,"loading",(e,s)=>this.create({...s,type:"loading",message:e}));N(this,"promise",(e,s)=>{if(!s)return;let r;s.loading!==void 0&&(r=this.create({...s,promise:e,type:"loading",message:typeof s.loading=="string"?s.loading:s.loading()}));const i=e instanceof Promise?e:e();let n=r!==void 0;return i.then(a=>{if(typeof a=="object"&&a&&"ok"in a&&typeof a.ok=="boolean"&&!a.ok){n=!1;const u=Ns(a);this.create({id:r,type:"error",message:u})}else if(s.success!==void 0){n=!1;const u=typeof s.success=="function"?s.success(a):s.success;this.create({id:r,type:"success",message:u})}}).catch(a=>{if(s.error!==void 0){n=!1;const u=typeof s.error=="function"?s.error(a):s.error;this.create({id:r,type:"error",message:u})}}).finally(()=>{var a;n&&(this.dismiss(r),r=void 0),(a=s.finally)==null||a.call(s)}),r});N(this,"custom",(e,s)=>{const r=(s==null?void 0:s.id)||je++;return this.create({component:e,id:r,...s}),r});N(this,"removeHeight",e=>{this.heights=this.heights.filter(s=>s.toastId!==e)});N(this,"setHeight",e=>{const s=S(this,re).call(this,e.toastId);if(s===null){this.heights.push(e);return}this.heights[s]=e});N(this,"reset",()=>{this.toasts=[],this.heights=[]})}get toasts(){return x(S(this,te))}set toasts(e){Fe(S(this,te),e,!0)}get heights(){return x(S(this,se))}set heights(e){Fe(S(this,se),e,!0)}}te=new WeakMap,se=new WeakMap,re=new WeakMap;function Ns(t){return t&&typeof t=="object"&&"status"in t?`HTTP error! Status: ${t.status}`:`Error! ${t}`}const L=new Is;function Cs(t,e){return L.create({message:t,...e})}var ne;class Ws{constructor(){U(this,ne,Yt(()=>L.toasts.filter(e=>!e.dismiss)))}get toasts(){return x(S(this,ne))}}ne=new WeakMap;const Os=Cs,er=Object.assign(Os,{success:L.success,info:L.info,warning:L.warning,error:L.error,custom:L.custom,message:L.message,promise:L.promise,dismiss:L.dismiss,loading:L.loading,getActiveToasts:()=>L.toasts.filter(t=>!t.dismiss)});export{Bs as L,Qs as M,Z as S,ds as a,$s as b,fs as c,hs as d,qs as e,Ks as f,Ys as g,js as h,Us as i,Xs as j,Hs as k,L as l,zs as m,Ws as n,us as o,Zs as p,Js as q,Ps as r,ae as s,er as t,xs as u,vs as v,Vs as w};
