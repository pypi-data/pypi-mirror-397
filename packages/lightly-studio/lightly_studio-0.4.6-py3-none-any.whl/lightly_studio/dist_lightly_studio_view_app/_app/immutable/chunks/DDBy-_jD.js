import"./CvGjimpO.js";import{i as D,j as E,k as T}from"./VYb2dkNs.js";import{i as c}from"./DkbXUtyG.js";import{c as d}from"./CGY1p9L4.js";const j=({datasetId:t})=>{const e=d(D());return e.subscribe(()=>{}),{createAnnotation:a=>new Promise((o,i)=>{c(e).mutate({path:{dataset_id:t},body:a},{onSuccess:n=>{o(n)},onError:n=>{i(n)}})})}},k=()=>{const t=d(E());return t.subscribe(()=>{}),{createLabel:s=>new Promise((a,o)=>{c(t).mutate({body:s},{onSuccess:i=>{a(i)},onError:i=>{o(i)}})})}},L=({datasetId:t})=>{const e=d(T());return e.subscribe(()=>{}),{deleteAnnotation:a=>new Promise((o,i)=>{c(e).mutate({path:{dataset_id:t,annotation_id:a}},{onSuccess:()=>{o()},onError:n=>{i(n)}})})}},I="annotation-create",P=({annotation:t,addReversibleAction:e,deleteAnnotation:s,refetch:a})=>{const o=async()=>{await s(t.sample_id),a()};e({id:`annotation-create-${t.sample_id}-${Date.now()}`,description:"Undo create annotation",execute:o,timestamp:new Date,groupId:I})},N="annotation-delete",S=({annotation:t,labels:e,addReversibleAction:s,createAnnotation:a,refetch:o})=>{var r,_,l,m,u,b,p,A,g;const i=t.annotation_label.annotation_label_name,n=e.find(y=>y.annotation_label_name===i);if(!(n!=null&&n.annotation_label_id))return;const w={parent_sample_id:t.parent_sample_id,annotation_type:t.annotation_type,annotation_label_id:n.annotation_label_id,x:((r=t.object_detection_details)==null?void 0:r.x)??((_=t.instance_segmentation_details)==null?void 0:_.x),y:((l=t.object_detection_details)==null?void 0:l.y)??((m=t.instance_segmentation_details)==null?void 0:m.y),width:((u=t.object_detection_details)==null?void 0:u.width)??((b=t.instance_segmentation_details)==null?void 0:b.width),height:((p=t.object_detection_details)==null?void 0:p.height)??((A=t.instance_segmentation_details)==null?void 0:A.height),segmentation_mask:(g=t.instance_segmentation_details)==null?void 0:g.segmentation_mask},h=async()=>{await a(w),o()};s({id:`annotation-delete-${t.sample_id}-${Date.now()}`,description:"Undo delete annotation",execute:h,timestamp:new Date,groupId:N})};export{k as a,L as b,P as c,S as d,j as u};
