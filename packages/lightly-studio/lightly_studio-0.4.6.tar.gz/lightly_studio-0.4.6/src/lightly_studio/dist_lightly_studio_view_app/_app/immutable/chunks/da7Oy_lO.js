import{i as f,x as n,y as S,z as o}from"./DkbXUtyG.js";import{a as L}from"./BpLiSKgx.js";import{u as b}from"./KNLP4aJU.js";const i=n({});function v(w){const{dataset_id:e,kind:l}=w,{tags:c}=b(),d=n(!1),g=n(null),r=n(!1),u=()=>{f(r)||(r.set(!0),L({path:{dataset_id:e}}).then(t=>{if(t.error)throw new Error(JSON.stringify(t.error));t.data&&c.set(t.data)}).catch(t=>{g.set(t)}).finally(()=>{r.set(!1)}))};!f(d)&&e&&(u(),d.set(!0));const m=S(c,t=>{const a=t??[];return l?a.filter(y=>l.includes(y.kind)):a}),T=S(i,t=>t[e]??new Set),h=t=>{i.update(a=>{const s=a[e]??new Set;return s.has(t)?s.delete(t):s.add(t),{...a,[e]:new Set([...s])}})},p=()=>{i.update(t=>({...t,[e]:new Set}))};return{tags:o(m),loadTags:u,tagsSelected:o(T),tagSelectionToggle:h,clearTagsSelected:p,isLoading:o(r),error:g}}export{v as u};
