# generated by datamodel-codegen:
#   filename:  tmpbmtzbq7i.json
#   timestamp: 2025-12-18T01:48:59+00:00

from __future__ import annotations

from enum import Enum
from typing import Annotated, Any, Dict, List, Literal

from pydantic import AwareDatetime, BaseModel, ConfigDict, Field, RootModel


class ActiveSessionResponse(BaseModel):
    pass
    model_config = ConfigDict(
        extra="allow",
    )


class AddReviewRequest(BaseModel):
    review_type: Annotated[str, Field(title="Review Type")]
    outcome: Annotated[str, Field(title="Outcome")]
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    video_s3_path: Annotated[str | None, Field(title="Video S3 Path")] = None
    events_s3_path: Annotated[str | None, Field(title="Events S3 Path")] = None
    comments: Annotated[str | None, Field(title="Comments")] = None


AppSimWorkerInfoResponse = ActiveSessionResponse


class ArchiveOrganizationAssignmentsRequest(BaseModel):
    assignment_ids: Annotated[list[str], Field(title="Assignment Ids")]


class ArchiveOrganizationTestCaseRequest(BaseModel):
    test_case_id: Annotated[int, Field(title="Test Case Id")]


class ArtifactFullDetails(BaseModel):
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    simulator_name: Annotated[str, Field(title="Simulator Name")]
    dataset: Annotated[str, Field(title="Dataset")]
    git_hash: Annotated[str, Field(title="Git Hash")]
    ecs_task_definition_arn: Annotated[str, Field(title="Ecs Task Definition Arn")]
    worker_image: Annotated[str, Field(title="Worker Image")]
    snapshot_s3_uri: Annotated[str, Field(title="Snapshot S3 Uri")]
    description: Annotated[str | None, Field(title="Description")] = None
    archived: Annotated[bool | None, Field(title="Archived")] = False
    parent_artifact_id: Annotated[str | None, Field(title="Parent Artifact Id")] = None
    rootfs_s3_uri: Annotated[str | None, Field(title="Rootfs S3 Uri")] = None
    archive_type: Annotated[str | None, Field(title="Archive Type")] = "sparse-s3"
    status: Annotated[str | None, Field(title="Status")] = "ready"
    notes: Annotated[str | None, Field(title="Notes")] = None
    internal_app_port: Annotated[int | None, Field(title="Internal App Port")] = None
    messaging_port: Annotated[int | None, Field(title="Messaging Port")] = None
    plato_config: Annotated[str | None, Field(title="Plato Config")] = None
    flows: Annotated[str | None, Field(title="Flows")] = None
    target: Annotated[str | None, Field(title="Target")] = None
    created_at: Annotated[AwareDatetime, Field(title="Created At")]


class ArtifactLineageResponse(BaseModel):
    artifact: ArtifactFullDetails
    lineage: Annotated[list[ArtifactFullDetails], Field(title="Lineage")]
    lineage_depth: Annotated[int, Field(title="Lineage Depth")]


class ArtifactMetadata(BaseModel):
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    simulator_name: Annotated[str, Field(title="Simulator Name")]
    git_hash: Annotated[str, Field(title="Git Hash")]
    dataset: Annotated[str, Field(title="Dataset")]
    created_at: Annotated[AwareDatetime, Field(title="Created At")]


class AssignTestCaseToOrganizationsRequest(BaseModel):
    organization_ids: Annotated[list[int], Field(title="Organization Ids")]
    requested_recording_count: Annotated[int | None, Field(title="Requested Recording Count")] = 1


class AssignmentStage(Enum):
    needs_labelling = "needs_labelling"
    needs_recording = "needs_recording"
    needs_scoring = "needs_scoring"
    review = "review"
    completed = "completed"
    needs_data_creation = "needs_data_creation"


class AssignmentType(Enum):
    data_creation = "data_creation"


class Authentication(BaseModel):
    user: Annotated[str, Field(title="User")]
    password: Annotated[str, Field(title="Password")]


BackupEnvResponse = ActiveSessionResponse


class Type(Enum):
    offline_step = "offline_step"
    offline_exact_action_match = "offline_exact_action_match"
    offline_exact_state_match = "offline_exact_state_match"
    offline_exact_output_match = "offline_exact_output_match"
    page_action_sequence = "page_action_sequence"
    human_in_the_loop = "human_in_the_loop"
    api = "api"
    criteria = "criteria"
    real_evals_state_check = "real_evals_state_check"
    real_evals_response_check = "real_evals_response_check"
    composite = "composite"
    custom = "custom"
    state_mutation_match = "state_mutation_match"
    system_scoring = "system_scoring"
    json_schema = "json_schema"


class BaseScoringConfig(BaseModel):
    type: Annotated[Type, Field(title="Type")]


class Source(Enum):
    system = "system"
    agent = "agent"
    simulator = "simulator"


class Type1(Enum):
    info = "info"
    warning = "warning"
    error = "error"
    answer = "answer"
    action = "action"
    state_mutation = "state_mutation"
    ood_request = "ood_request"
    screen_recording_started = "screen_recording_started"


class BaseStructuredRunLog(BaseModel):
    source: Annotated[Source | None, Field(title="Source")] = Source.system
    type: Annotated[Type1 | None, Field(title="Type")] = Type1.info
    timestamp: Annotated[str | None, Field(title="Timestamp")] = None


class BatchArtifactMetadataRequest(BaseModel):
    artifact_ids: Annotated[list[str], Field(title="Artifact Ids")]


class BatchArtifactMetadataResponse(BaseModel):
    artifacts: Annotated[dict[str, ArtifactMetadata], Field(title="Artifacts")]
    not_found: Annotated[list[str], Field(title="Not Found")]


class BatchSessionsResponse(BaseModel):
    job_group_sessions: Annotated[dict[str, Any], Field(title="Job Group Sessions")]
    total_job_groups: Annotated[int, Field(title="Total Job Groups")]


class BatchTestCaseInput(BaseModel):
    name: Annotated[str, Field(title="Name")]
    prompt: Annotated[str, Field(title="Prompt")]
    start_url: Annotated[str | None, Field(title="Start Url")] = None
    hint: Annotated[str | None, Field(title="Hint")] = None
    simulator_config: Annotated[dict[str, Any] | None, Field(title="Simulator Config")] = None
    default_scoring_config: BaseScoringConfig | None = None
    output_schema: Annotated[Any, Field(title="Output Schema")] = None
    config: Annotated[dict[str, Any] | None, Field(title="Config")] = None
    test_case_set_id: Annotated[int | None, Field(title="Test Case Set Id")] = None
    organization_id: Annotated[int | None, Field(title="Organization Id")] = None
    is_sample: Annotated[bool | None, Field(title="Is Sample")] = False
    scoring_types: Annotated[list[Any] | None, Field(title="Scoring Types")] = None
    goal_type: Annotated[str | None, Field(title="Goal Type")] = None
    reasoning_level: Annotated[Any, Field(title="Reasoning Level")] = None
    skills: Annotated[list[Any] | None, Field(title="Skills")] = None
    capabilities: Annotated[list[Any] | None, Field(title="Capabilities")] = None
    tags: Annotated[list[str] | None, Field(title="Tags")] = None
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    """
    Primary simulator artifact ID - must exist in DB
    """
    artifact_ids: Annotated[list[str] | None, Field(title="Artifact Ids")] = None
    """
    Optional list of additional artifact IDs to associate with the test case
    """
    public_id: Annotated[str | None, Field(title="Public Id")] = None
    """
    Optional unique identifier for upsert logic
    """
    archived: Annotated[bool | None, Field(title="Archived")] = False
    average_steps_taken: Annotated[int | None, Field(title="Average Steps Taken")] = None
    average_time_taken: Annotated[float | None, Field(title="Average Time Taken")] = None


class BodyCreateSessionFromEnvRecording(BaseModel):
    video_file: Annotated[bytes, Field(title="Video File")]
    events_file: Annotated[bytes, Field(title="Events File")]
    simulator_id: Annotated[int | None, Field(title="Simulator Id")] = None


class BodyCreateSessionFromHar(BaseModel):
    har_file: Annotated[bytes, Field(title="Har File")]
    simulator_id: Annotated[int, Field(title="Simulator Id")]


class BodyUploadChronosPackage(BaseModel):
    package_name: Annotated[str, Field(title="Package Name")]
    version: Annotated[str, Field(title="Version")]
    alias: Annotated[str, Field(title="Alias")]
    description: Annotated[str, Field(title="Description")]
    agents: Annotated[str, Field(title="Agents")]
    wheel_file: Annotated[bytes, Field(title="Wheel File")]
    sdist_file: Annotated[bytes, Field(title="Sdist File")]


class BulkArchiveTestCasesRequest(BaseModel):
    test_case_ids: Annotated[list[int], Field(title="Test Case Ids")]


class Capability(Enum):
    forms_and_inputs = "forms_and_inputs"
    search_and_extract = "search_and_extract"
    navigation_and_structure = "navigation_and_structure"
    feedback_and_overlays = "feedback_and_overlays"
    data_displays = "data_displays"
    auth_and_bot_protection = "auth_and_bot_protection"
    iframe_and_shadow_dom = "iframe_and_shadow_dom"
    error_state_handling = "error_state_handling"
    login_screen = "login_screen"
    form_multi_page = "form_multi_page"
    file_uploader = "file_uploader"
    address_form = "address_form"
    payment_form = "payment_form"
    masked_inputs = "masked_inputs"
    tabs_nav = "tabs_nav"
    accordion = "accordion"
    breadcrumb_nav = "breadcrumb_nav"
    multi_step_wizard = "multi_step_wizard"
    infinite_scroll = "infinite_scroll"
    modal = "modal"
    notification_banner = "notification_banner"
    cookie_banner = "cookie_banner"
    toast_notification = "toast_notification"
    tabular_results = "tabular_results"
    list_cards = "list_cards"
    tree_view = "tree_view"
    kanban_board = "kanban_board"
    date_picker = "date_picker"
    time_picker = "time_picker"
    multi_select_dropdown = "multi_select_dropdown"
    slider_widget = "slider_widget"
    captcha = "captcha"
    paywall_gate = "paywall_gate"
    rate_limit_wall = "rate_limit_wall"
    iframe_embed = "iframe_embed"
    shadow_dom = "shadow_dom"
    disabled_state_controls = "disabled_state_controls"
    error_page_404 = "error_page_404"
    error_page_500 = "error_page_500"
    empty_state = "empty_state"


CdpUrlResponse = ActiveSessionResponse


class ChromeCookie(BaseModel):
    name: Annotated[str, Field(title="Name")]
    value: Annotated[str, Field(title="Value")]
    domain: Annotated[str, Field(title="Domain")]
    path: Annotated[str, Field(title="Path")]
    expires: Annotated[int, Field(title="Expires")]
    httpOnly: Annotated[bool, Field(title="Httponly")]
    secure: Annotated[bool, Field(title="Secure")]


class CleanupStaleVMsRequest(BaseModel):
    stale_threshold_seconds: Annotated[int | None, Field(title="Stale Threshold Seconds")] = 600
    """
    Age threshold in seconds (default 10 minutes)
    """


class CleanupStaleVMsResponse(BaseModel):
    success: Annotated[bool, Field(title="Success")]
    message: Annotated[str, Field(title="Message")]
    stale_vms_found: Annotated[int, Field(title="Stale Vms Found")]
    shutdown_requests_sent: Annotated[int, Field(title="Shutdown Requests Sent")]
    records_deleted: Annotated[int, Field(title="Records Deleted")]
    stale_vms: Annotated[list[dict[str, Any]], Field(title="Stale Vms")]


CloseEnvResponse = ActiveSessionResponse


class CloseJobResult(BaseModel):
    success: Annotated[bool, Field(title="Success")]
    message: Annotated[str | None, Field(title="Message")] = None


class CloseSessionResponse(BaseModel):
    success: Annotated[bool, Field(title="Success")]
    message: Annotated[str, Field(title="Message")]
    results: Annotated[dict[str, CloseJobResult] | None, Field(title="Results")] = None
    """
    Results per job_id
    """


class ConnectRoutingInfoResult(BaseModel):
    ready: Annotated[bool, Field(title="Ready")]
    """
    Whether job is ready for routing
    """
    worker_private_ip: Annotated[str | None, Field(title="Worker Private Ip")] = None
    """
    Worker private IP
    """
    vm_private_ip: Annotated[str | None, Field(title="Vm Private Ip")] = None
    """
    VM private IP
    """
    vm_gateway_ip: Annotated[str | None, Field(title="Vm Gateway Ip")] = None
    """
    VM gateway IP
    """
    vm_port: Annotated[str | None, Field(title="Vm Port")] = None
    """
    VM port
    """
    job_public_id: Annotated[str | None, Field(title="Job Public Id")] = None
    """
    Job public ID
    """
    status: Annotated[str | None, Field(title="Status")] = None
    """
    Job status
    """


class ConnectUrlResult(BaseModel):
    job_id: Annotated[str, Field(title="Job Id")]
    """
    Job public ID
    """
    url: Annotated[str | None, Field(title="Url")] = None
    """
    Direct connect URL with embedded token: {token}.connect.plato.so
    """
    error: Annotated[str | None, Field(title="Error")] = None
    """
    Error message if failed
    """


class ConvertTextToStructuredDataRequest(BaseModel):
    text: Annotated[str, Field(title="Text")]
    outputSchema: Annotated[dict[str, Any], Field(title="Outputschema")]


class Type2(Enum):
    human = "human"
    dev = "dev"
    git_container = "git_container"


class CreateAgentArtifactRequest(BaseModel):
    alias: Annotated[str, Field(title="Alias")]
    type: Annotated[Type2, Field(title="Type")]
    description: Annotated[str, Field(title="Description")]
    imgUrl: Annotated[str | None, Field(title="Imgurl")] = None
    humanName: Annotated[str | None, Field(title="Humanname")] = None
    endpoint: Annotated[str | None, Field(title="Endpoint")] = None
    repoUrl: Annotated[str | None, Field(title="Repourl")] = None
    branch: Annotated[str | None, Field(title="Branch")] = None
    commitHash: Annotated[str | None, Field(title="Commithash")] = None


class CreateAnnotatorAssignmentRequest(BaseModel):
    assignment_type: AssignmentType
    stage: AssignmentStage
    organization_id: Annotated[int, Field(title="Organization Id")]
    test_case_id: Annotated[int | None, Field(title="Test Case Id")] = None
    session_id: Annotated[str | None, Field(title="Session Id")] = None
    simulator_id: Annotated[int | None, Field(title="Simulator Id")] = None


class CreateCheckpointRequest(BaseModel):
    name: Annotated[str | None, Field(title="Name")] = None
    """
    Optional checkpoint name
    """
    description: Annotated[str | None, Field(title="Description")] = None
    """
    Optional description
    """


class CreateCheckpointResult(BaseModel):
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    """
    ID of the created checkpoint artifact
    """
    name: Annotated[str | None, Field(title="Name")] = None
    success: Annotated[bool | None, Field(title="Success")] = True
    """
    Whether checkpoint creation succeeded
    """
    error: Annotated[str | None, Field(title="Error")] = None
    """
    Error message if failed
    """


class InterfaceType(Enum):
    browser = "browser"
    computer = "computer"
    noop = "noop"


class CreateEnvRequest(BaseModel):
    interface_type: Annotated[InterfaceType, Field(title="Interface Type")]
    interface_width: Annotated[int | None, Field(title="Interface Width")] = None
    interface_height: Annotated[int | None, Field(title="Interface Height")] = None
    source: Annotated[str, Field(title="Source")]
    open_page_on_start: Annotated[bool | None, Field(title="Open Page On Start")] = False
    env_id: Annotated[str, Field(title="Env Id")]
    env_config: Annotated[dict[str, Any], Field(title="Env Config")]
    record_network_requests: Annotated[bool | None, Field(title="Record Network Requests")] = False
    record_actions: Annotated[bool | None, Field(title="Record Actions")] = False
    load_chrome_extensions: Annotated[list[str] | None, Field(title="Load Chrome Extensions")] = None
    keepalive: Annotated[bool | None, Field(title="Keepalive")] = False
    alias: Annotated[str | None, Field(title="Alias")] = None
    fast: Annotated[bool | None, Field(title="Fast")] = False
    version: Annotated[str | None, Field(title="Version")] = None
    tag: Annotated[str | None, Field(title="Tag")] = None
    dataset: Annotated[str | None, Field(title="Dataset")] = None
    artifact_id: Annotated[str | None, Field(title="Artifact Id")] = None
    timeout: Annotated[int | None, Field(title="Timeout")] = 1800


class CreateOrgApiKeyRequest(BaseModel):
    name: Annotated[str | None, Field(title="Name")] = None
    policy_ids: Annotated[list[int] | None, Field(title="Policy Ids")] = []
    permissions_via_scope: Annotated[bool | None, Field(title="Permissions Via Scope")] = False


class CreateOrgApiKeyResponse(BaseModel):
    id: Annotated[int, Field(title="Id")]
    key_prefix: Annotated[str, Field(title="Key Prefix")]
    name: Annotated[str | None, Field(title="Name")] = None
    full_key: Annotated[str, Field(title="Full Key")]
    permissions_via_scope: Annotated[bool, Field(title="Permissions Via Scope")]


class CreateOrgPolicyRequest(BaseModel):
    role: Annotated[str, Field(title="Role")]
    resource_type: Annotated[str, Field(title="Resource Type")]
    resource_id: Annotated[str, Field(title="Resource Id")]


class CreateRepoRequest(BaseModel):
    name: Annotated[str, Field(title="Name")]
    description: Annotated[str | None, Field(title="Description")] = None
    private: Annotated[bool | None, Field(title="Private")] = False


class CreateSnapshotResult(BaseModel):
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    """
    ID of the created snapshot artifact
    """
    name: Annotated[str | None, Field(title="Name")] = None


class CreateTestCaseFromLabelsRequest(BaseModel):
    task_prompt: Annotated[str, Field(title="Task Prompt")]
    test_case_name: Annotated[str, Field(title="Test Case Name")]


class CreateVMResponse(BaseModel):
    status: Annotated[str, Field(title="Status")]
    """
    Status
    """
    timestamp: Annotated[str | None, Field(title="Timestamp")] = None
    """
    Timestamp
    """
    correlation_id: Annotated[str, Field(title="Correlation Id")]
    """
    Correlation ID for tracking
    """
    url: Annotated[str, Field(title="Url")]
    """
    Public URL for the VM
    """
    job_public_id: Annotated[str, Field(title="Job Public Id")]
    """
    Public job ID
    """
    job_group_id: Annotated[str, Field(title="Job Group Id")]
    """
    Job group ID
    """


class DatabaseIgnoreConfig(BaseModel):
    type: Annotated[Literal["database_ignore"], Field(title="Type")] = "database_ignore"
    ignore_tables: Annotated[list[str], Field(title="Ignore Tables")]
    ignore_columns: Annotated[dict[str, list[str]], Field(title="Ignore Columns")]
    ignore_table_values: Annotated[dict[str, dict[str, list[str]]], Field(title="Ignore Table Values")]


class DbConfigResponse(BaseModel):
    db_type: Annotated[str, Field(title="Db Type")]
    db_port: Annotated[int, Field(title="Db Port")]
    db_user: Annotated[str, Field(title="Db User")]
    db_password: Annotated[str, Field(title="Db Password")]
    db_database: Annotated[str, Field(title="Db Database")]


DeleteRepositoryResponse = ActiveSessionResponse


class DispatcherPauseRequest(BaseModel):
    pause: Annotated[bool, Field(title="Pause")]
    """
    True to pause, False to resume
    """
    dispatcher_id: Annotated[str, Field(title="Dispatcher Id")]
    """
    Specific dispatcher ID to pause/resume (e.g., 'worker-i-1234567890abcdef-0')
    """


class DispatcherPauseResponse(BaseModel):
    success: Annotated[bool, Field(title="Success")]
    message: Annotated[str, Field(title="Message")]
    dispatchers_notified: Annotated[list[str], Field(title="Dispatchers Notified")]
    total_dispatchers: Annotated[int, Field(title="Total Dispatchers")]


EnvCleanupResponse = ActiveSessionResponse


EnvFlowsResponse = ActiveSessionResponse


class EnvFromArtifact(BaseModel):
    type: Annotated[Literal["artifact"], Field(title="Type")] = "artifact"
    """
    Environment type
    """
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    """
    Specific artifact/snapshot ID to use
    """
    alias: Annotated[str | None, Field(title="Alias")] = None
    """
    Custom name for this environment
    """


class EnvFromSimulator(BaseModel):
    type: Annotated[Literal["simulator"], Field(title="Type")] = "simulator"
    """
    Environment type
    """
    simulator: Annotated[str, Field(title="Simulator")]
    """
    Simulator/service name
    """
    tag: Annotated[str | None, Field(title="Tag")] = "latest"
    """
    Artifact tag (defaults to 'latest')
    """
    dataset: Annotated[str | None, Field(title="Dataset")] = None
    """
    Dataset to use for the environment
    """
    alias: Annotated[str | None, Field(title="Alias")] = None
    """
    Custom name for this environment
    """


class EnvInfo(BaseModel):
    job_id: Annotated[str | None, Field(title="Job Id")] = None
    """
    Job public ID (null if failed)
    """
    alias: Annotated[str, Field(title="Alias")]
    """
    Environment alias
    """
    artifact_id: Annotated[str | None, Field(title="Artifact Id")] = None
    """
    Artifact ID used (null for resource-based launch)
    """
    success: Annotated[bool | None, Field(title="Success")] = True
    """
    Whether job creation succeeded
    """
    error: Annotated[str | None, Field(title="Error")] = None
    """
    Error message if failed
    """


class EnvResult(BaseModel):
    job_id: Annotated[str, Field(title="Job Id")]
    env_id: Annotated[str, Field(title="Env Id")]


class EnvSpec(BaseModel):
    env_id: Annotated[str | None, Field(title="Env Id")] = None
    artifact_id: Annotated[str | None, Field(title="Artifact Id")] = None


EnvStateResponse = ActiveSessionResponse


class EnvironmentContext(BaseModel):
    job_id: Annotated[str, Field(title="Job Id")]
    """
    Job public ID
    """
    alias: Annotated[str, Field(title="Alias")]
    """
    Environment alias
    """
    artifact_id: Annotated[str | None, Field(title="Artifact Id")] = None
    """
    Artifact ID (null for resource-based)
    """
    simulator: Annotated[str | None, Field(title="Simulator")] = None
    """
    Simulator/service name
    """


class ErrorDetail(BaseModel):
    detail: Annotated[str, Field(title="Detail")]
    """
    Error message
    """


class EvaluatePythonRequest(BaseModel):
    code: Annotated[str, Field(title="Code")]


class ExecuteCommandRequest(BaseModel):
    command: Annotated[str, Field(title="Command")]
    """
    Command to execute
    """
    timeout: Annotated[int | None, Field(title="Timeout")] = 30
    """
    Command timeout in seconds
    """


class ExecuteCommandResult(BaseModel):
    stdout: Annotated[str, Field(title="Stdout")]
    stderr: Annotated[str, Field(title="Stderr")]
    exit_code: Annotated[int, Field(title="Exit Code")]
    timed_out: Annotated[bool | None, Field(title="Timed Out")] = False


class ExecuteSSHRequest(BaseModel):
    command: Annotated[str, Field(title="Command")]
    """
    The shell command to execute
    """
    timeout: Annotated[int | None, Field(ge=1, le=600, title="Timeout")] = 60
    """
    Command timeout in seconds
    """


class ExecuteSSHResponse(BaseModel):
    status: Annotated[str, Field(title="Status")]
    """
    Status of the operation
    """
    correlation_id: Annotated[str, Field(title="Correlation Id")]
    """
    Correlation ID for tracking the result
    """
    timestamp: Annotated[str, Field(title="Timestamp")]
    """
    Timestamp of the request
    """


FileContentResponse = ActiveSessionResponse


class GenerateMutationsRequest(BaseModel):
    test_case_ids: Annotated[list[int] | None, Field(title="Test Case Ids")] = None
    simulator_id: Annotated[int | None, Field(title="Simulator Id")] = None


GenerateMutationsSingleRequest = ArchiveOrganizationTestCaseRequest


class ScoringType(Enum):
    mutations = "mutations"
    output = "output"


class GenerateScoringConfigFromSessionsRequest(BaseModel):
    sessionIds: Annotated[list[str], Field(title="Sessionids")]
    scoringType: Annotated[ScoringType | None, Field(title="Scoringtype")] = ScoringType.mutations
    outputs: Annotated[list[Any] | None, Field(title="Outputs")] = None


class GetConcurrencyStatusResponse(BaseModel):
    organization_id: Annotated[int, Field(title="Organization Id")]
    organization_name: Annotated[str, Field(title="Organization Name")]
    max_concurrent_runs: Annotated[int, Field(title="Max Concurrent Runs")]
    """
    Concurrency limit from DB (org plan)
    """
    nats_available_tokens: Annotated[int, Field(title="Nats Available Tokens")]
    """
    Number of available tokens in NATS
    """
    running_jobs: Annotated[int, Field(title="Running Jobs")]
    """
    Number of currently running jobs
    """
    total_tokens: Annotated[int, Field(title="Total Tokens")]
    """
    Total tokens (NATS available + running jobs)
    """


class GetVersionByTagRequest(BaseModel):
    simulator_name: Annotated[str, Field(title="Simulator Name")]
    tag: Annotated[str, Field(title="Tag")]
    dataset: Annotated[str | None, Field(title="Dataset")] = "base"


class GetVersionByTagResponse(BaseModel):
    success: Annotated[bool, Field(title="Success")]
    git_hash: Annotated[str | None, Field(title="Git Hash")] = None
    worker_image: Annotated[str | None, Field(title="Worker Image")] = None
    snapshot_s3_uri: Annotated[str | None, Field(title="Snapshot S3 Uri")] = None
    ecs_task_definition_arn: Annotated[str | None, Field(title="Ecs Task Definition Arn")] = None
    error: Annotated[str | None, Field(title="Error")] = None


GiteaCredentialsResponse = ActiveSessionResponse


GiteaInfoResponse = ActiveSessionResponse


class HeartbeatJobResult(BaseModel):
    success: Annotated[bool, Field(title="Success")]


class HumanInTheLoopScoreRequest(BaseModel):
    correct: Annotated[bool, Field(title="Correct")]
    annotatorReasoning: Annotated[str | None, Field(title="Annotatorreasoning")] = None
    sessionSnapshotId: Annotated[int | None, Field(title="Sessionsnapshotid")] = None
    sessionTime: Annotated[int | None, Field(title="Sessiontime")] = None
    is_ambiguous: Annotated[bool | None, Field(title="Is Ambiguous")] = False


InterfaceWorkerInfoResponse = ActiveSessionResponse


class JobInfo(BaseModel):
    job_id: Annotated[str, Field(title="Job Id")]
    """
    Job public ID
    """
    alias: Annotated[str, Field(title="Alias")]
    """
    Environment alias
    """
    simulator: Annotated[str, Field(title="Simulator")]
    """
    Simulator name
    """
    status: Annotated[str | None, Field(title="Status")] = None
    """
    Job status
    """


JobInfoResponse = ActiveSessionResponse


class JobStatus(Enum):
    value_0 = {"use_enum_values": True}
    created = "created"
    queued = "queued"
    running = "running"
    completed = "completed"
    failed = "failed"
    cancelled = "cancelled"
    timeout = "timeout"


class JobStatusResponse(BaseModel):
    status: Annotated[str, Field(title="Status")]
    status_reason: Annotated[str | None, Field(title="Status Reason")] = None
    created_at: Annotated[AwareDatetime, Field(title="Created At")]
    updated_at: Annotated[AwareDatetime, Field(title="Updated At")]


class JobStatusUpdateRequest(BaseModel):
    job_public_id: Annotated[str, Field(title="Job Public Id")]
    status: Annotated[str | None, Field(title="Status")] = None
    worker_private_ip: Annotated[str | None, Field(title="Worker Private Ip")] = None
    worker_public_ip: Annotated[str | None, Field(title="Worker Public Ip")] = None
    messaging_port: Annotated[int | None, Field(title="Messaging Port")] = None
    last_heartbeat: Annotated[AwareDatetime | None, Field(title="Last Heartbeat")] = None
    status_reason: Annotated[str | None, Field(title="Status Reason")] = None


JobWorkerInfoResponse = ActiveSessionResponse


class ListJobsResponse(BaseModel):
    session_id: Annotated[str, Field(title="Session Id")]
    jobs: Annotated[list[JobInfo], Field(title="Jobs")]


LogResponse = ActiveSessionResponse


class Status(Enum):
    available = "available"
    archived = "archived"
    restoring = "restoring"


class LogStatusResponse(BaseModel):
    status: Annotated[Status, Field(title="Status")]
    message: Annotated[str | None, Field(title="Message")] = None


class MakeEnvBatchRequest(BaseModel):
    envs: Annotated[list[EnvSpec], Field(title="Envs")]
    source: Annotated[str | None, Field(title="Source")] = "SDK"


class MakeEnvBatchResponse(BaseModel):
    batch_id: Annotated[str, Field(title="Batch Id")]
    envs: Annotated[list[EnvResult], Field(title="Envs")]


MakeEnvResponse = ActiveSessionResponse


class NodeInstance(BaseModel):
    instance_id: Annotated[str, Field(title="Instance Id")]
    total_vms: Annotated[int, Field(title="Total Vms")]
    total_capacity: Annotated[int, Field(title="Total Capacity")]
    vms_by_state: Annotated[dict[str, int], Field(title="Vms By State")]


class NodeStatusResponse(BaseModel):
    total_instances: Annotated[int, Field(title="Total Instances")]
    total_vms: Annotated[int, Field(title="Total Vms")]
    total_capacity: Annotated[int, Field(title="Total Capacity")]
    stale_vms: Annotated[int, Field(title="Stale Vms")]
    instances: Annotated[list[NodeInstance], Field(title="Instances")]


class OrgApiKeyResponse(BaseModel):
    id: Annotated[int, Field(title="Id")]
    key_prefix: Annotated[str, Field(title="Key Prefix")]
    name: Annotated[str | None, Field(title="Name")] = None
    is_active: Annotated[bool, Field(title="Is Active")]
    created_at: Annotated[str, Field(title="Created At")]
    last_used_at: Annotated[str | None, Field(title="Last Used At")] = None
    permissions_via_scope: Annotated[bool, Field(title="Permissions Via Scope")]


class OrgPolicyResponse(BaseModel):
    id: Annotated[int, Field(title="Id")]
    role: Annotated[str, Field(title="Role")]
    resource_type: Annotated[str, Field(title="Resource Type")]
    resource_id: Annotated[str, Field(title="Resource Id")]


class PackageInfo(BaseModel):
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    package_name: Annotated[str, Field(title="Package Name")]
    version: Annotated[str, Field(title="Version")]
    alias: Annotated[str, Field(title="Alias")]
    agents: Annotated[list[str], Field(title="Agents")]
    published_at: Annotated[str, Field(title="Published At")]
    created_at: Annotated[str, Field(title="Created At")]


class PackageListResponse(BaseModel):
    packages: Annotated[list[PackageInfo], Field(title="Packages")]


class PackageLookupResponse(BaseModel):
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    package_name: Annotated[str, Field(title="Package Name")]
    version: Annotated[str, Field(title="Version")]
    alias: Annotated[str, Field(title="Alias")]
    agents: Annotated[list[str], Field(title="Agents")]


class PackageVersionInfo(BaseModel):
    version: Annotated[str, Field(title="Version")]
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    agents: Annotated[list[str], Field(title="Agents")]
    published_at: Annotated[str, Field(title="Published At")]


class PackageVersionsResponse(BaseModel):
    package_name: Annotated[str, Field(title="Package Name")]
    versions: Annotated[list[PackageVersionInfo], Field(title="Versions")]


class PlatoConfigResponse(BaseModel):
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    plato_config: Annotated[str | None, Field(title="Plato Config")] = None


class PrefetchRequest(BaseModel):
    artifact_id: Annotated[str | None, Field(title="Artifact Id")] = None
    """
    Artifact ID (preferred method)
    """
    service: Annotated[str | None, Field(title="Service")] = None
    """
    Service name (legacy - use artifact_id instead)
    """
    version: Annotated[str | None, Field(title="Version")] = None
    """
    Version string (legacy - use artifact_id instead)
    """
    dataset: Annotated[str | None, Field(title="Dataset")] = "base"
    """
    Dataset name (legacy - use artifact_id instead)
    """
    priority: Annotated[int | None, Field(title="Priority")] = 0
    """
    Priority (higher = more urgent)
    """


class PrefetchResponse(BaseModel):
    success: Annotated[bool, Field(title="Success")]
    message: Annotated[str, Field(title="Message")]
    instances_notified: Annotated[list[str], Field(title="Instances Notified")]
    total_instances: Annotated[int, Field(title="Total Instances")]


ProxyUrlResponse = ActiveSessionResponse


class PublicUrlResult(BaseModel):
    job_id: Annotated[str, Field(title="Job Id")]
    """
    Job public ID
    """
    url: Annotated[str | None, Field(title="Url")] = None
    """
    Public URL for browser access: {job_id}--{port}.sims.plato.so
    """
    error: Annotated[str | None, Field(title="Error")] = None
    """
    Error message if failed
    """


class ReasoningLevel(Enum):
    level_1 = "level_1"
    level_2 = "level_2"
    level_3 = "level_3"
    level_4 = "level_4"
    level_5 = "level_5"


class Recording(BaseModel):
    simulatorId: Annotated[int, Field(title="Simulatorid")]


class RegisterPackageRequest(BaseModel):
    package_name: Annotated[str, Field(title="Package Name")]
    version: Annotated[str, Field(title="Version")]
    alias: Annotated[str, Field(title="Alias")]
    description: Annotated[str, Field(title="Description")]
    agents: Annotated[list[str], Field(title="Agents")]


class RegisterPackageResponse(BaseModel):
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    package_name: Annotated[str, Field(title="Package Name")]
    version: Annotated[str, Field(title="Version")]
    created: Annotated[bool, Field(title="Created")]


class RegisterRequest(BaseModel):
    git_hash: Annotated[str, Field(title="Git Hash")]
    tags: Annotated[list[str], Field(title="Tags")]
    ecs_task_definition_arn: Annotated[str, Field(title="Ecs Task Definition Arn")]
    worker_image: Annotated[str, Field(title="Worker Image")]
    snapshot_s3_uri: Annotated[str, Field(title="Snapshot S3 Uri")]
    dataset: Annotated[str | None, Field(title="Dataset")] = "base"
    artifact_id: Annotated[str | None, Field(title="Artifact Id")] = None
    notes: Annotated[str | None, Field(title="Notes")] = None
    description: Annotated[str | None, Field(title="Description")] = None
    archived: Annotated[bool | None, Field(title="Archived")] = False
    parent_artifact_id: Annotated[str | None, Field(title="Parent Artifact Id")] = None
    rootfs_s3_uri: Annotated[str | None, Field(title="Rootfs S3 Uri")] = None
    archive_type: Annotated[str | None, Field(title="Archive Type")] = "sparse-s3"
    status: Annotated[str | None, Field(title="Status")] = "ready"
    internal_app_port: Annotated[int | None, Field(title="Internal App Port")] = None
    messaging_port: Annotated[int | None, Field(title="Messaging Port")] = None
    plato_config: Annotated[str | None, Field(title="Plato Config")] = None
    flows: Annotated[str | None, Field(title="Flows")] = None
    target: Annotated[str | None, Field(title="Target")] = None


class RegisterResponse(BaseModel):
    success: Annotated[bool, Field(title="Success")]
    artifact_id: Annotated[str | None, Field(title="Artifact Id")] = None


RepositoryResponse = ActiveSessionResponse


RescoreResponse = ActiveSessionResponse


RescoreTestCaseResult = ActiveSessionResponse


ResetEnvResponse = ActiveSessionResponse


class ResetEnvTask(BaseModel):
    prompt: Annotated[str, Field(title="Prompt")]
    start_url: Annotated[str | None, Field(title="Start Url")] = ""
    name: Annotated[str, Field(title="Name")]
    dataset_name: Annotated[str | None, Field(title="Dataset Name")] = None
    eval_config: Annotated[
        BaseScoringConfig | None,
        Field(default_factory=lambda: BaseScoringConfig.model_validate({"type": "human_in_the_loop"})),
    ]


ResetJobResult = CloseJobResult


class ResetSessionResponse(BaseModel):
    success: Annotated[bool, Field(title="Success")]
    session_id: Annotated[str, Field(title="Session Id")]
    results: Annotated[dict[str, ResetJobResult] | None, Field(title="Results")] = None
    """
    Results per job_id
    """


class ResourceBreakdown(BaseModel):
    service: Annotated[str, Field(title="Service")]
    version: Annotated[str, Field(title="Version")]
    dataset: Annotated[str, Field(title="Dataset")]
    pending_demands: Annotated[int, Field(title="Pending Demands")]
    available_supplies: Annotated[int, Field(title="Available Supplies")]


class RunSessionSource(Enum):
    value_0 = {"use_enum_values": True}
    PLAYGROUND = "PLAYGROUND"
    SDK = "SDK"
    DEV = "DEV"


class ScoreRequest(BaseModel):
    success: Annotated[bool, Field(title="Success")]
    reason: Annotated[str | None, Field(title="Reason")] = ""
    agent_version: Annotated[str | None, Field(title="Agent Version")] = ""
    mutations: Annotated[list[dict[str, Any]] | None, Field(title="Mutations")] = []


ScoreResponse = ActiveSessionResponse


class ScoringType1(Enum):
    output = "output"
    mutations = "mutations"


class SessionContext(BaseModel):
    session_id: Annotated[str, Field(title="Session Id")]
    """
    Unique session ID
    """
    envs: Annotated[list[EnvironmentContext] | None, Field(title="Envs")] = None
    """
    Environment contexts
    """
    task_public_id: Annotated[str | None, Field(title="Task Public Id")] = None
    """
    Associated task public ID if created from task
    """


class SessionIdsRequest(BaseModel):
    session_ids: Annotated[list[str], Field(title="Session Ids")]


class SessionListResponse(BaseModel):
    sessions: Annotated[list[dict[str, Any]], Field(title="Sessions")]
    total_count: Annotated[int, Field(title="Total Count")]
    page: Annotated[int, Field(title="Page")]
    page_size: Annotated[int, Field(title="Page Size")]
    has_more_pages: Annotated[bool, Field(title="Has More Pages")]


class SessionStateResult(BaseModel):
    state: Annotated[Any, Field(title="State")]


class SetupRootPasswordRequest(BaseModel):
    ssh_public_key: Annotated[str, Field(title="Ssh Public Key")]
    """
    SSH public key to add to root user's authorized_keys
    """
    request_timeout: Annotated[int | None, Field(ge=10, le=300, title="Request Timeout")] = 60
    """
    SSH command timeout in seconds
    """


class SetupSandboxResponse(BaseModel):
    status: Annotated[str, Field(title="Status")]
    """
    Status
    """
    timestamp: Annotated[str | None, Field(title="Timestamp")] = None
    """
    Timestamp
    """
    correlation_id: Annotated[str, Field(title="Correlation Id")]
    """
    Correlation ID for tracking
    """
    ssh_url: Annotated[str, Field(title="Ssh Url")]
    """
    SSH URL for connecting to sandbox
    """


class SimConfigCompute(BaseModel):
    cpus: Annotated[int | None, Field(ge=1, le=8, title="Cpus")] = 1
    """
    vCPUs
    """
    memory: Annotated[int | None, Field(ge=512, le=16384, title="Memory")] = 2048
    """
    Memory in MB
    """
    disk: Annotated[int | None, Field(ge=1024, le=102400, title="Disk")] = 10240
    """
    Disk space in MB
    """
    app_port: Annotated[int | None, Field(ge=0, le=65535, title="App Port")] = 8080
    """
    Application port
    """
    plato_messaging_port: Annotated[int | None, Field(ge=0, le=65535, title="Plato Messaging Port")] = 7000
    """
    Plato messaging port
    """


class Type3(Enum):
    db = "db"
    proxy = "proxy"
    file = "file"


class SimConfigListener(BaseModel):
    type: Annotated[Type3, Field(title="Type")]
    """
    Listener type
    """


class SimConfigMetadata(BaseModel):
    favicon: Annotated[str | None, Field(title="Favicon")] = "https://plato.so/favicon.ico"
    """
    Favicon URL
    """
    name: Annotated[str | None, Field(title="Name")] = "Plato"
    """
    Name
    """
    description: Annotated[str | None, Field(title="Description")] = (
        "Plato is a platform for building and running simulations."
    )
    """
    Description
    """
    source_code_url: Annotated[str | None, Field(title="Source Code Url")] = "https://github.com/plato/plato"
    """
    Source code URL
    """
    start_url: Annotated[str | None, Field(title="Start Url")] = "https://plato.so"
    """
    Start URL
    """
    license: Annotated[str | None, Field(title="License")] = "MIT"
    """
    License
    """
    variables: Annotated[list[dict[str, str]] | None, Field(title="Variables")] = [
        {"name": "PLATO_API_KEY", "value": "plato"}
    ]
    """
    Variables
    """
    flows_path: Annotated[str | None, Field(title="Flows Path")] = None
    """
    Flows path
    """


class Type4(Enum):
    docker_compose = "docker-compose"
    docker = "docker"


class SimConfigService(BaseModel):
    type: Annotated[Type4, Field(title="Type")]
    """
    Service type
    """


class ReviewType(Enum):
    env = "env"
    data = "data"


class Outcome(Enum):
    pass_ = "pass"
    reject = "reject"


class SimReview(BaseModel):
    timestamp_iso: Annotated[str, Field(title="Timestamp Iso")]
    review_type: Annotated[ReviewType, Field(title="Review Type")]
    outcome: Annotated[Outcome, Field(title="Outcome")]
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    video_s3_path: Annotated[str | None, Field(title="Video S3 Path")] = None
    events_s3_path: Annotated[str | None, Field(title="Events S3 Path")] = None
    comments: Annotated[str | None, Field(title="Comments")] = None
    reviewer_user_id: Annotated[int | None, Field(title="Reviewer User Id")] = None


class SimStatusHistory(BaseModel):
    timestamp_iso: Annotated[str, Field(title="Timestamp Iso")]
    old_status: Annotated[str, Field(title="Old Status")]
    new_status: Annotated[str, Field(title="New Status")]
    user_id: Annotated[int | None, Field(title="User Id")] = None


class SimulatorArtifactInfo(BaseModel):
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    git_hash: Annotated[str, Field(title="Git Hash")]
    created_at: Annotated[AwareDatetime, Field(title="Created At")]
    worker_image: Annotated[str, Field(title="Worker Image")]
    ecs_task_definition_arn: Annotated[str, Field(title="Ecs Task Definition Arn")]
    snapshot_s3_uri: Annotated[str, Field(title="Snapshot S3 Uri")]


class Type5(Enum):
    proxy = "proxy"
    docker_app = "docker_app"


class Status1(Enum):
    requested = "requested"
    in_progress = "in_progress"
    environment_in_progress = "environment_in_progress"
    environment_ready = "environment_ready"
    data_in_progress = "data_in_progress"
    data_ready = "data_ready"
    tasks_in_progress = "tasks_in_progress"
    not_started = "not_started"
    env_in_progress = "env_in_progress"
    env_review_requested = "env_review_requested"
    env_approved = "env_approved"
    data_review_requested = "data_review_requested"
    ready = "ready"
    ready_disabled_testing = "ready-disabled-testing"
    out_of_service = "out_of_service"


class SimulatorConfig(BaseModel):
    type: Annotated[Type5, Field(title="Type")]
    cookies: Annotated[list[ChromeCookie] | None, Field(title="Cookies")] = None
    authentication: Authentication | None = None
    default_start_path: Annotated[str | None, Field(title="Default Start Path")] = "/"
    status: Annotated[Status1 | None, Field(title="Status")] = Status1.not_started
    env_assignees: Annotated[list[int] | None, Field(title="Env Assignees")] = None
    env_review_assignees: Annotated[list[int] | None, Field(title="Env Review Assignees")] = None
    data_assignees: Annotated[list[int] | None, Field(title="Data Assignees")] = None
    data_review_assignees: Annotated[list[int] | None, Field(title="Data Review Assignees")] = None
    status_history: Annotated[list[SimStatusHistory] | None, Field(title="Status History")] = None
    reviews: Annotated[list[SimReview] | None, Field(title="Reviews")] = None
    assigned_user_id: Annotated[int | None, Field(title="Assigned User Id")] = None
    base_artifact_id: Annotated[str | None, Field(title="Base Artifact Id")] = None
    data_artifact_id: Annotated[str | None, Field(title="Data Artifact Id")] = None
    notes: Annotated[str | None, Field(title="Notes")] = None


class SimulatorIdResponse(BaseModel):
    simulator_id: Annotated[int, Field(title="Simulator Id")]


class SimulatorListItem(BaseModel):
    id: Annotated[int, Field(title="Id")]
    name: Annotated[str, Field(title="Name")]
    description: Annotated[str | None, Field(title="Description")] = None
    img_url: Annotated[str | None, Field(title="Img Url")] = None
    enabled: Annotated[bool, Field(title="Enabled")]
    sim_type: Annotated[str, Field(title="Sim Type")]
    job_name: Annotated[str | None, Field(title="Job Name")] = None
    internal_app_port: Annotated[int | None, Field(title="Internal App Port")] = None
    version_tag: Annotated[str, Field(title="Version Tag")]
    image_uri: Annotated[str | None, Field(title="Image Uri")] = None


class SimulatorMetadata(BaseModel):
    id: Annotated[int, Field(title="Id")]
    name: Annotated[str, Field(title="Name")]
    imgUrl: Annotated[str | None, Field(title="Imgurl")] = None
    config: SimulatorConfig | None = None


SimulatorRepositoryResponse = ActiveSessionResponse


SimulatorResponse = ActiveSessionResponse


class SimulatorStatus(BaseModel):
    simulator_name: Annotated[str, Field(title="Simulator Name")]
    status: Annotated[str | None, Field(title="Status")] = None


class SimulatorTagInfo(BaseModel):
    tag_name: Annotated[str, Field(title="Tag Name")]
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    created_at: Annotated[AwareDatetime, Field(title="Created At")]


class SimulatorVersionDetails(BaseModel):
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    version: Annotated[str, Field(title="Version")]
    created_at: Annotated[AwareDatetime, Field(title="Created At")]
    worker_image: Annotated[str, Field(title="Worker Image")]
    ecs_task_definition_arn: Annotated[str, Field(title="Ecs Task Definition Arn")]
    snapshot_s3_uri: Annotated[str, Field(title="Snapshot S3 Uri")]
    dataset: Annotated[str, Field(title="Dataset")]
    tags: Annotated[list[str] | None, Field(title="Tags")] = []


class SimulatorVersionsResponse(BaseModel):
    simulator_name: Annotated[str, Field(title="Simulator Name")]
    versions: Annotated[list[SimulatorVersionDetails], Field(title="Versions")]
    total_versions: Annotated[int, Field(title="Total Versions")]


class Skills(Enum):
    navigation_and_input = "navigation_and_input"
    extract_and_understand = "extract_and_understand"
    reasoning_and_control_flow = "reasoning_and_control_flow"
    go_to_url = "go_to_url"
    click = "click"
    text_input = "text_input"
    dropdown_selection = "dropdown_selection"
    checkbox_toggle = "checkbox_toggle"
    radio_select = "radio_select"
    scroll = "scroll"
    form_submit = "form_submit"
    file_upload = "file_upload"
    read_visible_text = "read_visible_text"
    extract_table = "extract_table"
    summarize_text = "summarize_text"
    classify_content = "classify_content"
    identify_element_state = "identify_element_state"
    conditional_logic = "conditional_logic"
    iterate_items = "iterate_items"
    numeric_compare = "numeric_compare"
    date_time_select = "date_time_select"
    form_validation_check = "form_validation_check"
    login_with_creds = "login_with_creds"
    handle_2fa_hitl = "handle_2fa_hitl"
    captcha_detect = "captcha_detect"
    hitl_request_input = "hitl_request_input"
    tool_call = "tool_call"
    tool_call_parallel = "tool_call_parallel"
    context_memory_use = "context_memory_use"
    webhook_trigger = "webhook_trigger"
    detect_blocker = "detect_blocker"
    raise_descriptive_error = "raise_descriptive_error"
    timeout_aware = "timeout_aware"


class ArchiveType(Enum):
    sparse_s3 = "sparse-s3"
    blockdiff = "blockdiff"


class DiffStrategy(Enum):
    blockdiff = "blockdiff"
    blockdiff_checkpoint = "blockdiff_checkpoint"


class SnapshotArtifact(BaseModel):
    archive_type: Annotated[ArchiveType | None, Field(title="Archive Type")] = ArchiveType.blockdiff
    diff_strategy: Annotated[DiffStrategy | None, Field(title="Diff Strategy")] = None
    """
    Aggregation strategy to use for the snapshot with its parent artifact
    """
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    s3_uri: Annotated[str, Field(title="S3 Uri")]
    rootfs_uri: Annotated[str, Field(title="Rootfs Uri")]


class SnapshotConfig(BaseModel):
    lineage: Annotated[list[SnapshotArtifact], Field(min_length=1, title="Lineage")]
    """
    Artifact lineage chain (must have at least one artifact)
    """


class SnapshotStatusDetail(BaseModel):
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    instance_id: Annotated[str, Field(title="Instance Id")]
    status: Annotated[str, Field(title="Status")]
    simulator_name: Annotated[str | None, Field(title="Simulator Name")] = None
    dataset: Annotated[str | None, Field(title="Dataset")] = None
    git_hash: Annotated[str | None, Field(title="Git Hash")] = None
    snapshot_path: Annotated[str | None, Field(title="Snapshot Path")] = None
    error_message: Annotated[str | None, Field(title="Error Message")] = None
    started_at: Annotated[AwareDatetime | None, Field(title="Started At")] = None
    completed_at: Annotated[AwareDatetime | None, Field(title="Completed At")] = None
    download_duration: Annotated[float | None, Field(title="Download Duration")] = None
    last_updated: Annotated[AwareDatetime, Field(title="Last Updated")]
    last_heartbeat: Annotated[float | None, Field(title="Last Heartbeat")] = None
    used_disk_space_bytes: Annotated[int | None, Field(title="Used Disk Space Bytes")] = None


class SnapshotsByInstance(BaseModel):
    instance_id: Annotated[str, Field(title="Instance Id")]
    total_snapshots: Annotated[int, Field(title="Total Snapshots")]
    available: Annotated[int, Field(title="Available")]
    downloading: Annotated[int, Field(title="Downloading")]
    failed: Annotated[int, Field(title="Failed")]
    not_downloaded: Annotated[int, Field(title="Not Downloaded")]
    snapshots: Annotated[list[SnapshotStatusDetail], Field(title="Snapshots")]


class StartEvalFromGitRequest(BaseModel):
    git_repo_url: Annotated[str, Field(title="Git Repo Url")]
    git_branch: Annotated[str, Field(title="Git Branch")]
    git_commit_hash: Annotated[str, Field(title="Git Commit Hash")]
    test_case_set_id: Annotated[str, Field(title="Test Case Set Id")]


class StartPathRequest(BaseModel):
    simulator_name: Annotated[str, Field(title="Simulator Name")]
    test_case_public_id: Annotated[str | None, Field(title="Test Case Public Id")] = None


class StartPathResponse(BaseModel):
    start_path: Annotated[str | None, Field(title="Start Path")] = None
    source: Annotated[str, Field(title="Source")]


class TestCaseGenerateOutcomeSchemaRequest(BaseModel):
    task: Annotated[str, Field(title="Task")]
    img: Annotated[str, Field(title="Img")]


class TestCaseGeneratePredictionFromStepsRequest(BaseModel):
    prompt: Annotated[list[dict[str, Any]], Field(title="Prompt")]


class TestCaseGeneratePredictionRequest(BaseModel):
    prompt: Annotated[str, Field(title="Prompt")]
    task: Annotated[str, Field(title="Task")]


class TestCaseMetadata(BaseModel):
    id: Annotated[int, Field(title="Id")]
    name: Annotated[str, Field(title="Name")]
    start_url: Annotated[str, Field(title="Start Url")]


class TestCaseResult(BaseModel):
    success: Annotated[bool, Field(title="Success")]
    test_case_id: Annotated[int | None, Field(title="Test Case Id")] = None
    test_case_public_id: Annotated[str | None, Field(title="Test Case Public Id")] = None
    test_case_name: Annotated[str, Field(title="Test Case Name")]
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    error: Annotated[str | None, Field(title="Error")] = None
    action: Annotated[str, Field(title="Action")]


class TestCaseSetCreateRequest(BaseModel):
    name: Annotated[str, Field(title="Name")]
    description: Annotated[str, Field(title="Description")]
    icon: Annotated[str, Field(title="Icon")]


class UpdateAnnotatorAssignmentStageRequest(BaseModel):
    stage: AssignmentStage


UpdateAnnotatorAssignmentStageResponse = UpdateAnnotatorAssignmentStageRequest


class UpdateConcurrencyLimitRequest(BaseModel):
    max_concurrent_runs: Annotated[int, Field(gt=0, title="Max Concurrent Runs")]
    """
    Maximum number of concurrent runs allowed
    """


class UpdateConcurrencyLimitResponse(BaseModel):
    organization_id: Annotated[int, Field(title="Organization Id")]
    organization_name: Annotated[str, Field(title="Organization Name")]
    max_concurrent_runs: Annotated[int, Field(title="Max Concurrent Runs")]
    plan_type: Annotated[str, Field(title="Plan Type")]


class UpdateSessionPublicRequest(BaseModel):
    is_public: Annotated[bool, Field(title="Is Public")]


class UpdateSessionTestCaseRequest(BaseModel):
    testCaseId: Annotated[int | None, Field(title="Testcaseid")] = None


class UpdateStatusRequest(BaseModel):
    status: Annotated[str, Field(title="Status")]


class UpdateTagRequest(BaseModel):
    simulator_name: Annotated[str, Field(title="Simulator Name")]
    tag_name: Annotated[str, Field(title="Tag Name")]
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    dataset: Annotated[str | None, Field(title="Dataset")] = "base"


class UpdateTagResponse(BaseModel):
    success: Annotated[bool, Field(title="Success")]
    message: Annotated[str | None, Field(title="Message")] = None
    error: Annotated[str | None, Field(title="Error")] = None


class UploadPackageResponse(BaseModel):
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    package_name: Annotated[str, Field(title="Package Name")]
    version: Annotated[str, Field(title="Version")]
    message: Annotated[str, Field(title="Message")]


class VMManagementResponse(BaseModel):
    status: Annotated[str, Field(title="Status")]
    """
    Status
    """
    timestamp: Annotated[str | None, Field(title="Timestamp")] = None
    """
    Timestamp
    """
    correlation_id: Annotated[str, Field(title="Correlation Id")]
    """
    Correlation ID for tracking
    """


class VMStatus(BaseModel):
    vm_id: Annotated[int, Field(title="Vm Id")]
    worker_id: Annotated[str, Field(title="Worker Id")]
    state: Annotated[str, Field(title="State")]
    created_at: Annotated[AwareDatetime, Field(title="Created At")]
    updated_at: Annotated[AwareDatetime, Field(title="Updated At")]
    last_heartbeat: Annotated[float | None, Field(title="Last Heartbeat")] = None
    heartbeat_age_seconds: Annotated[float | None, Field(title="Heartbeat Age Seconds")] = None
    is_stale: Annotated[bool, Field(title="Is Stale")]
    config: Annotated[dict[str, Any] | None, Field(title="Config")] = None


class ValidationError(BaseModel):
    loc: Annotated[list[str | int], Field(title="Location")]
    msg: Annotated[str, Field(title="Message")]
    type: Annotated[str, Field(title="Error Type")]


class ValidationErrorItem(BaseModel):
    loc: Annotated[list[str], Field(title="Loc")]
    """
    Location of the error
    """
    msg: Annotated[str, Field(title="Msg")]
    """
    Error message
    """
    type: Annotated[str, Field(title="Type")]
    """
    Error type
    """


class ValidationErrorResponse(BaseModel):
    detail: Annotated[list[ValidationErrorItem], Field(title="Detail")]
    """
    List of validation errors
    """


class VersionBumpRequest(BaseModel):
    note: Annotated[str, Field(title="Note")]


class WaitForReadyResult(BaseModel):
    ready: Annotated[bool, Field(title="Ready")]
    """
    Whether the job is ready
    """
    job_id: Annotated[str, Field(title="Job Id")]
    """
    Job public ID
    """
    worker_private_ip: Annotated[str | None, Field(title="Worker Private Ip")] = None
    """
    Worker private IP
    """
    worker_public_ip: Annotated[str | None, Field(title="Worker Public Ip")] = None
    """
    Worker public IP
    """
    mesh_ip: Annotated[str | None, Field(title="Mesh Ip")] = None
    """
    Mesh IP
    """
    error: Annotated[str | None, Field(title="Error")] = None
    """
    Error message if not ready
    """


class WorkerReadyResponse(BaseModel):
    ready: Annotated[bool, Field(title="Ready")]
    job_id: Annotated[str | None, Field(title="Job Id")] = None
    worker_private_ip: Annotated[str | None, Field(title="Worker Private Ip")] = None
    worker_public_ip: Annotated[str | None, Field(title="Worker Public Ip")] = None
    mesh_ip: Annotated[str | None, Field(title="Mesh Ip")] = None
    worker_port: Annotated[int | None, Field(title="Worker Port")] = None
    health_status: Annotated[dict[str, Any] | None, Field(title="Health Status")] = None
    error: Annotated[str | None, Field(title="Error")] = None


class WorkerStatus(BaseModel):
    dispatcher_id: Annotated[str, Field(title="Dispatcher Id")]
    state: Annotated[str, Field(title="State")]
    last_heartbeat: Annotated[float, Field(title="Last Heartbeat")]
    heartbeat_age_seconds: Annotated[float, Field(title="Heartbeat Age Seconds")]
    is_stale: Annotated[bool, Field(title="Is Stale")]
    vm_count: Annotated[int, Field(title="Vm Count")]
    vms_by_state: Annotated[dict[str, int], Field(title="Vms By State")]
    metadata: Annotated[dict[str, Any], Field(title="Metadata")]


class AppApiV1ClusterRoutesDispatcherInfo(BaseModel):
    dispatcher_id: Annotated[str, Field(title="Dispatcher Id")]
    instance_id: Annotated[str, Field(title="Instance Id")]
    worker_idx: Annotated[int, Field(title="Worker Idx")]
    state: Annotated[str, Field(title="State")]
    paused: Annotated[bool, Field(title="Paused")]
    last_heartbeat: Annotated[AwareDatetime, Field(title="Last Heartbeat")]
    vms_by_state: Annotated[dict[str, int], Field(title="Vms By State")]


class AppApiV1EnvRoutesBatchLogRequest(BaseModel):
    source: Annotated[str, Field(title="Source")]
    type: Annotated[str, Field(title="Type")]
    timestamp: Annotated[str, Field(title="Timestamp")]
    session_id: Annotated[str, Field(title="Session Id")]
    mutations: Annotated[list[BaseStructuredRunLog], Field(title="Mutations")]
    count: Annotated[int, Field(title="Count")]


class AppApiV1EnvRoutesUpdateSimulatorRequest(BaseModel):
    name: Annotated[str | None, Field(title="Name")] = None
    url: Annotated[str | None, Field(title="Url")] = None
    description: Annotated[str | None, Field(title="Description")] = None
    imgUrl: Annotated[str | None, Field(title="Imgurl")] = None
    config: SimulatorConfig | None = None
    ancestors: Annotated[list[str] | None, Field(title="Ancestors")] = None
    enabled: Annotated[bool | None, Field(title="Enabled")] = None
    simType: Annotated[str | None, Field(title="Simtype")] = None
    jobName: Annotated[str | None, Field(title="Jobname")] = None
    internalAppPort: Annotated[int | None, Field(title="Internalappport")] = None
    supportedProviders: Annotated[list[str] | None, Field(title="Supportedproviders")] = None


class AppApiV1PublicBuildRoutesCreateSnapshotRequest(BaseModel):
    service: Annotated[str | None, Field(title="Service")] = None
    git_hash: Annotated[str | None, Field(title="Git Hash")] = None
    dataset: Annotated[str | None, Field(title="Dataset")] = None
    notes: Annotated[str | None, Field(title="Notes")] = None
    flows: Annotated[str | None, Field(title="Flows")] = None
    plato_config: Annotated[str | None, Field(title="Plato Config")] = None
    internal_app_port: Annotated[int | None, Field(title="Internal App Port")] = None
    messaging_port: Annotated[int | None, Field(title="Messaging Port")] = None
    target: Annotated[str | None, Field(title="Target")] = None


class AppApiV1PublicBuildRoutesCreateSnapshotResponse(BaseModel):
    artifact_id: Annotated[str, Field(title="Artifact Id")]
    status: Annotated[str, Field(title="Status")]
    timestamp: Annotated[str, Field(title="Timestamp")]
    correlation_id: Annotated[str, Field(title="Correlation Id")]
    s3_uri: Annotated[str, Field(title="S3 Uri")]


class AppApiV1QueueRoutesDispatcherInfo(BaseModel):
    dispatcher_id: Annotated[str, Field(title="Dispatcher Id")]
    state: Annotated[str, Field(title="State")]
    paused: Annotated[bool, Field(title="Paused")]
    is_healthy: Annotated[bool, Field(title="Is Healthy")]


class AppApiV1SimulatorRoutesUpdateSimulatorRequest(BaseModel):
    url: Annotated[str | None, Field(title="Url")] = None
    description: Annotated[str | None, Field(title="Description")] = None
    img_url: Annotated[str | None, Field(title="Img Url")] = None
    enabled: Annotated[bool | None, Field(title="Enabled")] = None
    internal_app_port: Annotated[int | None, Field(title="Internal App Port")] = None
    cookies: Annotated[list[ChromeCookie] | None, Field(title="Cookies")] = None
    authentication: Authentication | None = None
    default_start_path: Annotated[str | None, Field(title="Default Start Path")] = None
    base_artifact_id: Annotated[str | None, Field(title="Base Artifact Id")] = None
    env_assignees: Annotated[list[int] | None, Field(title="Env Assignees")] = None
    env_review_assignees: Annotated[list[int] | None, Field(title="Env Review Assignees")] = None
    data_assignees: Annotated[list[int] | None, Field(title="Data Assignees")] = None
    data_review_assignees: Annotated[list[int] | None, Field(title="Data Review Assignees")] = None
    data_artifact_id: Annotated[str | None, Field(title="Data Artifact Id")] = None
    notes: Annotated[str | None, Field(title="Notes")] = None
    ignore_tables: Annotated[list[str] | None, Field(title="Ignore Tables")] = None
    ignore_columns: Annotated[dict[str, list[str]] | None, Field(title="Ignore Columns")] = None
    ignore_tables_with_column_values: Annotated[
        dict[str, dict[str, list[Any]]] | None,
        Field(title="Ignore Tables With Column Values"),
    ] = None
    license: Annotated[str | None, Field(title="License")] = None
    source_code_url: Annotated[str | None, Field(title="Source Code Url")] = None
    start_url: Annotated[str | None, Field(title="Start Url")] = None


class AppApiV2SchemasSessionCreateSnapshotRequest(BaseModel):
    name: Annotated[str | None, Field(title="Name")] = None
    """
    Optional snapshot name
    """
    description: Annotated[str | None, Field(title="Description")] = None
    """
    Optional description
    """


class AppApiV2SchemasSessionCreateSnapshotResponse(BaseModel):
    results: Annotated[dict[str, CreateSnapshotResult], Field(title="Results")]


class AppApiV2SchemasSessionEvaluateRequest(BaseModel):
    value: Annotated[dict[str, Any] | None, Field(title="Value")] = None


class AppApiV2SchemasSessionEvaluateResponse(BaseModel):
    success: Annotated[bool, Field(title="Success")]
    session_id: Annotated[str, Field(title="Session Id")]
    score: Annotated[dict[str, Any] | None, Field(title="Score")] = None


class AppApiV2SchemasSessionHeartbeatResponse(BaseModel):
    success: Annotated[bool, Field(title="Success")]
    session_id: Annotated[str, Field(title="Session Id")]
    timestamp: Annotated[AwareDatetime, Field(title="Timestamp")]
    results: Annotated[dict[str, HeartbeatJobResult] | None, Field(title="Results")] = None
    """
    Results per job_id
    """


class AppApiV2SchemasSessionPublicUrlResponse(BaseModel):
    session_id: Annotated[str, Field(title="Session Id")]
    """
    Session ID
    """
    results: Annotated[dict[str, PublicUrlResult] | None, Field(title="Results")] = None
    """
    Public URL results per job_id
    """


AppApiV2SessionRoutesBatchLogRequest = AppApiV1EnvRoutesBatchLogRequest


AppSchemasEnvRequestsEvaluateRequest = AppApiV2SchemasSessionEvaluateRequest


AppSchemasEnvResponsesEvaluateResponse = ActiveSessionResponse


AppSchemasEnvResponsesHeartbeatResponse = ActiveSessionResponse


AppSchemasEnvResponsesPublicUrlResponse = ActiveSessionResponse


AppSchemasGiteaResponsesSimulatorListItemResponse = ActiveSessionResponse


class DbModelsTestCaseModelJSONSchemaDraft7(BaseModel):
    type: Annotated[str | list[str] | None, Field(title="Type")] = None
    """
    The type of the schema. Valid types are 'string', 'number', 'boolean', 'array', 'object', 'null'
    """
    properties: Annotated[
        dict[str, DbModelsTestCaseModelJSONSchemaDraft7] | None,
        Field(title="Properties"),
    ] = None
    """
    The properties of the schema. If the schema is an array, this field should be null
    """
    required: Annotated[list[str] | None, Field(title="Required")] = None
    """
    The required fields of the schema. All fields present must be required
    """
    items: Annotated[
        DbModelsTestCaseModelJSONSchemaDraft7 | list[DbModelsTestCaseModelJSONSchemaDraft7] | None,
        Field(title="Items"),
    ] = None
    """
    The items of the schema. If the schema is an array, this field is the schema of the items. If the schema is an object, this field should be null
    """
    description: Annotated[str | None, Field(title="Description")] = None
    """
    The description of the field/schema. This is a human-readable description of the schema.
    """


class ModelsScoringConfigJSONSchemaDraft7(BaseModel):
    type: Annotated[str | list[str] | None, Field(title="Type")] = None
    """
    The type of the schema. Valid types are 'string', 'number', 'boolean', 'array', 'object', 'null'
    """
    properties: Annotated[dict[str, ModelsScoringConfigJSONSchemaDraft7] | None, Field(title="Properties")] = None
    """
    The properties of the schema. If the schema is an array, this field should be null
    """
    required: Annotated[list[str] | None, Field(title="Required")] = None
    """
    The required fields of the schema. All fields present must be required
    """
    items: Annotated[
        ModelsScoringConfigJSONSchemaDraft7 | list[ModelsScoringConfigJSONSchemaDraft7] | None,
        Field(title="Items"),
    ] = None
    """
    The items of the schema. If the schema is an array, this field is the schema of the items. If the schema is an object, this field should be null
    """
    description: Annotated[str | None, Field(title="Description")] = None
    """
    The description of the field/schema. This is a human-readable description of the schema.
    """


class AnnotatorAssignmentListItem(BaseModel):
    assignment_id: Annotated[int, Field(title="Assignment Id")]
    type: AssignmentType
    stage: AssignmentStage
    simulator: SimulatorMetadata | None = None
    createdAt: Annotated[AwareDatetime, Field(title="Createdat")]
    test_case: TestCaseMetadata | None = None


class BatchCreateTestCasesRequest(BaseModel):
    test_cases: Annotated[list[BatchTestCaseInput], Field(title="Test Cases")]


class BatchCreateTestCasesResponse(BaseModel):
    results: Annotated[list[TestCaseResult], Field(title="Results")]
    total_requested: Annotated[int, Field(title="Total Requested")]
    successful: Annotated[int, Field(title="Successful")]
    failed: Annotated[int, Field(title="Failed")]


class ConnectUrlResponse(BaseModel):
    session_id: Annotated[str, Field(title="Session Id")]
    """
    Session ID
    """
    results: Annotated[dict[str, ConnectUrlResult] | None, Field(title="Results")] = None
    """
    Connect URL results per job_id
    """


class CreateCheckpointResponse(BaseModel):
    results: Annotated[dict[str, CreateCheckpointResult], Field(title="Results")]


class CreateSessionFromTask(BaseModel):
    type: Annotated[Literal["task"], Field(title="Type")] = "task"
    """
    Request type
    """
    task_id: Annotated[str, Field(title="Task Id")]
    """
    Task public ID to create session from
    """
    timeout: Annotated[int | None, Field(title="Timeout")] = 1800
    """
    VM timeout in seconds
    """
    source: RunSessionSource | None = RunSessionSource.SDK
    """
    Source of the request
    """


class CreateSessionResponse(BaseModel):
    session_id: Annotated[str, Field(title="Session Id")]
    """
    Unique session ID (use this for all operations)
    """
    envs: Annotated[list[EnvInfo], Field(title="Envs")]
    """
    List of created environments
    """


class CreateSimulatorRequest(BaseModel):
    name: Annotated[str, Field(title="Name")]
    url: Annotated[str | None, Field(title="Url")] = None
    description: Annotated[str | None, Field(title="Description")] = None
    imgUrl: Annotated[str | None, Field(title="Imgurl")] = None
    config: SimulatorConfig
    ancestors: Annotated[list[str] | None, Field(title="Ancestors")] = None
    enabled: Annotated[bool | None, Field(title="Enabled")] = False
    simType: Annotated[str, Field(title="Simtype")]
    jobName: Annotated[str | None, Field(title="Jobname")] = None
    internalAppPort: Annotated[int | None, Field(title="Internalappport")] = None
    supportedProviders: Annotated[list[str] | None, Field(title="Supportedproviders")] = None


class DispatchersResponse(BaseModel):
    total_dispatchers: Annotated[int, Field(title="Total Dispatchers")]
    dispatchers: Annotated[list[AppApiV1ClusterRoutesDispatcherInfo], Field(title="Dispatchers")]


class EnvFromResource(BaseModel):
    type: Annotated[Literal["resource"], Field(title="Type")] = "resource"
    """
    Environment type
    """
    simulator: Annotated[str, Field(title="Simulator")]
    """
    Simulator/service name
    """
    sim_config: SimConfigCompute
    """
    Compute config for blank VM (CPUs, memory, disk)
    """
    alias: Annotated[str | None, Field(title="Alias")] = None
    """
    Custom name for this environment
    """


class ExecuteCommandResponse(BaseModel):
    results: Annotated[dict[str, ExecuteCommandResult], Field(title="Results")]


class HTTPValidationError(BaseModel):
    detail: Annotated[list[ValidationError] | None, Field(title="Detail")] = None


class JobRecord(BaseModel):
    public_id: Annotated[str, Field(title="Public Id")]
    id: Annotated[int | None, Field(title="Id")] = None
    service: Annotated[str, Field(title="Service")]
    version: Annotated[str | None, Field(title="Version")] = None
    dataset: Annotated[str | None, Field(title="Dataset")] = "base"
    artifact_id: Annotated[str | None, Field(title="Artifact Id")] = None
    provider: Annotated[str | None, Field(title="Provider")] = None
    environment: Annotated[str | None, Field(title="Environment")] = None
    organization_id: Annotated[int | None, Field(title="Organization Id")] = None
    job_group_id: Annotated[str | None, Field(title="Job Group Id")] = None
    session_id: Annotated[str | None, Field(title="Session Id")] = None
    alias: Annotated[str | None, Field(title="Alias")] = None
    keepalive: Annotated[bool | None, Field(title="Keepalive")] = None
    timeout: Annotated[int | None, Field(title="Timeout")] = 1800
    status: JobStatus | None = JobStatus.created
    status_reason: Annotated[str | None, Field(title="Status Reason")] = None
    worker_id: Annotated[str | None, Field(title="Worker Id")] = None
    vm_id: Annotated[str | None, Field(title="Vm Id")] = None
    worker_private_ip: Annotated[str | None, Field(title="Worker Private Ip")] = None
    worker_public_ip: Annotated[str | None, Field(title="Worker Public Ip")] = None
    vm_gateway_ip: Annotated[str | None, Field(title="Vm Gateway Ip")] = None
    vm_private_ip: Annotated[str | None, Field(title="Vm Private Ip")] = None
    messaging_port: Annotated[int | None, Field(title="Messaging Port")] = None
    mesh_ip: Annotated[str | None, Field(title="Mesh Ip")] = None
    created_at: Annotated[AwareDatetime | None, Field(title="Created At")] = None
    updated_at: Annotated[AwareDatetime | None, Field(title="Updated At")] = None
    last_heartbeat: Annotated[AwareDatetime | None, Field(title="Last Heartbeat")] = None
    time_to_start: Annotated[float | None, Field(title="Time To Start")] = None


class QueueStatusResponse(BaseModel):
    vms_by_state: Annotated[dict[str, int], Field(title="Vms By State")]
    vms_by_state_by_worker: Annotated[dict[str, dict[str, int]], Field(title="Vms By State By Worker")]
    total_workers: Annotated[int, Field(title="Total Workers")]
    dispatchers: Annotated[list[AppApiV1QueueRoutesDispatcherInfo], Field(title="Dispatchers")]
    pending_demands: Annotated[int, Field(title="Pending Demands")]
    available_supplies: Annotated[int, Field(title="Available Supplies")]
    resource_breakdown: Annotated[list[ResourceBreakdown], Field(title="Resource Breakdown")]


class ResetEnvRequest(BaseModel):
    task: ResetEnvTask | None = None
    agent_version: Annotated[str | None, Field(title="Agent Version")] = None
    model: Annotated[str | None, Field(title="Model")] = None
    source: Annotated[str | None, Field(title="Source")] = "SDK"
    load_browser_state: Annotated[bool | None, Field(title="Load Browser State")] = False
    viewport_width: Annotated[int | None, Field(title="Viewport Width")] = None
    viewport_height: Annotated[int | None, Field(title="Viewport Height")] = None
    test_case_public_id: Annotated[str | None, Field(title="Test Case Public Id")] = None
    replayed_from_session_id: Annotated[str | None, Field(title="Replayed From Session Id")] = None
    user_id: Annotated[int | None, Field(title="User Id")] = None


class ResetSessionRequest(BaseModel):
    task_id: Annotated[int | None, Field(title="Task Id")] = None
    """
    Test case ID to link to the new session
    """
    source: RunSessionSource | None = RunSessionSource.SDK
    """
    Source of the request
    """


class ScoreWithConfigRequest(BaseModel):
    scoringConfig: BaseScoringConfig
    outputSchema: ModelsScoringConfigJSONSchemaDraft7 | None = None
    outputValue: Annotated[dict[str, Any] | None, Field(title="Outputvalue")] = None


class SessionStateResponse(BaseModel):
    session_id: Annotated[str, Field(title="Session Id")]
    results: Annotated[dict[str, SessionStateResult], Field(title="Results")]


class SimConfigDataset(BaseModel):
    compute: SimConfigCompute
    """
    Compute configuration
    """
    metadata: SimConfigMetadata
    """
    Metadata configuration
    """
    services: Annotated[dict[str, SimConfigService] | None, Field(title="Services")] = None
    """
    Services
    """
    listeners: Annotated[dict[str, SimConfigListener] | None, Field(title="Listeners")] = None
    """
    Listeners
    """


class SimulatorInfoResponse(BaseModel):
    simulator_name: Annotated[str, Field(title="Simulator Name")]
    artifacts: Annotated[list[SimulatorArtifactInfo], Field(title="Artifacts")]
    tags: Annotated[list[SimulatorTagInfo], Field(title="Tags")]


class SnapshotStatusResponse(BaseModel):
    total_instances: Annotated[int, Field(title="Total Instances")]
    total_snapshots: Annotated[int, Field(title="Total Snapshots")]
    snapshots_by_status: Annotated[dict[str, int], Field(title="Snapshots By Status")]
    instances: Annotated[list[SnapshotsByInstance], Field(title="Instances")]


class TestCaseCreateRequest(BaseModel):
    name: Annotated[str, Field(title="Name")]
    prompt: Annotated[str, Field(title="Prompt")]
    start_url: Annotated[str | None, Field(title="Start Url")] = None
    hint: Annotated[str | None, Field(title="Hint")] = None
    simulatorConfig: Annotated[dict[str, Any] | None, Field(title="Simulatorconfig")] = None
    defaultScoringConfig: BaseScoringConfig | None = None
    outputSchema: DbModelsTestCaseModelJSONSchemaDraft7 | None = None
    config: Annotated[dict[str, Any] | None, Field(title="Config")] = None
    testCaseSetId: Annotated[int | None, Field(title="Testcasesetid")] = None
    organization_id: Annotated[int | None, Field(title="Organization Id")] = None
    isSample: Annotated[bool | None, Field(title="Issample")] = False
    scoringTypes: Annotated[list[ScoringType1] | None, Field(title="Scoringtypes")] = None
    goalType: Annotated[str | None, Field(title="Goaltype")] = None
    reasoningLevel: ReasoningLevel | None = None
    skills: Annotated[list[Skills] | None, Field(title="Skills")] = None
    capabilities: Annotated[list[Capability] | None, Field(title="Capabilities")] = None
    tags: Annotated[list[str] | None, Field(title="Tags")] = None
    startPath: Annotated[str | None, Field(title="Startpath")] = None
    simulatorId: Annotated[int | None, Field(title="Simulatorid")] = None
    simulatorArtifactId: Annotated[str | None, Field(title="Simulatorartifactid")] = None
    simulatorArtifactIds: Annotated[list[str] | None, Field(title="Simulatorartifactids")] = None


class TestCaseUpdateRequest(BaseModel):
    prompt: Annotated[str | None, Field(title="Prompt")] = None
    name: Annotated[str | None, Field(title="Name")] = None
    startPath: Annotated[str | None, Field(title="Startpath")] = None
    correctOutputs: Annotated[list[Any] | None, Field(title="Correctoutputs")] = None
    defaultScoringConfig: BaseScoringConfig | None = None
    outputSchema: DbModelsTestCaseModelJSONSchemaDraft7 | None = None
    simulatorConfig: Annotated[dict[str, Any] | None, Field(title="Simulatorconfig")] = None
    scoringTypes: Annotated[list[ScoringType1] | None, Field(title="Scoringtypes")] = None
    hint: Annotated[str | None, Field(title="Hint")] = None
    organization_id: Annotated[int | None, Field(title="Organization Id")] = None
    goalType: Annotated[str | None, Field(title="Goaltype")] = None
    reasoningLevel: ReasoningLevel | None = None
    skills: Annotated[list[Skills] | None, Field(title="Skills")] = None
    capabilities: Annotated[list[Capability] | None, Field(title="Capabilities")] = None
    tags: Annotated[list[str] | None, Field(title="Tags")] = None
    simulatorArtifactId: Annotated[str | None, Field(title="Simulatorartifactid")] = None
    simulatorArtifactIds: Annotated[list[str] | None, Field(title="Simulatorartifactids")] = None
    mutationIgnoreConfig: DatabaseIgnoreConfig | None = None


class VMManagementRequest(BaseModel):
    service: Annotated[str | None, Field(title="Service")] = None
    """
    Service name
    """
    dataset: Annotated[str, Field(title="Dataset")]
    """
    Dataset name
    """
    plato_dataset_config: SimConfigDataset
    """
    Dataset config for templating
    """
    request_timeout: Annotated[int | None, Field(ge=60, le=1200, title="Request Timeout")] = 600
    """
    Request timeout in seconds
    """


class WaitForReadyResponse(BaseModel):
    ready: Annotated[bool, Field(title="Ready")]
    """
    Whether all jobs are ready
    """
    session_id: Annotated[str, Field(title="Session Id")]
    """
    Session ID
    """
    results: Annotated[dict[str, WaitForReadyResult] | None, Field(title="Results")] = None
    """
    Results per job_id
    """
    context: SessionContext | None = None
    """
    Session context when ready (null if not ready)
    """


class Envs(RootModel[EnvFromSimulator | EnvFromArtifact | EnvFromResource]):
    root: Annotated[
        EnvFromSimulator | EnvFromArtifact | EnvFromResource,
        Field(discriminator="type"),
    ]


class CreateSessionFromEnvs(BaseModel):
    type: Annotated[Literal["envs"], Field(title="Type")] = "envs"
    """
    Request type
    """
    envs: Annotated[list[Envs], Field(title="Envs")]
    """
    List of environments to create. Each gets a job.
    """
    timeout: Annotated[int | None, Field(title="Timeout")] = 1800
    """
    VM timeout in seconds
    """
    source: RunSessionSource | None = RunSessionSource.SDK
    """
    Source of the request
    """
    agent_artifact_id: Annotated[str | None, Field(title="Agent Artifact Id")] = None
    """
    Agent artifact ID to associate with the session (e.g., chronos package)
    """


class CreateVMRequest(BaseModel):
    service: Annotated[str | None, Field(title="Service")] = None
    """
    Service name
    """
    dataset: Annotated[str, Field(title="Dataset")]
    """
    Dataset name
    """
    plato_dataset_config: SimConfigDataset
    """
    Dataset config for templating
    """
    request_timeout: Annotated[int | None, Field(ge=60, le=1200, title="Request Timeout")] = 600
    """
    Request timeout in seconds
    """
    artifact_id: Annotated[str | None, Field(title="Artifact Id")] = None
    """
    Artifact ID for the VM
    """
    alias: Annotated[str | None, Field(title="Alias")] = None
    """
    Optional alias for the VM
    """
    sandbox_timeout: Annotated[int | None, Field(ge=600, le=7200, title="Sandbox Timeout")] = 7200
    """
    Max amount of time the sandbox will be available for
    """


class JobListResponse(BaseModel):
    jobs: Annotated[list[JobRecord], Field(title="Jobs")]
    total_count: Annotated[int, Field(title="Total Count")]
    page: Annotated[int, Field(title="Page")]
    page_size: Annotated[int, Field(title="Page Size")]
    has_more_pages: Annotated[bool, Field(title="Has More Pages")]


class SetupSandboxRequest(BaseModel):
    service: Annotated[str | None, Field(title="Service")] = None
    """
    Service name
    """
    dataset: Annotated[str, Field(title="Dataset")]
    """
    Dataset name
    """
    plato_dataset_config: SimConfigDataset
    """
    Dataset config for templating
    """
    request_timeout: Annotated[int | None, Field(ge=60, le=1200, title="Request Timeout")] = 600
    """
    Request timeout in seconds
    """
    ssh_password: Annotated[str | None, Field(title="Ssh Password")] = None
    """
    SSH password for plato user (optional)
    """
    ssh_public_key: Annotated[str | None, Field(title="Ssh Public Key")] = None
    """
    SSH public key to add to plato user's authorized_keys (optional)
    """


DbModelsTestCaseModelJSONSchemaDraft7.model_rebuild()
ModelsScoringConfigJSONSchemaDraft7.model_rebuild()
