# OCR 文档修复工作流程

你正在修复文件: `{file_path}`

## 工作流程

### 第一步：创建安全快照
在进行任何修改之前，**必须**先创建 Git 快照：
```
调用 git_checkpoint(working_dir="文档所在目录", message="修复前快照")
```

### 第二步：运行诊断
调用 `analyze_document("{file_path}")` 获取完整诊断报告。

### 第三步：按优先级修复问题

**修复顺序（从高到低）：**
1. **未闭合的公式** - 这会破坏整个文档渲染
2. **标题层级错误** - 影响文档结构
3. **公式语法错误** - 影响数学内容显示
4. **OCR 噪点** - 影响可读性
5. **图片链接** - 影响资源完整性

### 第四步：验证修改
每完成一批修改后：
```
调用 git_diff_summary(working_dir="文档所在目录")
```
确认修改符合预期。

### 第五步：提交或回滚
- 如果修改正确：`git_checkpoint(message="修复完成: 描述修改内容")`
- 如果需要撤销：`git_rollback()`

## 重要原则

1. **小步快跑**：每次只修复一类问题，然后验证
2. **保持原意**：修复时不要改变文档的原始含义
3. **谨慎处理公式**：LaTeX 公式修复需要特别小心
4. **记录修改**：每次 checkpoint 都写清楚修改了什么
