HOME			= .

# Comment out the next line to ignore configuration errors
config_diagnostics = 1

####################################################################
[ ca ]
default_ca	= CA_default		# The default ca section

####################################################################
[ CA_default ]

dir		= .		# Mozilla using current directory as the CA location
certs		= $dir		# Where the issued certs are kept
crl_dir		= $dir		# Where the issued crl are kept
database	= $dir/index.txt	# database index file.
unique_subject	= no			# Mozilla CA has issued multiple certs with the same subject
new_certs_dir	= $dir		# default place for new certs.

certificate	= $dir/test.crt 	# The CA certificate
serial		= $dir/serial 		# The current serial number
crlnumber	= $dir/crlnumber	# the current crl number
					# must be commented out to leave a V1 CRL
crl		= $dir/crl.pem 		# The current CRL
private_key	= simple_example   # The private key

x509_extensions	= mozilla_amo_intermediate_ca		# The extensions to add to the cert

# Comment out the following two lines for the "traditional"
# (and highly broken) format.
name_opt 	= ca_default		# Subject Name options
cert_opt 	= ca_default		# Certificate field options

# default_days	= 1825
default_startdate	= 20250903000000Z	# YYYYMMDDHHMMSSZ
default_enddate	= 20300903000000Z	# YYYYMMDDHHMMSSZ
default_crl_days= 30			# how long before next CRL
default_md	= sha384		# use public key default MD
preserve	= no			# keep passed DN ordering

policy		= policy_anything	# Mozilla policy making everything optional

[ policy_anything ]
countryName		= optional
stateOrProvinceName	= optional
localityName		= optional
organizationName	= optional
organizationalUnitName	= optional
commonName		= supplied
emailAddress		= optional

####################################################################
[ req ]
default_bits		= 2048
default_keyfile 	= privkey.pem
distinguished_name	= req_mozilla_distinguished_name
attributes		= req_attributes
x509_extensions	= mozilla_amo_intermediate_ca	# The extensions to add to the self signed cert

# Passwords for private keys if not present they will be prompted for
# input_password = secret
# output_password = secret

string_mask = nombstr		# Mozilla default of non-UTF, printable strings

[ req_attributes ]
challengePassword		= A challenge password
challengePassword_min		= 4
challengePassword_max		= 20

unstructuredName		= An optional company name

[ mozilla_amo_intermediate_ca ]
basicConstraints	= CA:true
keyUsage		= critical,keyCertSign,cRLSign
extendedKeyUsage	= critical,codeSigning
subjectKeyIdentifier	= hash
authorityKeyIdentifier	= keyid:always,issuer:always
nsCaRevocationUrl	= http://addons.mozilla.org/ca/crl.pem
nameConstraints		= @mozilla_amo_name_constraints

[ mozilla_amo_name_constraints ]
excluded;DNS.0		= .content-signature.mozilla.org
excluded;DNS.1		= content-signature.mozilla.org

[ req_mozilla_distinguished_name ]
commonName		= Common Name
commonName_max		= 64
emailAddress		= foxsec@mozilla.org