Metadata-Version: 2.1
Name: alchetools
Version: 0.1.3
Summary: A lightweight CRUD toolkit built on SQLAlchemy 2.x.
Home-page: https://github.com/yourusername/alchetools
Author: LiuZongxin
Author-email: Liu_zongxin@yeah.net
License: UNKNOWN
Platform: UNKNOWN
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Requires-Dist: SQLAlchemy (>=2.0.29)

# alchetools

ğŸš€ ä¸€ä¸ªåŸºäº SQLAlchemy çš„è½»é‡çº§ CRUD å·¥å…·åº“ï¼Œå°è£…äº†å¸¸ç”¨çš„å¢åˆ æ”¹æŸ¥ã€åˆ†é¡µã€è¿‡æ»¤ã€æ‰¹é‡æ“ä½œç­‰åŠŸèƒ½ï¼Œå¸®åŠ©ä½ æ›´å¿«é€Ÿåœ°æ„å»ºæ•°æ®åº“è®¿é—®å±‚ã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- âœ… é€šç”¨ `save_or_update`ï¼ˆæ–°å¢æˆ–æ›´æ–°è®°å½•ï¼‰
- âœ… æ”¯æŒæ‰¹é‡æ’å…¥/æ›´æ–°
- âœ… åˆ†é¡µæŸ¥è¯¢ä¸æ€»æ•°ç»Ÿè®¡
- âœ… è‡ªåŠ¨æ ¼å¼åŒ–æ—¶é—´å­—æ®µä¸ºå­—ç¬¦ä¸²
- âœ… æ”¯æŒåŠ¨æ€æ¡ä»¶è¿‡æ»¤ï¼ˆç²¾ç¡® / æ¨¡ç³Šï¼‰
- âœ… æ”¯æŒåŠ¨æ€æ’åºï¼ˆasc / descï¼‰

---

## ğŸ“¦ å®‰è£…ä¾èµ–

```bash
pip install sqlalchemy
```

---

## ğŸ“ ä½¿ç”¨è¯´æ˜

### 1. æ–°å¢æˆ–æ›´æ–°ä¸€æ¡è®°å½•

```python
from alchetools import DbTools

model_instance = DbTools.save_or_update(
    session=session,
    request_body={"id": 1, "name": "Tom"},
    model=UserModel  # æ›¿æ¢ä¸ºä½ çš„ SQLAlchemy æ¨¡å‹ç±»
)
```

---

### 2. æ‰¹é‡æ’å…¥æˆ–æ›´æ–°è®°å½•

```python
from alchetools import DbTools

data = [{"id": 1, "name": "Tom"}, {"id": 2, "name": "Jerry"}]

instances = DbTools.bulk_insert(session, data, UserModel)
```

---

### 3. åˆ†é¡µæŸ¥è¯¢æ•°æ®

```python
from alchetools import DbTools

query = session.query(UserModel)
result = DbTools.find_list_page(query, page_size=10, page_index=1)
```

---

### 4. æŸ¥è¯¢å…¨éƒ¨æ•°æ®ï¼ˆå¸¦æ—¶é—´æ ¼å¼åŒ–ï¼‰

```python
from alchetools import DbTools

records = DbTools.query_all(session.query(UserModel))
```

---

### 5. åº”ç”¨æ¡ä»¶è¿‡æ»¤

```python
from alchetools import DbTools

filters = {
    "name": {"value": "Tom", "is_fuzzy": True},
    "age": {"value": 18}
}

filtered_query = DbTools.apply_filters(session.query(UserModel), UserModel, json.dumps(filters))
```

---

### 6. è·å–æ’åºåçš„æŸ¥è¯¢å¯¹è±¡

```python
sorted_query = get_sorted_query(session, UserModel, sort_by="created_at", order="desc")
```

---

## ğŸ›  å…¬å…±æ–¹æ³•åˆ—è¡¨

| æ–¹æ³•å                          | è¯´æ˜                  |
|------------------------------|---------------------|
| `save_or_update`               | æ–°å¢æˆ–æ ¹æ®ä¸»é”®æ›´æ–°è®°å½•         |
| `bulk_insert`                | æ‰¹é‡æ–°å¢æˆ–æ›´æ–°è®°å½•           |
| `query_all`                   | æŸ¥è¯¢æ‰€æœ‰è®°å½•å¹¶æ ¼å¼åŒ–æ—¶é—´        |
| `find_list_page`             | åˆ†é¡µæŸ¥è¯¢                |
| `pagination_function`        | åˆ†é¡µæŸ¥è¯¢ï¼ˆå¦ä¸€ä¸ªåˆ«åï¼‰         |
| `apply_filters`              | åŠ¨æ€æ„å»º SQL æŸ¥è¯¢æ¡ä»¶       |
| `get_sorted_query`           | è·å–æŒ‰å­—æ®µæ’åºçš„æŸ¥è¯¢å¯¹è±¡        |
| `format_model_data`          | å°† SQLAlchemy æ¨¡å‹è½¬ä¸ºå­—å…¸ |
| `convert_timestamps_in_dict` | æ ¼å¼åŒ–æ—¶é—´æˆ³/æ—¶é—´å­—æ®µä¸ºå­—ç¬¦ä¸²     |

---

## ğŸ§ª æ—¥å¿—æ”¯æŒ

 `setup_logger()` ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ ï¼š

```python
# ç¤ºä¾‹ï¼šutils/logger.py
from alchetools.uilts import setup_logger
setup_logger().info("æ­£å¸¸æ—¥å¿—")
setup_logger().error("é”™è¯¯æ—¥å¿—")
setup_logger().warning("è­¦å‘Šæ—¥å¿—")
```

---

## ğŸ” å…¼å®¹æ€§è¯´æ˜

- âœ… æ”¯æŒ SQLAlchemy 2.0.29
- âœ… Python 3.8 åŠä»¥ä¸Šç‰ˆæœ¬

---

## ğŸ“„ License

MIT License. è‡ªç”±ç”¨äºä¸ªäººæˆ–å•†ä¸šé¡¹ç›®ã€‚

---

## ğŸ¤ æ¬¢è¿è´¡çŒ®

æ¬¢è¿æäº¤ issue æˆ– PRï¼Œä¸€èµ·è®© `alchetools` æ›´å¥½ç”¨ï¼

