(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[585],{60744:function(e,r,t){Promise.resolve().then(t.bind(t,59685))},59685:function(e,r,t){"use strict";t.d(r,{ReportViewClient:function(){return N}});var n=t(57437),o=t(2265),s=t(16463),a=t(23782),l=t(67601),c=t(99299),i=t(81917),d=t(26178),h=t(43237),u=t(42926),g=t(69843),v=t(38891),E=t(75858),m=t(12914),p=t(34140),D=t(28768),x=t(65623),f=t(69419),b=t(20357);function N(){var e;let r=(0,s.useSearchParams)(),t=(0,s.useRouter)(),N=r.get("path"),[L,k]=(0,o.useState)(""),[y,A]=(0,o.useState)(!0),[_,C]=(0,o.useState)(null),w=(null===(e=b.env.NEXT_PUBLIC_TOPAZ_API_BASE)||void 0===e?void 0:e.replace(/\/$/,""))||"";(0,o.useEffect)(()=>{if(!N){C("No report path provided"),A(!1);return}(async()=>{try{A(!0),C(null);let e="".concat(w,"/api/reports/view?path=").concat(encodeURIComponent(N));f.k.debug("Fetching report from: {}",e);let r=await fetch(e);if(!r.ok){let e=await r.text();throw Error("Failed to load report: ".concat(r.status," ").concat(e))}let t=await r.text();k(t)}catch(e){f.k.error("Error loading report: {}",e),C(e instanceof Error?e.message:"Failed to load report")}finally{A(!1)}})()},[N,w]);let R=/<(span[^>]*(class|style)=["'][^"']*["'][^>]*>|details|summary)/.test(L);return y?(0,n.jsx)("div",{className:"min-h-screen bg-white dark:bg-zinc-950 flex items-center justify-center",children:(0,n.jsx)("div",{className:"text-zinc-600 dark:text-zinc-400",children:"Loading report..."})}):_?(0,n.jsx)("div",{className:"min-h-screen bg-white dark:bg-zinc-950 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-red-600 dark:text-red-400 mb-4",children:_}),(0,n.jsx)("button",{onClick:()=>t.back(),className:"px-4 py-2 bg-zinc-200 dark:bg-zinc-800 rounded-md hover:bg-zinc-300 dark:hover:bg-zinc-700",children:"Go Back"})]})}):(0,n.jsx)("div",{className:"min-h-screen bg-white dark:bg-zinc-950",children:(0,n.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)("button",{onClick:()=>t.back(),className:"text-sm text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100",children:"← Back"})}),(0,n.jsx)("div",{className:"overflow-auto rounded-md p-6 bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 prose prose-sm max-w-none dark:prose-invert",children:(0,n.jsx)(a.UG,{remarkPlugins:[l.Z],rehypePlugins:[...R?[c.Z]:[],[i.Z,{languages:{javascript:d.Z,typescript:h.Z,json:u.Z,python:g.Z,bash:v.Z,shell:E.Z,yaml:m.Z,markdown:p.Z,xml:D.Z,html:D.Z,css:x.Z},ignoreMissing:!0}]],components:{p:e=>{let{children:r}=e;return(0,n.jsx)("p",{className:"whitespace-pre-line leading-normal my-1",children:r})},a:e=>{let{href:r,children:t,...o}=e,s=r&&r.startsWith("/api/")&&w?"".concat(w).concat(r):r;return(0,n.jsx)("a",{href:s,...o,className:"text-[hsl(var(--accent))] hover:underline",children:t})}},children:L})})]})})}},69419:function(e,r,t){"use strict";t.d(r,{k:function(){return l}});var n,o,s=t(20357);(n=o||(o={}))[n.ERROR=0]="ERROR",n[n.WARN=1]="WARN",n[n.INFO=2]="INFO",n[n.DEBUG=3]="DEBUG",n[n.TRACE=4]="TRACE";class a{shouldLog(e){return this.isEnabled&&e<=this.level}error(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];this.shouldLog(0)&&console.error("\uD83D\uDD34 [ERROR] ".concat(e),...t)}warn(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];this.shouldLog(1)&&console.warn("\uD83D\uDFE1 [WARN] ".concat(e),...t)}info(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];this.shouldLog(2)&&console.log("\uD83D\uDD35 [INFO] ".concat(e),...t)}debug(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];this.shouldLog(3)&&console.log("\uD83D\uDFE2 [DEBUG] ".concat(e),...t)}trace(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];this.shouldLog(4)&&console.log("⚪ [TRACE] ".concat(e),...t)}api(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];this.shouldLog(3)&&console.log("\uD83C\uDF10 [API] ".concat(e),...t)}event(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];this.shouldLog(2)&&console.log("\uD83D\uDCE1 [EVENT] ".concat(e),...t)}state(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];this.shouldLog(2)&&console.log("\uD83D\uDCCA [STATE] ".concat(e),...t)}user(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];this.shouldLog(2)&&console.log("\uD83D\uDC64 [USER] ".concat(e),...t)}assistant(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];this.shouldLog(2)&&console.log("\uD83E\uDD16 [ASSISTANT] ".concat(e),...t)}constructor(){var e;let r=null===(e=s.env.NEXT_PUBLIC_LOG_LEVEL)||void 0===e?void 0:e.toUpperCase();this.level=r&&o[r]||2,this.isEnabled="true"===s.env.NEXT_PUBLIC_DEBUG||void 0!==s.env.NEXT_PUBLIC_LOG_LEVEL,console.log("\uD83D\uDD27 Logger initialized:",{level:this.level,isEnabled:this.isEnabled,nodeEnv:"production",logLevel:s.env.NEXT_PUBLIC_LOG_LEVEL,debug:s.env.NEXT_PUBLIC_DEBUG})}}let l=new a}},function(e){e.O(0,[49,971,23,744],function(){return e(e.s=60744)}),_N_E=e.O()}]);