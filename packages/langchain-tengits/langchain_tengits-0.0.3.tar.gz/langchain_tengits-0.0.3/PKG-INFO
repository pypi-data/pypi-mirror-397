Metadata-Version: 2.4
Name: langchain-tengits
Version: 0.0.3
Project-URL: Documentation, https://github.com/U.N. Owen/langchain-tengits#readme
Project-URL: Issues, https://github.com/U.N. Owen/langchain-tengits/issues
Project-URL: Source, https://github.com/U.N. Owen/langchain-tengits
Author-email: Muted Code <chenshiwu@tengits.com>
License-Expression: MIT
License-File: LICENSE.txt
Classifier: Development Status :: 4 - Beta
Classifier: Programming Language :: Python
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: Implementation :: CPython
Classifier: Programming Language :: Python :: Implementation :: PyPy
Requires-Python: >=3.12
Description-Content-Type: text/markdown

# langchain-tengits

[![PyPI - Version](https://img.shields.io/pypi/v/langchain-tengits.svg)](https://pypi.org/project/langchain-tengits)
[![PyPI - Python Version](https://img.shields.io/pypi/pyversions/langchain-tengits.svg)](https://pypi.org/project/langchain-tengits)

`langchain-tengits` æ˜¯ä¸€ä¸ªç”¨äºé›†æˆå¤šç§å¤§è¯­è¨€æ¨¡å‹å’ŒåµŒå…¥æ¨¡å‹çš„ LangChain ç¤¾åŒºåŒ…ï¼Œæ”¯æŒå¤šç§æ¨¡å‹æœåŠ¡å•†ï¼Œæä¾›ç»Ÿä¸€çš„ API æ¥å£ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¤– **å¤šæ¨¡å‹æ”¯æŒ**: æ”¯æŒå¤šç§å¤§è¯­è¨€æ¨¡å‹å’ŒåµŒå…¥æ¨¡å‹
- ğŸŒ **å¤šæœåŠ¡å•†é›†æˆ**: æ”¯æŒ OpenAIã€é˜¿é‡Œç™¾ç‚¼ã€DeepSeekã€SiliconFlowã€ç™¾åº¦åƒå¸†ã€Moonshotã€æ™ºè°±ã€Ollamaã€ç«å±±å¼•æ“ç­‰
- ğŸ”„ **åŒæ­¥/å¼‚æ­¥è°ƒç”¨**: æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥è°ƒç”¨æ–¹å¼
- ğŸ“¡ **æµå¼è¾“å‡º**: æ”¯æŒæµå¼å“åº”è¾“å‡º
- âš™ï¸ **çµæ´»é…ç½®**: æ”¯æŒè‡ªå®šä¹‰æ¨¡å‹é…ç½®å’Œå‚æ•°
- ğŸ”§ **LangChain é›†æˆ**: å®Œå…¨å…¼å®¹ LangChain ç”Ÿæ€ç³»ç»Ÿ

## Table of Contents

- [Installation](#installation)
- [Quick Start](#quick-start)
- [API Reference](#api-reference)
  - [èŠå¤©æ¨¡å‹ (TengitsChatClient)](#èŠå¤©æ¨¡å‹-tengitschatclient)
  - [åµŒå…¥æ¨¡å‹ (TengitsEmbeddingClient)](#åµŒå…¥æ¨¡å‹-tengitsembeddingclient)
- [Supported Providers](#supported-providers)
- [Configuration](#configuration)
- [å‘å¸ƒæµç¨‹](#å‘å¸ƒæµç¨‹)
- [License](#license)

## Installation

```console
pip install langchain-tengits
```

## Quick Start

### èŠå¤©æ¨¡å‹ä½¿ç”¨ç¤ºä¾‹

```python
import asyncio
from langchain_tengits.chat_tengits import TengitsChatClient

# åˆ›å»ºèŠå¤©å®¢æˆ·ç«¯
model = TengitsChatClient(
    server_name='ali_bailian',  # æœåŠ¡å•†åç§°
    model_name='qwen-plus',     # æ¨¡å‹åç§°
    base_url="http://localhost:8000",  # åç«¯æœåŠ¡åœ°å€
    config={
        "extra_body": {"enable_thinking": True}  # é¢å¤–é…ç½®
    },
    client_timeout=30.0  # è¯·æ±‚è¶…æ—¶æ—¶é—´
)

# åŒæ­¥è°ƒç”¨
def test_sync():
    response = model.invoke([
        {"role": "system", "content": "You are a helpful assistant."},
        {"role": "user", "content": "ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹è‡ªå·±"}
    ])
    print("åŒæ­¥å“åº”:", response.content)

# æµå¼è¾“å‡º
def test_stream():
    print("æµå¼è¾“å‡º:")
    for chunk in model.stream([
        {"role": "system", "content": "You are a helpful assistant."},
        {"role": "user", "content": "è¯·ç”¨3å¥è¯ä»‹ç»äººå·¥æ™ºèƒ½"}
    ]):
        print(chunk.content, end="", flush=True)
    print()

# å¼‚æ­¥æµå¼è¾“å‡º
async def test_async():
    print("å¼‚æ­¥æµå¼è¾“å‡º:")
    async for chunk in model.astream([
        {"role": "system", "content": "You are a helpful assistant."},
        {"role": "user", "content": "è¯·è§£é‡Šä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ "}
    ]):
        print(chunk.content, end="", flush=True)
    print()

# æ‰§è¡Œæµ‹è¯•
test_sync()
test_stream()
asyncio.run(test_async())
```

### åµŒå…¥æ¨¡å‹ä½¿ç”¨ç¤ºä¾‹

```python
from langchain_tengits.embedding_tengits import TengitsEmbeddingClient

# åˆ›å»ºåµŒå…¥å®¢æˆ·ç«¯
embedding_model = TengitsEmbeddingClient(
    model_name='BAAI/bge-m3',     # æ¨¡å‹åç§°
    server_name='siliconflow',    # æœåŠ¡å•†åç§°
    base_url="http://localhost:8000",  # åç«¯æœåŠ¡åœ°å€
    client_timout=30.0  # è¯·æ±‚è¶…æ—¶æ—¶é—´
)

# å•æ–‡æœ¬åµŒå…¥
def test_single_embedding():
    text = "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡æœ¬"
    embedding = embedding_model.embed_query(text)
    print(f"æ–‡æœ¬: {text}")
    print(f"åµŒå…¥å‘é‡ç»´åº¦: {len(embedding)}")
    print(f"åµŒå…¥å‘é‡å‰5ä¸ªå€¼: {embedding[:5]}")

# æ‰¹é‡æ–‡æœ¬åµŒå…¥
def test_batch_embedding():
    texts = [
        "äººå·¥æ™ºèƒ½æ˜¯æœªæ¥çš„å‘å±•æ–¹å‘",
        "æœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„å­é¢†åŸŸ",
        "æ·±åº¦å­¦ä¹ æ¨åŠ¨äº†AIçš„å¿«é€Ÿå‘å±•"
    ]
    embeddings = embedding_model.embed_documents(texts)
    print(f"æ‰¹é‡å¤„ç† {len(texts)} ä¸ªæ–‡æœ¬")
    for i, embedding in enumerate(embeddings):
        print(f"æ–‡æœ¬ {i+1} å‘é‡ç»´åº¦: {len(embedding)}")

# æ‰§è¡Œæµ‹è¯•
test_single_embedding()
test_batch_embedding()
```

## API Reference

### èŠå¤©æ¨¡å‹ (TengitsChatClient)

#### å‚æ•°è¯´æ˜

- `base_url` (str, å¿…éœ€): åç«¯æœåŠ¡åœ°å€
- `server_name` (str, å¿…éœ€): æ¨¡å‹æœåŠ¡å•†åç§°
- `model_name` (str, å¿…éœ€): æ¨¡å‹åç§°
- `model_id` (int, å¯é€‰): æ¨¡å‹IDï¼Œå¦‚æœä¸æä¾›ä¼šè‡ªåŠ¨è·å–
- `config` (dict, å¯é€‰): æ¨¡å‹é…ç½®å‚æ•°
- `client_timeout` (float, å¯é€‰): è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰

#### ä¸»è¦æ–¹æ³•

- `invoke(messages)`: åŒæ­¥è°ƒç”¨ï¼Œè¿”å›å®Œæ•´å“åº”
- `stream(messages)`: åŒæ­¥æµå¼è°ƒç”¨ï¼Œè¿”å›ç”Ÿæˆå™¨
- `astream(messages)`: å¼‚æ­¥æµå¼è°ƒç”¨ï¼Œè¿”å›å¼‚æ­¥ç”Ÿæˆå™¨

### åµŒå…¥æ¨¡å‹ (TengitsEmbeddingClient)

#### å‚æ•°è¯´æ˜

- `base_url` (str, å¿…éœ€): åç«¯æœåŠ¡åœ°å€
- `server_name` (str, å¿…éœ€): æ¨¡å‹æœåŠ¡å•†åç§°
- `model_name` (str, å¿…éœ€): æ¨¡å‹åç§°
- `client_timout` (float, å¯é€‰): è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤30ç§’

#### ä¸»è¦æ–¹æ³•

- `embed_query(text)`: è·å–å•ä¸ªæ–‡æœ¬çš„åµŒå…¥å‘é‡
- `embed_documents(texts)`: æ‰¹é‡è·å–å¤šä¸ªæ–‡æœ¬çš„åµŒå…¥å‘é‡

## Supported Providers

ç›®å‰æ”¯æŒçš„æ¨¡å‹æœåŠ¡å•†åŒ…æ‹¬ï¼š

- `openai`: OpenAI å®˜æ–¹API
- `ali_bailian`: é˜¿é‡Œäº‘ç™¾ç‚¼
- `deepseek`: DeepSeek
- `siliconflow`: SiliconFlow
- `baidu_qianfan`: ç™¾åº¦åƒå¸†
- `moonshot`: Moonshot AI
- `zhipu`: æ™ºè°±AI
- `ollama`: Ollama
- `volcengine`: ç«å±±å¼•æ“

## Configuration

### èŠå¤©æ¨¡å‹é…ç½®ç¤ºä¾‹

```python
config = {
    "stream": True,  # å¯ç”¨æµå¼è¾“å‡º
    "temperature": 0.7,  # æ¸©åº¦å‚æ•°ï¼Œæ§åˆ¶éšæœºæ€§
    "max_tokens": 1000,  # æœ€å¤§è¾“å‡ºtokenæ•°
    "extra_body": {  # é¢å¤–è¯·æ±‚ä½“å‚æ•°
        "enable_thinking": True,  # å¯ç”¨æ€è€ƒæ¨¡å¼
        # å…¶ä»–è‡ªå®šä¹‰å‚æ•°...
    },
    "extra_headers": {  # é¢å¤–HTTPå¤´
        "X-Custom-Header": "value"
    }
}
```

### é”™è¯¯å¤„ç†

```python
try:
    response = model.invoke(messages)
    print(response.content)
except Exception as e:
    print(f"è°ƒç”¨å¤±è´¥: {e}")
```

## å‘å¸ƒæµç¨‹

1. æ„å»ºåŒ…ï¼š
   ```bash
   hatch build
   ```

2. å‘å¸ƒåˆ°æµ‹è¯•PyPIï¼š
   ```bash
   hatch publish -r test -u __token__
   ```
   ç„¶åè¾“å…¥ TestPyPI çš„è´¦å· token

3. ä»æµ‹è¯•PyPIå®‰è£…ï¼š
   ```bash
   pip install -i https://test.pypi.org/simple/ langchain-tengits
   ```

## License

`langchain-tengits` is distributed under the terms of the [MIT](https://spdx.org/licenses/MIT.html) license.
