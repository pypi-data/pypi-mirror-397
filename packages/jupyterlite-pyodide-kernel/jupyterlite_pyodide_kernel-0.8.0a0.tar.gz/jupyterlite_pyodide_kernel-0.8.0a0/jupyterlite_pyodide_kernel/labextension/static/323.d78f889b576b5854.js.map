{"version":3,"file":"323.d78f889b576b5854.js?v=d78f889b576b5854","sources":["webpack://@jupyterlite/pyodide-kernel-extension/../pyodide-kernel/lib/kernel.js","webpack://@jupyterlite/pyodide-kernel-extension/../pyodide-kernel/lib/worker.js"],"sourcesContent":["import coincident from 'coincident';\nimport { wrap } from 'comlink';\nimport { PromiseDelegate } from '@lumino/coreutils';\nimport { PageConfig } from '@jupyterlab/coreutils';\nimport { BaseKernel } from '@jupyterlite/services';\nimport { allJSONUrl, pipliteWheelUrl } from './_pypi';\nimport { DriveContentsProcessor } from '@jupyterlite/services';\n/**\n * A kernel that executes Python code with Pyodide.\n */\nexport class PyodideKernel extends BaseKernel {\n    /**\n     * Instantiate a new PyodideKernel\n     *\n     * @param options The instantiation options for a new PyodideKernel\n     */\n    constructor(options) {\n        super(options);\n        this._ready = new PromiseDelegate();\n        this._inputDelegate = new PromiseDelegate();\n        this._worker = this.initWorker(options);\n        this._remoteKernel = this.initRemote(options);\n        this._contentsManager = options.contentsManager;\n        this._logger = options.logger || (() => { });\n    }\n    /**\n     * Load the worker.\n     *\n     * ### Note\n     *\n     * Subclasses must implement this typographically almost _exactly_ for\n     * webpack to find it.\n     */\n    initWorker(options) {\n        if (crossOriginIsolated) {\n            return new Worker(new URL('./coincident.worker.js', import.meta.url), {\n                type: 'module',\n            });\n        }\n        else {\n            return new Worker(new URL('./comlink.worker.js', import.meta.url), {\n                type: 'module',\n            });\n        }\n    }\n    /**\n     * Initialize the remote kernel.\n     * Use coincident if crossOriginIsolated, comlink otherwise\n     * See the two following issues for more context:\n     *  - https://github.com/jupyterlite/jupyterlite/issues/1424\n     *  - https://github.com/jupyterlite/pyodide-kernel/pull/126\n     */\n    initRemote(options) {\n        let remote;\n        if (crossOriginIsolated) {\n            remote = coincident(this._worker);\n            remote.processLogMessage = this._processLogMessage.bind(this);\n            remote.processWorkerMessage = this._processWorkerMessage.bind(this);\n            // The coincident worker uses its own filesystem API:\n            remote.processDriveRequest = async (data) => {\n                if (!DriveContentsProcessor) {\n                    throw new Error('File system calls over Atomics.wait is only supported with jupyterlite>=0.4.0a3');\n                }\n                if (this._contentsProcessor === undefined) {\n                    this._contentsProcessor = new DriveContentsProcessor({\n                        contentsManager: this._contentsManager,\n                    });\n                }\n                return await this._contentsProcessor.processDriveRequest(data);\n            };\n            remote.processStdinRequest =\n                async (content) => {\n                    const msg = {\n                        type: 'input_request',\n                        content,\n                    };\n                    this._processWorkerMessage(msg);\n                    this._inputDelegate = new PromiseDelegate();\n                    return await this._inputDelegate.promise;\n                };\n        }\n        else {\n            remote = wrap(this._worker);\n            // we use the normal postMessage mechanism in the case of comlink\n            this._worker.addEventListener('message', (ev) => {\n                var _a, _b;\n                if (typeof ((_a = ev === null || ev === void 0 ? void 0 : ev.data) === null || _a === void 0 ? void 0 : _a._kernelMessage) !== 'undefined') {\n                    // only process non comlink messages\n                    this._processWorkerMessage(ev.data._kernelMessage);\n                }\n                else if (typeof ((_b = ev === null || ev === void 0 ? void 0 : ev.data) === null || _b === void 0 ? void 0 : _b._logMessage) !== 'undefined') {\n                    this._processLogMessage(ev.data._logMessage);\n                }\n            });\n        }\n        const remoteOptions = this.initRemoteOptions(options);\n        remote\n            .initialize(remoteOptions)\n            .then(this._ready.resolve.bind(this._ready))\n            .catch((err) => {\n            this._logger({\n                payload: { type: 'text', level: 'critical', data: err.message },\n                kernelId: this.id,\n            });\n            this._ready.reject(err.message);\n        });\n        return remote;\n    }\n    initRemoteOptions(options) {\n        const { pyodideUrl } = options;\n        const indexUrl = pyodideUrl.slice(0, pyodideUrl.lastIndexOf('/') + 1);\n        const baseUrl = PageConfig.getBaseUrl();\n        const pipliteUrls = [...(options.pipliteUrls || []), allJSONUrl.default];\n        const disablePyPIFallback = !!options.disablePyPIFallback;\n        return {\n            baseUrl,\n            pyodideUrl,\n            indexUrl,\n            pipliteWheelUrl: options.pipliteWheelUrl || pipliteWheelUrl.default,\n            pipliteUrls,\n            disablePyPIFallback,\n            location: this.location,\n            mountDrive: options.mountDrive,\n            loadPyodideOptions: options.loadPyodideOptions || {},\n            browsingContextId: options.browsingContextId,\n            kernelId: this.id,\n        };\n    }\n    /**\n     * Dispose the kernel.\n     */\n    dispose() {\n        if (this.isDisposed) {\n            return;\n        }\n        try {\n            this._ready.reject(`${this.id} was disposed`);\n        }\n        catch (err) {\n            // nothing to see here\n        }\n        this._worker.terminate();\n        this._worker = null;\n        super.dispose();\n    }\n    /**\n     * A promise that is fulfilled when the kernel is ready.\n     */\n    get ready() {\n        return this._ready.promise;\n    }\n    _processLogMessage(payload) {\n        this._logger({ payload, kernelId: this.id });\n    }\n    /**\n     * Process a message coming from the pyodide web worker.\n     *\n     * @param msg The worker message to process.\n     */\n    _processWorkerMessage(msg) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        if (!msg.type) {\n            return;\n        }\n        switch (msg.type) {\n            case 'stream': {\n                const bundle = (_a = msg.bundle) !== null && _a !== void 0 ? _a : { name: 'stdout', text: '' };\n                this.stream(bundle, msg.parentHeader);\n                break;\n            }\n            case 'input_request': {\n                const bundle = (_b = msg.content) !== null && _b !== void 0 ? _b : { prompt: '', password: false };\n                this.inputRequest(bundle, msg.parentHeader);\n                break;\n            }\n            case 'display_data': {\n                const bundle = (_c = msg.bundle) !== null && _c !== void 0 ? _c : { data: {}, metadata: {}, transient: {} };\n                this.displayData(bundle, msg.parentHeader);\n                break;\n            }\n            case 'update_display_data': {\n                const bundle = (_d = msg.bundle) !== null && _d !== void 0 ? _d : { data: {}, metadata: {}, transient: {} };\n                this.updateDisplayData(bundle, msg.parentHeader);\n                break;\n            }\n            case 'clear_output': {\n                const bundle = (_e = msg.bundle) !== null && _e !== void 0 ? _e : { wait: false };\n                this.clearOutput(bundle, msg.parentHeader);\n                break;\n            }\n            case 'execute_result': {\n                const bundle = (_f = msg.bundle) !== null && _f !== void 0 ? _f : {\n                    execution_count: 0,\n                    data: {},\n                    metadata: {},\n                };\n                this.publishExecuteResult(bundle, msg.parentHeader);\n                break;\n            }\n            case 'execute_error': {\n                const bundle = (_g = msg.bundle) !== null && _g !== void 0 ? _g : { ename: '', evalue: '', traceback: [] };\n                this.publishExecuteError(bundle, msg.parentHeader);\n                break;\n            }\n            case 'comm_msg':\n            case 'comm_open':\n            case 'comm_close': {\n                this.handleComm(msg.type, msg.content, msg.metadata, msg.buffers, msg.parentHeader);\n                break;\n            }\n        }\n    }\n    /**\n     * Handle a kernel_info_request message\n     */\n    async kernelInfoRequest() {\n        const content = {\n            implementation: 'pyodide',\n            implementation_version: '0.1.0',\n            language_info: {\n                codemirror_mode: {\n                    name: 'python',\n                    version: 3,\n                },\n                file_extension: '.py',\n                mimetype: 'text/x-python',\n                name: 'python',\n                nbconvert_exporter: 'python',\n                pygments_lexer: 'ipython3',\n                version: '3.8',\n            },\n            protocol_version: '5.3',\n            status: 'ok',\n            banner: 'A WebAssembly-powered Python kernel backed by Pyodide',\n            help_links: [\n                {\n                    text: 'Python (WASM) Kernel',\n                    url: 'https://pyodide.org',\n                },\n            ],\n        };\n        return content;\n    }\n    /**\n     * Handle an `execute_request` message\n     *\n     * @param msg The parent message.\n     */\n    async executeRequest(content) {\n        await this.ready;\n        const result = await this._remoteKernel.execute(content, this.parent);\n        result.execution_count = this.executionCount;\n        return result;\n    }\n    /**\n     * Handle an complete_request message\n     *\n     * @param msg The parent message.\n     */\n    async completeRequest(content) {\n        return await this._remoteKernel.complete(content, this.parent);\n    }\n    /**\n     * Handle an `inspect_request` message.\n     *\n     * @param content - The content of the request.\n     *\n     * @returns A promise that resolves with the response message.\n     */\n    async inspectRequest(content) {\n        return await this._remoteKernel.inspect(content, this.parent);\n    }\n    /**\n     * Handle an `is_complete_request` message.\n     *\n     * @param content - The content of the request.\n     *\n     * @returns A promise that resolves with the response message.\n     */\n    async isCompleteRequest(content) {\n        return await this._remoteKernel.isComplete(content, this.parent);\n    }\n    /**\n     * Handle a `comm_info_request` message.\n     *\n     * @param content - The content of the request.\n     *\n     * @returns A promise that resolves with the response message.\n     */\n    async commInfoRequest(content) {\n        return await this._remoteKernel.commInfo(content, this.parent);\n    }\n    /**\n     * Send an `comm_open` message.\n     *\n     * @param msg - The comm_open message.\n     */\n    async commOpen(msg) {\n        return await this._remoteKernel.commOpen(msg, this.parent);\n    }\n    /**\n     * Send an `comm_msg` message.\n     *\n     * @param msg - The comm_msg message.\n     */\n    async commMsg(msg) {\n        return await this._remoteKernel.commMsg(msg, this.parent);\n    }\n    /**\n     * Send an `comm_close` message.\n     *\n     * @param close - The comm_close message.\n     */\n    async commClose(msg) {\n        return await this._remoteKernel.commClose(msg, this.parent);\n    }\n    /**\n     * Send an `input_reply` message.\n     *\n     * @param content - The content of the reply.\n     */\n    async inputReply(content) {\n        const value = 'value' in content ? content.value : undefined;\n        this._inputDelegate.resolve(value);\n    }\n}\n","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nexport class PyodideRemoteKernel {\n    constructor() {\n        /**\n         * Initialization options.\n         */\n        this._options = null;\n        this._initializer = null;\n        this._pyodide = null;\n        /** TODO: real typing */\n        this._localPath = '';\n        this._driveName = '';\n        this._driveFS = null;\n        this._sendWorkerMessage = () => { };\n        this._logMessage = () => { };\n        this._initialized = new Promise((resolve, reject) => {\n            this._initializer = { resolve, reject };\n        });\n    }\n    /**\n     * Accept the URLs from the host\n     **/\n    async initialize(options) {\n        var _a;\n        this._options = options;\n        if (options.location.includes(':')) {\n            const parts = options.location.split(':');\n            this._driveName = parts[0];\n            this._localPath = parts[1];\n        }\n        else {\n            this._driveName = '';\n            this._localPath = options.location;\n        }\n        await this.initRuntime(options);\n        await this.initFilesystem(options);\n        await this.initPackageManager(options);\n        await this.initKernel(options);\n        await this.initGlobals(options);\n        (_a = this._initializer) === null || _a === void 0 ? void 0 : _a.resolve();\n    }\n    async initRuntime(options) {\n        const { pyodideUrl, indexUrl } = options;\n        let loadPyodide;\n        if (pyodideUrl.endsWith('.mjs')) {\n            // note: this does not work at all in firefox\n            const pyodideModule = await import(\n            /* webpackIgnore: true */ pyodideUrl);\n            loadPyodide = pyodideModule.loadPyodide;\n        }\n        else {\n            importScripts(pyodideUrl);\n            loadPyodide = self.loadPyodide;\n        }\n        this._pyodide = await loadPyodide({\n            indexURL: indexUrl,\n            stdout: (text) => {\n                console.log(text);\n                this._logMessage({ type: 'text', level: 'info', data: text });\n            },\n            stderr: (text) => {\n                console.error(text);\n                this._logMessage({ type: 'text', level: 'critical', data: text });\n            },\n            ...options.loadPyodideOptions,\n        });\n        // @ts-expect-error: pyodide._api is private\n        this._pyodide._api.on_fatal = async (e) => {\n            let error = '';\n            if (e.name === 'Exit') {\n                error = 'Pyodide has exited and can no longer be used.';\n            }\n            else {\n                error = `Pyodide has suffered a fatal error. Please report this to the Pyodide maintainers.\nThe cause of the error was: ${e.name}\n${e.message}\nStack trace:\n${e.stack}`;\n            }\n            this._logMessage({\n                type: 'text',\n                level: 'critical',\n                data: error,\n            });\n        };\n    }\n    async initPackageManager(options) {\n        if (!this._options) {\n            throw new Error('Uninitialized');\n        }\n        const { pipliteWheelUrl, disablePyPIFallback, pipliteUrls, loadPyodideOptions } = this._options;\n        const preloaded = (loadPyodideOptions || {}).packages || [];\n        if (!preloaded.includes('micropip')) {\n            await this._pyodide.loadPackage(['micropip']);\n        }\n        if (!preloaded.includes('piplite')) {\n            await this._pyodide.runPythonAsync(`\n      import micropip\n      await micropip.install('${pipliteWheelUrl}', keep_going=True)\n    `);\n        }\n        // get piplite early enough to impact pyodide-kernel dependencies\n        await this._pyodide.runPythonAsync(`\n      import piplite.piplite\n      piplite.piplite._PIPLITE_DISABLE_PYPI = ${disablePyPIFallback ? 'True' : 'False'}\n      piplite.piplite._PIPLITE_URLS = ${JSON.stringify(pipliteUrls)}\n    `);\n    }\n    async initKernel(options) {\n        const preloaded = (options.loadPyodideOptions || {}).packages || [];\n        const toLoad = [\n            'sqlite3',\n            'ipykernel',\n            'comm',\n            'pyodide_kernel',\n            'jedi',\n            'ipython',\n        ];\n        const scriptLines = [];\n        // use piplite for packages that weren't pre-loaded\n        for (const pkgName of toLoad) {\n            if (!preloaded.includes(pkgName)) {\n                scriptLines.push(`await piplite.install('${pkgName}', keep_going=True)`);\n            }\n        }\n        // import the kernel\n        scriptLines.push('import pyodide_kernel');\n        // cd to the kernel location\n        if (options.mountDrive && this._localPath) {\n            scriptLines.push('import os', `os.chdir(\"${this._localPath}\")`);\n        }\n        // from this point forward, only use piplite (but not %pip)\n        await this._pyodide.runPythonAsync(scriptLines.join('\\n'));\n    }\n    async initGlobals(options) {\n        const { globals } = this._pyodide;\n        this._kernel = globals.get('pyodide_kernel').kernel_instance.copy();\n        this._stdout_stream = globals.get('pyodide_kernel').stdout_stream.copy();\n        this._stderr_stream = globals.get('pyodide_kernel').stderr_stream.copy();\n        this._interpreter = this._kernel.interpreter.copy();\n        this._interpreter.send_comm = this.sendComm.bind(this);\n    }\n    /**\n     * Setup custom Emscripten FileSystem\n     */\n    async initFilesystem(options) {\n        if (options.mountDrive) {\n            const mountpoint = '/drive';\n            const { FS, PATH, ERRNO_CODES } = this._pyodide;\n            const { baseUrl } = options;\n            // Use direct submodule import for tree-shaking\n            const { DriveFS } = await import('@jupyterlite/services/lib/contents/drivefs');\n            const driveFS = new DriveFS({\n                FS: FS,\n                PATH,\n                ERRNO_CODES,\n                baseUrl,\n                driveName: this._driveName,\n                mountpoint,\n                browsingContextId: this._browsingContextId,\n            });\n            FS.mkdirTree(mountpoint);\n            FS.mount(driveFS, {}, mountpoint);\n            FS.chdir(mountpoint);\n            this._driveFS = driveFS;\n        }\n    }\n    /**\n     * Recursively convert a Map to a JavaScript object\n     * @param obj A Map, Array, or other object to convert\n     */\n    mapToObject(obj) {\n        const out = obj instanceof Array ? [] : {};\n        const entries = obj instanceof Map ? obj.entries() : Object.entries(obj);\n        for (const [key, value] of entries) {\n            out[key] =\n                value instanceof Map || value instanceof Array\n                    ? this.mapToObject(value)\n                    : value;\n        }\n        return out;\n    }\n    /**\n     * Format the response from the Pyodide evaluation.\n     *\n     * @param res The result object from the Pyodide evaluation\n     */\n    formatResult(res) {\n        if (!(res instanceof this._pyodide.ffi.PyProxy)) {\n            return res;\n        }\n        // TODO: this is a bit brittle\n        const m = res.toJs();\n        const results = this.mapToObject(m);\n        return results;\n    }\n    /**\n     * Register the callback function to send messages from the worker back to the main thread.\n     *\n     * @param callback the callback to register\n     */\n    registerWorkerMessageCallback(callback) {\n        this._sendWorkerMessage = callback;\n    }\n    /**\n     * Register the callback function to log messages from the worker back to the main thread.\n     *\n     * @param callback the callback to register\n     */\n    registerLogMessageCallback(callback) {\n        this._logMessage = callback;\n    }\n    /**\n     * Makes sure pyodide is ready before continuing, and cache the parent message.\n     */\n    async setup(parent) {\n        await this._initialized;\n        this._kernel._parent_header = this._pyodide.toPy(parent);\n    }\n    /**\n     * Execute code with the interpreter.\n     *\n     * @param content The incoming message with the code to execute.\n     */\n    async execute(content, parent) {\n        await this.setup(parent);\n        const publishExecutionResult = (prompt_count, data, metadata) => {\n            const bundle = {\n                execution_count: prompt_count,\n                data: this.formatResult(data),\n                metadata: this.formatResult(metadata),\n            };\n            this._sendWorkerMessage({\n                parentHeader: this.formatResult(this._kernel._parent_header)['header'],\n                bundle,\n                type: 'execute_result',\n            });\n        };\n        const publishExecutionError = (ename, evalue, traceback) => {\n            const bundle = {\n                ename: ename,\n                evalue: evalue,\n                traceback: traceback,\n            };\n            this._sendWorkerMessage({\n                parentHeader: this.formatResult(this._kernel._parent_header)['header'],\n                bundle,\n                type: 'execute_error',\n            });\n        };\n        const clearOutputCallback = (wait) => {\n            const bundle = {\n                wait: this.formatResult(wait),\n            };\n            this._sendWorkerMessage({\n                parentHeader: this.formatResult(this._kernel._parent_header)['header'],\n                bundle,\n                type: 'clear_output',\n            });\n        };\n        const displayDataCallback = (data, metadata, transient) => {\n            const bundle = {\n                data: this.formatResult(data),\n                metadata: this.formatResult(metadata),\n                transient: this.formatResult(transient),\n            };\n            this._sendWorkerMessage({\n                parentHeader: this.formatResult(this._kernel._parent_header)['header'],\n                bundle,\n                type: 'display_data',\n            });\n        };\n        const updateDisplayDataCallback = (data, metadata, transient) => {\n            const bundle = {\n                data: this.formatResult(data),\n                metadata: this.formatResult(metadata),\n                transient: this.formatResult(transient),\n            };\n            this._sendWorkerMessage({\n                parentHeader: this.formatResult(this._kernel._parent_header)['header'],\n                bundle,\n                type: 'update_display_data',\n            });\n        };\n        const publishStreamCallback = (name, text) => {\n            const bundle = {\n                name: this.formatResult(name),\n                text: this.formatResult(text),\n            };\n            this._sendWorkerMessage({\n                parentHeader: this.formatResult(this._kernel._parent_header)['header'],\n                bundle,\n                type: 'stream',\n            });\n        };\n        this._stdout_stream.publish_stream_callback = publishStreamCallback;\n        this._stderr_stream.publish_stream_callback = publishStreamCallback;\n        this._interpreter.display_pub.clear_output_callback = clearOutputCallback;\n        this._interpreter.display_pub.display_data_callback = displayDataCallback;\n        this._interpreter.display_pub.update_display_data_callback =\n            updateDisplayDataCallback;\n        this._interpreter.displayhook.publish_execution_result = publishExecutionResult;\n        this._interpreter.input = this.input.bind(this);\n        this._interpreter.getpass = this.getpass.bind(this);\n        const res = await this._kernel.run(content.code);\n        const results = this.formatResult(res);\n        if (results['status'] === 'error') {\n            publishExecutionError(results['ename'], results['evalue'], results['traceback']);\n        }\n        return results;\n    }\n    /**\n     * Complete the code submitted by a user.\n     *\n     * @param content The incoming message with the code to complete.\n     */\n    async complete(content, parent) {\n        await this.setup(parent);\n        const res = this._kernel.complete(content.code, content.cursor_pos);\n        const results = this.formatResult(res);\n        return results;\n    }\n    /**\n     * Inspect the code submitted by a user.\n     *\n     * @param content The incoming message with the code to inspect.\n     */\n    async inspect(content, parent) {\n        await this.setup(parent);\n        const res = this._kernel.inspect(content.code, content.cursor_pos, content.detail_level);\n        const results = this.formatResult(res);\n        return results;\n    }\n    /**\n     * Check code for completeness submitted by a user.\n     *\n     * @param content The incoming message with the code to check.\n     */\n    async isComplete(content, parent) {\n        await this.setup(parent);\n        const res = this._kernel.is_complete(content.code);\n        const results = this.formatResult(res);\n        return results;\n    }\n    /**\n     * Respond to the commInfoRequest.\n     *\n     * @param content The incoming message with the comm target name.\n     */\n    async commInfo(content, parent) {\n        await this.setup(parent);\n        const res = this._kernel.comm_info(content.target_name);\n        const results = this.formatResult(res);\n        return {\n            comms: results,\n            status: 'ok',\n        };\n    }\n    /**\n     * Respond to the commOpen.\n     *\n     * @param content The incoming message with the comm open.\n     */\n    async commOpen(content, parent) {\n        await this.setup(parent);\n        const res = this._kernel.comm_manager.comm_open(this._pyodide.toPy(null), this._pyodide.toPy(null), this._pyodide.toPy(content));\n        const results = this.formatResult(res);\n        return results;\n    }\n    /**\n     * Respond to the commMsg.\n     *\n     * @param content The incoming message with the comm msg.\n     */\n    async commMsg(content, parent) {\n        await this.setup(parent);\n        const res = this._kernel.comm_manager.comm_msg(this._pyodide.toPy(null), this._pyodide.toPy(null), this._pyodide.toPy(content));\n        const results = this.formatResult(res);\n        return results;\n    }\n    /**\n     * Respond to the commClose.\n     *\n     * @param content The incoming message with the comm close.\n     */\n    async commClose(content, parent) {\n        await this.setup(parent);\n        const res = this._kernel.comm_manager.comm_close(this._pyodide.toPy(null), this._pyodide.toPy(null), this._pyodide.toPy(content));\n        const results = this.formatResult(res);\n        return results;\n    }\n    /**\n     * Resolve the input request by getting back the reply from the main thread\n     *\n     * @param content The incoming message with the reply\n     */\n    async inputReply(content, parent) {\n        // Should never be called as input_reply messages are returned via service worker\n        // or SharedArrayBuffer.\n    }\n    getpass(prompt) {\n        prompt = typeof prompt === 'undefined' ? '' : prompt;\n        return this.sendInputRequest(prompt, true);\n    }\n    input(prompt) {\n        prompt = typeof prompt === 'undefined' ? '' : prompt;\n        return this.sendInputRequest(prompt, false);\n    }\n    /**\n     * Send a comm message to the front-end.\n     *\n     * @param type The type of the comm message.\n     * @param content The content.\n     * @param metadata The metadata.\n     * @param ident The ident.\n     * @param buffers The binary buffers.\n     */\n    async sendComm(type, content, metadata, ident, buffers) {\n        this._sendWorkerMessage({\n            type: type,\n            content: this.formatResult(content),\n            metadata: this.formatResult(metadata),\n            ident: this.formatResult(ident),\n            buffers: this.formatResult(buffers),\n            parentHeader: this.formatResult(this._kernel._parent_header)['header'],\n        });\n    }\n}\n"],"names":["P","crossOriginIsolated","Worker","URL","Error","e","Promise","i","importScripts","self","console","JSON","s","Array","Map","Object","t"],"mappings":"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"}