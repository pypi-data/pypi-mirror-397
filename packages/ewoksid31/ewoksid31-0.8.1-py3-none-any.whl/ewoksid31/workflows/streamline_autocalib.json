{
  "graph": {
    "id": "streamline_autocalib",
    "label": "Streamline auto-calibration with flat"
  },
  "nodes": [
    {
      "id": "ewoksxrpd.tasks.nexus.SaveNexusIntegrated0",
      "label": "save_2d_q_hdf5",
      "task_type": "class",
      "task_identifier": "ewoksxrpd.tasks.nexus.SaveNexusIntegrated",
      "default_inputs": [
        {
          "name": "nxprocess_as_default",
          "value": true
        },
        {
          "name": "nxprocess_name",
          "value": "integrate2d_q"
        }
      ],
      "uiProps": {
        "icon": "default.png",
        "position": {
          "x": 945,
          "y": 375
        }
      }
    },
    {
      "id": "ewoksxrpd.tasks.integrate.IntegrateSinglePattern0",
      "label": "integrate_2d_q",
      "task_type": "class",
      "task_identifier": "ewoksxrpd.tasks.integrate.IntegrateSinglePattern",
      "default_inputs": [
        {
          "name": "fixed_integration_options",
          "value": {
            "unit": "q_nm^-1",
            "nbpt_azim": 720,
            "do_2D": true
          }
        }
      ],
      "uiProps": {
        "icon": "default.png",
        "position": {
          "x": 705,
          "y": 375
        }
      }
    },
    {
      "id": "ewoksid31.tasks.flatfield.FlatFieldFromEnergy0",
      "label": "id31flatfield",
      "task_type": "class",
      "task_identifier": "ewoksid31.tasks.flatfield.FlatFieldFromEnergy",
      "task_generator": "",
      "default_error_node": false,
      "uiProps": {
        "icon": "default.png",
        "position": {
          "x": -180,
          "y": 375
        },
        "moreHandles": false,
        "withImage": true
      }
    },
    {
      "id": "0",
      "label": "calibration",
      "task_type": "class",
      "task_identifier": "ewoksxrpd.tasks.calibrate.CalibrateSingle",
      "task_generator": "",
      "default_inputs": [
        {
          "name": "fixed",
          "value": [
            "energy"
          ]
        },
        {
          "name": "robust",
          "value": true
        },
        {
          "name": "ring_detector",
          "value": "Pilatus4_CdTe_4M"
        }
      ],
      "default_error_node": false,
      "uiProps": {
        "position": {
          "x": 330,
          "y": 480
        },
        "moreHandles": false,
        "withImage": true
      }
    },
    {
      "id": "1",
      "label": "integrate_q",
      "task_type": "class",
      "task_identifier": "ewoksxrpd.tasks.integrate.IntegrateSinglePattern",
      "task_generator": "",
      "default_inputs": [
        {
          "name": "fixed_integration_options",
          "value": {
            "unit": "q_nm^-1"
          }
        }
      ],
      "default_error_node": false,
      "uiProps": {
        "position": {
          "x": 705,
          "y": 480
        },
        "moreHandles": false,
        "withImage": true
      }
    },
    {
      "id": "3",
      "label": "diagnose_q",
      "task_type": "class",
      "task_identifier": "ewoksxrpd.tasks.diagnostics.DiagnoseIntegrate1D",
      "task_generator": "",
      "default_inputs": [
        {
          "name": "scaling",
          "value": "log"
        },
        {
          "name": "dpi",
          "value": 300
        },
        {
          "name": "figsize",
          "value": [
            16,
            8
          ]
        }
      ],
      "default_error_node": false,
      "uiProps": {
        "position": {
          "x": 855,
          "y": 615
        },
        "moreHandles": false,
        "withImage": true
      }
    },
    {
      "id": "4",
      "label": "save_q_hdf5",
      "task_type": "class",
      "task_identifier": "ewoksxrpd.tasks.nexus.SaveNexusPattern1D",
      "task_generator": "",
      "default_inputs": [
        {
          "name": "nxprocess_as_default",
          "value": false
        },
        {
          "name": "nxprocess_name",
          "value": "integrate_q"
        },
        {
          "name": "nxmeasurement_name",
          "value": "integrated_q"
        }
      ],
      "default_error_node": false,
      "uiProps": {
        "position": {
          "x": 945,
          "y": 495
        },
        "moreHandles": false,
        "withImage": true
      }
    },
    {
      "id": "5",
      "label": "configuration",
      "task_type": "class",
      "task_identifier": "ewoksxrpd.tasks.pyfaiconfig.PyFaiConfig",
      "task_generator": "",
      "default_error_node": false,
      "uiProps": {
        "position": {
          "x": 0,
          "y": 375
        },
        "moreHandles": false,
        "withImage": true
      }
    },
    {
      "id": "SavePyFaiConfig0",
      "label": "save_pyfai_config",
      "task_type": "class",
      "task_identifier": "ewoksxrpd.tasks.pyfaiconfig.SavePyFaiConfig",
      "uiProps": {
        "position": {
          "x": 510,
          "y": 810
        }
      }
    },
    {
      "id": "SavePyFaiPoniFile0",
      "label": "save_poni",
      "task_type": "class",
      "task_identifier": "ewoksxrpd.tasks.pyfaiconfig.SavePyFaiPoniFile",
      "uiProps": {
        "position": {
          "x": 510,
          "y": 705
        }
      }
    },
    {
      "id": "DiagnoseCalibrateSingleResults0",
      "label": "diagnose_rings",
      "task_type": "class",
      "task_identifier": "ewoksxrpd.tasks.diagnostics.DiagnoseCalibrateSingleResults",
      "default_inputs": [
        {
          "name": "dpi",
          "value": 300
        },
        {
          "name": "figsize",
          "value": [
            32,
            16
          ]
        }
      ],
      "uiProps": {
        "position": {
          "x": 510,
          "y": 930
        }
      }
    }
  ],
  "links": [
    {
      "source": "1",
      "target": "3",
      "data_mapping": [
        {
          "source_output": "radial",
          "target_input": "x"
        },
        {
          "source_output": "radial_units",
          "target_input": "xunits"
        },
        {
          "source_output": "intensity",
          "target_input": "y"
        },
        {
          "source_output": "intensity_error",
          "target_input": "yerror"
        }
      ],
      "on_error": false,
      "required": false,
      "map_all_data": false
    },
    {
      "source": "1",
      "target": "4",
      "data_mapping": [
        {
          "source_output": "radial",
          "target_input": "x"
        },
        {
          "source_output": "intensity",
          "target_input": "y"
        },
        {
          "source_output": "intensity_error",
          "target_input": "yerror"
        },
        {
          "source_output": "radial_units",
          "target_input": "xunits"
        },
        {
          "source_output": "info",
          "target_input": "header"
        }
      ],
      "on_error": false,
      "required": false,
      "map_all_data": false
    },
    {
      "source": "0",
      "target": "SavePyFaiPoniFile0",
      "data_mapping": [
        {
          "source_output": "energy",
          "target_input": "energy"
        },
        {
          "source_output": "geometry",
          "target_input": "geometry"
        }
      ]
    },
    {
      "source": "0",
      "target": "SavePyFaiConfig0",
      "data_mapping": [
        {
          "source_output": "geometry",
          "target_input": "geometry"
        },
        {
          "source_output": "energy",
          "target_input": "energy"
        }
      ]
    },
    {
      "source": "5",
      "target": "SavePyFaiConfig0",
      "data_mapping": [
        {
          "source_output": "integration_options",
          "target_input": "integration_options"
        },
        {
          "source_output": "mask",
          "target_input": "mask"
        },
        {
          "source_output": "detector",
          "target_input": "detector"
        },
        {
          "source_output": "detector_config",
          "target_input": "detector_config"
        }
      ]
    },
    {
      "source": "0",
      "target": "ewoksxrpd.tasks.integrate.IntegrateSinglePattern0",
      "data_mapping": [
        {
          "source_output": "energy",
          "target_input": "energy"
        },
        {
          "source_output": "geometry",
          "target_input": "geometry"
        }
      ],
      "map_all_data": false
    },
    {
      "source": "5",
      "target": "ewoksxrpd.tasks.integrate.IntegrateSinglePattern0",
      "data_mapping": [
        {
          "source_output": "mask",
          "target_input": "mask"
        },
        {
          "source_output": "integration_options",
          "target_input": "integration_options"
        },
        {
          "source_output": "flatfield",
          "target_input": "flatfield"
        },
        {
          "source_output": "detector",
          "target_input": "detector"
        },
        {
          "source_output": "detector_config",
          "target_input": "detector_config"
        }
      ],
      "map_all_data": false
    },
    {
      "source": "ewoksxrpd.tasks.integrate.IntegrateSinglePattern0",
      "target": "ewoksxrpd.tasks.nexus.SaveNexusIntegrated0",
      "data_mapping": [
        {
          "source_output": "intensity",
          "target_input": "intensity"
        },
        {
          "source_output": "intensity_error",
          "target_input": "intensity_error"
        },
        {
          "source_output": "radial",
          "target_input": "radial"
        },
        {
          "source_output": "radial_units",
          "target_input": "radial_units"
        },
        {
          "source_output": "azimuthal",
          "target_input": "azimuthal"
        },
        {
          "source_output": "azimuthal_units",
          "target_input": "azimuthal_units"
        },
        {
          "source_output": "info",
          "target_input": "info"
        }
      ],
      "map_all_data": false
    },
    {
      "source": "5",
      "target": "0",
      "data_mapping": [
        {
          "source_output": "detector",
          "target_input": "detector"
        },
        {
          "source_output": "energy",
          "target_input": "energy"
        },
        {
          "source_output": "geometry",
          "target_input": "geometry"
        },
        {
          "source_output": "detector_config",
          "target_input": "detector_config"
        },
        {
          "source_output": "calibrant",
          "target_input": "calibrant"
        }
      ],
      "on_error": false,
      "required": false,
      "map_all_data": false,
      "uiProps": {
        "animated": false
      }
    },
    {
      "source": "5",
      "target": "1",
      "data_mapping": [
        {
          "source_output": "mask",
          "target_input": "mask"
        },
        {
          "source_output": "integration_options",
          "target_input": "integration_options"
        },
        {
          "source_output": "flatfield",
          "target_input": "flatfield"
        },
        {
          "source_output": "detector",
          "target_input": "detector"
        },
        {
          "source_output": "detector_config",
          "target_input": "detector_config"
        }
      ],
      "on_error": false,
      "required": false,
      "map_all_data": false,
      "uiProps": {
        "animated": false
      }
    },
    {
      "source": "0",
      "target": "1",
      "data_mapping": [
        {
          "source_output": "geometry",
          "target_input": "geometry"
        },
        {
          "source_output": "energy",
          "target_input": "energy"
        }
      ],
      "on_error": false,
      "required": false,
      "map_all_data": false,
      "uiProps": {
        "animated": false
      }
    },
    {
      "source": "0",
      "target": "3",
      "data_mapping": [
        {
          "source_output": "energy",
          "target_input": "energy"
        }
      ],
      "on_error": false,
      "required": false,
      "map_all_data": false,
      "uiProps": {
        "label": "energy",
        "animated": false
      }
    },
    {
      "source": "ewoksid31.tasks.flatfield.FlatFieldFromEnergy0",
      "target": "5",
      "data_mapping": [
        {
          "source_output": "flatfield",
          "target_input": "flatfield"
        }
      ],
      "on_error": false,
      "required": false,
      "map_all_data": false,
      "uiProps": {
        "label": "flatfield",
        "type": "default",
        "animated": false
      }
    },
    {
      "source": "5",
      "target": "DiagnoseCalibrateSingleResults0",
      "data_mapping": [
        {
          "source_output": "calibrant",
          "target_input": "calibrant"
        },
        {
          "source_output": "detector",
          "target_input": "detector"
        },
        {
          "source_output": "detector_config",
          "target_input": "detector_config"
        }
      ]
    },
    {
      "source": "0",
      "target": "DiagnoseCalibrateSingleResults0",
      "data_mapping": [
        {
          "source_output": "geometry",
          "target_input": "geometry"
        },
        {
          "source_output": "rings",
          "target_input": "rings"
        },
        {
          "source_output": "energy",
          "target_input": "energy"
        }
      ]
    },
    {
      "source": "5",
      "target": "SavePyFaiPoniFile0",
      "data_mapping": [
        {
          "source_output": "detector",
          "target_input": "detector"
        },
        {
          "source_output": "detector_config",
          "target_input": "detector_config"
        }
      ]
    },
    {
      "source": "5",
      "target": "3",
      "data_mapping": [
        {
          "source_output": "calibrant",
          "target_input": "calibrant"
        }
      ],
      "uiProps": {
        "label": "calibrant"
      }
    }
  ]
}