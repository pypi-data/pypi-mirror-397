{
  "type": "function",
  "function": {
    "name": "analyze_document",
    "description": "Analyze documents to extract structured information, metadata, and insights. This advanced document processing function uses AI-powered analysis to understand document content, extract key information, identify document types, parse structured data, detect entities, classify content, generate summaries, and provide actionable insights. It handles multiple document formats including PDF, DOCX, TXT, HTML, Markdown, and more. The analysis includes text extraction with layout preservation, entity recognition (names, dates, locations, organizations, monetary values), key-value pair extraction, table detection and parsing, image/chart description, document classification, sentiment analysis, language detection, and custom field extraction based on document type. Perfect for automating document review, processing invoices and receipts, extracting contract terms, analyzing legal documents, processing resumes, handling forms, parsing reports, organizing archives, and any scenario requiring intelligent document understanding. The function returns structured JSON output with extracted information, confidence scores, and metadata.",
    "parameters": {
      "type": "object",
      "properties": {
        "document_path": {
          "type": "string",
          "description": "The file path or URL to the document to analyze. This can be a local filesystem path (e.g., '/home/user/documents/invoice.pdf', 'C:\\Documents\\contract.docx') or a publicly accessible URL (e.g., 'https://example.com/report.pdf'). For local paths, use absolute paths for reliability, or relative paths from the current working directory. For URLs, the document must be downloadable without authentication (or provide credentials separately). Supported formats: PDF (.pdf), Word documents (.doc, .docx), plain text (.txt), HTML (.html, .htm), Markdown (.md), rich text (.rtf), and common image formats with embedded text (.jpg, .png for OCR). The file size limit is typically 50MB for uploads, 100MB for URLs. Ensure the path or URL is correct and the file is accessible."
        },
        "analysis_type": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["extract_text", "extract_entities", "extract_tables", "classify_document", "summarize", "extract_key_values", "detect_language", "analyze_sentiment", "extract_metadata"]
          },
          "description": "Array of analysis types to perform on the document. You can request multiple analysis types in a single call for comprehensive document processing. 'extract_text' extracts all text content while preserving layout and structure (paragraphs, headings, lists). 'extract_entities' identifies and extracts named entities like person names, organizations, locations, dates, monetary amounts, phone numbers, email addresses. 'extract_tables' detects tables and converts them to structured data (rows and columns). 'classify_document' determines the document type (invoice, contract, resume, report, etc.) and assigns confidence scores. 'summarize' generates a concise summary of the document's main points. 'extract_key_values' finds key-value pairs like 'Invoice Number: 12345' or 'Total: $500'. 'detect_language' identifies the primary language(s) used in the document. 'analyze_sentiment' determines the overall tone (positive, negative, neutral). 'extract_metadata' retrieves document properties like author, creation date, title, page count, etc."
        },
        "document_type_hint": {
          "type": "string",
          "enum": ["invoice", "receipt", "contract", "legal", "resume", "report", "form", "email", "letter", "article", "generic"],
          "description": "Optional hint about the expected document type to improve analysis accuracy. Providing a document type hint helps the analyzer use specialized processing optimized for that document category, resulting in better extraction accuracy and more relevant insights. For example, 'invoice' tells the analyzer to look for invoice-specific fields like invoice number, line items, amounts, tax, total, due date, vendor info. 'contract' focuses on parties, terms, clauses, effective dates, signatures. 'resume' looks for skills, experience, education, contact info. 'form' expects structured fields and checkboxes. If you're unsure of the document type, use 'generic' or omit this parameter, and the analyzer will automatically attempt to classify it. Using the correct hint significantly improves extraction quality for specialized documents."
        },
        "extract_images": {
          "type": "boolean",
          "description": "Whether to extract and analyze images found within the document. When set to true, the analyzer will detect embedded images, charts, diagrams, photos, and logos within the document, extract them, and provide descriptions or perform OCR (Optical Character Recognition) on images containing text. For PDFs and Word documents with embedded images, this enables capture of visual information that complements the text. Use cases: extracting product images from catalogs, reading text from scanned documents, analyzing charts and graphs in reports, capturing signatures or logos, processing image-based forms. When false (default), only text content is processed, which is faster and cheaper. Enabling image extraction increases processing time and cost, so only use it when images contain important information not available in the text."
        },
        "language": {
          "type": "string",
          "description": "The expected primary language of the document using ISO 639-1 language codes (e.g., 'en' for English, 'es' for Spanish, 'fr' for French, 'de' for German, 'zh' for Chinese, 'ja' for Japanese, 'ar' for Arabic). Providing the language helps improve text extraction accuracy, especially for documents with non-Latin scripts or special characters. It also enables language-specific entity recognition and better handling of date formats, numbers, and cultural conventions. If omitted or set to 'auto', the analyzer will attempt to automatically detect the language, which works well for most cases but may be less accurate for multilingual documents or short texts. For multilingual documents, specify the dominant language. The analyzer supports 100+ languages with varying levels of support quality (best for English, good for major European and Asian languages)."
        },
        "page_range": {
          "type": "string",
          "description": "Specify which pages to analyze in the document, useful for large documents where you only need specific sections. Format options: single page ('5'), page range ('1-10'), multiple ranges ('1-5,8,10-15'), or 'all' for the entire document. Page numbers start at 1. Examples: '1' analyzes only the first page, '1-3' analyzes pages 1-3, '1,5,10' analyzes pages 1, 5, and 10, '1-10,20-30' analyzes pages 1-10 and 20-30. This is particularly useful for: extracting just the first page of long reports, skipping cover pages, processing specific contract sections, or reducing costs by avoiding unnecessary page analysis. If omitted, the entire document is analyzed. For documents with hundreds of pages, consider using page ranges to focus on relevant sections and reduce processing time and cost."
        }
      },
      "required": ["document_path", "analysis_type"]
    }
  }
}
