[build-system]
requires = ["setuptools"]
build-backend = "setuptools.build_meta"


[project]
name = "idtrackerai"
version = "6.0.13"
authors = [
    { name = "Main contact", email = 'info@idtracker.ai' },
    { name = "Jordi Torrents" },
    { name = "Francisco Romero Ferrero" },
    { name = "Mattia G. Bergomi" },
    { name = "Francisco J.H. Heras" },
    { name = "Gonzalo Polavieja" },
]
description = "idtracker.ai tracks up to 100 unmarked animals from videos recorded in laboratory conditions using artificial intelligence. Free and open source."
readme = "README.md"
requires-python = ">=3.10"
classifiers = [
    "Development Status :: 5 - Production/Stable",
    "Environment :: Console",
    "Intended Audience :: Science/Research",
    "Intended Audience :: Developers",
    "Environment :: X11 Applications :: Qt",
    "License :: OSI Approved :: GNU General Public License v3 or later (GPLv3+)",
    "Operating System :: OS Independent",
    "Programming Language :: Python",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Topic :: Scientific/Engineering",
    "Topic :: Scientific/Engineering :: Artificial Intelligence",
]
dependencies = [
    "numpy >= 1.26.4",
    "rich >= 13.5.1",
    "h5py >= 3.10.0",
    "scipy >= 1.15.0",
    "opencv-python-headless >= 4.10.0.84", # the first version compatible with NumPy 2.0
    "pyqt6 >= 6.7.0",
    "qtpy >= 2.4.0",
    'superqt >= 0.7.3',                    # QToggleSwitch added in 0.7.3
    'toml >= 0.10.2',
    "matplotlib >= 3.7.0",
    'packaging',
    'psutil >= 6.1.0',
    'scikit-learn >= 1.6.0',
    'requests >= 2.26.0',
    'deprecated >= 1.2.13',
]

[project.optional-dependencies]
dev = [
    'pytest',
    "black[jupyter]",
    'pylint',
    'vulture',
    'isort',
    "twine",
    "build",
    'pre-commit',
]
docs = [
    "pydata_sphinx_theme",
    "sphinx-copybutton",
    "sphinx_design",
    "sphinx>=5.0",
    "nbsphinx",
    "ipykernel",
    'sphinx-toolbox',
    'sphinx-togglebutton',
    'esbonio',
    'sphinx-favicon',
]

[project.urls]
Homepage = "https://idtracker.ai/"
Repository = "https://gitlab.com/polavieja_lab/idtrackerai"
Issues = "https://gitlab.com/polavieja_lab/idtrackerai/-/issues"
Changelog = "https://idtracker.ai/latest/user_guide/changelog.html"

[tool.setuptools.package-data]
idtrackerai = [
    "*/*.toml",
    "*/*/*.toml",
    "GUI_tools/*.svg",
    "GUI_tools/*.dat",
    "data/*.avi",
]

[project.scripts]
idtrackerai_test = "idtrackerai.start.__main__:general_test"
idtrackerai = "idtrackerai.start.__main__:main"
idtrackerai_validate = "idtrackerai.extra_tools.validator.__init__:idtrackerai_validate_entrypoint"
idtrackerai_video = "idtrackerai.extra_tools.video_generator.__init__:idtrackerai_video_entrypoint"
idtrackerai_format = "idtrackerai.utils.trajectories_io:idtrackerai_format_entrypoint"
idtrackerai_inspect_clusters = "idtrackerai.extra_tools.cluster_inspection:idtrackerai_inspect_clusters_entrypoint"
idtrackerai_background = "idtrackerai.base.animals_detection.segmentation:idtrackerai_background_entrypoint"
idmatcherai = "idtrackerai.extra_tools.idmatcherai:idmatcherai_entrypoint"

[tool.pytest.ini_options]
log_file_format = "%(asctime)s %(levelname)8s %(message)s (%(filename)s:%(lineno)s)"
log_file = 'pytest.log'
log_file_level = 0
addopts = '-v'

# for using Pyright/Pylance with qtpy code
[tool.pyright.defineConstant]
PYQT5 = false
PYSIDE2 = false
PYQT6 = true
PYSIDE6 = false

[tool.black]
skip-magic-trailing-comma = true
target-version = ['py310']

[tool.isort]
profile = "black"

[tool.pylint]
extension-pkg-whitelist = 'qtpy'
generated-members = 'cv2.*, torch.*'
ignore_modules = 'qtpy'
disable = [
    "missing-docstring",
    "fixme",
    "logging-fstring-interpolation",
    "wrong-import-order",
    "invalid-name",
    "no-name-in-module",
]
