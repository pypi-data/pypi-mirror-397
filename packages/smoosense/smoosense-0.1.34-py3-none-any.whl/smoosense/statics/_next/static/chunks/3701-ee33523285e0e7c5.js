"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1417,3701],{4681:(e,t,s)=>{s.d(t,{Z:()=>v});var l=s(23892),a=s(69849),r=s(90774),n=s(17282),i=s(117),o=s(12999),d=s(5747),c=s(2693),u=s(20906),m=s(51468),x=s(25168),h=s(59370),f=s(9472),p=s(76116),j=s(90002),g=s(50274);let N="h-4 w-4",v={FOLDER_OPEN:(0,l.jsx)(a.A,{className:N}),FOLDER_CLOSED:(0,l.jsx)(r.A,{className:N}),JSON:(0,l.jsx)(n.A,{className:N}),COLUMNAR_TABLE:(0,l.jsx)(i.A,{className:N}),ROW_TABLE:(0,l.jsx)(o.A,{className:N}),IMAGE:(0,l.jsx)(d.A,{className:N}),VIDEO:(0,l.jsx)(c.A,{className:N}),TEXT:(0,l.jsx)(u.A,{className:N}),FILE_DEFAULT:(0,l.jsx)(m.A,{className:N}),CHEVRON_DOWN:(0,l.jsx)(x.A,{className:N}),CHEVRON_RIGHT:(0,l.jsx)(h.A,{className:N}),BOOLEAN:(0,l.jsx)(f.A,{className:N}),DATE:(0,l.jsx)(p.A,{className:N}),NUMBER:(0,l.jsx)(j.A,{className:N}),LINK:(0,l.jsx)(g.A,{className:N}),IFRAME:(0,l.jsx)(g.A,{className:N}),TYPE:(0,l.jsx)(u.A,{className:N})}},13701:(e,t,s)=>{s.d(t,{A:()=>eS});var l=s(23892),a=s(42522),r=s(40624),n=s(69849),i=s(59370),o=s(6981),d=s(85848),c=s(54310),u=s(84691),m=s(96110),x=s(26460),h=s(87326),f=s(57516),p=s(58972),j=s(62252),g=s(4681),N=s(82509);function v(e){let{node:t,style:s}=e,a=(0,m.jL)(),r=(0,m.GV)(e=>e.folderTree.viewingId),n=(0,m.GV)(e=>e.ui.fileInfoToShow),i=t.data,o=r===i.id;(0,d.useEffect)(()=>{i.isDir&&i.isExpanded!==t.isOpen&&(i.isExpanded?t.open():t.close())},[i.isExpanded,i.isDir,t]);let c=(0,d.useCallback)(e=>{e.stopPropagation(),a((0,x.$)(i.id)),i.isDir&&!i.isLoaded&&a((0,x.PI)({path:i.path}))},[i,a]),u=(0,d.useCallback)(e=>{if(e.stopPropagation(),i.isDir)i.isLoaded||a((0,x.PI)({path:i.path})),a((0,x.OX)(i.path));else{let e=(0,j.t)(i.name);if(e===j.p.ColumnarTable||e===j.p.RowTable){let e="./Table?tablePath=".concat(encodeURIComponent(i.path));window.open(e,"_blank")}}},[i,a]),v=(0,d.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),i.name.endsWith(".lance")){let e="./Table?tablePath=".concat(encodeURIComponent(i.path));window.open(e,"_blank");return}let t="./FolderBrowser?rootFolder=".concat(encodeURIComponent(i.path));window.open(t,"_blank")},[i.path,i.name]),w=(0,d.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),a((0,x.PI)({path:i.path}))},[i.path,a]),b=(0,d.useCallback)(e=>{e.stopPropagation(),t.isOpen||i.isLoaded||a((0,x.PI)({path:i.path})),a((0,x.OX)(i.path))},[t.isOpen,i.isLoaded,i.path,a]);return(0,l.jsxs)("div",{style:s,className:(0,p.cn)("group flex items-center space-x-2 px-2 py-1 text-sm cursor-pointer hover:bg-muted/50 rounded relative","select-none",o&&"bg-primary/20 hover:bg-primary/10 font-bold"),onClick:c,onDoubleClick:u,children:[i.isDir?i.loading?(0,l.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,l.jsx)("div",{className:"w-2 h-2 border border-muted-foreground border-t-transparent rounded-full animate-spin"})}):(0,l.jsx)("div",{onClick:b,className:"cursor-pointer",children:t.isOpen?g.Z.CHEVRON_DOWN:g.Z.CHEVRON_RIGHT}):(0,l.jsx)("div",{className:"w-4 h-4"}),(()=>{if(i.isDir)return t.isOpen?g.Z.FOLDER_OPEN:g.Z.FOLDER_CLOSED;switch((0,j.t)(i.name)){case j.p.Json:return g.Z.JSON;case j.p.ColumnarTable:return g.Z.COLUMNAR_TABLE;case j.p.RowTable:return g.Z.ROW_TABLE;case j.p.Image:return g.Z.IMAGE;case j.p.Video:return g.Z.VIDEO;case j.p.Text:return g.Z.TEXT;default:return g.Z.FILE_DEFAULT}})(),(0,l.jsx)("span",{className:"truncate flex-1",title:i.name,children:i.name}),(()=>{let e;if(i.isDir)return null;switch(n){case"size":e=function(e){if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*10)/10+" "+["B","KB","MB","GB"][t]}(i.size);break;case"lastModified":e=(0,N.Y)(i.lastModified);break;case"lastModifiedRelative":e=(0,N.f)(i.lastModified);break;default:return null}return(0,l.jsx)("span",{className:"text-xs text-muted-foreground ml-auto",children:e})})(),i.isDir&&(0,l.jsxs)("div",{className:"absolute right-1 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[(0,l.jsx)("button",{onClick:w,className:(0,p.cn)("bg-background border border-border rounded p-1 shadow-sm hover:bg-muted cursor-pointer","flex items-center justify-center",i.loading&&"animate-spin"),title:"Refresh ".concat(i.name),disabled:i.loading,children:(0,l.jsx)(h.A,{className:"h-3 w-3"})}),(0,l.jsx)("button",{onClick:v,className:(0,p.cn)("bg-background border border-border rounded p-1 shadow-sm hover:bg-muted cursor-pointer","flex items-center justify-center"),title:"Open ".concat(i.name," in new tab"),children:(0,l.jsx)(f.A,{className:"h-3 w-3"})})]})]})}function w(){let e=(0,m.jL)(),{rootNode:t,loading:s,error:a}=(0,m.GV)(e=>e.folderTree),r=(0,m.GV)(e=>e.ui.rootFolder),n=(0,c.useSearchParams)(),i=(0,d.useRef)(null),[o,h]=(0,d.useState)(600);(0,d.useEffect)(()=>{let t=n.get("viewing");r?(e((0,x.EI)()),t&&""!==t.trim()||e((0,x.PI)({path:r}))):e((0,x.EI)())},[r,n,e]),(0,d.useEffect)(()=>{t&&!t.isExpanded&&e((0,x.OX)(t.path))},[t,e]),(0,d.useLayoutEffect)(()=>{let e=()=>{if(i.current){let e=i.current.getBoundingClientRect();e.height>0&&h(Math.floor(e.height))}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]);let f=e=>({id:e.id,name:e.name,path:e.path,isDir:e.isDir,size:e.size,lastModified:e.lastModified,isLoaded:e.isLoaded,loading:e.loading,isExpanded:e.isExpanded,children:e.children?e.children.map(f):void 0}),p=t?[f(t)]:[];return a?(0,l.jsxs)("div",{className:"p-4 text-center text-sm text-red-500",children:[(0,l.jsx)("p",{children:"Error loading folder tree:"}),(0,l.jsx)("p",{className:"mt-1",children:a})]}):!t&&s?(0,l.jsx)("div",{className:"p-4 text-center text-sm text-muted-foreground",children:(0,l.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,l.jsx)("div",{className:"w-4 h-4 border border-muted-foreground border-t-transparent rounded-full animate-spin"}),(0,l.jsx)("span",{children:"Loading folder tree..."})]})}):t?(0,l.jsx)("div",{ref:i,className:"h-full w-full",children:(0,l.jsx)(u.P,{data:p,openByDefault:!1,width:"100%",height:o,indent:20,rowHeight:32,overscanCount:10,disableDrag:!0,disableDrop:!0,disableMultiSelection:!0,childrenAccessor:"children",idAccessor:"id",children:v})}):(0,l.jsx)("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"No folder selected"})}var b=s(87360),y=s(88050),E=s(14729),A=s(20950);let C=[{icon:b.A,title:"Click arrow icon",description:"Expand/collapse folder node"},{icon:b.A,title:"Click file/folder name",description:"Preview content in the right panel"},{icon:y.A,title:"Double-click folder name",description:"Expand/collapse folder node"},{icon:y.A,title:"Double-click table file",description:"Open file in new tab (for CSV, Parquet, etc.)"}];function T(){return(0,l.jsx)(A.A,{icon:(0,l.jsx)(E.A,{}),tooltip:"Help",contentClassName:"w-96 p-4",side:"right",align:"start",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold",children:"Tree View Operations"}),(0,l.jsx)("div",{className:"space-y-3 text-sm",children:C.map((e,t)=>{let s=e.icon;return(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-5 h-5 flex items-center justify-center",children:(0,l.jsx)(s,{className:"h-4 w-4 text-muted-foreground"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium",children:e.title}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},t)})})]})})}var k=s(69984),S=s(18607),D=s(59871);function P(){let e=(0,m.jL)(),t=(0,m.GV)(e=>e.ui.fileInfoToShow),s=(e=>{if(!e)return[];let t=[],s=(0,S.Gl)(e),l=(0,S.Gl)(s);if(l&&l!==s&&(0,S.Gl)(l)!==l&&t.push({name:"...",path:"",isEllipsis:!0}),l&&l!==s){let e=(0,S.uk)(l)||l;t.push({name:e,path:l,isEllipsis:!1})}if(s&&s!==e){let e=(0,S.uk)(s)||s;t.push({name:e,path:s,isEllipsis:!1})}return t})((0,m.GV)(e=>e.ui.rootFolder)||"~");return(0,l.jsxs)("div",{className:"h-full w-full border-r bg-muted/10 flex flex-col",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-2 border-b",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(n.A,{className:"h-5 w-5 text-muted-foreground"}),(0,l.jsx)("h3",{className:"font-medium text-sm",children:"Folder Navigation"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)(D.l6,{value:t,onValueChange:t=>e((0,k.setFileInfoToShow)(t)),children:[(0,l.jsx)(D.bq,{className:"w-auto h-7 text-xs",children:(0,l.jsx)(D.yv,{})}),(0,l.jsxs)(D.gC,{children:[(0,l.jsx)(D.eb,{value:"size",children:"Size"}),(0,l.jsx)(D.eb,{value:"lastModified",children:"Modified Date"}),(0,l.jsx)(D.eb,{value:"lastModifiedRelative",children:"Modified (Relative)"})]})]}),(0,l.jsx)(T,{})]})]}),(0,l.jsx)("div",{className:"px-4 py-2 border-b bg-muted/20",children:(0,l.jsx)("nav",{className:"flex items-center space-x-1 text-xs overflow-hidden",children:s.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center space-x-1 min-w-0",children:[t>0&&(0,l.jsx)(i.A,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"}),e.isEllipsis?(0,l.jsx)("div",{className:"flex items-center px-1 py-0.5 text-muted-foreground",children:(0,l.jsx)(o.A,{className:"h-3 w-3"})}):(0,l.jsx)("button",{onClick:()=>(e=>{let t="./FolderBrowser?rootFolder=".concat(encodeURIComponent(e));window.open(t,"_blank")})(e.path),className:"flex items-center space-x-1 px-1 py-0.5 rounded hover:bg-muted/50 text-muted-foreground hover:text-foreground transition-colors min-w-0 cursor-pointer",title:e.path,children:(0,l.jsx)("span",{className:"truncate",children:e.name})})]},e.path))})}),(0,l.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,l.jsx)(w,{})})]})}var L=s(36712),I=s(29562),O=s(83252),M=s(56211),F=s(63583),R=s(49431),_=s(61897);function V(e){let{item:t}=e,[s,a]=(0,d.useState)(!1),r=(0,O.w8)(t.path,!0);return(0,l.jsx)("div",{className:"w-full h-full flex flex-col",children:(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center",children:s?(0,l.jsx)(_.A,{title:"Failed to load image",message:"The image could not be loaded or displayed."}):(0,l.jsx)("img",{src:r,alt:t.name,className:"max-w-full max-h-[600px] object-contain rounded-md shadow-sm",onError:()=>a(!0)})})})}function G(e){let{item:t}=e,[s,a]=(0,d.useState)(!1),r=(0,O.w8)(t.path,!0);return(0,l.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("h4",{className:"text-lg font-medium mb-1",children:t.name}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Video Preview"})]}),(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center",children:s?(0,l.jsx)(_.A,{title:"Failed to load video",message:"The video could not be loaded or played."}):(0,l.jsx)("video",{src:r,controls:!0,className:"max-w-full max-h-full rounded-lg shadow-sm",preload:"metadata",onError:()=>a(!0),children:"Your browser does not support the video tag."})})]})}var z=s(81417);function W(e){let{item:t}=e,s=(0,O.w8)(t.path,!0);return(0,l.jsx)("div",{className:"w-full h-full flex flex-col",children:(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center overflow-auto",children:(0,l.jsx)("div",{className:"w-full max-w-4xl",children:(0,l.jsx)(z.default,{audioUrl:s,autoPlay:!0})})})})}function U(e){let{itemId:t,version:s=0}=e,l=(0,m.GV)(e=>e.folderTree.rootNode),a=t?function e(t,s){if(!t)return null;if(t.id===s)return t;if(t.children)for(let l of t.children){let t=e(l,s);if(t)return t}return null}(l,t):null,r=(null==a?void 0:a.path)||null,[n,i]=(0,d.useState)(""),[o,c]=(0,d.useState)(!0),[u,x]=(0,d.useState)(null),[h,f]=(0,d.useState)(null),p=(0,d.useRef)(null);return(0,d.useEffect)(()=>{i(""),x(null),f(null),c(!0),p.current&&p.current.abort();let e=new AbortController;if(p.current=e,!t||!r)return void c(!1);if(null==a?void 0:a.isDir){c(!1),x("Cannot read content of a directory");return}return fetch((0,O.w8)(r,!1),{signal:e.signal}).then(t=>{if(!e.signal.aborted){if(!t.ok){if(404===t.status)throw f(!1),Error("File not found");throw Error("HTTP error! status: ".concat(t.status))}return t.text()}}).then(t=>{e.signal.aborted||(i(t||""),f(!0))}).catch(t=>{e.signal.aborted||(x(t.message),"File not found"===t.message||console.error("Error loading file content:",t))}).finally(()=>{e.signal.aborted||c(!1)}),()=>{e.abort()}},[t,s,r,null==a?void 0:a.isDir]),{content:n,isLoading:o,error:u,fileExists:h,fullPath:r}}function B(e){let{message:t="Loading content..."}=e;return(0,l.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"w-4 h-4 border border-muted-foreground border-t-transparent rounded-full animate-spin"}),(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:t})]})})}function H(e){let{title:t="File not found",message:s="The file could not be found or accessed."}=e;return(0,l.jsxs)("div",{className:"p-4 border border-yellow-200 bg-yellow-50 rounded-lg",children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-yellow-800 mb-1",children:t}),(0,l.jsx)("p",{className:"text-sm text-yellow-600",children:s})]})}var q=s(89390),Z=s(98283),J=s(86841);function $(e){let{value:t,extensions:s=[],height:a="100vh"}=e,{theme:r,systemTheme:n}=(0,J.D)();return(0,l.jsx)("div",{className:"flex-1 overflow-auto rounded-md",children:(0,l.jsx)(q.Ay,{value:t,extensions:s,theme:"dark"===r||"system"===r&&"dark"===n?Z.bM:"light",height:a,readOnly:!0,basicSetup:{lineNumbers:!0,foldGutter:!0,highlightActiveLine:!0,searchKeymap:!1,autocompletion:!1,bracketMatching:!0,dropCursor:!1,indentOnInput:!1}})})}var X=s(4101),Y=s(32403),Q=s(37939),K=s(20186),ee=s(24157),et=s(41437),es=s(30017);function el(e){let{item:t,version:s=0}=e,[a,r]=(0,d.useState)(!0),{content:n,isLoading:i,error:o,fileExists:c}=U({itemId:t.id,version:s}),u=t.name.toLowerCase(),m=(()=>{if(u.endsWith(".py"))return{extension:(0,K.Hg)(),previewType:"Python Code Preview"};if(u.endsWith(".js")||u.endsWith(".jsx"))return{extension:(0,ee.Q2)(),previewType:"JavaScript Code Preview"};if(u.endsWith(".ts")||u.endsWith(".tsx"))return{extension:(0,ee.Q2)({typescript:!0}),previewType:"TypeScript Code Preview"};if(u.endsWith(".sql"))return{extension:(0,et.ll)(),previewType:"SQL Code Preview"};if(u.endsWith(".md")||u.endsWith(".markdown"))return{extension:(0,es.wD)(),previewType:"Markdown Preview"};return null})(),x=null!==m,h=u.endsWith(".md")||u.endsWith(".markdown");return(0,l.jsxs)("div",{className:"w-full h-full flex flex-col relative",children:[h&&!i&&!o&&!1!==c&&(0,l.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,l.jsx)(F.$,{variant:"outline",size:"sm",onClick:()=>r(!a),className:"gap-2",children:a?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Y.A,{className:"h-4 w-4"}),"Show source"]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Q.A,{className:"h-4 w-4"}),"See rendered"]})})}),(()=>{if(i)return(0,l.jsx)(B,{});if(o)return(0,l.jsx)(_.A,{title:"Error loading file",message:o});if(!1===c)return(0,l.jsx)(H,{});if(h&&a)return(0,l.jsx)("div",{className:"w-full h-full overflow-auto p-6",children:(0,l.jsx)("div",{className:"markdown-content max-w-4xl",children:(0,l.jsx)(X.oz,{children:n||"(Empty file)"})})});let e=x&&m?[m.extension]:[];return(0,l.jsx)($,{value:n||"(Empty file)",extensions:e})})()]})}var ea=s(18870);function er(e){let{item:t,version:s=0}=e,{content:a,isLoading:r,error:n,fileExists:i}=U({itemId:t.id,version:s}),o=(0,d.useMemo)(()=>{if(!a.trim())return null;try{return JSON.parse(a)}catch(e){return null}},[a]);return(0,l.jsx)("div",{className:"w-full h-full flex flex-col",children:r?(0,l.jsx)(B,{message:"Loading JSON content..."}):n?(0,l.jsx)(_.A,{title:"Error loading file",message:n}):!1===i?(0,l.jsx)(H,{}):a.trim()?o?(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(ea.A,{src:o,showControls:!0,className:"h-full"})}):(0,l.jsxs)("div",{className:"flex flex-col h-full min-h-0",children:[(0,l.jsx)("div",{className:"shrink-0",children:(0,l.jsx)(_.A,{title:"Invalid JSON",message:"The file content is not valid JSON. Displaying as plain text."})}),(0,l.jsx)("div",{className:"flex-1 min-h-0 mt-4",children:(0,l.jsx)($,{value:a,extensions:[]})})]}):(0,l.jsx)(_.A,{title:"Empty file",message:"The file is empty or contains only whitespace."})})}var en=s(39226);function ei(e){let{item:t,version:s=0}=e,{content:a,isLoading:r,error:n,fileExists:i}=U({itemId:t.id,version:s});return(0,l.jsx)("div",{className:"w-full h-full flex flex-col overflow-auto min-h-0",children:r?(0,l.jsx)(B,{message:"Loading YAML content..."}):n?(0,l.jsx)(_.A,{title:"Error loading file",message:n}):!1===i?(0,l.jsx)(H,{}):(0,l.jsx)($,{value:a||"(Empty file)",extensions:[(0,en.oQ)()],height:"100%"})})}var eo=s(95543),ed=s(57182);function ec(e){let{title:t="Not Implemented Yet",message:s="Preview for this file format is not implemented yet.",details:a}=e;return(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center space-y-4",children:[(0,l.jsxs)("div",{className:"p-4 border border-yellow-200 bg-yellow-50 rounded-lg",children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-yellow-800 mb-1",children:t}),(0,l.jsx)("p",{className:"text-sm text-yellow-600",children:s})]}),a&&(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:(0,l.jsx)("p",{children:a})})]})})}function eu(e){let{item:t}=e,s=(0,m.jL)(),[a,r]=(0,d.useState)(null),[n,i]=(0,d.useState)(!1),[o,c]=(0,d.useState)(null),u=t.name.toLowerCase().endsWith(".parquet"),x=u?"WITH meta AS (\n    SELECT\n        path_in_schema AS column_name,\n        SUM(num_values) AS cntAll,\n        SUM(stats_null_count) AS cntNull,\n        MIN(stats_min_value) AS min,\n        MAX(stats_max_value) AS max\n    FROM parquet_metadata('".concat(t.path,"')\n    GROUP BY path_in_schema\n  )\n  SELECT column_name, column_type, cntAll, cntNull, min, max\n  FROM (DESCRIBE SELECT * FROM read_parquet ('").concat(t.path,"'))\n      LEFT JOIN meta USING (column_name)"):null;return(0,d.useEffect)(()=>{u&&x&&(async()=>{i(!0),c(null);try{let e=(0,eo.bL)("parquet_metadata"),l=await (0,eo.l4)(x,e,s,"duckdb",t.path);r(l)}catch(e){console.error("Error executing parquet metadata query:",e),c(e instanceof Error?e.message:"Failed to load parquet metadata")}finally{i(!1)}})()},[x,s,u]),(0,l.jsx)("div",{className:"w-full h-full flex flex-col",children:u?n?(0,l.jsx)(B,{message:"Loading Parquet metadata..."}):o?(0,l.jsx)(_.A,{title:"Error loading metadata",message:o}):a&&0!==a.length?(0,l.jsx)("div",{className:"flex-1 border rounded-md overflow-hidden",children:(0,l.jsx)(ed.A,{data:a})}):(0,l.jsx)(H,{title:"No metadata found",message:"No column metadata could be retrieved from the Parquet file."}):(0,l.jsx)(ec,{message:"Preview for this columnar file format is not implemented yet.",details:"File: ".concat(t.name,". Currently only Parquet files are supported for columnar table preview.")})})}function em(e){let{item:t}=e,s=(0,m.jL)(),[a,r]=(0,d.useState)(null),[n,i]=(0,d.useState)(!1),[o,c]=(0,d.useState)(null),u="SELECT * FROM '".concat(t.path,"' LIMIT 10");return(0,d.useEffect)(()=>{(async()=>{i(!0),c(null);try{let e=(0,eo.bL)("table_preview"),l=await (0,eo.l4)(u,e,s,"duckdb",t.path);r(l)}catch(e){console.error("Error executing table preview query:",e),c(e instanceof Error?e.message:"Failed to load table data")}finally{i(!1)}})()},[u,s]),(0,l.jsx)("div",{className:"w-full h-full flex flex-col",children:n?(0,l.jsx)(B,{message:"Loading table data..."}):o?(0,l.jsx)(_.A,{title:"Error loading table",message:o,details:"Query: ".concat(u)}):a&&0!==a.length?(0,l.jsx)("div",{className:"flex-1 border rounded-lg overflow-hidden",children:(0,l.jsx)(ed.A,{data:a})}):(0,l.jsx)(H,{title:"No data found",message:"The table appears to be empty or could not be read."})})}var ex=s(61228),eh=s(80072),ef=s(54302),ep=s(55781),ej=s(92407),eg=s(273),eN=s(90384),ev=s(94049),ew=s(84345);function eb(e){let{hasVideos:t,totalPages:s,currentPage:a,onPrevPage:r,onNextPage:n,mediaFilesCount:o}=e,d=(0,m.jL)(),c=(0,m.GV)(e=>e.ui.autoPlayAllVideos);return(0,l.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(eh.A,{className:"h-5 w-5"}),(0,l.jsxs)("span",{className:"font-medium",children:[o," items"]})]}),t&&(0,l.jsx)(F.$,{variant:"outline",size:"sm",onClick:()=>{d((0,k.setAutoPlayAllVideos)(!c))},className:"flex items-center gap-2",children:c?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eg.A,{className:"h-4 w-4"}),"Stop"]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eN.A,{className:"h-4 w-4"}),"Play"]})})]}),(0,l.jsx)("div",{className:"flex items-center gap-2",children:s>1&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(F.$,{variant:"outline",size:"sm",onClick:r,disabled:0===a,children:(0,l.jsx)(ev.A,{className:"h-4 w-4"})}),(0,l.jsxs)("span",{className:"text-sm text-muted-foreground px-2",children:[a+1," of ",s]}),(0,l.jsx)(F.$,{variant:"outline",size:"sm",onClick:n,disabled:a===s-1,children:(0,l.jsx)(i.A,{className:"h-4 w-4"})})]})}),(0,l.jsx)(ew.A,{})]})}let ey=(0,R.default)(()=>Promise.all([s.e(6668),s.e(340)]).then(s.bind(s,340)),{loadableGenerated:{webpack:()=>[340]},ssr:!1,loading:()=>(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground text-xs",children:"Loading 3D..."})});function eE(e){let{item:t}=e,s=(0,m.jL)(),[a,r]=(0,d.useState)([]),[n,i]=(0,d.useState)(0),[o,c]=(0,d.useState)(!1),[u,h]=(0,d.useState)(null),f=(0,m.GV)(e=>e.ui.galleryItemWidth),p=(0,m.GV)(e=>e.ui.galleryItemHeight),g=(0,m.GV)(e=>e.ui.galleryCaptionHeight);(0,d.useEffect)(()=>{(async()=>{c(!0),h(null);try{let e=(await s((0,x.PI)({path:t.path,limit:1e3})).unwrap()).items.filter(e=>!e.isDir).map(e=>{let s=(0,j.t)(e.name);return s===j.p.Image?{name:e.name,path:(0,S.CN)(t.path,e.name),type:"image"}:s===j.p.Video?{name:e.name,path:(0,S.CN)(t.path,e.name),type:"video"}:s===j.p.Audio?{name:e.name,path:(0,S.CN)(t.path,e.name),type:"audio"}:s===j.p.Model3D?{name:e.name,path:(0,S.CN)(t.path,e.name),type:"model3d"}:null}).filter(e=>null!==e);r(e),i(0)}catch(e){console.error("Error loading folder contents:",e),h(e instanceof Error?e.message:"Failed to load folder contents")}finally{c(!1)}})()},[t.path,s]);let N=Math.ceil(a.length/10),v=a.slice(10*n,(n+1)*10),w=v.some(e=>"video"===e.type);return o?(0,l.jsx)(B,{message:"Loading album contents..."}):u?(0,l.jsx)(_.A,{title:"Error loading album",message:u,details:"Folder: ".concat(t.path)}):0===a.length?(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 text-muted-foreground",children:[(0,l.jsx)(eh.A,{className:"h-12 w-12 opacity-50"}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("p",{className:"text-lg font-medium mb-2",children:"No Media Files"}),(0,l.jsx)("p",{className:"text-sm",children:"This folder does not contain any image, video, or audio files"})]})]}):(0,l.jsxs)("div",{className:"h-full w-full flex flex-col",children:[(0,l.jsx)("div",{className:"flex-shrink-0 p-4 border-b",children:(0,l.jsx)(eb,{hasVideos:w,totalPages:N,currentPage:n,onPrevPage:()=>{i(e=>Math.max(0,e-1))},onNextPage:()=>{i(e=>Math.min(N-1,e+1))},mediaFilesCount:a.length})}),(0,l.jsx)("div",{className:"flex-1 overflow-auto p-4",children:(0,l.jsx)("div",{className:"grid gap-4 justify-items-center",style:{gridTemplateColumns:"repeat(auto-fill, ".concat(f,"px)")},children:v.map(e=>(0,l.jsxs)("div",{className:"relative border rounded-lg overflow-hidden hover:shadow-md transition-shadow bg-muted/30",style:{width:"".concat(f,"px"),height:"".concat(p+g,"px")},children:[(0,l.jsx)("div",{className:"relative overflow-hidden",style:{height:"".concat(p,"px")},children:"image"===e.type?(0,l.jsx)(ef.A,{src:(0,O.w8)(e.path,!0),alt:e.name,className:"w-full h-full"}):"video"===e.type?(0,l.jsx)(ep.A,{visualValue:(0,O.w8)(e.path,!0)}):"audio"===e.type?(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,l.jsx)(ej.A,{audioUrl:(0,O.w8)(e.path,!0),height:p,allowPopOver:!0})}):(0,l.jsx)(ey,{modelUrl:(0,O.w8)(e.path,!0)})}),(0,l.jsx)("div",{className:"p-3 bg-background border-t",style:{height:"".concat(g,"px")},children:(0,l.jsx)("p",{className:"text-xs line-clamp-2 h-full overflow-hidden break-all",title:e.name,children:e.name})})]},e.path))})})]})}let eA=(0,R.default)(()=>s.e(1768).then(s.bind(s,91768)),{loadableGenerated:{webpack:()=>[91768]},ssr:!1,loading:()=>(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loading PDF viewer..."})}),eC=(0,R.default)(()=>Promise.all([s.e(6668),s.e(340)]).then(s.bind(s,340)),{loadableGenerated:{webpack:()=>[340]},ssr:!1,loading:()=>(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loading 3D viewer..."})});function eT(e){return e.isDir&&e.name.endsWith(".lance")}function ek(){let e=(0,m.GV)(e=>e.folderTree.viewingId),t=(0,m.GV)(e=>e.folderTree.rootNode),s=e?function e(t,s){if(!t)return null;if(t.id===s)return t;if(t.children)for(let l of t.children){let t=e(l,s);if(t)return t}return null}(t,e):null,a=s&&!s.isDir?(0,j.t)(s.name):null,r=!!s&&eT(s),i=a===j.p.ColumnarTable||a===j.p.RowTable||r;return(0,l.jsxs)("div",{className:"h-full w-full p-4 flex flex-col min-h-0",children:[(0,l.jsx)("div",{className:"flex items-center space-x-2 mb-4 shrink-0",children:s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h3",{className:"font-medium text-sm",children:(0,S.uk)(s.path)}),i&&(0,l.jsx)(F.$,{variant:"ghost",size:"icon",onClick:()=>{if(s){let e="./Table?tablePath=".concat(encodeURIComponent(s.path));window.open(e,"_blank")}},title:"Open in Table view",children:(0,l.jsx)(f.A,{className:"h-4 w-4"})}),!s.isDir&&(0,l.jsx)(F.$,{variant:"ghost",size:"icon",onClick:()=>{if(s){let e=(0,O.w8)(s.path,!0);window.open(e,"_blank")}},title:"Download file",children:(0,l.jsx)(I.A,{className:"h-4 w-4"})}),(0,l.jsx)(M.A,{value:s.path})]}):(0,l.jsx)("h3",{className:"font-medium text-sm",children:"File Previewer"})}),(0,l.jsx)("div",{className:"flex-1 min-h-0 border rounded-md bg-muted/30 flex items-start justify-center p-2 overflow-auto",children:(()=>{if(!s)return(0,l.jsxs)("div",{className:"text-center space-y-4",children:[(0,l.jsx)("div",{className:"flex items-start justify-center",children:(0,l.jsx)(L.A,{className:"h-12 w-12 text-muted-foreground"})}),(0,l.jsx)("div",{children:(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select a file from the folder navigation to preview its contents"})})]});if(eT(s)){let e=(0,S.ww)(s.path),t=s.name.replace(/\.lance$/,"");return(0,l.jsx)(ex.A,{dbPath:e,tableName:t,tableInfo:null})}if(s.isDir&&function(e){if(!e.isDir||!e.children)return!1;let t=[j.p.Image,j.p.Video,j.p.Audio,j.p.Model3D];return e.children.some(e=>{if(e.isDir)return!1;let s=(0,j.t)(e.name);return t.includes(s)})}(s))return(0,l.jsx)(eE,{item:s});switch(a){case j.p.Image:return(0,l.jsx)(V,{item:s});case j.p.Video:return(0,l.jsx)(G,{item:s});case j.p.Audio:return(0,l.jsx)(W,{item:s});case j.p.Json:return(0,l.jsx)(er,{item:s});case j.p.Yaml:return(0,l.jsx)(ei,{item:s});case j.p.ColumnarTable:return(0,l.jsx)(eu,{item:s});case j.p.RowTable:return(0,l.jsx)(em,{item:s});case j.p.Text:return(0,l.jsx)(el,{item:s});case j.p.Pdf:return(0,l.jsx)(eA,{item:s});case j.p.Model3D:return(0,l.jsx)(eC,{modelUrl:(0,O.w8)(s.path,!0)});default:let e=s.isDir?function(e){if(!e.isDir||!e.children)return null;let t=e.children.filter(e=>e.isDir).length,s={};return e.children.forEach(e=>{if(!e.isDir){let t=e.name.includes(".")?"."+e.name.split(".").pop().toLowerCase():"(no ext)";s[t]=(s[t]||0)+1}}),{extensionCounts:s,folderCount:t}}(s):null;return(0,l.jsxs)("div",{className:"text-center space-y-4",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:s.isDir?(0,l.jsx)(n.A,{className:"h-12 w-12 text-muted-foreground"}):(0,l.jsx)(L.A,{className:"h-12 w-12 text-muted-foreground"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-lg font-medium text-muted-foreground mb-2",children:s.name}),(0,l.jsxs)("p",{className:"text-sm text-muted-foreground mb-2",children:["File Type: ",s.isDir?"Folder":a||"Unknown"]}),e&&(Object.keys(e.extensionCounts).length>0||e.folderCount>0)&&(0,l.jsx)("div",{className:"mt-4 mb-2 inline-block",children:(0,l.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-sm text-muted-foreground justify-center",children:[e.folderCount>0&&(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"font-medium",children:"Folders:"}),(0,l.jsx)("span",{children:e.folderCount})]}),Object.entries(e.extensionCounts).sort((e,t)=>{let[s]=e,[l]=t;return s.localeCompare(l)}).map(e=>{let[t,s]=e;return(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsxs)("span",{className:"font-medium",children:[t,":"]}),(0,l.jsx)("span",{children:s})]},t)})]})}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:s.isDir?"This folder does not contain media files for album preview":"Preview not available for this file type"})]})]})}})()})]})}function eS(){return(0,l.jsx)("div",{className:"h-full w-full",style:{maxHeight:"calc(100vh - ".concat(r.D,"px)")},children:(0,l.jsxs)(a.N,{direction:"horizontal",defaultSizes:[30,70],minSize:20,maxSize:80,className:"h-full",children:[(0,l.jsx)(P,{}),(0,l.jsx)(ek,{})]})})}},26460:(e,t,s)=>{s.d(t,{$:()=>j,Ay:()=>g,EI:()=>h,OX:()=>m,PI:()=>o,hE:()=>x});var l=s(58976),a=s(18607),r=s(16023),n=s(62252),i=s(69984);let o=(0,l.zD)("folderTree/loadFolderContents",async e=>{let{path:t,limit:s=100,showHidden:l=!1}=e,a=new URLSearchParams({path:t,limit:s.toString(),show_hidden:l.toString()}),n=await fetch("".concat(r.m4,"/ls?").concat(a));if(!n.ok)try{let e=await n.json();throw Error(e.error||"Failed to load folder contents: ".concat(n.statusText))}catch(e){if(e instanceof Error&&e.message!=="Failed to load folder contents: ".concat(n.statusText))throw e;throw Error("Failed to load folder contents: ".concat(n.statusText))}return{path:t,items:await n.json()}});function d(e,t){let s=e.name===t||""===t?e.name:(0,a.CN)(t,e.name);return{id:s,name:(0,a.uk)(s)||e.name,path:s,isDir:e.isDir,size:e.size,lastModified:e.lastModified,children:e.isDir?[]:void 0,isLoaded:!1,isExpanded:!1,loading:!1}}function c(e,t,s){return e.path===t?s(e):e.children?{...e,children:e.children.map(e=>c(e,t,s))}:e}let u=(0,l.Z0)({name:"folderTree",initialState:{rootNode:null,expandedPaths:[],loading:!1,error:null,viewingId:null},reducers:{toggleNodeExpansion:(e,t)=>{let s=t.payload,l=e.expandedPaths.indexOf(s);l>=0?e.expandedPaths.splice(l,1):e.expandedPaths.push(s),e.rootNode&&(e.rootNode=c(e.rootNode,s,e=>({...e,isExpanded:!e.isExpanded})))},expandNode:(e,t)=>{let s=t.payload;0>e.expandedPaths.indexOf(s)&&e.expandedPaths.push(s),e.rootNode&&(e.rootNode=c(e.rootNode,s,e=>({...e,isExpanded:!0})))},clearTree:e=>{e.rootNode=null,e.expandedPaths=[],e.error=null},setViewingId:(e,t)=>{e.viewingId=t.payload},setNodeLoading:(e,t)=>{let{path:s,loading:l}=t.payload;e.rootNode&&(e.rootNode=c(e.rootNode,s,e=>({...e,loading:l})))}},extraReducers:e=>{e.addCase(o.pending,(e,t)=>{e.loading=!0,e.error=null;let s=t.meta.arg.path;e.rootNode&&(e.rootNode=c(e.rootNode,s,e=>({...e,loading:!0})))}).addCase(o.fulfilled,(e,t)=>{e.loading=!1;let{path:s,items:l}=t.payload;if(e.rootNode){let t=c(e.rootNode,s,e=>({...e,children:l.map(e=>d(e,s)),isLoaded:!0,loading:!1}));e.rootNode=t}else e.rootNode=d({name:(0,a.uk)(s),size:0,lastModified:Date.now(),isDir:!0},(0,a.Gl)(s)),e.rootNode.path=s,e.rootNode.isLoaded=!0,e.rootNode.isExpanded=!0,e.rootNode.children=l.map(e=>d(e,s))}).addCase(o.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to load folder contents";let s=t.meta.arg.path;e.rootNode&&(e.rootNode=c(e.rootNode,s,e=>({...e,loading:!1})))})}}),{toggleNodeExpansion:m,expandNode:x,clearTree:h,setNodeLoading:f}=u.actions,{setViewingId:p}=u.actions,j=e=>t=>{if(t(p(e)),e){let s=(0,n.t)(e);(s===n.p.ColumnarTable||s===n.p.RowTable)&&t((0,i.setTablePath)(e))}},g=u.reducer},57182:(e,t,s)=>{s.d(t,{A:()=>d});var l=s(23892),a=s(85848),r=s(82918),n=s(96110),i=s(47160),o=s(59900);i.syG.registerModules([i.JKr]);let d=(0,a.memo)(function(e){let{data:t,className:s="",onGridReady:a,colDefOverrides:i,gridOptionOverrides:d}=e,c=(0,n.d2)(),u=(0,n.uM)(),m=(0,n.en)(),x=(0,n.GV)(e=>e.ui.rowHeight),h=(0,o.bt)(t).map(e=>{let t=e.field,s=i&&t?i[t]:void 0;return s?{...e,...s}:e}),f={...m,rowHeight:x,...d};return(0,l.jsx)("div",{className:"h-full w-full ".concat(s," rounded-md"),children:(0,l.jsx)(r.W6,{theme:c,rowData:t,columnDefs:h,onGridReady:e=>{null==a||a(e)},defaultColDef:u,...f})})})},61897:(e,t,s)=>{s.d(t,{A:()=>a});var l=s(23892);function a(e){let{title:t,message:s,details:a}=e;return(0,l.jsxs)("div",{className:"p-4 border border-red-200 bg-red-50 rounded-lg",children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-red-800 mb-1",children:t}),(0,l.jsx)("p",{className:"text-sm text-red-600",children:s}),a&&(0,l.jsx)("p",{className:"text-xs text-red-500 mt-2",children:a})]})}},81417:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var l=s(23892),a=s(85848),r=s(66668);function n(e){let{samples:t,duration:s,currentTime:r,onSeek:n,height:i=80}=e,o=(0,a.useRef)(null),d=(0,a.useRef)(null),c=(0,a.useRef)(null),[u,m]=(0,a.useState)(800);return(0,a.useEffect)(()=>{if(!c.current)return;let e=()=>{c.current&&m(c.current.clientWidth)};e();let t=new ResizeObserver(e);return t.observe(c.current),()=>{t.disconnect()}},[]),(0,a.useEffect)(()=>{if(!o.current)return;let e=o.current,s=e.getContext("2d"),l=e.width,a=e.height;s.clearRect(0,0,l,a);let r=Math.floor(t.length/l);s.strokeStyle=getComputedStyle(e).getPropertyValue("--chart-default-fill").trim()||"#3b82f6",s.lineWidth=1.5,s.beginPath();for(let e=0;e<l;e++){let l=a/2*(1-(t[e*r]||0));0===e?s.moveTo(e,l):s.lineTo(e,l)}s.stroke(),s.strokeStyle="hsl(var(--border))",s.lineWidth=1,s.beginPath(),s.moveTo(0,a/2),s.lineTo(l,a/2),s.stroke()},[t,u]),(0,a.useEffect)(()=>{if(!d.current)return;let e=d.current,t=e.getContext("2d"),l=e.width,a=e.height;t.clearRect(0,0,l,a);let n=r/s*l;t.strokeStyle="red",t.lineWidth=2,t.beginPath(),t.moveTo(n,0),t.lineTo(n,a),t.stroke()},[s,r]),(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)("div",{ref:c,className:"relative w-full cursor-pointer rounded overflow-hidden bg-muted/20 border border-border",style:{height:i},onClick:function(e){if(!o.current)return;let t=o.current.getBoundingClientRect(),l=(e.clientX-t.left)/t.width*s;n(Math.max(0,Math.min(s,l)))},children:[(0,l.jsx)("canvas",{ref:o,width:u,height:i,className:"absolute inset-0 w-full h-full"}),(0,l.jsx)("canvas",{ref:d,width:u,height:i,className:"absolute inset-0 w-full h-full pointer-events-none"})]})})}s(89116);var i=s(65102),o=s(70621);function d(e){let{audioUrl:t,autoPlay:s=!1,alt:d}=e,c=(0,a.useRef)(null),[u,m]=(0,a.useState)(0),{audioData:x,isLoading:h,error:f}=(0,o.s)(t),p=e=>{var t,s;(null==(s=c.current)||null==(t=s.audio)?void 0:t.current)&&(c.current.audio.current.currentTime=e)};return f?(0,l.jsx)("div",{className:"p-4 w-full flex items-center justify-start h-[280px]",children:(0,l.jsxs)("div",{className:"flex flex-col items-start space-y-3 max-w-full overflow-hidden",children:[d&&(0,l.jsx)("span",{className:"text-sm font-medium text-foreground break-all line-clamp-2",children:d}),(0,l.jsx)("span",{className:"text-xs break-all line-clamp-3 text-left text-destructive",children:f.message})]})}):h||!x?(0,l.jsx)("div",{className:"p-4 w-full flex items-center justify-center h-[280px]",children:(0,l.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,l.jsx)("div",{className:"w-12 h-12 border-4 border-muted-foreground border-t-transparent rounded-full animate-spin"}),(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading audio..."})]})}):(0,l.jsxs)("div",{className:"p-2 w-full space-y-2",children:[(0,l.jsx)(r.A,{ref:c,src:t,autoPlay:s,autoPlayAfterSrcChange:!1,showJumpControls:!1,customAdditionalControls:[],layout:"horizontal-reverse",listenInterval:100,onListen:()=>{var e,t;(null==(t=c.current)||null==(e=t.audio)?void 0:e.current)&&m(c.current.audio.current.currentTime)}}),(0,l.jsx)(n,{samples:x.samples,duration:x.duration,currentTime:u,onSeek:p,height:50}),(0,l.jsx)(i.A,{samples:x.samples,duration:x.duration,currentTime:u,onSeek:p,height:120})]})}}}]);