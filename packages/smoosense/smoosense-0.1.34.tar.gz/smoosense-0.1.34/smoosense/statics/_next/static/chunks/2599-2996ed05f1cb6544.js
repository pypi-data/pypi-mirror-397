"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2599],{53292:(e,t,s)=>{s.d(t,{p:()=>o});var a=s(85848),n=s(96110),l=s(32446),i=s(95543),r=s(68714);function o(){let e=(0,n.jL)(),t=(0,n.GV)(e=>e.ui.tablePath),s=(0,n.GV)(e=>e.ui.queryEngine),o=(0,n.GV)(e=>e.viewing.totalRows),d=(0,n.GV)(e=>(0,r.p)(e));return(0,a.useEffect)(()=>{(async()=>{if(!t||!s)return e((0,l.aN)(null));try{let a="lance"===s?"lance_table":"'".concat(t,"'"),n="SELECT COUNT(*) as total FROM ".concat(a).concat(d?" WHERE ".concat(d):""),r=await (0,i.l4)(n,"totalRows",e,s,t);if(r&&r.length>0){let t=Number(r[0].total);e((0,l.aN)(t))}}catch(t){console.error("Failed to fetch total rows:",t),e((0,l.aN)(null))}})()},[t,s,d,e]),o}},92599:(e,t,s)=>{s.r(t),s.d(t,{default:()=>P});var a=s(23892),n=s(85848),l=s(77933),i=s(82918),r=s(96110),o=s(47160),d=s(59900),c=s(59249),u=s(53292),m=s(32446),x=s(63583),h=s(53053),f=s(58972);function g(e){let{...t}=e;return(0,a.jsx)(h.bL,{"data-slot":"dropdown-menu",...t})}function p(e){let{...t}=e;return(0,a.jsx)(h.l9,{"data-slot":"dropdown-menu-trigger",...t})}function v(e){let{className:t,sideOffset:s=4,...n}=e;return(0,a.jsx)(h.ZL,{children:(0,a.jsx)(h.UC,{"data-slot":"dropdown-menu-content",sideOffset:s,className:(0,f.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function w(e){let{className:t,inset:s,variant:n="default",...l}=e;return(0,a.jsx)(h.q7,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":n,className:(0,f.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l})}var j=s(25168),b=s(89426),N=s(94049),C=s(59370),k=s(50196),y=s(19610);function S(){let e=(0,r.jL)(),t=(0,r.GV)(e=>e.viewing.pageSize),s=(0,r.GV)(e=>e.viewing.pageNumber),n=(0,r.GV)(e=>e.viewing.samplingCondition),l=(0,u.p)(),i=(s-1)*t+1,o=Math.min(s*t,l||t),d=l?Math.ceil(l/t):1,c=!!l&&s<d,h=s>1;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 border-t bg-muted/30 text-xs text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"Page size: "}),(0,a.jsxs)(g,{children:[(0,a.jsx)(p,{asChild:!0,children:(0,a.jsxs)(x.$,{variant:"outline",size:"sm",className:"h-7 w-20 text-xs justify-between font-normal cursor-pointer",children:[t,(0,a.jsx)(j.A,{className:"h-3 w-3 opacity-50"})]})}),(0,a.jsx)(v,{align:"start",className:"w-20",children:[10,25,50,100].map(s=>(0,a.jsx)(w,{onClick:()=>{var t;return t=s.toString(),void e((0,m.rp)(Number(t)))},className:s===t?"bg-accent":"",children:s},s))})]})]}),(0,a.jsx)(y.A,{}),(0,a.jsx)("div",{children:null!==n?(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-attention",children:["Showing ",t," random samples"]}),(0,a.jsxs)(x.$,{variant:"outline",size:"sm",onClick:()=>{e((0,m.lR)(null))},className:"cursor-pointer text-attention",children:["Back to Page ",s]})]}):l?(0,a.jsxs)(a.Fragment,{children:["Showing ",i.toLocaleString(),"-",o.toLocaleString()," of ",l.toLocaleString()," rows"]}):(0,a.jsxs)(a.Fragment,{children:["Showing first ",t," rows"]})})]}),null===n&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[l&&(0,a.jsxs)("span",{className:"mr-2",children:["Page ",s," of ",d]}),(0,a.jsx)(x.$,{variant:"ghost",size:"sm",onClick:()=>{e((0,m.SV)())},disabled:!h,className:"h-7 w-7 p-0 cursor-pointer",children:(0,a.jsx)(b.A,{className:"h-3 w-3"})}),(0,a.jsx)(x.$,{variant:"ghost",size:"sm",onClick:()=>{e((0,m.$w)())},disabled:!h,className:"h-7 w-7 p-0 cursor-pointer",children:(0,a.jsx)(N.A,{className:"h-3 w-3"})}),(0,a.jsx)(x.$,{variant:"ghost",size:"sm",onClick:()=>{e((0,m.Zj)())},disabled:!c,className:"h-7 w-7 p-0 cursor-pointer",children:(0,a.jsx)(C.A,{className:"h-3 w-3"})}),(0,a.jsx)(x.$,{variant:"ghost",size:"sm",onClick:()=>{e((0,m.ss)())},disabled:!c,className:"h-7 w-7 p-0 cursor-pointer",children:(0,a.jsx)(k.A,{className:"h-3 w-3"})})]})]})}var R=s(81876),I=s(33796),z=s(49616);function V(e){let{columns:t}=(0,r.jS)(),s=e.column.getColId(),n=t.find(e=>e.column_name===s),l=(null==n?void 0:n.duckdbType)||"Unknown";return(0,a.jsx)(z.Bc,{delayDuration:100,children:(0,a.jsxs)(z.m_,{children:[(0,a.jsx)(z.k$,{asChild:!0,children:(0,a.jsx)("span",{className:"ag-header-cell-text overflow-hidden",style:{direction:"rtl",textAlign:"left",display:"-webkit-box",WebkitBoxOrient:"vertical"},children:e.displayName})}),(0,a.jsx)(z.ZI,{className:"w-[300px]",children:(0,a.jsxs)("div",{className:"text-xs whitespace-normal break-words",children:[(0,a.jsx)("div",{className:"font-semibold py-1",children:s}),(0,a.jsxs)("div",{className:"",children:["Type: ",l]})]})})]})})}var E=s(89838);o.syG.registerModules([o.JKr]);let A=(0,n.memo)((0,n.forwardRef)((e,t)=>{let s=(0,r.jL)(),o=(0,r.d2)(),{rowHeight:u,headerPlotHeight:x,tablePath:h,sorting:f,samplingCondition:g}=(0,r.GV)(e=>({rowHeight:e.ui.rowHeight,headerPlotHeight:e.ui.headerPlotHeight,tablePath:e.ui.tablePath,sorting:e.ag.sorting,samplingCondition:e.viewing.samplingCondition}),l.bN),p=(0,n.useMemo)(()=>({resizable:!0,sortable:null===g,filter:!1,headerClass:"ag-header-cell-text",floatingFilter:!1,wrapText:!0,headerComponentParams:{innerHeaderComponent:V}}),[g]),v=(0,n.useRef)(null),{data:w,error:j}=(0,r.k1)(),{ag:b}=(0,r.O4)(),N=(0,r.OA)(),C=(0,n.useMemo)(()=>b?b.map(e=>{let t=N[e.field]||d.nJ.Text,s=f.find(t=>t.field===e.field);return{...e,...(0,d.yQ)(t,e),width:e.width,sort:s?s.direction:null,sortIndex:s?f.findIndex(t=>t.field===e.field):null}}):[],[b,N,f]),k=(0,n.useMemo)(()=>[{isTopRow:!0}],[]),y=(0,n.useCallback)(e=>{v.current=e.api},[]),z=(0,n.useCallback)(e=>{e.finished&&e.columns&&e.columns.forEach(e=>{let t=e.getColId(),a=e.getActualWidth();s((0,R.As)({field:t,width:a}))})},[s]),A=(0,n.useCallback)(()=>{if(v.current){let e=v.current.getColumnState().map(e=>e.colId);s((0,R.Fh)(e))}},[s]),P=(0,n.useCallback)(e=>{e.columns&&e.columns.forEach(e=>{let t=e.getColId(),a=e.isVisible();s((0,R.rr)({field:t,updates:{hide:!a}}))})},[s]),_=(0,n.useCallback)(e=>{v.current&&v.current.ensureColumnVisible(e,"start")},[]),G=(0,n.useCallback)(e=>{var t;if(e.node.isRowPinned())return;let a=(null==(t=e.rowIndex)?void 0:t.toString())||null;s((0,m.Vz)(a));let n=e.event;if(n&&(n.ctrlKey||n.metaKey)){let t=e.data;t&&(s((0,I.Hg)(t)),E.oR.success("Row ".concat(a," has been hand-picked")))}},[s]),H=(0,n.useCallback)(e=>{let t=e.api.getColumns();if(!t)return;let a=t.filter(e=>null!==e.getSortIndex()&&void 0!==e.getSortIndex()).map(e=>({field:e.getColDef().field,direction:e.getSort(),sortIndex:e.getSortIndex()})).sort((e,t)=>e.sortIndex-t.sortIndex).map(e=>{let{field:t,direction:s}=e;return{field:t,direction:s}});s((0,R.J_)(a))},[s]);(0,n.useEffect)(()=>{v.current&&v.current.resetRowHeights()},[u,x]),(0,n.useEffect)(()=>{if(v.current&&f){let e=f.map((e,t)=>({colId:e.field,sort:e.direction,sortIndex:t}));v.current.applyColumnState({state:e,defaultState:{sort:null}})}},[f]);let L=(0,n.useCallback)(e=>e.node.isRowPinned()?x:u,[x,u]);return((0,n.useImperativeHandle)(t,()=>({scrollToColumn:_}),[_]),h)?j?(0,a.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md",children:[(0,a.jsx)(c.A,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Error Loading Data"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:j})]})}):(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsx)("div",{className:"flex-1 min-h-0 h-full w-full",children:(0,a.jsx)(i.W6,{theme:o,rowData:w,columnDefs:C,onGridReady:y,onColumnResized:z,onDragStopped:A,onColumnVisible:P,onRowClicked:G,onSortChanged:H,defaultColDef:p,getRowHeight:L,pinnedTopRowData:k,suppressRowVirtualisation:!0,suppressColumnVirtualisation:!0,animateRows:!1,pagination:!1})}),(0,a.jsx)(S,{})]}):(0,a.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(c.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No File Selected"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Please select a file to view its data"})]})})}));A.displayName="MainTable";let P=A}}]);