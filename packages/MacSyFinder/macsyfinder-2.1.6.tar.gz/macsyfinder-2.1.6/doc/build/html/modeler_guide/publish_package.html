

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Publishing/sharing models &mdash; MacSyFinder 2.1.6 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../_static/_css/custom.css?v=b89f2dfc" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=4f932e3e"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Gallery of examples of MacSyFinder’s models" href="gallery.html" />
    <link rel="prev" title="Helper Tool" href="helper_tools.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            MacSyFinder
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/index.html">User Guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Modeller Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#modelling-systems-with-macsyfinder">Modelling Systems with MacSyFinder</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="package.html">Models Package</a></li>
<li class="toctree-l3"><a class="reference internal" href="modeling.html">Macromolecular models</a></li>
<li class="toctree-l3"><a class="reference internal" href="helper_tools.html">Helper Tool</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Publishing/sharing models</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#writing-your-own-macsy-model-package">Writing your own macsy-model package</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sharing-your-models">Sharing your models</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="gallery.html">Gallery of examples of MacSyFinder’s models</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#carrying-models-from-v1-to-v2">Carrying models from v1 to v2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#frequently-asked-questions">Frequently Asked Questions</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/index.html">Developer Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MacSyFinder</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Modeller Guide</a></li>
      <li class="breadcrumb-item active">Publishing/sharing models</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="publishing-sharing-models">
<span id="publish-package"></span><h1>Publishing/sharing models<a class="headerlink" href="#publishing-sharing-models" title="Link to this heading"></a></h1>
<blockquote>
<div></div></blockquote>
<section id="writing-your-own-macsy-model-package">
<span id="writing-model-package"></span><h2>Writing your own macsy-model package<a class="headerlink" href="#writing-your-own-macsy-model-package" title="Link to this heading"></a></h2>
<p>The whole package structure and the corresponding files are described in the section <a class="reference internal" href="package.html#package-structure"><span class="std std-ref">Structure of a macsy-model package</span></a>. It requires five different
types of files to be complete:</p>
<ul class="simple">
<li><p>a <cite>metadata.yml</cite> file (mandatory)</p></li>
<li><p>a <cite>README.md</cite> file (mandatory)</p></li>
<li><p>a <cite>LICENSE</cite> file (optional but <strong>HIGHLY</strong> recommended)</p></li>
<li><p>a <cite>model_conf.xml</cite> file (optional)</p></li>
<li><p>macsy-models definition(s) within a <cite>definitions</cite> folder (mandatory)</p></li>
<li><p>HMM profiles within a <cite>profiles</cite> folder (mandatory)</p></li>
</ul>
<p>You can create a template for your package by using <cite>msf_data init</cite>.
It will create for you:</p>
<ul class="simple">
<li><p>the git repository with the data package with the right structure.</p></li>
<li><p>a template of <cite>metadata.yaml</cite> .</p></li>
<li><p>a template of <cite>README.md</cite> file.</p></li>
<li><p>a generic <cite>model_conf.xml</cite> file.</p></li>
<li><p>a LICENSE file if <cite>–license</cite> option is set.</p></li>
<li><p>a COPYRIGHT file if <cite>–holders</cite> option is set.</p></li>
<li><p>a directory <cite>definitions</cite> with an example of model definition (model_example.xml to remove before publishing).</p></li>
<li><p>a directory <cite>profiles</cite> where to put the hmm profiles corresponding to the models genes.</p></li>
</ul>
</section>
<section id="sharing-your-models">
<h2>Sharing your models<a class="headerlink" href="#sharing-your-models" title="Link to this heading"></a></h2>
<p>If you want to share your models you can create a <a class="reference internal" href="package.html#model-package"><span class="std std-ref">macsy-model package</span></a> in your github repository.
Several steps are needed to publish your model:</p>
<ol class="arabic">
<li><p>Check the <strong>validity</strong> of your package with the <code class="docutils literal notranslate"><span class="pre">msf_data</span> <span class="pre">check</span></code> command.
You have to run it from within the folder containing your package files.
It will report:</p>
<ul class="simple">
<li><p>everything is clear: <cite>msf_data</cite> displays the next step to take to publish the package</p></li>
<li><p>warning: it means that the package could be improved.</p></li>
</ul>
<p>It is better to fix it if you can, but you can also proceed to <em>Step 2</em></p>
<ul class="simple">
<li><p>error: the package is not ready to be published as is. You have to fix the errors before you go to <em>Step 2</em>.</p></li>
</ul>
</li>
<li><p>Create a <strong>tag</strong>, and submit a <strong>pull request</strong> to the <a class="reference external" href="https://github.com/macsy-models">https://github.com/macsy-models</a> organization.
This step is <strong>very important</strong>: without a tag, there is no package.
<cite>msf_data check</cite> only tagged packages.
It is <strong>Mandatory</strong> to follow a versioning scheme described here:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://www.python.org/dev/peps/pep-0440/#public-version-identifiers">https://www.python.org/dev/peps/pep-0440/#public-version-identifiers</a></p></li>
<li><p><a class="reference external" href="https://the-hitchhikers-guide-to-packaging.readthedocs.io/en/latest/specification.html#standard-versioning-schemes">https://the-hitchhikers-guide-to-packaging.readthedocs.io/en/latest/specification.html#standard-versioning-schemes</a></p></li>
</ul>
</div></blockquote>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If your package is in version <em>2.0.1</em> the tag must be <cite>2.0.1</cite>.
The version or tag must <strong>NOT</strong> start with letter as <cite>v2.0.1</cite> or <cite>my_package-2.0.1</cite>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To avoid making an inconsistent model visible by msf_data install/search (by pushing a tag),
a pre-push hook has been setup in the git repository by <cite>msf_data init</cite> command.
If you do not used <cite>msf_data init</cite> to create the model, It is a good idea to set up the hook by yourself.</p>
<p>Check that the hook is well named pre-push and it is executable (<cite>chmod 755 .git/hooks/pre-push</cite>)
This script run <cite>msf_data check</cite> if you push a tag and it prevent the push if some error are found.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>

<span class="c1"># An example hook script to verify what is about to be pushed.  Called by &quot;git</span>
<span class="c1"># push&quot; after it has checked the remote status, but before anything has been</span>
<span class="c1"># pushed.  If this script exits with a non-zero status nothing will be pushed.</span>
<span class="c1">#</span>
<span class="c1"># This hook is called with the following parameters:</span>
<span class="c1">#</span>
<span class="c1"># $1 -- Name of the remote to which the push is being done</span>
<span class="c1"># $2 -- URL to which the push is being done</span>
<span class="c1">#</span>
<span class="c1"># If pushing without using a named remote those arguments will be equal.</span>
<span class="c1">#</span>
<span class="c1"># Information about the commits which are being pushed is supplied as lines to</span>
<span class="c1"># the standard input in the form:</span>
<span class="c1">#</span>
<span class="c1">#   &lt;local ref&gt; &lt;local oid&gt; &lt;remote ref&gt; &lt;remote oid&gt;</span>
<span class="c1">#</span>
<span class="c1"># This script check if you push a tag</span>
<span class="c1"># if yes check if the tag match to the version decalred in metadata.yml</span>
<span class="c1"># if yes it prevents the push until the tag and the version match</span>
<span class="c1">#</span>
<span class="c1"># This script is widely inspired from https://gist.github.com/farseerfc/0729c08cd7c82b07000f20105f733b17</span>

<span class="nv">remote</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="nv">url</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span>

<span class="nv">tagref</span><span class="o">=</span><span class="k">$(</span>grep<span class="w"> </span>-Po<span class="w"> </span><span class="s1">&#39;refs/tags/([^ ]*) &#39;</span><span class="w"> </span>&lt;/dev/stdin<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n1<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-c11-<span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;[:space:]&#39;</span><span class="k">)</span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$tagref</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w">  </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="c1">## NOT pushing tag , exit normally</span>
<span class="w">    </span><span class="nb">exit</span><span class="w"> </span><span class="m">0</span>
<span class="k">fi</span>

macsydata<span class="w"> </span>check
<span class="nv">returncode</span><span class="o">=</span><span class="nv">$?</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$returncode</span><span class="w"> </span>-ne<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nv">Red</span><span class="o">=</span><span class="s1">$&#39;\e[1;31m&#39;</span>
<span class="w">    </span><span class="nv">Green</span><span class="o">=</span><span class="s1">$&#39;\e[1;32m&#39;</span>
<span class="w">    </span><span class="nv">Yello</span><span class="o">=</span><span class="s1">$&#39;\e[1;33m&#39;</span>
<span class="w">    </span><span class="nv">Clear</span><span class="o">=</span><span class="s1">$&#39;\e[0m&#39;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">Green</span><span class="si">}</span><span class="s2">To fix errors:</span><span class="si">${</span><span class="nv">Clear</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">Red</span><span class="si">}</span><span class="s2">  1. remove tag:</span><span class="si">${</span><span class="nv">Clear</span><span class="si">}</span><span class="s2"> git tag -d </span><span class="si">${</span><span class="nv">tagref</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">Yello</span><span class="si">}</span><span class="s2">  2. fix errors above </span><span class="si">${</span><span class="nv">Clear</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">Yello</span><span class="si">}</span><span class="s2">  3. run &#39;macsydata check&#39; until everything is fixed </span><span class="si">${</span><span class="nv">Clear</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">Green</span><span class="si">}</span><span class="s2">  4. commit your fix:</span><span class="si">${</span><span class="nv">clear</span><span class="si">}</span><span class="s2"> git add / git commit &quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">Green</span><span class="si">}</span><span class="s2">  5. tag again:</span><span class="si">${</span><span class="nv">Clear</span><span class="si">}</span><span class="s2"> git tag -a </span><span class="si">${</span><span class="nv">tagref</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">Green</span><span class="si">}</span><span class="s2">  6. and push:</span><span class="si">${</span><span class="nv">Clear</span><span class="si">}</span><span class="s2"> git push </span><span class="si">${</span><span class="nv">remote</span><span class="si">}</span><span class="s2"> </span><span class="si">${</span><span class="nv">tagref</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">fi</span>

<span class="nb">exit</span><span class="w"> </span><span class="nv">$returncode</span>
</pre></div>
</div>
<p><a class="reference download internal" download="" href="../_downloads/12424bc65a997e828f664efef9d02f59/pre-push"><code class="xref download docutils literal notranslate"><span class="pre">pre-push</span></code></a> .</p>
</div>
</li>
<li><p>When your pull request (PR) is accepted, the model package becomes automatically available to the community through the <cite>msf_data</cite> tool.</p></li>
</ol>
<p>If you don’t want to submit a PR you can provide the tag release tarball (tar.gz) as is to your collaborators.
This archive will also be usable with the <cite>msf_data</cite> tool.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">msf_data</span> <span class="pre">check</span></code>
checks the syntax of the package, but it does not publish anything.
It just warns you if something is wrong with the package.
Every model provider should check its own package before publishing it.
The package publication is done by the <cite>git push</cite> and the <cite>pull request</cite>.</p>
</div>
<p>Examples of <code class="docutils literal notranslate"><span class="pre">msf_data</span> <span class="pre">check</span></code> outputs:</p>
<p>Your package is syntactically correct:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>msf_data check tests/data/models/test_model_package/
Checking &#39;test_model_package&#39; package structure
Checking &#39;test_model_package&#39; metadata_path
Checking &#39;test_model_package&#39; Model definitions
Models Parsing
Definitions are consistent
Checking &#39;test_model_package&#39; model configuration
There is no model configuration for package test_model_package.
If everyone were like you, I&#39;d be out of business
To push the models in organization:
        cd tests/data/models/test_model_package
Transform the models into a git repository
        git init .
        git add .
        git commit -m &#39;initial commit&#39;
add a remote repository to host the models
for instance if you want to add the models to &#39;macsy-models&#39;
        git remote add origin https://github.com/macsy-models/
        git tag 1.0b2
        git push --tags
</pre></div>
</div>
<p>You received some warnings:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>msf_data check tests/data/models/Model_w_conf/
Checking &#39;Model_w_conf&#39; package structure
Checking &#39;Model_w_conf&#39; metadata_path
Checking &#39;Model_w_conf&#39; Model definitions
Models Parsing
Definitions are consistent
Checking &#39;Model_w_conf&#39; model configuration
The package &#39;Model_w_conf&#39; have not any LICENSE file. May be you have not right to use it.
The package &#39;Model_w_conf&#39; have not any README file.
msf_data says: You&#39;re only giving me a partial QA payment?
I&#39;ll take it this time, but I&#39;m not happy.
I&#39;ll be really happy, if you fix warnings above, before to publish these models.
</pre></div>
</div>
<p>You received some errors:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>msf_data check tests/data/models/TFF-SF/
Checking &#39;TFF-SF&#39; package structure
The package &#39;TFF-SF&#39; have no &#39;metadata.yml&#39;.
Please fix issues above, before publishing these models.
ValueError
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="helper_tools.html" class="btn btn-neutral float-left" title="Helper Tool" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="gallery.html" class="btn btn-neutral float-right" title="Gallery of examples of MacSyFinder’s models" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014-2025, &#39;Institut Pasteur (Paris), CNRS&#39;.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  

<div class="licensing">
  <p>
    This documentation is licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License
      <img src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png">.
    </a>
  </p>
</div>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

<a class="github" href="https://github.com/gem-pasteur/macsyfinder">
    <img style="position: absolute; top: 0; right: 0; border: 0;"
         src="https://raw.githubusercontent.com/gem-pasteur/macsyfinder/refs/heads/main/doc/source/_static/github-banner.svg"
         alt="Fork me on GitHub" />
</a>



</body>
</html>