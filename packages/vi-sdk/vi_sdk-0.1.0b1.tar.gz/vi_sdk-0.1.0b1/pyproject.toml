[project]
authors = [{name = "Wei Loon Cheng", email = "weiloon@datature.io"}]
classifiers = [
  "Development Status :: 4 - Beta",
  "Intended Audience :: Developers",
  "License :: OSI Approved :: Apache Software License",
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: 3.13",
]
description = "Datature Vi SDK"
dynamic = ["version"]
license = {text = "Apache License 2.0"}
name = "vi-sdk"
readme = "README.md"
requires-python = ">=3.10, <3.14"

dependencies = [
  "filetype>=1.2.0",
  "google-crc32c>=1.7.1",
  "httpx[http2]>=0.28.1",
  "msgspec>=0.19.0",
  "pillow>=11.3.0",
  "rich>=13.0.0",
]

[project.urls]
Changelog = "https://vi.developers.datature.com/docs/vi-sdk-changelog"
Documentation = "https://vi.developers.datature.com/docs/vi-sdk"
Homepage = "https://vi.run"

[build-system]
build-backend = "hatchling.build"
requires = ["hatchling"]

[tool.hatch.version]
path = "vi/version.py"

[tool.hatch.build.targets.wheel]
packages = ["vi"]

[project.optional-dependencies]
# Development dependencies
dev = [
  # Testing
  "coverage[toml]>=7.4.0",
  "pytest>=8.4.2",
  "pytest-cov>=7.0.0",
  "pytest-xdist>=3.5.0", # Linting and formatting
  "ruff>=0.13.2",
  "pre-commit>=4.0.0",
  "mkdocs>=1.5.0", # Documentation
  "mkdocs-material>=9.4.0",
  "mkdocstrings[python]>=0.24.0",
  "mkdocs-autorefs>=0.5.0",
  "mkdocs-git-revision-date-localized-plugin>=1.2.0",
  "mkdocs-minify-plugin>=0.7.0",
  "pymdown-extensions>=10.0",
]

# NOTE: Model-specific inference dependencies are NOT listed here!
# They are managed in vi/inference/requirements/ and auto-install on first use.
# See vi/inference/requirements/README.md for details.
inference = [
  "accelerate>=1.10.1",
  "bitsandbytes>=0.48.1; sys_platform != 'darwin'",
  "peft>=0.17.1",
  "torch>=2.8.0",
  "torchvision>=0.23.0",
  "transformers>=4.57.1",
  "xgrammar>=0.1.25",
]

# Jupyter notebook support
jupyter = [
  "ipykernel>=6.30.1",
  "ipywidgets>=8.1.7",
]

# Deployment support
deployment = [
  "docker>=7.1.0",
  "openai>=2.6.1",
  "vi-sdk[inference]",
]

# All optional features
all = [
  "vi-sdk[dev]",
  "vi-sdk[inference]",
  "vi-sdk[jupyter]",
  "vi-sdk[deployment]",
]
