[build-system]
requires = ["setuptools>=64", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "emukit"
dynamic = ["version"]

description = "Toolkit for decision making under uncertainty."
readme = "README.md"
license = { file = "LICENSE" }
requires-python = ">=3.10"
authors = [ { name = "Emukit Authors" } ]
keywords = ["bayesian-optimization", "active-learning", "uncertainty", "experimental-design"]
classifiers = [
  "Development Status :: 3 - Alpha",
  "Intended Audience :: Developers",
  "Intended Audience :: Education",
  "Intended Audience :: Science/Research",
  "License :: OSI Approved :: Apache Software License",
  "Programming Language :: Python :: 3",
  "Operating System :: OS Independent",
  "Topic :: Scientific/Engineering :: Artificial Intelligence",
  "Topic :: Scientific/Engineering :: Mathematics",
  "Topic :: Software Development :: Libraries",
  "Topic :: Software Development :: Libraries :: Python Modules",
]
# Core runtime dependencies (kept unpinned except for minimums already implied)
dependencies = [
  "numpy",
  "scipy",
  "matplotlib>=3.9",
  "emcee>=2.2.1",
  "PyDOE>=0.3.0",
  "sobol_seq>=0.1.2",
]

[project.optional-dependencies]
gpy = ["GPy>=1.13.0"]
bnn = ["pybnn>=0.0.5", "torch"]
sklearn = ["scikit-learn"]
examples = [
  "emukit[gpy, bnn, sklearn]",
]
docs = [
  "emukit[gpy]",
  "ipykernel",
  "Sphinx>=1.7.5",
  "nbsphinx>=0.3.4",
  "sphinx-autodoc-typehints>=1.3.0",
  "sphinx-rtd-theme>=0.4.1",
]
# Test & QA dependencies
tests = [
  "coverage>=4.5.1",
  "codecov>=2.0.15",
  "flake8>=3.5.0",
  "isort>=5.10",
  "black",
  "pytest>=3.5.1",
  "pytest-cov>=2.5.1",
  "mock>=2.0.0",
]
integration-tests = [
  "emukit[tests]",
  "pandas",
  "jupyter",
]
# Aggregate ALL optional dependencies for development
dev = [
  "emukit[examples, docs, tests]",
]

[project.urls]
Homepage = "https://github.com/emukit/emukit"
Documentation = "https://emukit.readthedocs.io"
Source = "https://github.com/emukit/emukit"
Issues = "https://github.com/emukit/emukit/issues"

[tool.setuptools.dynamic]
version = {attr = "emukit.__version__.__version__"}

[tool.setuptools.packages.find]
include = ["emukit*"]
exclude = ["tests*", "integration_tests*"]

[tool.black]
line-length = 120
include = '\\.(py)$'
extend-exclude = 'doc/.*|notebooks/.*'

[tool.isort]
profile = 'black'
skip_glob = 'doc/*,notebooks/*'
skip_gitignore = true
line_length = 120

[tool.flake8]
max-line-length = 120
ignore = ["E731", "E127"]
exclude = [".git", "build", "__pycache__"]

[tool.pytest.ini_options]
markers = [
  "gpy: tests requiring GPy optional dependency",
  "pybnn: tests requiring pybnn optional dependency",
  "sklearn: tests requiring scikit-learn optional dependency",
  "notebooks: tests executing Jupyter notebooks",
]

[tool.coverage.run]
branch = true
source = ["emukit"]
omit = ["tests/*", "setup.py", "emukit/examples/*", "integration_tests/*"]
