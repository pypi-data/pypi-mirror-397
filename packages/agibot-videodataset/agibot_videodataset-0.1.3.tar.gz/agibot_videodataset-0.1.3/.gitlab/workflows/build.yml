build:
  image: ${HARBOR_HOST}/${HARBOR_PROJECT}/agibot-forge/dev:${NVIDIA_PYTORCH_VERSION}-latest
  tags:
    - genie-gpu-4090-k8s
  parallel:
    matrix:
      - NVIDIA_PYTORCH_VERSION:
          - '25.04'
  interruptible: true
  rules:
    - if: $CI_COMMIT_TAG =~ /^v?(0|[1-9][0-9]*)\.(0|[1-9][0-9]*)\.(0|[1-9][0-9]*)(-?(a|b|rc)(0|[1-9][0-9]*)?)?$/
  artifacts:
    paths:
      - dist
  script:
    - make build
  stage: build
