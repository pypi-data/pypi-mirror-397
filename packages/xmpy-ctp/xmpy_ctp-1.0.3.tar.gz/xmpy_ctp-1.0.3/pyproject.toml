[project]
# name: 包的发布名称，将在PyPI上显示，必须唯一且只包含ASCII字母、数字、连字符和下划线
name = "xmpy_ctp"
version = "1.0.3"
# description: 包的简短描述，用于PyPI等平台展示
description = "xmpy框架的CTP底层接口"
# readme: 项目README文件的路径，包含详细文档和用法说明
readme = "README.md"
# license: 包的开源许可证信息，这里使用MIT许可证
license = {text = "MIT"}
# authors: 包的作者信息列表，包含姓名和联系方式
authors = [{name = "bhzy", email = "2024305928@qq.com"}]
# classifiers: PyPI分类器列表，帮助用户搜索和筛选包
classifiers = [
    "Development Status :: 5 - Production/Stable",      # 开发状态：稳定版
    "License :: OSI Approved :: MIT License",           # MIT许可证认证
    "Operating System :: Microsoft :: Windows",
    "Operating System :: POSIX :: Linux",
    "Operating System :: MacOS",
    "Programming Language :: Python :: 3",              # 支持Python3
    "Programming Language :: Python :: 3.10",           # 支持Python 3.10
    "Programming Language :: Python :: 3.11",           # 支持Python 3.11
    "Programming Language :: Python :: 3.12",           # 支持Python 3.12
    "Programming Language :: Python :: 3.13",           # 支持Python 3.13
    "Programming Language :: Python :: Implementation :: CPython",  # CPython实现
    "Topic :: Office/Business :: Financial :: Investment",  # 主题：金融投资
    "Natural Language :: Chinese (Simplified)",         # 支持简体中文
    "Typing :: Typed",                                  # 使用类型注解
]
# requires-python: 支持的Python版本范围
requires-python = ">=3.10"
# dependencies: 项目运行时依赖的第三方包列表
dependencies = [
    "xmpy>=1.0.0",
]
# keywords: 关键词列表，用于在PyPI上搜索和分类
keywords = ["quant", "quantitative", "investment", "trading", "algotrading"]

# [project.urls] 节定义项目的相关URL链接
[project.urls]
Homepage = "https://github.com/InkAbyss/xmpy_ctp"      # 项目地址
Issues = "https://github.com/InkAbyss/xmpy_ctp/issues"

# [build-system] 节指定构建系统配置
[build-system]
# requires: 构建系统需要的依赖包
requires = [
    "meson-python>=0.17.1",
    "meson>=1.7.0",
    "pybind11>=2.13.6",
]
# build-backend: 构建后端工具
build-backend = "mesonpy"

[tool.mesonpy]
args = ['--vsenv']

# 发行版文件包含配置
[tool.mesonpy.distribution]
include = [
    "**/*.dll",             # Windows 动态链接库
    "**/*.so",              # Linux/Unix 共享对象库
    "**/*.pyd",             # Python 扩展模块(windows)
    "**/*.h",               # C/C++ 头文件
    "**/*.cpp",             # C++源代码
    "**/*.lib",             # Windows 静态库
    "**/*.a",               # Unix 静态库
    "**/*.framework/**",    # 添加Mac框架文件夹支持
]

#保持文件原始路径结构
preserve-path = true

# [tool.ruff] 节配置Ruff代码检查工具
[tool.ruff]
target-version = "py310"    # target-version: 目标Python版本
output-format = "full"      # output-format: 输出格式

# [tool.ruff.lint] 节配置Ruff的lint规则
[tool.ruff.lint]
# select: 启用的检查规则集合
select = [
    "B",  # flake8-bugbear - 发现可能的bug和设计问题
    "E",  # pycodestyle error - 代码格式错误
    "F",  # pyflakes - 发现Python代码中的错误
    "UP",  # pyupgrade - 升级Python语法到最新版本
    "W",  # pycodestyle warning - 代码格式警告
]
# ignore: 忽略的规则
ignore = ["E501"]     # E501: 忽略行长度限制

# [tool.mypy] 节配置Mypy静态类型检查工具
[tool.mypy]
python_version = "3.10"             # python_version: 目标Python版本
warn_return_any = true              # warn_return_any: 当函数返回Any类型时警告
warn_unused_configs = true          # warn_unused_configs: 当有未使用的配置时警告
disallow_untyped_defs = true        # disallow_untyped_defs: 不允许未类型注解的函数定义
disallow_incomplete_defs = true     # disallow_incomplete_defs: 不允许不完整的函数定义
check_untyped_defs = true           # check_untyped_defs: 检查未类型注解的函数定义
disallow_untyped_decorators = true  # disallow_untyped_decorators: 不允许未类型注解的装饰器
no_implicit_optional = true         # no_implicit_optional: 不允许隐式的Optional类型
strict_optional = true              # strict_optional: 严格检查Optional类型
warn_redundant_casts = true         # warn_redundant_casts: 当有冗余的类型转换时警告
warn_unused_ignores = true          # warn_unused_ignores: 当有未使用的类型忽略注释时警告
warn_no_return = true               # warn_no_return: 当函数可能没有返回值时警告
ignore_missing_imports = true       # ignore_missing_imports: 忽略缺失导入的错误
