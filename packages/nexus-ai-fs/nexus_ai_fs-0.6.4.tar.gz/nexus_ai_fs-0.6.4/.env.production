# Nexus Production Environment Configuration
# This file contains SAFE production defaults (NO SECRETS!)
# Configuration for all services:
#   - PostgreSQL Database
#   - Nexus Server (Backend)
#   - LangGraph Agent Server
#   - Frontend (React UI)
#
# For secrets (API keys, passwords), create .env.production.secrets on the server
# The .env.production.secrets file should NEVER be committed to git
#
# Usage:
#   ./docker-start.sh --env=production
#   Docker compose will load both .env.production and .env.production.secrets

# ============================================
# PostgreSQL Database
# ============================================
POSTGRES_DB=nexus
POSTGRES_USER=postgres
POSTGRES_PORT=5432

# IMPORTANT: Set in .env.production.secrets on server:
# POSTGRES_PASSWORD=your-secure-password

# ============================================
# Nexus Server
# ============================================
NEXUS_PORT=8080
MCP_PORT=8081

# Database URL (uses PostgreSQL service)
# Override in .env.production.secrets if using Cloud SQL or custom DB
# NEXUS_DATABASE_URL=postgresql://postgres:PASSWORD@HOST:5432/nexus

# Authentication
# IMPORTANT: Set in .env.production.secrets on server (format: sk-<prefix>_<username>_<uuid>_<hash>):
# NEXUS_API_KEY=
# Or leave empty to auto-generate admin API key on first run

# Backend Storage
# Production should use GCS
NEXUS_BACKEND=gcs
NEXUS_GCS_BUCKET=nexi-hub
NEXUS_GCS_PROJECT=nexi-lab-888

# GCS credentials (if not using default service account)
# GOOGLE_APPLICATION_CREDENTIALS=/app/gcs-credentials.json

# ============================================
# LangGraph Agent Server
# ============================================
LANGGRAPH_PORT=2024

# IMPORTANT: Set in .env.production.secrets on server:
# ANTHROPIC_API_KEY=sk-ant-your-production-key
# OPENAI_API_KEY=sk-your-production-key

# Optional: Additional Tool API Keys
# Set in .env.production.secrets if needed:
# TAVILY_API_KEY=your-tavily-key
# E2B_API_KEY=your-e2b-key
# FIRECRAWL_API_KEY=your-firecrawl-key

# LangSmith tracing (optional)
LANGCHAIN_TRACING_V2=false
LANGCHAIN_ENDPOINT=https://api.smith.langchain.com
LANGCHAIN_PROJECT=nexus-production

# Set in .env.production.secrets if using LangSmith:
# LANGSMITH_API_KEY=your-langsmith-key

# ============================================
# Frontend
# ============================================
FRONTEND_PORT=5173

# Backend API URLs
# For production (browser access):
VITE_NEXUS_API_URL=https://nexus.nexilab.co
VITE_LANGGRAPH_API_URL=https://langgraph.nexilab.co

# For Docker internal routing (container-to-container):
VITE_NEXUS_SERVER_URL=http://nexus:8080

# Permission and Authentication Settings
NEXUS_SKIP_PERMISSION=false
VITE_SKIP_AUTH=false

# ============================================
# SECRETS CHECKLIST
# ============================================
# Create .env.production.secrets on the server with:
#
# POSTGRES_PASSWORD=your-secure-db-password
# ANTHROPIC_API_KEY=sk-ant-production-xxxxx
# OPENAI_API_KEY=sk-production-xxxxx
# NEXUS_API_KEY=your-admin-api-key (optional)
# LANGSMITH_API_KEY=lsv2_xxxxx (optional)
#
# Then set permissions:
#   chmod 600 .env.production.secrets
