import{d as P,i as g,a as L,V,X as $,r as B,o as l,f as _,g as t,t as v,x as I,z as S,y as C,A as x,W as T,ax as W,_ as A,ap as z,c as D,w as k,b as h,aw as E,a1 as F,S as w,D as N,E as O,a3 as M}from"./index-Zki-pfO-.js";import{u as j}from"./BuilderApp-PTOI76jZ.js";import"./WdsCheckbox-edQcn1cf.js";import"./marked.esm-273vDTCT.js";const q={class:"BuilderBlueprintLibraryItem"},K={class:"BuilderBlueprintLibraryItem__header"},Q={class:"BuilderBlueprintLibraryItem__title"},U={class:"BuilderBlueprintLibraryItem__version"},X={class:"BuilderBlueprintLibraryItem__description"},G={class:"BuilderBlueprintLibraryItem__actions"},H=P({__name:"BuilderBlueprintLibraryItem",props:{block:{}},emits:["installed"],setup(b,{emit:d}){const o=b,m=d,y=g(L.core),c=g(L.builderManager),{pushToast:a}=V(),{writerApi:p}=$(),{installSharedBlueprint:u}=W(y,c),n=B(!1);async function f(){const i=y.writerOrgId.value;if(!i){a({type:"error",message:"Organization ID is required. Please set up your environment variable."});return}n.value=!0;try{const e=await p.getSharedBlueprint(i,o.block.id),r=e.version.components,s=u({id:e.id,title:e.title,version:e.version.version,description:e.version.description||void 0,components:r});a({type:"success",message:`Blueprint "${o.block.title}" installed successfully`}),m("installed")}catch(e){a({type:"error",message:`Failed to install blueprint: ${e instanceof Error?e.message:String(e)}`})}finally{n.value=!1}}return(i,e)=>(l(),_("div",q,[t("div",K,[t("h3",Q,v(i.block.title),1),t("span",U,"v"+v(i.block.version_number),1)]),t("p",X,v(i.block.description),1),t("div",G,[I(T,{variant:"primary",size:"small",disabled:n.value,onClick:f},{default:S(()=>[I(C,{name:"download"}),x(" "+v(n.value?"Installing...":"Install"),1)]),_:1},8,["disabled"])])]))}}),J=A(H,[["__scopeId","data-v-2b077daf"]]),R={class:"BuilderBlueprintLibraryPanel"},Y={class:"BuilderBlueprintLibraryPanel__header"},Z={class:"BuilderBlueprintLibraryPanel__search"},ee={class:"BuilderBlueprintLibraryPanel__content"},re={key:1,class:"BuilderBlueprintLibraryPanel__empty"},se={key:0,class:"BuilderBlueprintLibraryPanel__empty__hint"},te={key:2,class:"BuilderBlueprintLibraryPanel__grid"},ae=P({__name:"BuilderBlueprintLibraryPanel",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(b){const d=z(b,"modelValue"),o=g(L.core),{pushToast:m}=V(),{writerApi:y}=$(),c=D(()=>Array.isArray(o.featureFlags.value)&&o.featureFlags.value.includes("blueprint_library")),a=B(""),p=B([]),u=B(!1);async function n(){if(!c.value)return;const e=o.writerOrgId.value;if(!e){m({type:"error",message:"Organization ID is required. Please set up your environment variable."}),u.value=!1;return}u.value=!0;try{const r=await y.listSharedBlueprints(e,a.value||void 0);p.value=r.map(s=>({id:s.id,title:s.title,description:s.description,category:s.category||"Shared Blueprints",version_number:s.version_number}))}catch(r){m({type:"error",message:`Failed to load blueprints: ${r instanceof Error?r.message:String(r)}`})}finally{u.value=!1}}const f=j(n,300);k(a,f);function i(){d.value=!1}return k(d,e=>{e&&c.value&&n()}),(e,r)=>d.value&&c.value?(l(),h(M,{key:0,title:"Blueprint Library",size:"wide","display-close-button":"",onClose:i},{default:S(()=>[t("div",R,[t("div",Y,[t("div",Z,[I(E,{modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=s=>a.value=s),placeholder:"Search blueprints...","left-icon":"search"},null,8,["modelValue"])])]),t("div",ee,[u.value?(l(),h(F,{key:0,class:"BuilderBlueprintLibraryPanel__loading"})):p.value.length===0?(l(),_("div",re,[r[1]||(r[1]=t("p",null,"No blueprints found",-1)),a.value?(l(),_("p",se," Try adjusting your search ")):w("",!0)])):(l(),_("div",te,[(l(!0),_(N,null,O(p.value,s=>(l(),h(J,{key:s.id,block:s},null,8,["block"]))),128))]))])])]),_:1})):w("",!0)}}),ue=A(ae,[["__scopeId","data-v-d9a0cbb9"]]);export{ue as default};
