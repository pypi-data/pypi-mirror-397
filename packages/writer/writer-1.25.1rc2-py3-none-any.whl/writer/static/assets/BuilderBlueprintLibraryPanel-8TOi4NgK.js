import{d as P,i as g,a as L,V,X as S,r as B,o as i,f as _,g as s,t as f,x as I,z as $,y as A,A as C,W as T,ax as W,_ as x,ap as z,c as D,w as k,b as h,aw as E,a1 as F,S as w,D as N,E as O,a3 as M}from"./index-US7PsP1n.js";import{u as j}from"./BuilderApp-BKx9N8F1.js";import"./WdsCheckbox-CHTRMYK5.js";import"./marked.esm-273vDTCT.js";const q={class:"BuilderBlueprintLibraryItem"},K={class:"BuilderBlueprintLibraryItem__header"},Q={class:"BuilderBlueprintLibraryItem__title"},U={class:"BuilderBlueprintLibraryItem__description"},X={class:"BuilderBlueprintLibraryItem__actions"},G=P({__name:"BuilderBlueprintLibraryItem",props:{block:{}},emits:["installed"],setup(v,{emit:d}){const o=v,y=d,m=g(L.core),c=g(L.builderManager),{pushToast:a}=V(),{writerApi:p}=S(),{installSharedBlueprint:u}=W(m,c),l=B(!1);async function b(){const n=m.writerOrgId.value;if(!n){a({type:"error",message:"Organization ID is required. Please set up your environment variable."});return}l.value=!0;try{const e=await p.getSharedBlueprint(n,o.block.id),t=e.components,r=u({id:e.id,title:e.title,description:e.description||void 0,components:t});a({type:"success",message:`Blueprint "${o.block.title}" installed successfully`}),y("installed")}catch(e){a({type:"error",message:`Failed to install blueprint: ${e instanceof Error?e.message:String(e)}`})}finally{l.value=!1}}return(n,e)=>(i(),_("div",q,[s("div",K,[s("h3",Q,f(n.block.title),1)]),s("p",U,f(n.block.description),1),s("div",X,[I(T,{variant:"primary",size:"small",disabled:l.value,onClick:b},{default:$(()=>[I(A,{name:"download"}),C(" "+f(l.value?"Installing...":"Install"),1)]),_:1},8,["disabled"])])]))}}),H=x(G,[["__scopeId","data-v-4c15decc"]]),J={class:"BuilderBlueprintLibraryPanel"},R={class:"BuilderBlueprintLibraryPanel__header"},Y={class:"BuilderBlueprintLibraryPanel__search"},Z={class:"BuilderBlueprintLibraryPanel__content"},ee={key:1,class:"BuilderBlueprintLibraryPanel__empty"},te={key:0,class:"BuilderBlueprintLibraryPanel__empty__hint"},re={key:2,class:"BuilderBlueprintLibraryPanel__grid"},ae=P({__name:"BuilderBlueprintLibraryPanel",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(v){const d=z(v,"modelValue"),o=g(L.core),{pushToast:y}=V(),{writerApi:m}=S(),c=D(()=>Array.isArray(o.featureFlags.value)&&o.featureFlags.value.includes("blueprint_library")),a=B(""),p=B([]),u=B(!1);async function l(){if(!c.value)return;const e=o.writerOrgId.value;if(!e){y({type:"error",message:"Organization ID is required. Please set up your environment variable."}),u.value=!1;return}u.value=!0;try{const t=await m.listSharedBlueprints(e,a.value||void 0);p.value=t.map(r=>({id:r.id,title:r.title,description:r.description,category:r.category||"Shared Blueprints",createdBy:r.createdBy}))}catch(t){y({type:"error",message:`Failed to load blueprints: ${t instanceof Error?t.message:String(t)}`})}finally{u.value=!1}}const b=j(l,300);k(a,b);function n(){d.value=!1}return k(d,e=>{e&&c.value&&l()}),(e,t)=>d.value&&c.value?(i(),h(M,{key:0,title:"Blueprint Library",size:"wide","display-close-button":"",onClose:n},{default:$(()=>[s("div",J,[s("div",R,[s("div",Y,[I(E,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=r=>a.value=r),placeholder:"Search blueprints...","left-icon":"search"},null,8,["modelValue"])])]),s("div",Z,[u.value?(i(),h(F,{key:0,class:"BuilderBlueprintLibraryPanel__loading"})):p.value.length===0?(i(),_("div",ee,[t[1]||(t[1]=s("p",null,"No blueprints found",-1)),a.value?(i(),_("p",te," Try adjusting your search ")):w("",!0)])):(i(),_("div",re,[(i(!0),_(N,null,O(p.value,r=>(i(),h(H,{key:r.id,block:r},null,8,["block"]))),128))]))])])]),_:1})):w("",!0)}}),oe=x(ae,[["__scopeId","data-v-f8189fea"]]);export{oe as default};
