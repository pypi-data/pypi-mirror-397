import{d as V,i as g,a as I,V as $,X as S,r as B,o as l,f as y,g as s,t as f,x as L,z as A,y as C,A as T,W,$ as z,ax as D,_ as x,ap as E,c as F,w,b as h,aw as N,a1 as O,S as P,D as M,E as j,a3 as q}from"./index-DVHYi9Wg.js";import{u as K}from"./BuilderApp-CmFSPEKj.js";import"./WdsCheckbox-D7SVBaU3.js";import"./marked.esm-273vDTCT.js";const Q={class:"BuilderBlueprintLibraryItem"},U={class:"BuilderBlueprintLibraryItem__header"},X={class:"BuilderBlueprintLibraryItem__title"},G={class:"BuilderBlueprintLibraryItem__description"},H={class:"BuilderBlueprintLibraryItem__actions"},J=V({__name:"BuilderBlueprintLibraryItem",props:{block:{}},emits:["installed"],setup(b,{emit:c}){const n=b,m=c,p=g(I.core),_=g(I.builderManager),{pushToast:a}=$(),{writerApi:u}=S(),{installSharedBlueprint:d}=D(p,_),o=B(!1);async function v(){const i=p.writerOrgId.value;if(!i){a({type:"error",message:"Organization ID is required. Please set up your environment variable."});return}o.value=!0;try{const e=await u.getSharedBlueprint(i,n.block.id),t=e.components,r=d({id:e.id,title:e.title,description:e.description||void 0,components:t}),k=p.writerAppId.value;k&&u.trackBlueprintInstallation(i,n.block.id,k).catch(z().error),a({type:"success",message:`Blueprint "${n.block.title}" installed successfully`}),m("installed")}catch(e){a({type:"error",message:`Failed to install blueprint: ${e instanceof Error?e.message:String(e)}`})}finally{o.value=!1}}return(i,e)=>(l(),y("div",Q,[s("div",U,[s("h3",X,f(i.block.title),1)]),s("p",G,f(i.block.description),1),s("div",H,[L(W,{variant:"primary",size:"small",disabled:o.value,onClick:v},{default:A(()=>[L(C,{name:"download"}),T(" "+f(o.value?"Installing...":"Install"),1)]),_:1},8,["disabled"])])]))}}),R=x(J,[["__scopeId","data-v-6bf01558"]]),Y={class:"BuilderBlueprintLibraryPanel"},Z={class:"BuilderBlueprintLibraryPanel__header"},ee={class:"BuilderBlueprintLibraryPanel__search"},te={class:"BuilderBlueprintLibraryPanel__content"},re={key:1,class:"BuilderBlueprintLibraryPanel__empty"},ae={key:0,class:"BuilderBlueprintLibraryPanel__empty__hint"},se={key:2,class:"BuilderBlueprintLibraryPanel__grid"},ie=V({__name:"BuilderBlueprintLibraryPanel",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(b){const c=E(b,"modelValue"),n=g(I.core),{pushToast:m}=$(),{writerApi:p}=S(),_=F(()=>Array.isArray(n.featureFlags.value)&&n.featureFlags.value.includes("blueprint_library")),a=B(""),u=B([]),d=B(!1);async function o(){if(!_.value)return;const e=n.writerOrgId.value;if(!e){m({type:"error",message:"Organization ID is required. Please set up your environment variable."}),d.value=!1;return}d.value=!0;try{const t=await p.listSharedBlueprints(e,a.value||void 0);u.value=t.map(r=>({id:r.id,title:r.title,description:r.description,category:r.category||"Shared Blueprints",createdBy:r.createdBy}))}catch(t){m({type:"error",message:`Failed to load blueprints: ${t instanceof Error?t.message:String(t)}`})}finally{d.value=!1}}const v=K(o,300);w(a,v);function i(){c.value=!1}return w(c,e=>{e&&_.value&&o()}),(e,t)=>c.value&&_.value?(l(),h(q,{key:0,title:"Blueprint Library",size:"wide","display-close-button":"",onClose:i},{default:A(()=>[s("div",Y,[s("div",Z,[s("div",ee,[L(N,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=r=>a.value=r),placeholder:"Search blueprints...","left-icon":"search"},null,8,["modelValue"])])]),s("div",te,[d.value?(l(),h(O,{key:0,class:"BuilderBlueprintLibraryPanel__loading"})):u.value.length===0?(l(),y("div",re,[t[1]||(t[1]=s("p",null,"No blueprints found",-1)),a.value?(l(),y("p",ae," Try adjusting your search ")):P("",!0)])):(l(),y("div",se,[(l(!0),y(M,null,j(u.value,r=>(l(),h(R,{key:r.id,block:r},null,8,["block"]))),128))]))])])]),_:1})):P("",!0)}}),de=x(ie,[["__scopeId","data-v-f8189fea"]]);export{de as default};
