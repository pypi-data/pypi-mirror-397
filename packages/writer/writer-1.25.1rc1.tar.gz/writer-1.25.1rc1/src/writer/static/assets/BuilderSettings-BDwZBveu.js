function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./BuilderTemplateEditor-DnRDRcA0.js","./index-Zki-pfO-.js","./index-BKNuk68o.css","./WdsDropdownMenu-DQnrRBNV.js","./WdsCheckbox-edQcn1cf.js","./WdsCheckbox-DKvpPA4D.css","./WdsDropdownMenu-CzzPN9Wg.css","./WdsTabs-DcfY_zn5.js","./WdsTabs-DKj7BqI0.css","./WdsFieldWrapper-Cmufx5Nj.js","./WdsFieldWrapper-CsemOh8D.css","./useKeyValueEditor-nDmI7cTJ.js","./BuilderTemplateEditor-CYSDeWgV.css","./BuilderEmbeddedCodeEditor-Dn7eDICN.js","./BuilderEmbeddedCodeEditor-B0bcjlhk.css","./BuilderGraphSelect-C-LRsO8W.js","./useListResources-DLkZhRSJ.js","./BuilderGraphSelect-D7B61d5s.css","./BuilderApplicationSelect-DXzy4e_h.js","./BuilderApplicationSelect-XaM1D5fv.css","./BuilderModelSelect-CdSo_sih.js","./BuilderModelSelect-Dc4IPLp2.css","./BuilderSettingsArtifactAPITriggerDetails-3O6jKBXD.js","./BuilderSettingsArtifactAPITriggerDetails-DnX66iRg.css","./BuilderSettingsHandlers-CBtEQFSo.js","./BuilderApp-PTOI76jZ.js","./marked.esm-273vDTCT.js","./BuilderApp-WimUfNZr.css","./useBlueprintRun-C00bCxh-.js","./BuilderSettingsHandlers-DJPeASfz.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{c as S,aW as Be,R as v,$ as Le,aX as et,C as tt,d as W,i as R,a as P,r as N,aY as Ne,o as i,b as F,au as nt,z as M,x as E,W as H,aq as oe,y as z,ax as Ce,an as ue,ap as we,aJ as q,at as re,f as C,D as j,g as B,S as x,E as Z,_ as K,ao as X,Q,m as U,q as ie,G as ve,aZ as ze,K as Je,s as ce,a6 as ot,aR as lt,w as me,a_ as at,a8 as Ge,a$ as it,L as le,b0 as st,b1 as rt,aC as J,b2 as ye,Z as ut,b3 as Se,a7 as fe,A as ae,a3 as Oe,t as Y,l as Ee,aw as ee,v as be,b4 as Te,b5 as dt,X as ct,a1 as We,b6 as Fe,b7 as D,b8 as pt,b9 as vt,ba as mt,bb as ft,aI as Ye,F as G,J as yt,a4 as He,u as Me,bc as Xe,bd as Ve,aN as pe,aV as gt,be as _t,bf as ht,bg as bt,bh as kt,a2 as St}from"./index-Zki-pfO-.js";import{W as Ie,a as It}from"./WdsDropdownMenu-DQnrRBNV.js";import{W as se}from"./WdsTabs-DcfY_zn5.js";import{W as te}from"./WdsFieldWrapper-Cmufx5Nj.js";import{W as qe}from"./WdsCheckbox-edQcn1cf.js";import{u as Bt}from"./useKeyValueEditor-nDmI7cTJ.js";function*Ct(t,r){const l=new Set;function*c(s){var o;if(l.has(s))return;l.add(s);const a=t.getComponentById(s);if(a)for(const g of t.getComponentsNested(a.parentId))(o=g.outs)!=null&&o.some(m=>m.toNodeId===s)&&(yield g,yield*c(g.id))}yield*c(r)}function wt(t,r=void 0,l=Le()){const c=S(()=>new Set(Be(t.userStateInitial.value))),s=S(()=>{try{return $t(t,c.value)}catch(g){return l.error("Cannot compute blueprintsSetStates",g),{}}}),a=S(()=>{try{return xt(t,c.value)}catch(g){return l.error("Cannot compute bindings",g),{}}}),o=S(()=>{try{return Et(t,v(r))}catch(g){return l.error("Cannot compute blueprintsResults",g),{}}});return{blueprintsSetStates:s,bindings:a,blueprintsResults:o}}function Et(t,r,l=new Set){var s;const c={};for(const a of Ct(t,r)){const o=a.type,g=t.getComponentDefinition(a.type);if(!g||!(a.type&&!et.has(o)&&a.type.startsWith("blueprints_")&&((s=g==null?void 0:g.outs)==null?void 0:s.success)!==void 0))continue;const p=`results.${a.id}`;p&&!l.has(p)&&(c[p]??(c[p]={components:[]}),c[p].components.push(a))}return c}function xt(t,r=new Set){var c;const l={};for(const s of tt)for(const a of t.getComponentsNested(s)){const o=(c=a.binding)==null?void 0:c.stateRef;o&&!r.has(o)&&(l[o]??(l[o]={components:[]}),l[o].components.push(a))}return l}function $t(t,r=new Set){var s;function*l(){for(const a of t.getComponentsNested("blueprints_root"))a.type==="blueprints_setstate"&&a.content&&(yield a)}const c={};for(const a of l()){const o=(s=a.content)==null?void 0:s.element;!o||typeof o!="string"||r.has(o)||(c[o]??(c[o]={components:[]}),c[o].components.push(a))}return c}const xe=W({__name:"BuilderStateSelectorDropdownComponent",props:{componentId:{type:String,required:!0},path:{type:String,required:!0},selected:{type:Boolean,required:!1}},setup(t){const r=t,l=R(P.core),c=R(P.builderManager),s=N(!1),a=S(()=>l.getComponentById(r.componentId)),{name:o,possibleImageUrls:g,previewText:m}=Ne(l,a),p=S(()=>({icon:g.value,label:r.path,detail:m.value||o.value,value:r.path})),{goToComponentParentPage:I}=Ce(l,c);async function b(){await I(r.componentId),c.setSelection(r.componentId)}return(u,f)=>(i(),F(Ie,{class:"BuilderStateSelectorDropdownItemComponent",option:p.value,selected:t.selected,"show-custom-action":"",onMousemove:f[1]||(f[1]=y=>s.value=!0),onMouseout:f[2]||(f[2]=y=>s.value=!1)},nt({_:2},[s.value?{name:"action",fn:M(()=>[E(H,{variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to this block",onClick:oe(b,["prevent"]),onMousemove:f[0]||(f[0]=y=>s.value=!0)},{default:M(()=>[E(z,{name:"square-dashed-mouse-pointer"})]),_:1})]),key:"0"}:void 0]),1032,["option","selected"]))}}),Tt={class:"BuilderStateSelectorDropdown"},Ft={key:1,class:"BuilderStateSelectorDropdown__empty"},Vt={key:2,class:"BuilderStateSelectorDropdown__section"},Ot={key:3,class:"BuilderStateSelectorDropdown__section"},Mt={key:4,class:"BuilderStateSelectorDropdown__section"},qt={key:5,class:"BuilderStateSelectorDropdown__section"},At={key:6,class:"BuilderStateSelectorDropdown__section"},Dt=W({__name:"BuilderStateSelectorDropdown",props:ue({componentId:{type:String,required:!1,default:void 0},query:{type:String,required:!1,default:""},allowCreate:{type:Boolean,required:!1},hideSecrets:{type:Boolean,required:!1},hideBlueprintResults:{type:Boolean,required:!1}},{modelValue:{type:String},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const r=t,l=R(P.core),c=R(P.secretsManager),s=we(t,"modelValue"),a=wt(l,q(r,"componentId")),o=S(()=>{const y=[];for(const _ of Be(l.userStateInitial.value))r.query&&!_.includes(r.query)||y.push({value:_,label:_,icon:"code",iconBgColor:re.Green2});return y.sort((_,w)=>_.label.localeCompare(w.label))}),g=S(()=>{if(r.hideSecrets)return[];const y=[];for(const _ of Be(c.secrets.value)){const w=`vault.${_}`;r.query&&!w.includes(r.query)||y.push({value:`vault.${_}`,label:_,icon:"key-round",iconBgColor:re.Yellow2})}return y.sort((_,w)=>_.label.localeCompare(w.label))}),m=S(()=>b(a.bindings.value)),p=S(()=>b(a.blueprintsSetStates.value)),I=S(()=>r.hideBlueprintResults?[]:b(a.blueprintsResults.value));function b(y){return Object.entries(y).map(([_,{components:w}])=>{for(const O of w)if(O.id!==r.componentId)return{componentId:O.id,path:_}}).filter(_=>!(!_||r.query&&!_.path.includes(r.query)))}const u=S(()=>!r.allowCreate||!r.query||r.query.endsWith(".")?!1:!(o.value.some(_=>_.value===r.query)||g.value.some(_=>_.value===r.query)||I.value.some(_=>_.path===r.query)||m.value.some(_=>_.path===r.query))),f=S(()=>!!(o.value.length||p.value.length||m.value.length||I.value.length||g.value.length));return(y,_)=>(i(),C("div",Tt,[u.value?(i(),C(j,{key:0},[_[1]||(_[1]=B("p",{class:"BuilderStateSelectorDropdown__section__title"}," Add new variable ",-1)),E(Ie,{option:{value:t.query,label:t.query,icon:"plus",iconBgColor:v(re).Blue4,iconColor:v(re).White},onClick:_[0]||(_[0]=oe(w=>s.value=t.query,["stop"]))},null,8,["option"])],64)):f.value?x("",!0):(i(),C("div",Ft," No result ")),p.value.length?(i(),C("div",Vt,[_[2]||(_[2]=B("p",{class:"BuilderStateSelectorDropdown__section__title"}," Set states ",-1)),(i(!0),C(j,null,Z(p.value,w=>(i(),F(xe,{key:w.path,path:w.path,"component-id":w.componentId,selected:w.path===s.value,onClick:oe(O=>s.value=w.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):x("",!0),m.value.length?(i(),C("div",Ot,[_[3]||(_[3]=B("p",{class:"BuilderStateSelectorDropdown__section__title"}," Interface variables ",-1)),(i(!0),C(j,null,Z(m.value,w=>(i(),F(xe,{key:w.path,path:w.path,"component-id":w.componentId,selected:w.path===s.value,onClick:oe(O=>s.value=w.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):x("",!0),!t.hideBlueprintResults&&I.value.length?(i(),C("div",Mt,[_[4]||(_[4]=B("p",{class:"BuilderStateSelectorDropdown__section__title"}," block results ",-1)),(i(!0),C(j,null,Z(I.value,w=>(i(),F(xe,{key:w.path,path:w.path,"component-id":w.componentId,selected:w.path===s.value,onClick:oe(O=>s.value=w.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):x("",!0),!t.hideSecrets&&g.value.length?(i(),C("div",qt,[_[5]||(_[5]=B("p",{class:"BuilderStateSelectorDropdown__section__title"},"Secrets",-1)),(i(!0),C(j,null,Z(g.value,w=>(i(),F(Ie,{key:w.value,option:w,selected:w.value===s.value,onClick:oe(O=>s.value=w.value,["stop"])},null,8,["option","selected","onClick"]))),128))])):x("",!0),o.value.length?(i(),C("div",At,[_[6]||(_[6]=B("p",{class:"BuilderStateSelectorDropdown__section__title"}," main.py variables ",-1)),(i(!0),C(j,null,Z(o.value,w=>(i(),F(Ie,{key:w.value,option:w,selected:w.value===s.value,onClick:oe(O=>s.value=w.value,["stop"])},null,8,["option","selected","onClick"]))),128))])):x("",!0)]))}}),Rt=K(Dt,[["__scopeId","data-v-d28f7ad6"]]),Pt=W({__name:"BuilderTemplateInputTemplate",props:ue({leftIcon:{type:String,required:!1,default:void 0},rightIcon:{type:String,required:!1,default:void 0},invalid:{type:Boolean,required:!1},variant:{type:String,default:void 0},autofocus:{type:Boolean},multiline:{type:Boolean,required:!1}},{modelValue:{type:String},modelModifiers:{}}),emits:ue({rightIconClick:()=>!0,input:t=>!!t},["update:modelValue"]),setup(t,{expose:r,emit:l}){const c=X({loader:()=>Q(()=>import("./BuilderTemplateEditor-DnRDRcA0.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)}),s=we(t,"modelValue"),a=t,o=l;r({focus:u,getSelection:b,value:s,setSelectionEnd:I,setSelectionStart:p});const g=U("input");ie(()=>{a.autofocus&&u()});async function m(f){s.value=f,o("input",{target:{value:f}})}function p(f){var y;(y=g.value)==null||y.setSelectionStart(f)}function I(f){var y;(y=g.value)==null||y.setSelectionEnd(f)}function b(){var f;return(f=g.value)==null?void 0:f.getSelection()}function u(){var f;(f=g.value)==null||f.focus()}return(f,y)=>(i(),F(ze,{"left-icon":t.leftIcon,"right-icon":t.rightIcon,invalid:t.invalid,variant:t.variant,class:ve(["BuilderTemplateInputTemplate",{"BuilderTemplateInputTemplate--singleline":!t.multiline,"BuilderTemplateInputTemplate--multiline":t.multiline}]),onRightIconClick:y[0]||(y[0]=_=>f.$emit("rightIconClick")),onClick:u},{default:M(()=>[E(v(c),{ref_key:"input",ref:g,class:"BuilderTemplateInputTemplate__input",multiline:t.multiline,"model-value":s.value,"onUpdate:modelValue":m},null,8,["multiline","model-value"])]),_:1},8,["left-icon","right-icon","invalid","variant","class"]))}}),Wt=K(Pt,[["__scopeId","data-v-2789dd2e"]]),Ut={class:"BuilderTemplateInputState__content"},Kt=W({__name:"BuilderTemplateInputState",props:ue({rightIcon:{type:String,required:!1,default:void 0}},{modelValue:{type:String},modelModifiers:{}}),emits:ue({rightIconClick:()=>!0},["update:modelValue"]),setup(t,{expose:r}){r({focus:u,setSelectionStart:p,setSelectionEnd:I,getSelection:b});const l=R(P.core),c=U("input"),s=we(t,"modelValue"),a=N(!1),o=S(()=>!s.value&&!a.value),g=S(()=>new Set(Be(l.userStateInitial.value))),m=S(()=>({opacity:o.value?0:void 0,backgroundColor:g.value.has(s.value)?re.Green2:re.Gray1}));function p(f){c.value&&(c.value.selectionStart=f)}function I(f){c.value&&(c.value.selectionEnd=f)}function b(){var f,y;return{selectionStart:(f=c.value)==null?void 0:f.selectionStart,selectionEnd:(y=c.value)==null?void 0:y.selectionEnd}}function u(){var f;(f=c.value)==null||f.focus()}return(f,y)=>(i(),F(ze,{class:"BuilderTemplateInputState","left-icon":o.value?"at-sign":void 0,"right-icon":t.rightIcon,onRightIconClick:y[3]||(y[3]=_=>f.$emit("rightIconClick")),onClick:y[4]||(y[4]=_=>v(c).focus())},{default:M(()=>[B("div",Ut,[B("div",{class:"BuilderTemplateInputState__content__tag",style:Je(m.value)},[y[5]||(y[5]=B("span",null,"@",-1)),ce(B("input",{ref_key:"input",ref:c,"onUpdate:modelValue":y[0]||(y[0]=_=>s.value=_),type:"text",onFocus:y[1]||(y[1]=_=>a.value=!0),onBlur:y[2]||(y[2]=_=>a.value=!1)},null,544),[[ot,s.value]])],4)])]),_:1},8,["left-icon","right-icon"]))}}),jt=K(Kt,[["__scopeId","data-v-f03927da"]]);function Lt(t,r){const l=t.lastIndexOf("@");if(l!==-1){let c=l;const a=t.slice(l).indexOf("{");return a!==-1&&(c+=a+1),t.indexOf("}",c)!==-1?t.substring(0,l)+`@{${r}}`:t.slice(0,l)+`@{${r}}`}return t+`@{${r}}`}function Nt(t){const r=t.lastIndexOf("@");if(r===-1)return"";const l=t.slice(r);return l.includes("}")||l.includes(`
`)||!l.startsWith("@{")&&l.includes(" ")?"":l.replace(/^@{?/,"")}function zt(t,r){return function(c){var m;if(!t.value)return;let s=0;if(c.key==="ArrowDown"?s=1:c.key==="ArrowUp"&&(s=-1),s===0)return;const a=Array.from(t.value.querySelectorAll("button")).filter(p=>!p.hasAttribute("disabled")&&p.offsetParent!==null);let o=s===1?a[0]:a.at(-1);const g=a.indexOf(document.activeElement);g!==-1&&(o=a[g+s]),o?(o.focus(),c.preventDefault()):(m=r==null?void 0:r.nextFocusNotFound)==null||m.call(r)}}const Jt=W({__name:"BuilderTemplateInput",props:{inputId:{type:String,required:!1,default:void 0},componentId:{type:String,required:!1,default:void 0},value:{type:String,required:!1,default:void 0},multiline:{type:Boolean,required:!1},variant:{type:String,required:!1,default:void 0},type:{type:String,required:!1,default:"template"},options:{type:Object,required:!1,default:void 0},placeholder:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0},autofocus:{type:Boolean},readonly:{type:Boolean}},emits:["input","update:value"],setup(t,{expose:r,emit:l}){const c=t,s=l,a=U("root"),o=U("input"),g=U("dropdown"),m=N(),{floatingStyles:p,update:I}=lt(a,g,{placement:"bottom-start",middleware:[st(),rt({apply({rects:e,elements:n}){Object.assign(n.floating.style,{minWidth:`${e.reference.width}px`,maxWidth:`${e.reference.width}px`})}})],strategy:"fixed"});b();function b(){let e;function n(){e&&e(),e=void 0}me(g,()=>{n(),g.value&&(e=at(o,g.value,I))}),Ge(()=>n())}r({focus:()=>{var e;return(e=o.value)==null?void 0:e.focus()}});const u=S(()=>c.options?Object.entries(c.options).reduce((e,[n,V])=>(n.includes(c.value)&&e.push({value:n,label:V}),e),[]):[]),f=zt(g,{nextFocusNotFound:()=>{var e;m.value=void 0,(e=o.value)==null||e.focus()}});function y(){u.value.length>0&&(m.value="static")}const _=S(()=>{var k,T;if(c.type==="state")return c.value;let e=((k=o.value)==null?void 0:k.value)??"";if(!e)return"";const{selectionStart:n}=((T=o.value)==null?void 0:T.getSelection())??{},V=e.slice(0,n);return Nt(V)}),w=it(a);me(w,async()=>{w.value||(await le(),setTimeout(()=>{m.value=void 0},300))});async function O(e){var A,L;let n=((A=o.value)==null?void 0:A.value)??"";const{selectionStart:V,selectionEnd:k}=((L=o.value)==null?void 0:L.getSelection())??{};let T=V??n.length;if(c.type==="template"){const _e=n.slice(0,V),he=n.slice(k).replace(/^(\})+/,""),de=Lt(_e,e);n=`${de}${he}`,T=de.length}else n=e,T=e.length;s("input",{target:{value:n}}),s("update:value",n),o.value&&(o.value.focus(),m.value=void 0,await le(),o.value.setSelectionStart(T))}async function $(e){s("input",{target:{value:e}}),s("update:value",e),o.value&&(o.value.focus(),m.value=void 0,await le(),o.value.setSelectionStart(e.length))}function h(e){d({target:{value:e}})}function d(e){var A;let n=String(e.target.value??"");if(s("input",e),s("update:value",n),c.type==="state"){m.value="template";return}if(u.value.some(L=>L.value.includes(n))){m.value="static";return}const{selectionStart:V}=((A=o.value)==null?void 0:A.getSelection())??{},k=n.slice(0,V),T=!!k.match(/@\{([^}{@]*)$/)||k.endsWith("@")||!!_.value;m.value=T?"template":void 0}return(e,n)=>(i(),C("div",{ref_key:"root",ref:a,class:"BuilderTemplateInput",onKeydown:n[2]||(n[2]=oe((...V)=>v(f)&&v(f)(...V),["stop"]))},[t.type==="template"?(i(),F(Wt,{key:0,ref_key:"input",ref:o,"model-value":c.value,placeholder:c.placeholder,list:c.options?`list-${c.inputId}`:void 0,invalid:t.error!==void 0,autofocus:t.autofocus,readonly:t.readonly,multiline:t.multiline,onInput:d,onClick:y},null,8,["model-value","placeholder","list","invalid","autofocus","readonly","multiline"])):x("",!0),t.type==="state"?(i(),F(jt,{key:1,ref_key:"input",ref:o,"right-icon":m.value?"chevron-up":"chevron-down","model-value":c.value,onRightIconClick:n[0]||(n[0]=V=>m.value=m.value?void 0:"template"),"onUpdate:modelValue":h,onClick:n[1]||(n[1]=V=>v(o).focus())},null,8,["right-icon","model-value"])):x("",!0),m.value?(i(),C("div",{key:2,ref_key:"dropdown",ref:g,class:"BuilderTemplateInput__dropdown",style:Je(v(p))},[m.value==="template"?(i(),F(Rt,{key:0,"hide-secrets":t.type==="state","hide-blueprint-results":t.type==="state","allow-create":t.type==="state",query:_.value,"component-id":t.componentId,"onUpdate:modelValue":O},null,8,["hide-secrets","hide-blueprint-results","allow-create","query","component-id"])):u.value.length?(i(),F(It,{key:1,options:u.value,onSelect:$},null,8,["options"])):x("",!0)],4)):x("",!0)],544))}}),ne=K(Jt,[["__scopeId","data-v-8594b4ef"]]),ge=Object.freeze([{label:"Default",value:"default"},{label:"CSS",value:"css"},{label:"Pick",value:"pick"}]),Gt=["data-automation-key"],Yt={key:0,class:"main"},Ht={key:0,class:"pickerContainer"},Xt=W({__name:"BuilderFieldsAlign",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},direction:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-Zki-pfO-.js").then(h=>h.bz),__vite__mapDeps([1,2]),import.meta.url)}),l=U("rootEl"),c=U("pickerEl"),s=U("freehandInputEl"),a=[{key:"start",label:"Left",match:h=>h=="start",default:"start",icon:"align-left"},{key:"center",label:"Center",match:h=>h=="center",default:"center",icon:"align-center"},{key:"end",label:"Right",match:h=>h=="end",default:"end",icon:"align-right"}],o=[{key:"start",label:"Top",match:h=>h=="start",default:"start",icon:"arrow-up-to-line"},{key:"center",label:"Center",match:h=>h=="center",default:"center",icon:"fold-vertical"},{key:"end",label:"Bottom",match:h=>h=="end",default:"end",icon:"arrow-down-to-line"}],g={pick:c,css:s,default:null},m=t,p=J({componentId:q(m,"componentId"),fieldKey:q(m,"fieldKey")}),I=S(()=>m.direction=="vertical"?o:m.direction=="horizontal"?a:o),b=S(()=>I.value.map(h=>({value:h.key,label:h.label,icon:h.icon}))),u=S(()=>{const h=p.value;for(const d in I.value)if(h&&I.value[d].match(h))return I.value[d].key;return null}),y=N((()=>{if(!p.value)return"default";for(const h in I.value)if(I.value[h].match(p.value))return"pick";return"css"})()),_=()=>{var d;const h=(d=g[y.value])==null?void 0:d.value;h&&(h.focus(),typeof h.selectionStart=="number"&&(h.selectionStart=h.selectionEnd=h.value.length))},w=async h=>{y.value!=h&&(y.value=h,await le(),_(),h==="default"&&(p.value=""))},O=h=>{for(const d in I.value)I.value[d].key==h&&(p.value=I.value[d].default)},$=h=>{p.value=h.target.value};return ie(()=>{l.value.addEventListener("focus",_)}),ye(()=>{l.value.removeEventListener("focus",_)}),(h,d)=>(i(),C("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsAlign",tabindex:"-1","data-automation-key":m.fieldKey},[E(se,{tabs:v(ge),"model-value":y.value,"onUpdate:modelValue":w},null,8,["tabs","model-value"]),y.value=="pick"||y.value=="css"?(i(),C("div",Yt,[y.value=="pick"?(i(),C("div",Ht,[E(v(r),{ref_key:"pickerEl",ref:c,"model-value":u.value,options:b.value,"onUpdate:modelValue":O},null,8,["model-value","options"])])):x("",!0),y.value=="css"?(i(),F(ne,{key:1,ref_key:"freehandInputEl",ref:s,value:v(p),error:t.error,onInput:$},null,8,["value","error"])):x("",!0)])):x("",!0)],8,Gt))}}),Ue=K(Xt,[["__scopeId","data-v-6a36fb0b"]]),Qt=["data-automation-key"],Zt={key:0,class:"main"},en={key:0,class:"pickerContainer"},tn=["value"],nn=W({__name:"BuilderFieldsColor",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=U("rootEl"),l=U("pickerEl"),c=U("freehandInputEl"),s={pick:l,css:c,default:null},a=t,o=J({componentId:q(a,"componentId"),fieldKey:q(a,"fieldKey")}),m=N((()=>{const u=o.value;return u?/#[A-Fa-f0-9]{6}/.test(u)?"pick":"css":"default"})()),p=()=>{var f;const u=(f=s[m.value])==null?void 0:f.value;u&&(u.focus(),typeof u.selectionStart=="number"&&(u.selectionStart=u.selectionEnd=u.value.length))},I=async u=>{m.value!=u&&(m.value=u,await le(),p(),u==="default"&&(o.value=""))},b=u=>o.value=u.target.value;return ie(()=>{r.value.addEventListener("focus",p)}),ye(()=>{r.value.removeEventListener("focus",p)}),(u,f)=>(i(),C("div",{ref_key:"rootEl",ref:r,class:"BuilderFieldsColor",tabindex:"-1","data-automation-key":t.fieldKey},[E(se,{tabs:v(ge),"model-value":m.value,"onUpdate:modelValue":I},null,8,["tabs","model-value"]),m.value=="pick"||m.value=="css"?(i(),C("div",Zt,[m.value=="pick"?(i(),C("div",en,[B("input",{ref_key:"pickerEl",ref:l,type:"color",value:v(o),onInput:b},null,40,tn)])):x("",!0),m.value=="css"?(i(),F(ne,{key:1,ref_key:"freehandInputEl",ref:c,value:v(o),error:t.error,onInput:b},null,8,["value","error"])):x("",!0)])):x("",!0)],8,Qt))}}),on=K(nn,[["__scopeId","data-v-5432e5c5"]]);function $e(t){return typeof t=="string"&&t.startsWith("@{")&&t.endsWith("}")}function Qe({fieldViewModel:t}){const r=N($e(t.value)),l=N({binding:$e(t.value)?t.value:"",noneBinding:r.value?"":t.value});function c(){r.value?($e(t.value)&&(l.value.binding=t.value),t.value=l.value.noneBinding,r.value=!1):(l.value.noneBinding=t.value,t.value=l.value.binding,r.value=!0)}return{isBindingMode:ut(r),toggleBindingMode:c}}const ln=["data-automation-key"],an=W({__name:"BuilderFieldsText",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},fieldControl:{type:String,required:!1,default:Se.Text},defaultValue:{type:String,default:void 0},error:{type:String,required:!1,default:void 0},autofocus:{type:Boolean},type:{type:String,required:!1,default:"template"}},setup(t){const r=R(P.core),l=t,c=J({componentId:q(l,"componentId"),fieldKey:q(l,"fieldKey"),defaultValue:q(l,"defaultValue")}),s=S(()=>`${l.componentId}-${l.fieldKey}`),a={uiComponents:()=>{const u=r.getComponents(void 0,{sortedByPosition:!0}).filter(y=>r.isChildOf("root",y.id)),f={};return u.forEach(y=>{f[y.id]=y.id}),f},uiComponentsWithEvents:()=>r.getComponents(void 0,{sortedByPosition:!0}).filter(u=>r.isChildOf("root",u.id)).filter(u=>!!r.getComponentDefinition(u.type).events).reduce((u,f)=>(u[f.id]=f.id,u),{}),eventTypes:(u,f)=>{var $;const y=($=u.getComponentById(f).content)==null?void 0:$.refComponentId,_=r.getComponentById(y);if(!_)return{};const w=u.getComponentDefinition(_.type);return Object.fromEntries(Object.keys(w.events??{}).map(h=>[h,h]))}},o=S(()=>{const u=r.getComponentById(l.componentId),y=r.getComponentDefinition(u.type).fields[l.fieldKey];return y.options?typeof y.options=="function"?y.options(r,l.componentId):typeof y.options=="string"?a==null?void 0:a[y.options](r,l.componentId):y.options:{}}),g=S(()=>["state","state-template"].includes(l.type)?"state":"template"),m=S(()=>b(c.value)),p=u=>{c.value=I(u.target.value)};function I(u){return typeof u!="string"?"":l.type==="state-template"?`@{${u}}`:u}function b(u){return typeof u!="string"?"":l.type==="state-template"?u.replace(/^@{/,"").replace(/}$/,""):u}return(u,f)=>(i(),C("div",{class:"BuilderFieldsText","data-automation-key":l.fieldKey},[t.fieldControl==v(Se).Text?(i(),F(ne,{key:0,class:"content","component-id":t.componentId,"input-id":s.value,value:m.value,placeholder:t.defaultValue,type:g.value,options:o.value,error:t.error,autofocus:t.autofocus,onInput:p},null,8,["component-id","input-id","value","placeholder","type","options","error","autofocus"])):t.fieldControl==v(Se).Textarea?(i(),F(ne,{key:1,multiline:"",variant:"text",class:"content","input-id":s.value,"component-id":t.componentId,value:m.value,placeholder:t.defaultValue,type:g.value,error:t.error,autofocus:t.autofocus,onInput:p},null,8,["input-id","component-id","value","placeholder","type","error","autofocus"])):x("",!0)],8,ln))}}),Ae=K(an,[["__scopeId","data-v-aa053130"]]),sn=["data-automation-key"],rn=W({__name:"BuilderFieldsCheckbox",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},label:{type:String,default:void 0},unit:{type:String,default:void 0},hint:{type:String,default:void 0},error:{type:String,default:void 0}},setup(t){const r=t,l=J({componentId:q(r,"componentId"),fieldKey:q(r,"fieldKey")}),{isBindingMode:c,toggleBindingMode:s}=Qe({fieldViewModel:l}),a=S({get:()=>l.value==="yes",set:o=>{l.value=o?"yes":"no"}});return(o,g)=>v(c)?(i(),F(te,{key:0,"is-binding-button-shown":"","is-binding-enabled":v(c),label:t.label,unit:t.unit,hint:t.hint,error:t.error,"data-automation-key":r.fieldKey,"onUpdate:isBindingEnabled":v(s)},{default:M(()=>[E(Ae,{type:"state-template","component-id":t.componentId,"field-key":t.fieldKey,error:t.error,"default-value":""},null,8,["component-id","field-key","error"])]),_:1},8,["is-binding-enabled","label","unit","hint","error","data-automation-key","onUpdate:isBindingEnabled"])):(i(),C("div",{key:1,class:"BuilderFieldsCheckbox","data-automation-key":r.fieldKey},[E(qe,{modelValue:a.value,"onUpdate:modelValue":g[0]||(g[0]=m=>a.value=m),label:t.label,detail:t.hint,invalid:!!t.error},null,8,["modelValue","label","detail","invalid"]),E(H,{size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Bind to a variable",onClick:v(s)},{default:M(()=>[E(z,{name:"at-sign"})]),_:1},8,["onClick"])],8,sn))}}),un=K(rn,[["__scopeId","data-v-d540f2ac"]]),dn={key:1,class:"BuilderFieldsKeyValueModal__assistedEntries"},cn={key:0,class:"BuilderFieldsKeyValueModal__assistedEntries__form"},pn=W({__name:"BuilderFieldsKeyValueModal",props:{data:{type:String,required:!0}},emits:{submit:t=>typeof t=="string",close:()=>!0},setup(t,{emit:r}){const l=X({loader:()=>Q(()=>import("./BuilderEmbeddedCodeEditor-Dn7eDICN.js").then(O=>O.B),__vite__mapDeps([13,1,2,14]),import.meta.url)}),c=t,{mode:s,assistedEntries:a,freehandValue:o,isValid:g,currentValue:m,addAssistedEntry:p,updateAssistedEntryValue:I,updateAssistedEntryKey:b,removeAssistedEntry:u,getAssistedEntryError:f}=Bt(c.data),y=r,_=S(()=>[{desc:"Save",fn:()=>y("submit",m.value),disabled:c.data===m.value||!g.value}]),w=[{label:"List",value:"assisted"},{label:"JSON",value:"freehand"}];return(O,$)=>(i(),F(Oe,{title:"Category key values","display-close-button":"",actions:_.value,onClose:$[2]||($[2]=h=>O.$emit("close"))},{titleActions:M(()=>[E(se,{modelValue:v(s),"onUpdate:modelValue":$[0]||($[0]=h=>fe(s)?s.value=h:null),class:"BuilderFieldsKeyValueModal__tabs",tabs:w},null,8,["modelValue"])]),default:M(()=>[v(s)==="freehand"?(i(),F(v(l),{key:0,modelValue:v(o),"onUpdate:modelValue":$[1]||($[1]=h=>fe(o)?o.value=h:null),class:"BuilderFieldsKeyValueModal__freehand",variant:"minimal",language:"json"},null,8,["modelValue"])):x("",!0),v(s)==="assisted"?(i(),C("div",dn,[v(s)==="assisted"?(i(),C("div",cn,[$[3]||($[3]=B("p",{class:"BuilderFieldsKeyValueModal__assistedEntries__form__labelKey"}," Key ",-1)),$[4]||($[4]=B("p",{class:"BuilderFieldsKeyValueModal__assistedEntries__form__labelValue"}," Value ",-1)),(i(!0),C(j,null,Z(v(a),(h,d)=>(i(),C(j,{key:d},[E(te,{error:v(f)(d)},{default:M(()=>[E(ne,{placeholder:"Type a key...",value:h.key,error:v(f)(d),"onUpdate:value":e=>v(b)(d,e)},null,8,["value","error","onUpdate:value"])]),_:2},1032,["error"]),E(te,null,{default:M(()=>[E(ne,{placeholder:"Type a value...",value:h.value,"onUpdate:value":e=>v(I)(d,e)},null,8,["value","onUpdate:value"])]),_:2},1024),B("div",null,[E(H,{variant:"neutral",size:"smallIcon",class:"BuilderFieldsKeyValueModal__assistedEntries__form__deleteBtn",onClick:e=>v(u)(d)},{default:M(()=>[E(z,{name:"trash-2"})]),_:2},1032,["onClick"])])],64))),128))])):x("",!0),E(H,{variant:"special",size:"small",onClick:v(p)},{default:M(()=>[E(z,{name:"plus"}),$[5]||($[5]=ae(" Add a pair "))]),_:1},8,["onClick"])])):x("",!0)]),_:1},8,["actions"]))}}),vn=K(pn,[["__scopeId","data-v-4e74be91"]]),mn=["data-automation-key"],fn={class:"BuilderFieldsKeyValue__toolbar"},yn={key:1,class:"BuilderFieldsKeyValue__listEmpty"},gn={key:2,class:"BuilderFieldsKeyValue__list"},_n=["data-writer-tooltip"],hn=["data-writer-tooltip"],bn=W({__name:"BuilderFieldsKeyValue",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},instancePath:{type:Array,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=t,l=J({componentId:q(r,"componentId"),fieldKey:q(r,"fieldKey")}),c=R(P.core),s=R(P.secretsManager),{getEvaluatedFields:a}=Ee(c,s),o=N(!1),g=S(()=>{var I;return((I=a(r.instancePath))==null?void 0:I[r.fieldKey].value)??{}}),m=S(()=>l.value||JSON.stringify(g.value));function p(I){o.value=!1,l.value=I}return(I,b)=>(i(),C("div",{class:"BuilderFieldsKeyValue",tabindex:"-1","data-automation-key":r.fieldKey},[B("div",fn,[E(H,{variant:"neutral",size:"smallIcon","data-automation-key":"openAssistedMode",onClick:b[0]||(b[0]=u=>o.value=!0)},{default:M(()=>[E(z,{name:"pencil"})]),_:1})]),o.value?(i(),F(vn,{key:0,data:m.value,onSubmit:p,onClose:b[1]||(b[1]=u=>o.value=!1)},null,8,["data"])):x("",!0),Object.keys(g.value).length===0?(i(),C("div",yn,[b[4]||(b[4]=B("p",null,"There are no key value categories defined",-1)),E(H,{variant:"special",size:"small",onClick:b[2]||(b[2]=u=>o.value=!0)},{default:M(()=>[E(z,{name:"pencil"}),b[3]||(b[3]=ae(" Edit "))]),_:1})])):(i(),C("ul",gn,[(i(!0),C(j,null,Z(g.value,(u,f)=>(i(),C("li",{key:f,class:"BuilderFieldsKeyValue__list__item"},[B("p",{class:"BuilderFieldsKeyValue__list__item__key","data-writer-tooltip":f,"data-writer-tooltip-strategy":"overflow"},Y(f),9,_n),B("p",{class:"BuilderFieldsKeyValue__list__item__value","data-writer-tooltip":u,"data-writer-tooltip-strategy":"overflow"},Y(u||"<empty value>"),9,hn)]))),128))]))],8,mn))}}),kn=K(bn,[["__scopeId","data-v-43bf3550"]]),Sn=W({__name:"BuilderFieldsObject",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},defaultValue:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0}},setup(t){const r=t,l=J({componentId:q(r,"componentId"),fieldKey:q(r,"fieldKey"),defaultValue:q(r,"defaultValue")}),c=s=>{l.value=s.target.value};return(s,a)=>(i(),F(ne,{class:"BuilderFieldsObject","data-automation-key":r.fieldKey,multiline:"",variant:"code",value:v(l),placeholder:t.defaultValue,error:t.error,onInput:c},null,8,["data-automation-key","value","placeholder","error"]))}}),In=K(Sn,[["__scopeId","data-v-efbda4e8"]]),Bn=["data-automation-key"],Cn={key:0,class:"main"},wn={key:0,class:"pickerContainer"},En={class:"BuilderFieldsPadding__options"},xn=W({__name:"BuilderFieldsPadding",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-Zki-pfO-.js").then(e=>e.bz),__vite__mapDeps([1,2]),import.meta.url)}),l=U("rootEl"),c=U("pickerEl"),s=U("freehandInputEl"),a=U("fixedEl"),o=[{key:"all_sides",label:"All sides",match:e=>e.split(" ").length==1&&e.endsWith("px"),default:()=>f.value?f.value[0]:"0px"},{key:"XY sides",label:"XY sides",match:e=>e.split(" ").length==2&&e.endsWith("px"),default:()=>f.value?f.value[2]+" "+f.value[0]:"0px 0px"},{key:"Per side",label:"Per side",match:e=>e.split(" ").length==4&&e.endsWith("px"),default:()=>f.value?[f.value[3],f.value[1],f.value[2],f.value[0]].join(" "):"0px 0px 0px 0px"}],g={pick:c,css:s,default:null},m=t,p=J({componentId:q(m,"componentId"),fieldKey:q(m,"fieldKey")}),I=S(()=>o.map(e=>({value:e.key,label:e.label,icon:"panel-top-dashed"}))),b=S(()=>{const e=p.value;for(const n in o)if(e&&o[n].match(e))return o[n].key;return null}),u=S(()=>{const e=f.value;return e?[e[0].substring(0,e[0].length-2),e[1].substring(0,e[1].length-2),e[2].substring(0,e[2].length-2),e[3].substring(0,e[3].length-2)]:["0","0","0","0"]}),f=S(()=>{const e=p.value;if(e){const n=e.split(" ");if(n.length==1&&n[0].endsWith("px"))return[n[0],n[0],n[0],n[0]];if(n.length==2&&n[0].endsWith("px")&&n[0].endsWith("px"))return[n[1],n[1],n[0],n[0]];if(n.length==4&&n[0].endsWith("px")&&n[1].endsWith("px")&&n[2].endsWith("px")&&n[3].endsWith("px"))return[n[3],n[1],n[0],n[2]]}else return null;return null}),_=N((()=>{if(!p.value)return"default";for(const e in o)if(o[e].match(p.value))return"pick";return"css"})()),w=()=>{var n;const e=(n=g[_.value])==null?void 0:n.value;e&&(e.focus(),typeof e.selectionStart=="number"&&(e.selectionStart=e.selectionEnd=e.value.length))},O=async e=>{_.value!=e&&(_.value=e,await le(),w(),e==="default"&&(p.value=""))},$=e=>{for(const n in o)o[n].key==e&&(p.value=o[n].default());le(()=>{var n;(n=a.value)==null||n.focus()})},h=e=>{p.value=e.target.value},d=(e,n,V)=>{const k=Number(e),T=p.value;if(n=="all_sides")p.value=k+"px";else if(n=="XY sides"){const A=T.split(" ");V=="x"?A[1]=k+"px":V=="y"&&(A[0]=k+"px"),p.value=A.join(" ")}else if(n=="Per side"){const A=T.split(" ");V=="top"?A[0]=k+"px":V=="right"?A[1]=k+"px":V=="bottom"?A[2]=k+"px":V=="left"&&(A[3]=k+"px"),p.value=A.join(" ")}};return ie(()=>{l.value.addEventListener("focus",w)}),ye(()=>{l.value.removeEventListener("focus",w)}),(e,n)=>(i(),C("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsPadding",tabindex:"-1","data-automation-key":m.fieldKey},[E(se,{tabs:v(ge),"model-value":_.value,"onUpdate:modelValue":O},null,8,["tabs","model-value"]),_.value=="pick"||_.value=="css"?(i(),C("div",Cn,[_.value=="pick"?(i(),C("div",wn,[E(v(r),{ref_key:"pickerEl",ref:c,"model-value":b.value,options:I.value,"onUpdate:modelValue":$},null,8,["model-value","options"]),B("div",En,[b.value=="all_sides"?(i(),C(j,{key:0},[n[7]||(n[7]=B("i",null,"All",-1)),E(ee,{ref_key:"fixedEl",ref:a,type:"number","model-value":u.value[0],"onUpdate:modelValue":n[0]||(n[0]=V=>d(V,b.value))},null,8,["model-value"]),n[8]||(n[8]=B("div",null,"px",-1))],64)):x("",!0),b.value=="XY sides"?(i(),C(j,{key:1},[n[9]||(n[9]=B("i",null,"X",-1)),E(ee,{type:"number","model-value":u.value[0],"onUpdate:modelValue":n[1]||(n[1]=V=>d(V,b.value,"x"))},null,8,["model-value"]),n[10]||(n[10]=B("div",null,"px",-1)),n[11]||(n[11]=B("i",null,"Y",-1)),E(ee,{type:"number","model-value":u.value[2],"onUpdate:modelValue":n[2]||(n[2]=V=>d(V,b.value,"y"))},null,8,["model-value"]),n[12]||(n[12]=B("div",null,"px",-1))],64)):x("",!0),b.value=="Per side"?(i(),C(j,{key:2},[n[13]||(n[13]=B("i",null,"Left",-1)),E(ee,{type:"number","model-value":u.value[0],"onUpdate:modelValue":n[3]||(n[3]=V=>d(V,b.value,"left"))},null,8,["model-value"]),n[14]||(n[14]=B("div",null,"px",-1)),n[15]||(n[15]=B("i",null,"Right",-1)),E(ee,{type:"number","model-value":u.value[1],"onUpdate:modelValue":n[4]||(n[4]=V=>d(V,b.value,"right"))},null,8,["model-value"]),n[16]||(n[16]=B("div",null,"px",-1)),n[17]||(n[17]=B("i",null,"Top",-1)),E(ee,{type:"number","model-value":u.value[2],"onUpdate:modelValue":n[5]||(n[5]=V=>d(V,b.value,"top"))},null,8,["model-value"]),n[18]||(n[18]=B("div",null,"px",-1)),n[19]||(n[19]=B("i",null,"Bottom",-1)),E(ee,{type:"number","model-value":u.value[3],"onUpdate:modelValue":n[6]||(n[6]=V=>d(V,b.value,"bottom"))},null,8,["model-value"]),n[20]||(n[20]=B("div",null,"px",-1))],64)):x("",!0)])])):x("",!0),_.value=="css"?(i(),F(ne,{key:1,ref_key:"freehandInputEl",ref:s,value:v(p),error:t.error,onInput:h},null,8,["value","error"])):x("",!0)])):x("",!0)],8,Bn))}}),$n=K(xn,[["__scopeId","data-v-e122e664"]]),Tn=["data-automation-key"],Fn={key:0,class:"main"},Vn={key:0,class:"pickerContainer"},On={class:"param"},Mn={class:"header"},qn=["value"],An={class:"param"},Dn={class:"header"},Rn=["value"],Pn={class:"param"},Wn={class:"header"},Un=["value"],Kn={class:"param"},jn={class:"header"},Ln=["value"],Nn={class:"param"},zn=["value"],Jn=W({__name:"BuilderFieldsShadow",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=U("rootEl"),l=U("freehandInputEl"),c=U("paramOffsetXEl"),s=U("paramOffsetYEl"),a=U("paramBlurRadiusEl"),o=U("paramSpreadRadiusEl"),g=U("paramColorEl"),m={pick:c,css:l,default:null},p=t,I=J({componentId:q(p,"componentId"),fieldKey:q(p,"fieldKey")}),b=/^(?<offsetX>[0-9]+)px (?<offsetY>[0-9]+)px (?<blurRadius>[0-9]+)px (?<spreadRadius>[0-9-]+)px (?<color>#[A-Fa-f0-9]{6})$/,f=N((()=>{const h=I.value;return h?b.test(h)?"pick":"css":"default"})()),y=()=>{var d;const h=(d=m[f.value])==null?void 0:d.value;h&&(h.focus(),typeof h.selectionStart=="number"&&(h.selectionStart=h.selectionEnd=h.value.length))},_=async h=>{f.value!=h&&(f.value=h,await le(),y(),h==="default"&&(I.value=""))},w=()=>{const h=c.value.value,d=s.value.value,e=a.value.value,n=o.value.value,V=g.value.value,k=`${h}px ${d}px ${e}px ${n}px ${V}`;I.value=k},O=h=>{I.value=h.target.value},$=S(()=>{const h=I.value.match(b);return(h==null?void 0:h.groups)??{}});return ie(()=>{r.value.addEventListener("focus",y)}),ye(()=>{r.value.removeEventListener("focus",y)}),(h,d)=>{var e,n,V,k,T,A,L,_e,he,de,De,Re,Pe;return i(),C("div",{ref_key:"rootEl",ref:r,class:"BuilderFieldsShadow",tabindex:"-1","data-automation-key":p.fieldKey},[E(se,{tabs:v(ge),"model-value":f.value,"onUpdate:modelValue":_},null,8,["tabs","model-value"]),f.value=="pick"||f.value=="css"?(i(),C("div",Fn,[f.value=="pick"?(i(),C("div",Vn,[B("div",On,[B("div",Mn,[d[0]||(d[0]=B("div",{class:"name"},"Offset X",-1)),ce(B("div",{class:"value"},Y((e=$.value)==null?void 0:e.offsetX)+"px ",513),[[be,(n=$.value)==null?void 0:n.offsetX]])]),B("input",{ref_key:"paramOffsetXEl",ref:c,type:"range",min:"0",max:"32",value:(V=$.value)==null?void 0:V.offsetX,onInput:w},null,40,qn)]),B("div",An,[B("div",Dn,[d[1]||(d[1]=B("div",{class:"name"},"Offset Y",-1)),ce(B("div",{class:"value"},Y((k=$.value)==null?void 0:k.offsetY)+"px ",513),[[be,(T=$.value)==null?void 0:T.offsetY]])]),B("input",{ref_key:"paramOffsetYEl",ref:s,type:"range",min:"0",max:"32",value:(A=$.value)==null?void 0:A.offsetY,onInput:w},null,40,Rn)]),B("div",Pn,[B("div",Wn,[d[2]||(d[2]=B("div",{class:"name"},"Blur radius",-1)),ce(B("div",{class:"value"},Y((L=$.value)==null?void 0:L.blurRadius)+"px ",513),[[be,(_e=$.value)==null?void 0:_e.blurRadius]])]),B("input",{ref_key:"paramBlurRadiusEl",ref:a,type:"range",min:"0",max:"32",value:(he=$.value)==null?void 0:he.blurRadius,onInput:w},null,40,Un)]),B("div",Kn,[B("div",jn,[d[3]||(d[3]=B("div",{class:"name"},"Spread radius",-1)),ce(B("div",{class:"value"},Y((de=$.value)==null?void 0:de.spreadRadius)+"px ",513),[[be,(De=$.value)==null?void 0:De.spreadRadius]])]),B("input",{ref_key:"paramSpreadRadiusEl",ref:o,type:"range",min:"-16",max:"32",value:(Re=$.value)==null?void 0:Re.spreadRadius,onInput:w},null,40,Ln)]),B("div",Nn,[d[4]||(d[4]=B("div",{class:"header"},[B("div",{class:"name"},"Color")],-1)),B("input",{ref_key:"paramColorEl",ref:g,type:"color",value:(Pe=$.value)==null?void 0:Pe.color,onInput:w},null,40,zn)])])):x("",!0),f.value=="css"?(i(),F(ne,{key:1,ref_key:"freehandInputEl",ref:l,value:v(I),error:t.error,onInput:O},null,8,["value","error"])):x("",!0)])):x("",!0)],8,Tn)}}}),Gn=K(Jn,[["__scopeId","data-v-c59dcd63"]]),Yn=["data-automation-key"],Hn={key:0,class:"main"},Xn={key:0,class:"pickerContainer"},Qn={key:0,class:"fixedContainer"},Zn=W({__name:"BuilderFieldsWidth",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-Zki-pfO-.js").then(d=>d.bz),__vite__mapDeps([1,2]),import.meta.url)}),l=U("rootEl"),c=U("pickerEl"),s=U("freehandInputEl"),a=U("fixedEl"),o=[{key:"fixed",label:"Fixed",match:d=>d.endsWith("px"),default:"160px"},{key:"fit-content",label:"Fit Content",match:d=>d=="fit-content",default:"fit-content"},{key:"full",label:"Full",match:d=>d=="100%",default:"100%"}],g={pick:c,css:s,default:null},m=t,p=J({componentId:q(m,"componentId"),fieldKey:q(m,"fieldKey")}),I=S(()=>o.map(d=>({value:d.key,label:d.label,icon:"move-horizontal"}))),b=S(()=>{const d=p.value;for(const e in o)if(d&&o[e].match(d))return o[e].key;return null}),u=S(()=>{const d=p.value;if(d){if(d.endsWith("px"))return d.substring(0,d.length-2)}else return null;return null}),y=N((()=>{if(!p.value)return"default";for(const d in o)if(o[d].match(p.value))return"pick";return"css"})()),_=()=>{var e;const d=(e=g[y.value])==null?void 0:e.value;d&&(d.focus(),typeof d.selectionStart=="number"&&(d.selectionStart=d.selectionEnd=d.value.length))},w=async d=>{y.value!=d&&(y.value=d,await le(),_(),d==="default"&&(p.value=""))},O=d=>{for(const e in o)if(o[e].key==d){const n=o[e].default;p.value=n}d=="fixed"&&le(()=>{a.value.focus()})},$=d=>{p.value=d.target.value},h=d=>{p.value=`${d}px`};return ie(()=>{l.value.addEventListener("focus",_)}),ye(()=>{l.value.removeEventListener("focus",_)}),(d,e)=>(i(),C("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsWidth",tabindex:"-1","data-automation-key":m.fieldKey},[E(se,{tabs:v(ge),"model-value":y.value,"onUpdate:modelValue":w},null,8,["tabs","model-value"]),y.value=="pick"||y.value=="css"?(i(),C("div",Hn,[y.value=="pick"?(i(),C("div",Xn,[E(v(r),{ref_key:"pickerEl",ref:c,"model-value":b.value,options:I.value,"onUpdate:modelValue":O},null,8,["model-value","options"]),b.value=="fixed"?(i(),C("div",Qn,[E(ee,{ref_key:"fixedEl",ref:a,type:"number","model-value":u.value,invalid:t.error!==void 0,"onUpdate:modelValue":h},null,8,["model-value","invalid"]),e[0]||(e[0]=B("div",null,"px",-1))])):x("",!0)])):x("",!0),y.value=="css"?(i(),F(ne,{key:1,ref_key:"freehandInputEl",ref:s,value:v(p),onInput:$},null,8,["value"])):x("",!0)])):x("",!0)],8,Yn))}}),eo=K(Zn,[["__scopeId","data-v-55a31bea"]]),to=["data-automation-key"],no={class:"tools"},oo=["onClick"],lo={class:"toolName"},ao={class:"addToolForm"},io=W({__name:"BuilderFieldsTools",props:{componentId:{},fieldKey:{}},setup(t){const r=X({loader:()=>Q(()=>import("./BuilderGraphSelect-C-LRsO8W.js"),__vite__mapDeps([15,1,2,16,17]),import.meta.url)}),l=X({loader:()=>Q(()=>import("./BuilderEmbeddedCodeEditor-Dn7eDICN.js").then(d=>d.B),__vite__mapDeps([13,1,2,14]),import.meta.url)}),s={isShown:!1,type:"function",name:"new_tool",code:`
{
	"description": "Gets info for an employee, given an employee id",
    "parameters": {
      "id": {"type": "string", "description": "Id of the employee"}
    }
}
`.trim(),graphIds:"",binding:!1,includeDomains:"",excludeDomains:"",includeRawContent:!1},a=N(s),o=S(()=>{switch(a.value.type){case"function":return!a.value.code;case"graph":return!a.value.graphIds;case"web_search":return!1;default:return!0}}),g=S({get:()=>a.value.graphIds.split(",").filter(d=>!d.startsWith("@{")),set(d){a.value={...a.value,graphIds:d.join(",")}}}),m=S({get:()=>{const d=Te.exec(a.value.graphIds);return(d==null?void 0:d[1])??""},set(d){a.value={...a.value,graphIds:`@{${d}}`}}}),p=t,I=J({componentId:q(p,"componentId"),fieldKey:q(p,"fieldKey")}),b=S(()=>{try{return JSON.parse(I.value)}catch{return{}}});function u(){a.value={...s,isShown:!0}}function f(){const{type:d,code:e,graphIds:n,includeDomains:V,excludeDomains:k,includeRawContent:T}=a.value;if(d=="function")return{...JSON.parse(e),type:d};if(d=="graph"){const A=n.split(",").map(L=>L.trim());return{type:d,graph_ids:A}}if(d=="web_search"){const A={type:d};return V.trim()&&(A.include_domains=V.split(",").map(L=>L.trim()).filter(L=>L)),k.trim()&&(A.exclude_domains=k.split(",").map(L=>L.trim()).filter(L=>L)),T&&(A.include_raw_content=T),A}throw"Unexpected tool type."}function y(d){let e=[];const{originalName:n,name:V}=d;return V||e.push("The name cannot be empty."),Object.keys(b.value).includes(V)&&!(n||n==V)&&e.push("An existing tool with the specified name already exists."),e}function _(){const d=y(a.value);if(d.length>0){d.forEach(alert);return}let e;try{e=f()}catch{alert("Incorrect tool definition");return}const{originalName:n,name:V}=a.value;let k={...b.value};if(n&&n!==V){const{[n]:T,...A}=k;k=A}k[V]=e,I.value=JSON.stringify(k),a.value.isShown=!1}function w(d,e){var V,k,T,A;const{type:n}=e;if(n=="function")return{isShown:!0,type:"function",binding:!1,originalName:d,name:d,graphIds:"",code:JSON.stringify(e,void 0,2),includeDomains:"",excludeDomains:"",includeRawContent:!1};if(n=="graph"){const L=Te.test(((V=e.graph_ids)==null?void 0:V.at(0))??"");return{isShown:!0,type:"graph",originalName:d,name:d,binding:L,graphIds:((k=e.graph_ids)==null?void 0:k.join(","))??"",code:"",includeDomains:"",excludeDomains:"",includeRawContent:!1}}if(n=="web_search")return{isShown:!0,type:"web_search",originalName:d,name:d,graphIds:"",binding:!1,code:"",includeDomains:((T=e.include_domains)==null?void 0:T.join(", "))??"",excludeDomains:((A=e.exclude_domains)==null?void 0:A.join(", "))??"",includeRawContent:e.include_raw_content??!1};throw"Unexpected tool type;"}function O(d){var n;const e=(n=b.value)==null?void 0:n[d];e&&(a.value=w(d,e))}function $(d){const{[d]:e,...n}={...b.value};I.value=JSON.stringify(n)}const h=S(()=>[{desc:"cancel",fn:()=>a.value.isShown=!1},{desc:"Save",disabled:o.value,fn:_}]);return(d,e)=>(i(),C("div",{class:"BuilderFieldsTools colorTransformer","data-automation-key":p.fieldKey},[B("div",no,[(i(!0),C(j,null,Z(b.value,(n,V)=>(i(),C("div",{key:V,class:"tool",onClick:k=>O(V)},[B("div",lo,Y(V),1),E(H,{variant:"primary",size:"smallIcon",class:"delete",onClick:oe(k=>$(V),["stop"])},{default:M(()=>[E(z,{name:"trash-2"})]),_:2},1032,["onClick"])],8,oo))),128))]),E(H,{size:"small",onClick:u},{default:M(()=>[E(z,{name:"plus"}),e[9]||(e[9]=ae(" Add tool "))]),_:1}),a.value.isShown?(i(),F(Oe,{key:0,actions:h.value,title:"Add tool","allow-overflow":""},{default:M(()=>[B("div",ao,[E(te,{label:"Tool type"},{default:M(()=>[E(dt,{modelValue:a.value.type,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value.type=n)},{default:M(()=>e[10]||(e[10]=[B("option",{value:"function"},"Function",-1),B("option",{value:"graph"},"Knowledge graph",-1),B("option",{value:"web_search"},"Web search",-1)])),_:1},8,["modelValue"])]),_:1}),E(te,{label:"Tool name"},{default:M(()=>[E(ee,{modelValue:a.value.name,"onUpdate:modelValue":e[1]||(e[1]=n=>a.value.name=n)},null,8,["modelValue"])]),_:1}),a.value.type=="function"?(i(),F(te,{key:0,"frame-slot":!0,label:"Function tool definition"},{default:M(()=>[E(v(l),{modelValue:a.value.code,"onUpdate:modelValue":e[2]||(e[2]=n=>a.value.code=n),class:"addToolForm__codeEditor",variant:"minimal",language:"json"},null,8,["modelValue"])]),_:1})):x("",!0),a.value.type=="graph"?(i(),F(te,{key:1,"is-binding-enabled":a.value.binding,"onUpdate:isBindingEnabled":e[5]||(e[5]=n=>a.value.binding=n),label:"Graph id(s)",hint:"Specify the id of the knowledge graph you want to use. If multiple, separate the ids using commas.","is-binding-button-shown":""},{default:M(()=>[a.value.binding?(i(),F(ne,{key:0,type:"state",value:m.value,"onUpdate:value":e[3]||(e[3]=n=>m.value=n)},null,8,["value"])):(i(),F(v(r),{key:1,modelValue:g.value,"onUpdate:modelValue":e[4]||(e[4]=n=>g.value=n),"enable-multi-selection":""},null,8,["modelValue"]))]),_:1},8,["is-binding-enabled"])):x("",!0),a.value.type=="web_search"?(i(),F(te,{key:2,label:"Include domains (optional)",hint:"Comma-separated list of domains to search within (e.g., wikipedia.org, docs.python.org)"},{default:M(()=>[E(ee,{modelValue:a.value.includeDomains,"onUpdate:modelValue":e[6]||(e[6]=n=>a.value.includeDomains=n),placeholder:"domain1.com, domain2.org"},null,8,["modelValue"])]),_:1})):x("",!0),a.value.type=="web_search"?(i(),F(te,{key:3,label:"Exclude domains (optional)",hint:"Comma-separated list of domains to exclude from results"},{default:M(()=>[E(ee,{modelValue:a.value.excludeDomains,"onUpdate:modelValue":e[7]||(e[7]=n=>a.value.excludeDomains=n),placeholder:"spam.com, ads.net"},null,8,["modelValue"])]),_:1})):x("",!0),a.value.type=="web_search"?(i(),F(te,{key:4,label:"Include raw content",hint:"Include full page content in search results"},{default:M(()=>[E(qe,{modelValue:a.value.includeRawContent,"onUpdate:modelValue":e[8]||(e[8]=n=>a.value.includeRawContent=n),label:"Include raw content"},null,8,["modelValue"])]),_:1})):x("",!0)])]),_:1},8,["actions"])):x("",!0)],8,to))}}),so=K(io,[["__scopeId","data-v-9b70cc0d"]]),ro=["data-automation-key"],uo={class:"availableMcpTools"},co={class:"sectionHeader"},po={key:0,class:"errorState"},vo={key:1,class:"loadingState"},mo={key:2,class:"emptyState"},fo=["onClick"],yo={class:"iconContainer"},go=["src","alt"],_o={class:"appName"},ho={key:1,class:"selectedCount"},bo={key:0,class:"mcpFunctionsList"},ko=["data-writer-tooltip"],So=["onClick"],Io={class:"functionName"},Bo={key:0,class:"functionDescription"},Co=W({__name:"BuilderFieldsToolsWithMcp",props:{componentId:{},fieldKey:{}},setup(t){const r=R(P.core),l=Le(),{writerApi:c}=ct(),s=N([]),a=N(!1),o=N(void 0),g=N(new Set),m=S(()=>{var h;const $={};for(const d of s.value){const e=d.appName||"Unknown App";$[e]||($[e]={functions:[],logo:(h=d.connector)==null?void 0:h.logo}),$[e].functions.push(d)}return $}),p=S(()=>{const $={};for(const[h,d]of Object.entries(m.value))$[h]=d.functions.filter(e=>u(e)).length;return $});function I($){g.value.has($)?g.value.delete($):g.value.add($)}function b($){return`${$.appName}_${$.functionName}`.replace(/[^a-zA-Z0-9_]/g,"_")}function u($){return b($)in O.value}function f($,h){const d=b($);if(h){const e={type:"mcp",appId:$.appId,functionName:$.functionName,function:$.function};w.value=JSON.stringify({...O.value,[d]:e})}else{const{[d]:e,...n}=O.value;w.value=JSON.stringify(n)}}async function y(){const $=r.writerOrgId.value;if(!$){o.value=new Error("No organization ID available");return}a.value=!0,o.value=void 0;try{const h=r.writerAppId.value;s.value=await c.fetchMcpTools($,h)}catch(h){const d=h instanceof Error?h:new Error(String(h));o.value=d,s.value=[]}finally{a.value=!1}}ie(()=>{y()});const _=t,w=J({componentId:q(_,"componentId"),fieldKey:q(_,"fieldKey")}),O=S(()=>{try{return JSON.parse(w.value)}catch($){return l.error($),{}}});return($,h)=>(i(),C("div",{class:"BuilderFieldsToolsWithMcp colorTransformer","data-automation-key":_.fieldKey},[B("div",uo,[B("div",co,[h[2]||(h[2]=B("div",{class:"sectionTitle"},"Available MCP Tools",-1)),E(H,{size:"small",variant:"secondary",loading:a.value,onClick:h[0]||(h[0]=d=>y())},{default:M(()=>[E(z,{name:"refresh-cw"}),h[1]||(h[1]=ae(" Refresh "))]),_:1},8,["loading"])]),o.value?(i(),C("div",po,[ae(" Error loading MCP tools: "+Y(o.value.message)+" ",1),h[3]||(h[3]=B("br",null,null,-1)),h[4]||(h[4]=B("small",null,"Check console for details",-1))])):a.value&&s.value.length===0?(i(),C("div",vo,[(i(),C(j,null,Z(3,d=>B("div",{key:d,class:"loadingSkeleton"},[E(We,{style:{width:"200px","margin-bottom":"8px"}}),E(We,{style:{width:"150px"}})])),64))])):s.value.length===0?(i(),C("div",mo,h[5]||(h[5]=[ae(" No MCP tools available "),B("br",null,null,-1),B("small",null,"Make sure you have connected MCP applications with enabled functions",-1)]))):(i(),C("div",{key:3,class:ve(["mcpToolsList",{loading:a.value}])},[(i(!0),C(j,null,Z(m.value,(d,e)=>(i(),C("div",{key:e,class:ve(["mcpAppGroup",{expanded:g.value.has(e)}])},[B("div",{class:ve(["mcpAppHeader",{expanded:g.value.has(e)}]),onClick:n=>I(e)},[B("div",yo,[E(z,{name:g.value.has(e)?"minus":"plus",class:"expandIcon"},null,8,["name"])]),d.logo?(i(),C("img",{key:0,src:d.logo,alt:`${e} logo`,class:"appLogo"},null,8,go)):x("",!0),B("span",_o,Y(e),1),p.value[e]>0?(i(),C("span",ho,Y(p.value[e])+" selected ",1)):x("",!0)],10,fo),g.value.has(e)?(i(),C("div",bo,[(i(!0),C(j,null,Z(d.functions,n=>{var V,k;return i(),C("div",{key:`${n.appId}-${n.functionName}`,class:"mcpFunctionItem","data-writer-tooltip":(V=n.function)==null?void 0:V.description,"data-writer-tooltip-placement":"left"},[E(qe,{class:"functionCheckbox","model-value":u(n),"onUpdate:modelValue":T=>f(n,T)},null,8,["model-value","onUpdate:modelValue"]),B("div",{class:"functionInfo",onClick:T=>f(n,!u(n))},[B("div",Io,Y(n.functionName),1),(k=n.function)!=null&&k.description?(i(),C("div",Bo,Y(n.function.description),1)):x("",!0)],8,So)],8,ko)}),128))])):x("",!0)],2))),128))],2))])],8,ro))}}),wo=K(Co,[["__scopeId","data-v-c8204108"]]),Eo=W({__name:"BuilderFieldsCode",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0},isExpanded:{type:Boolean,required:!0},inputLanguage:{type:String,required:!0},singleLine:{type:Boolean,required:!1}},setup(t){const r=X({loader:()=>Q(()=>import("./BuilderEmbeddedCodeEditor-Dn7eDICN.js").then(a=>a.B),__vite__mapDeps([13,1,2,14]),import.meta.url)}),l=t,c=J({componentId:q(l,"componentId"),fieldKey:q(l,"fieldKey")}),s=S(()=>l.singleLine?"single-line":l.isExpanded?"half-screen":"minimal");return(a,o)=>(i(),F(v(r),{modelValue:v(c),"onUpdate:modelValue":o[0]||(o[0]=g=>fe(c)?c.value=g:null),language:t.inputLanguage,variant:s.value,class:"BuilderFieldsCode"},null,8,["modelValue","language","variant"]))}}),Ke=K(Eo,[["__scopeId","data-v-a2ca567b"]]),xo=["data-automation-key"],$o=W({__name:"BuilderFieldsBlueprintKey",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-Zki-pfO-.js").then(p=>p.bz),__vite__mapDeps([1,2]),import.meta.url)}),l=R(P.core),c=R(P.builderManager),s=t,a=J({componentId:q(s,"componentId"),fieldKey:q(s,"fieldKey")}),o=S(()=>{const p=new Set;for(const u of l.getComponents("blueprints_root"))u.content.key&&p.add(u.content.key);const I=[...p].sort((u,f)=>u.localeCompare(f)).map(u=>({value:u,label:u,icon:"wds-blueprints"})),b=[{value:"",label:"(No blueprint)",icon:"block"},...I];if(!b.some(u=>u.value===a.value)){const u=a.value;b.push({value:u,label:u})}return b}),g=S(()=>{const p=l.getComponents("blueprints_root").find(I=>I.content.key===a.value);return p==null?void 0:p.id});function m(){g.value&&(c.setSelection(g.value,null,"click"),l.setActivePageId(g.value))}return(p,I)=>(i(),C("div",{class:"BuilderFieldsBlueprintKey","data-automation-key":s.fieldKey},[E(v(r),{modelValue:v(a),"onUpdate:modelValue":I[0]||(I[0]=b=>fe(a)?a.value=b:null),options:o.value},null,8,["modelValue","options"]),g.value?(i(),F(H,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to the blueprint",onClick:m},{default:M(()=>[E(z,{name:"square-dashed-mouse-pointer"})]),_:1})):x("",!0)],8,xo))}}),To=K($o,[["__scopeId","data-v-f1beb9af"]]),Fo=["data-automation-key"],Vo=W({__name:"BuilderFieldsBlueprintId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(t){const r=R(P.core),l=t,c=S(()=>r.getComponentById(l.componentId)),s=S(()=>{var a;return((a=c.value)==null?void 0:a.parentId)??""});return(a,o)=>(i(),C("div",{class:"BuilderFieldsBlueprintId","data-automation-key":l.fieldKey},[E(ee,{"model-value":s.value,disabled:""},null,8,["model-value"])],8,Fo))}}),Oo=K(Vo,[["__scopeId","data-v-23c33b8b"]]),Mo=["data-automation-key"],qo=W({__name:"BuilderFieldsHandler",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-Zki-pfO-.js").then(o=>o.bz),__vite__mapDeps([1,2]),import.meta.url)}),l=R(P.core),c=t,s=J({componentId:q(c,"componentId"),fieldKey:q(c,"fieldKey")}),a=S(()=>{const o=l.userFunctions.value.map(m=>m.name).sort((m,p)=>m.localeCompare(p)).map(m=>({value:m,label:m,icon:"wds-function"})),g=[{value:"",label:"(No handler)",icon:"ban"},...o];if(!g.some(m=>m.value===s.value)){const m=s.value;g.push({value:m,label:m})}return g});return(o,g)=>(i(),C("div",{class:"BuilderFieldsHandler","data-automation-key":c.fieldKey},[E(v(r),{modelValue:v(s),"onUpdate:modelValue":g[0]||(g[0]=m=>fe(s)?s.value=m:null),options:a.value},null,8,["modelValue","options"])],8,Mo))}}),Ao=["data-automation-key"],Do=["href","data-writer-tooltip"],Ro=W({__name:"BuilderFieldsWriterResourceId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},label:{type:String,required:!1,default:void 0},unit:{type:String,required:!1,default:void 0},hint:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0},resourceType:{type:String,required:!0},enableMultiSelection:{type:Boolean,required:!1,default:!1},isBindingButtonShown:{type:Boolean,required:!1,default:!1}},setup(t){const r=X({loader:()=>Q(()=>import("./BuilderApplicationSelect-DXzy4e_h.js"),__vite__mapDeps([18,1,2,16,19]),import.meta.url)}),l=X({loader:()=>Q(()=>import("./BuilderGraphSelect-C-LRsO8W.js"),__vite__mapDeps([15,1,2,16,17]),import.meta.url)}),c=X({loader:()=>Q(()=>import("./BuilderModelSelect-CdSo_sih.js"),__vite__mapDeps([20,1,2,16,21]),import.meta.url)}),s=t,a=J({componentId:q(s,"componentId"),fieldKey:q(s,"fieldKey")}),{isBindingMode:o,toggleBindingMode:g}=Qe({fieldViewModel:a}),m=J({componentId:q(s,"componentId"),fieldKey:"appInputs"}),p=U("selectorEl"),I=S(()=>{switch(s.resourceType){case"model":return c;case"graph":return l;case"application":return r;default:throw new Error(`Unexpected resourceType: ${s.resourceType}`)}}),b=S(()=>{switch(s.resourceType){case"graph":return"Edit knowledge graph";case"application":return"Edit agent";case"model":return"About models";default:return}}),u=S(()=>{var O,$;if(Array.isArray(f.value))return;const _=f.value;if(!_)return;const w=($=(O=p.value)==null?void 0:O.selectedData)==null?void 0:$.organization_id;if(w)switch(s.resourceType){case"graph":{const h=new URLSearchParams({graphId:_});return`https://app.writer.com/aistudio/organization/${w}/knowledge-graph?${h}`}case"application":return`https://app.writer.com/aistudio/organization/${w}/app/${_}`;case"model":return"https://dev.writer.com/home/models#model-overview";default:return}}),f=S({get(){if(s.enableMultiSelection){const _=a.value||"[]";try{return JSON.parse(_)}catch{return[]}}return a.value},set(_){a.value=s.enableMultiSelection?JSON.stringify(_):String(_)}});function y(_){s.resourceType!=="application"||!_||!_.inputs||typeof _.inputs!="object"||(m.value=JSON.stringify(_.inputs))}return(_,w)=>(i(),F(te,{"is-binding-button-shown":t.isBindingButtonShown,"is-binding-enabled":v(o),label:t.label,unit:t.unit,hint:t.hint,error:t.error,"data-automation-key":t.fieldKey,"onUpdate:isBindingEnabled":v(g)},{default:M(()=>[B("div",{class:"BuilderFieldsWriterResourceId","data-automation-key":t.fieldKey},[v(o)?(i(),F(Ae,{key:0,type:"state-template","component-id":t.componentId,"field-key":t.fieldKey,error:t.error,"default-value":""},null,8,["component-id","field-key","error"])):(i(),F(Fe(I.value),{key:1,ref_key:"selectorEl",ref:p,modelValue:f.value,"onUpdate:modelValue":w[0]||(w[0]=O=>f.value=O),"enable-multi-selection":t.enableMultiSelection,onSelectedData:y},null,40,["modelValue","enable-multi-selection"])),u.value?(i(),C("a",{key:2,class:"BuilderFieldsWriterResourceId__link",href:u.value,target:"_blank","data-writer-tooltip":b.value},[E(z,{name:"external-link"})],8,Do)):x("",!0)],8,Ao)]),_:1},8,["is-binding-button-shown","is-binding-enabled","label","unit","hint","error","data-automation-key","onUpdate:isBindingEnabled"]))}}),ke=K(Ro,[["__scopeId","data-v-59e28cc4"]]),Po=["data-automation-key"],Wo=W({__name:"BuilderFieldsComponentId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-Zki-pfO-.js").then(u=>u.bz),__vite__mapDeps([1,2]),import.meta.url)}),l=R(P.core),c=R(P.builderManager),s=t,a=J({componentId:q(s,"componentId"),fieldKey:q(s,"fieldKey")});function*o(){yield l.getComponentById("root"),yield*l.getComponentsNested("root")}const g=S(()=>{const u=[];for(const f of o()){const y=l.getComponentDefinition(f==null?void 0:f.type);if(!(y!=null&&y.events)||Object.keys(y.events).length===0)continue;const{name:_,previewText:w,possibleImageUrls:O}=Ne(l,f),$=O.value,h=f.id;u.push({value:h,label:w.value||_.value,detail:w.value?_.value:void 0,icon:$})}return u}),m=S({get:()=>a.value,set(u){a.value=String(u)}}),p=S(()=>{let u=m.value;for(;u;){const f=l.getComponentById(u);if(f.type==="page")return f.id;u=f.parentId}}),I=S(()=>l.getComponentById(m.value));function b(){!m.value||!I.value||(p.value&&(c.mode.value="ui",l.setActivePageId(p.value)),c.setSelection(m.value,null,"click"))}return(u,f)=>(i(),C("div",{class:"BuilderFieldsComponentId","data-automation-key":s.fieldKey},[E(v(r),{modelValue:m.value,"onUpdate:modelValue":f[0]||(f[0]=y=>m.value=y),options:g.value,"enable-search":""},null,8,["modelValue","options"]),m.value?(i(),F(H,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to the element",disabled:!I.value,onClick:b},{default:M(()=>[E(z,{name:"square-dashed-mouse-pointer"})]),_:1},8,["disabled"])):x("",!0)],8,Po))}}),Uo=K(Wo,[["__scopeId","data-v-fcce992f"]]),Ko=["data-automation-key"],jo=W({__name:"BuilderFieldsComponentEventType",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-Zki-pfO-.js").then(p=>p.bz),__vite__mapDeps([1,2]),import.meta.url)}),l=R(P.core),c=t,s=J({componentId:q(c,"componentId"),fieldKey:q(c,"fieldKey")}),a=S(()=>l.getComponentById(c.componentId)),o=S(()=>{var p;return l.getComponentDefinition((p=a.value)==null?void 0:p.type)}),g=S(()=>{var f,y;const p=(y=Object.entries(((f=o.value)==null?void 0:f.fields)??{}).find(([,_])=>_.type===D.ComponentId))==null?void 0:y.at(0);if(p===void 0)return[];const I=a.value.content[String(p)],b=l.getComponentById(I),u=l.getComponentDefinition(b==null?void 0:b.type);return u!=null&&u.events?Object.keys(u.events).map(_=>({value:_,label:_})):[]}),m=S({get:()=>s.value,set(p){s.value=String(p)}});return(p,I)=>(i(),C("div",{class:"BuilderFieldsComponentEventType","data-automation-key":c.fieldKey},[g.value.length?(i(),F(v(r),{key:0,modelValue:m.value,"onUpdate:modelValue":I[0]||(I[0]=b=>m.value=b),options:g.value,"hide-icons":""},null,8,["modelValue","options"])):(i(),F(ee,{key:1,modelValue:m.value,"onUpdate:modelValue":I[1]||(I[1]=b=>m.value=b)},null,8,["modelValue"]))],8,Ko))}});function Lo(t,r,l){const{getEvaluatedFields:c}=Ee(t,l);function s(p){return!!Te.exec(p)}const a=S(()=>{var p;return(p=r.value.at(-1))==null?void 0:p.componentId}),o=S(()=>{if(a.value!==void 0)return t.getComponentById(a.value)}),g=S(()=>{var p,I;return(p=o.value)!=null&&p.type?((I=t.getComponentDefinition(o.value.type))==null?void 0:I.fields)??{}:{}}),m=S(()=>c(r.value));return S(()=>Object.entries(g.value).reduce((p,[I,b])=>{var y;const u=((y=o.value.content)==null?void 0:y[I])??"";if(s(u))return p;const f=m.value[I].value;return p[I]=No(t,a.value,b,f),p},{}))}function No(t,r,l,c){let s=l.validator;if(s===void 0&&typeof l.options=="object"&&l.options!==null&&Object.keys(l.options).length>0?s=pt(Object.keys(l.options)):typeof s=="function"&&(s=s(t,r)),s===void 0)return;const a=vt(s);if(!(a(c)||a.errors===void 0))return Jo(a.errors)}function zo(t){var l;if(t.keyword==="format"&&Object.values(mt).includes(t.params.format))return ft[t.params.format].errorMessage;let r="";return t.instancePath&&(r+=`${t.instancePath} `),r+=t.message,Array.isArray((l=t.params)==null?void 0:l.allowedValues)&&(r+=`: ${t.params.allowedValues.join(", ")}`),r}function Jo(t){return t.map(zo).join(`
`)}const Go={key:0,class:"BuilderSettingsProperties"},Yo=["inert"],Ho=W({__name:"BuilderSettingsProperties",props:{isReadOnly:{type:Boolean}},setup(t){const r=R(P.core),l=R(P.builderManager),c=R(P.secretsManager),s=N(new Set),a=S(()=>{var e,n;return Ye((n=(e=l.firstSelectedItem)==null?void 0:e.value)==null?void 0:n.instancePath)}),o=S(()=>r.getComponentById(l.firstSelectedId.value)),g=S(()=>{var e;return r.getComponentDefinition((e=o.value)==null?void 0:e.type)}),{getEvaluatedFields:m}=Ee(r,c),p=S(()=>m(a.value)),I=S(()=>{var n;const e=Object.entries(((n=g.value)==null?void 0:n.fields)??{}).filter(([V,k])=>k.isArtifactField?!1:k.enabled===void 0?!0:k.enabled({evaluatedFields:p.value}));return Object.fromEntries(e)});function b(e){return e.type===D.Code||e.type===D.JSONInput||e.type===D.Object||e.control===Se.Textarea}const u=Lo(r,a,c),f=N(G.General),y=Object.freeze({[G.General]:"Configure",[G.Style]:"Style",[G.Tools]:"Tools"}),_=S(()=>w.value.map(e=>({label:y[e]??e,value:e}))),w=S(()=>[G.General,G.Style,G.Tools].filter(e=>{var n;return(n=O.value[e])==null?void 0:n.length})),O=S(()=>{const e={[G.General]:[],[G.Style]:[],[G.Tools]:[]};return Object.entries(I.value).forEach(([n,V])=>{const k=V.category||G.General;e[k]&&e[k].push([n,V])}),{[G.General]:$(e[G.General]),[G.Style]:$(e[G.Style]),[G.Tools]:$(e[G.Tools])}});function $(e){return e.map((n,V)=>[n,V]).sort(([n,V],[k,T])=>{const A=n[1].order??0;return(k[1].order??0)-A||V-T}).map(([n])=>n)}function h(e){s.value.add(e)}function d(e){s.value.delete(e)}return(e,n)=>v(l).isSingleSelectionActive?(i(),C("div",Go,[w.value.length>1?(i(),F(se,{key:0,modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=V=>f.value=V),variant:"bar",tabs:_.value},null,8,["modelValue","tabs"])):x("",!0),(i(!0),C(j,null,Z(w.value.length>1?[f.value]:w.value,V=>(i(),C("div",{key:V,inert:t.isReadOnly,class:"BuilderSettingsProperties__category"},[(i(!0),C(j,null,Z(O.value[V],([k,T])=>(i(),C("div",{key:k,class:"BuilderSettingsProperties__category__field"},[T.type===v(D).Boolean?(i(),F(un,{key:0,"field-key":k,"component-id":o.value.id,label:T.name??k,hint:T.desc,unit:T.type,error:v(u)[k]},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===v(D).WriterGraphId?(i(),F(ke,{key:1,"is-binding-button-shown":"","field-key":k,"component-id":o.value.id,label:T.name??k,hint:T.desc,unit:T.type,error:v(u)[k],"resource-type":"graph"},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===v(D).WriterGraphIds?(i(),F(ke,{key:2,"is-binding-button-shown":"","field-key":k,"component-id":o.value.id,label:T.name??k,hint:T.desc,unit:T.type,error:v(u)[k],"resource-type":"graph","enable-multi-selection":""},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===v(D).WriterAppId?(i(),F(ke,{key:3,"field-key":k,"component-id":o.value.id,label:T.name??k,hint:T.desc,unit:T.type,error:v(u)[k],"resource-type":"application"},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===v(D).WriterModelId?(i(),F(ke,{key:4,"field-key":k,"component-id":o.value.id,label:T.name??k,hint:T.desc,unit:T.type,error:v(u)[k],"resource-type":"model"},null,8,["field-key","component-id","label","hint","unit","error"])):(i(),F(te,{key:5,label:V==="Tools"?void 0:T.name??k,hint:T.desc,unit:T.type,error:v(u)[k],"is-expansible":b(T),onExpand:A=>h(k),onShrink:A=>d(k)},{default:M(()=>[T.type==v(D).Color?(i(),F(on,{key:0,"field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):x("",!0),T.type==v(D).Shadow?(i(),F(Gn,{key:1,"field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):x("",!0),T.type==v(D).KeyValue?(i(),F(kn,{key:2,"field-key":k,"component-id":o.value.id,"instance-path":a.value,error:v(u)[k]},null,8,["field-key","component-id","instance-path","error"])):x("",!0),T.type==v(D).Text||T.type==v(D).Number||T.type==v(D).Binding||T.type==v(D).IdKey?(i(),F(Ae,{key:3,type:T.type==v(D).Binding?"state":"template","field-key":k,"field-control":T.control,"component-id":o.value.id,"default-value":T.default,error:v(u)[k]},null,8,["type","field-key","field-control","component-id","default-value","error"])):x("",!0),T.type==v(D).BlueprintId?(i(),F(Oo,{key:4,"field-key":k,"component-id":o.value.id},null,8,["field-key","component-id"])):x("",!0),T.type==v(D).BlueprintKey?(i(),F(To,{key:5,"field-key":k,"component-id":o.value.id},null,8,["field-key","component-id"])):x("",!0),T.type==v(D).Handler?(i(),F(qo,{key:6,"field-key":k,"component-id":o.value.id},null,8,["field-key","component-id"])):x("",!0),T.type==v(D).Object?(i(),F(In,{key:7,"field-key":k,"component-id":o.value.id,"default-value":T.default,error:v(u)[k]},null,8,["field-key","component-id","default-value","error"])):x("",!0),T.type==v(D).JSONInput?(i(),F(Ke,{key:8,"field-key":k,"component-id":o.value.id,"is-expanded":s.value.has(k),"input-language":"json"},null,8,["field-key","component-id","is-expanded"])):x("",!0),T.type==v(D).Width?(i(),F(eo,{key:9,"field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):x("",!0),T.type==v(D).HAlign?(i(),F(Ue,{key:10,direction:"horizontal","field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):x("",!0),T.type==v(D).VAlign?(i(),F(Ue,{key:11,direction:"vertical","field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):x("",!0),T.type==v(D).Padding?(i(),F($n,{key:12,"field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):x("",!0),T.type==v(D).Tools&&o.value.type==="blueprints_writerchatreplywithtoolconfig"?(i(),F(wo,{key:13,"field-key":k,"component-id":o.value.id},null,8,["field-key","component-id"])):T.type==v(D).Tools?(i(),F(so,{key:14,"field-key":k,"component-id":o.value.id},null,8,["field-key","component-id"])):x("",!0),T.type==v(D).Code||T.type==v(D).Eval?(i(),F(Ke,{key:15,"field-key":k,"component-id":o.value.id,"is-expanded":s.value.has(k),"input-language":"python","single-line":T.type==v(D).Eval},null,8,["field-key","component-id","is-expanded","single-line"])):x("",!0),T.type==v(D).ComponentId?(i(),F(Uo,{key:16,"field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):x("",!0),T.type==v(D).ComponentEventType?(i(),F(jo,{key:17,"field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):x("",!0)]),_:2},1032,["label","hint","unit","error","is-expansible","onExpand","onShrink"]))]))),128))],8,Yo))),128))])):x("",!0)}}),Xo=K(Ho,[["__scopeId","data-v-d82ebb47"]]),Qo={},Zo={class:"WdsTitle"};function el(t,r){return i(),C("h2",Zo,[yt(t.$slots,"default",{},void 0,!0)])}const Ze=K(Qo,[["render",el],["__scopeId","data-v-3b68d589"]]),tl=["inert"],nl="Connect the result of this block to a dynamic variable you can use across this agent",ol=W({__name:"BuilderSettingsBinding",props:{isReadOnly:{type:Boolean}},setup(t){const r=R(P.core),l=R(P.builderManager),c=R(P.secretsManager),s=Ce(r,l),{getEvaluatedFields:a}=Ee(r,c),o=S(()=>{var b,u;return Ye((u=(b=l.firstSelectedItem)==null?void 0:b.value)==null?void 0:u.instancePath)}),g=S(()=>r.getComponentById(l.firstSelectedId.value)),m=S(()=>a(o.value)),p=S(()=>{const b=r.getComponentDefinition(g.value.type);return b?Object.entries(b.events).filter(([,y])=>y.bindable?y.enabled===void 0?!0:y.enabled({evaluatedFields:m.value}):!1).map(([y])=>y)[0]:void 0});function I(b){s.setBinding(l.firstSelectedId.value,b,p.value)}return me(p,()=>{var u;if(!p.value)return;const b=(u=g.value)==null?void 0:u.binding;b!=null&&b.stateRef&&p.value!==b.eventType&&I(b.stateRef)}),(b,u)=>v(l).isSingleSelectionActive?(i(),C("div",{key:0,inert:t.isReadOnly,class:"BuilderSettingsBinding"},[E(Ze,null,{default:M(()=>u[1]||(u[1]=[ae("Binding")])),_:1}),E(te,{class:"BuilderSettingsBinding__main",label:"Link Variable",hint:nl},{default:M(()=>{var f;return[E(ne,{type:"state",value:(f=g.value.binding)==null?void 0:f.stateRef,"component-id":v(l).firstSelectedId.value,onInput:u[0]||(u[0]=y=>I(y.target.value))},null,8,["value","component-id"])]}),_:1})],8,tl)):x("",!0)}}),ll=K(ol,[["__scopeId","data-v-f92e4a05"]]),al=["inert"],il={class:"main"},sl={class:"flexRow"},rl=["checked"],ul='Reference a state or context element that will evaluate to true or false. Reference the element directly, i.e. use "my_var" instead of "@{my_var}".',dl=W({__name:"BuilderSettingsVisibility",props:{isReadOnly:{type:Boolean}},setup(t){const r=[{label:"Yes",value:"yes"},{label:"No",value:"no"},{label:"Custom",value:"custom"}],l=S({get(){const g=o.value.visible;return(g==null?void 0:g.expression)==="custom"?"custom":g===void 0||g.expression===!0?"yes":"no"},set(g){var m,p;g==="custom"?a(o.value.id,"custom",(m=o.value.visible)==null?void 0:m.binding,(p=o.value.visible)==null?void 0:p.reversed):a(o.value.id,g==="yes")}}),c=R(P.core),s=R(P.builderManager),{setVisibleValue:a}=Ce(c,s),o=S(()=>c.getComponentById(s.firstSelectedId.value));return(g,m)=>v(s).isSingleSelectionActive?(i(),C("div",{key:0,inert:t.isReadOnly,class:"BuilderSettingsVisibility"},[E(Ze,null,{default:M(()=>m[3]||(m[3]=[ae("Visibility")])),_:1}),B("div",il,[E(se,{modelValue:l.value,"onUpdate:modelValue":m[0]||(m[0]=p=>l.value=p),tabs:r},null,8,["modelValue"]),typeof o.value.visible<"u"&&o.value.visible.expression==="custom"?(i(),F(te,{key:0,hint:ul},{default:M(()=>[E(ne,{value:o.value.visible.binding,type:"state",placeholder:"my_visibility_state_value",onInput:m[1]||(m[1]=p=>v(a)(o.value.id,"custom",p.target.value,o.value.visible.reversed))},null,8,["value"]),B("div",sl,[B("input",{type:"checkbox",checked:o.value.visible.reversed,onInput:m[2]||(m[2]=p=>v(a)(o.value.id,"custom",o.value.visible.binding,p.target.checked))},null,40,rl),m[4]||(m[4]=B("span",null,"Reverse",-1))])]),_:1})):x("",!0)])],8,al)):x("",!0)}}),cl=K(dl,[["__scopeId","data-v-c4316bf1"]]),je={apiTriggerDetails:X({loader:()=>Q(()=>import("./BuilderSettingsArtifactAPITriggerDetails-3O6jKBXD.js"),__vite__mapDeps([22,1,2,7,8,9,10,3,4,5,6,11,23]),import.meta.url)})},pl={class:"BuilderSettingsMain"},vl={key:0,class:"BuilderSettingsMain__description"},ml={key:1,class:"BuilderSettingsMain__warning cmc-warning"},fl={class:"BuilderSettingsMain__section"},yl={class:"BuilderSettingsMain__componentId"},gl=W({__name:"BuilderSettingsMain",setup(t){const r=X({loader:()=>Q(()=>import("./BuilderSettingsHandlers-CBtEQFSo.js"),__vite__mapDeps([24,1,2,25,4,5,26,27,28,3,6,7,8,9,10,11,29]),import.meta.url)}),l=R(P.core),c=R(P.builderManager),s=S(()=>l.getComponentById(c.firstSelectedId.value)),a=S(()=>s.value.isCodeManaged),o=S(()=>c.isSingleSelectionActive.value?!g.value.toolkit||g.value.toolkit=="core":!1),g=S(()=>{const{type:y}=s.value;return l.getComponentDefinition(y)});me(s,y=>{y||c.setSelection(null)});const{copy:m,copied:p}=He();function I(){m(c.firstSelectedId.value)}const b=S(()=>{var y;return Object.values(((y=g.value)==null?void 0:y.events)??{}).some(_=>_.bindable)}),u=S(()=>{var y;return(((y=g.value)==null?void 0:y.settingsArtifacts)??[]).filter(_=>_.position!=="bottom")}),f=S(()=>{var y;return(((y=g.value)==null?void 0:y.settingsArtifacts)??[]).filter(_=>_.position==="bottom")});return(y,_)=>(i(),C("div",pl,[g.value.description?(i(),C("p",vl,Y(g.value.description),1)):x("",!0),a.value?(i(),C("p",ml,[B("span",null,[E(z,{name:"triangle-alert"})]),_[0]||(_[0]=B("span",null," This component is instantiated in code. All settings in this panel are read-only and cannot be edited. ",-1))])):x("",!0),B("div",fl,[E(Xo,{"is-read-only":a.value},null,8,["is-read-only"]),(i(!0),C(j,null,Z(u.value,w=>(i(),F(Fe(v(je)[w.key]),{key:w.key,inert:a.value},null,8,["inert"]))),128)),o.value?(i(),C(j,{key:0},[b.value?(i(),F(ll,{key:0,"is-read-only":a.value},null,8,["is-read-only"])):x("",!0),E(v(r),{"is-read-only":a.value},null,8,["is-read-only"]),E(cl,{"is-read-only":a.value},null,8,["is-read-only"])],64)):x("",!0),(i(!0),C(j,null,Z(f.value,w=>(i(),F(Fe(v(je)[w.key]),{key:w.key,inert:a.value},null,8,["inert"]))),128))]),_[1]||(_[1]=B("div",{class:"BuilderSettingsMain__spacer"},null,-1)),B("div",yl,[B("p",{class:"BuilderSettingsMain__componentId__text",onClick:I},Y(v(c).firstSelectedId.value),1),E(H,{class:"BuilderSettingsMain__componentId__btn",size:"smallIcon",variant:"tertiary","data-writer-tooltip":v(p)?"Copied!":"Copy block id","data-automation-action":"copy-component-id",onClick:I},{default:M(()=>[E(z,{name:v(p)?"check":"clipboard"},null,8,["name"])]),_:1},8,["data-writer-tooltip"])])]))}}),_l=K(gl,[["__scopeId","data-v-aa8c395b"]]),hl=["data-writer-id"],bl=W({__name:"BuilderSettingsActions",setup(t){const r=R(P.core),l=R(P.builderManager),c=Me(r),{dropdownOptions:s,handleDropdownSelect:a}=Xe(r,l,c);function o(){a(Ve.Delete)}const g=S(()=>{const p=s.value.find(I=>I.value===Ve.Delete);return p?p.disabled:!0}),m=l.firstSelectedId;return(p,I)=>(i(),C("div",{class:"BuilderSettingsActions","data-writer-id":v(m)},[v(l).selectionStatus.value===v(pe).Multiple?(i(),F(H,{key:0,class:"BuilderSettingsActions__btn",variant:"neutral",size:"smallIcon","data-automation-action":"clear-selection","data-writer-tooltip":"Clear selection","data-writer-tooltip-placement":"left",onClick:I[0]||(I[0]=b=>v(l).setSelection(null))},{default:M(()=>[E(z,{name:"x"})]),_:1})):x("",!0),E(H,{class:"BuilderSettingsActions__btn BuilderSettingsActions__btn--delete",variant:"neutral",size:"smallIcon","data-automation-action":"delete","data-writer-tooltip":"Delete (Del)","data-writer-tooltip-placement":"left",disabled:g.value,onClick:o},{default:M(()=>[E(z,{name:"trash-2"})]),_:1},8,["disabled"])],8,hl))}}),kl=K(bl,[["__scopeId","data-v-08efde31"]]),Sl=["id"],Il=["value"],Bl=W({__name:"BuilderSettingsAddComponentModal",props:ue({selectedId:{type:String,required:!0}},{isOpen:{type:Boolean,default:!1},isOpenModifiers:{}}),emits:["update:isOpen"],setup(t){const r=R(P.core),l=R(P.builderManager),c=gt(),s=Me(r),{createAndInsertComponent:a}=Ce(r,l,s),o=t,g=S(()=>r.getContainableTypes(o.selectedId).reduce((b,u)=>(b[u]=r.getComponentDefinition(u),b),{})),m=we(t,"isOpen");function p(){m.value=!1}function I(b){const u=b.target.value;if(!u)return;const f=Object.entries(g.value).find(([_,w])=>w.name==u);if(!f)return;const y=f[0];a(y,o.selectedId),p()}return(b,u)=>m.value?(i(),F(Oe,{key:0,title:"Add child component","display-close-button":"",onClose:p},{default:M(()=>[E(ee,{type:"text",list:v(c),placeholder:"Component...",onChange:I},null,8,["list"]),B("datalist",{id:v(c)},[(i(!0),C(j,null,Z(g.value,(f,y)=>(i(),C("option",{key:y,value:f.name},Y(f.name),9,Il))),128))],8,Sl)]),_:1})):x("",!0)}});function Cl(t,r=500){const l=N(0);let c=null;function s(){t.value&&(l.value=t.value.clientHeight)}return ie(()=>{s(),c=setInterval(s,r)}),Ge(()=>{c&&clearInterval(c)}),l}const wl={key:0,class:"BuilderSettings__collapser"},El={key:1,class:"BuilderSettings__titleBar"},xl={class:"BuilderSettings__titleBar__title"},$l={class:"BuilderSettings__titleBar__actions"},Tl=["data-writer-tooltip"],Fl=W({__name:"BuilderSettings",setup(t){_t(d=>({"02b76174":v(l).getMode()=="blueprints"?"82px":"20px","2a3f1d8c":a.value}));const r=R(P.core),l=R(P.builderManager),c=U("root"),s=Cl(c,1e3),a=S(()=>{if(!s.value)return"unset";const d=s.value-42;return d>0?`${d}px`:"unset"}),{component:o,definition:g}=ht(r,l.firstSelectedId),m=bt(o,g),p=S(()=>{var d;return o.value&&(kt(r,o.value)||((d=g.value)==null?void 0:d.name))||"Unknown"}),{copy:I,copied:b}=He();function u(){I(m.value)}const f=Me(r),y=N(!1),{dropdownOptions:_,handleDropdownSelect:w}=Xe(r,l,f,{[Ve.Add]:()=>y.value=!0}),O=S(()=>l.selectionStatus.value===pe.Multiple?!0:l.isSettingsBarCollapsed.value),$=S(()=>l.selection.value.length);function h(){l.isSettingsBarCollapsed.value=!l.isSettingsBarCollapsed.value}return me(o,d=>{d||l.setSelection(null)}),(d,e)=>v(l).selectionStatus.value!==v(pe).None?(i(),C("div",{key:0,ref_key:"root",ref:c,class:ve(["BuilderSettings",{"BuilderSettings--collapsed":O.value}])},[v(l).isSingleSelectionActive.value?(i(),C("div",wl,[O.value?(i(),F(H,{key:0,class:"BuilderSettings__collapser__btn",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Expand settings","data-automation-action":"expand-settings",onClick:h},{default:M(()=>[E(z,{name:"settings"})]),_:1})):(i(),F(H,{key:1,class:"BuilderSettings__collapser__btn",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Collapse settings","data-automation-action":"collapse-settings",onClick:h},{default:M(()=>[E(z,{name:"arrow-right-to-line"})]),_:1}))])):x("",!0),v(l).isSingleSelectionActive?(i(),C("div",El,[B("p",xl,Y(p.value),1),B("div",$l,[v(m)?(i(),F(H,{key:0,size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"bottom","data-writer-tooltip":v(b)?"Copied!":"Copy result variable",onClick:oe(u,["prevent"])},{default:M(()=>[E(z,{name:"at-sign"})]),_:1},8,["data-writer-tooltip"])):x("",!0),E(St,{class:"BuilderSettings__titleBar__actions__more","data-automation-action":"settings-actions-dropdown",options:v(_),"trigger-custom-size":"32px","trigger-icon":"ellipsis-vertical",onSelect:v(w)},null,8,["options","onSelect"])])])):x("",!0),v(l).selectionStatus.value===v(pe).Multiple?(i(),C("div",{key:2,class:"BuilderSettings__selectionCount","data-writer-tooltip-placement":"left","data-writer-tooltip":`${$.value} components selected`},[B("p",null,Y($.value),1)],8,Tl)):x("",!0),O.value&&v(l).selectionStatus.value===v(pe).Multiple?(i(),F(kl,{key:3,class:"BuilderSettings__actions"})):x("",!0),E(_l,{class:"BuilderSettings__main",inert:O.value},null,8,["inert"]),v(l).isSingleSelectionActive.value?(i(),F(Bl,{key:4,"is-open":y.value,"onUpdate:isOpen":e[0]||(e[0]=n=>y.value=n),"selected-id":v(l).firstSelectedId.value},null,8,["is-open","selected-id"])):x("",!0)],2)):x("",!0)}}),Vl=K(Fl,[["__scopeId","data-v-e45ad79c"]]),Pl=Object.freeze(Object.defineProperty({__proto__:null,default:Vl},Symbol.toStringTag,{value:"Module"}));export{Ke as B,Ze as W,Pl as a,wt as u};
