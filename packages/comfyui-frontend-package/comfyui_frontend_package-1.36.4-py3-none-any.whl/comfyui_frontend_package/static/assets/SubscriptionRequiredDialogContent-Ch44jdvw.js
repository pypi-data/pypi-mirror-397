var W=Object.defineProperty;var a=(f,l)=>W(f,"name",{value:l,configurable:!0});import{w as X,s as $,q as G}from"./vendor-primevue-RJTR6wkG.js";import{t as o,a4 as Q,o as M,a3 as J,X as Z,c as I,d as U,B as ee,b as te}from"./index-xLwXl4ov.js";import{_ as se,a as oe}from"./GraphView-BPbcCdVW.js";import{bq as D,E as R,p as ne,d as p,r as P,c as m,e,A as c,br as t,q as O,s as N,t as s,F as re,z as ae,u as j,l as ie,h as le,x as ce,w as F,d8 as de}from"./vendor-other-yzRpIrj2.js";import{u as ue}from"./vendor-vue-ByIfjd1d.js";import"./vendor-xterm-CWYFmgbN.js";import"./vendor-three-b7sMVVQK.js";import"./vendor-tiptap-DcddbIvp.js";import"./UserAvatar.vue_vue_type_script_setup_true_lang-D6k2s9ze.js";import"./nodeFilterUtil-D49mCu4H.js";import"./index-wE4B8JeX.js";import"./LazyImage.vue_vue_type_script_setup_true_lang-AaN0rnip.js";import"./keybindingService-C7gB1sJF.js";import"./serverConfigStore-CqEQuh1m.js";import"./WidgetInputNumber.vue_vue_type_script_setup_true_lang-Bk7jJg2H.js";import"./widgetPropFilter-CygYoMQt.js";import"./WidgetLayoutField.vue_vue_type_script_setup_true_lang-C1YhXoEw.js";import"./WidgetWithControl.vue_vue_type_script_setup_true_lang-DKOLlbKi.js";const pe=D({__name:"CloudBadge",props:{displayMode:{default:"full"},reverseOrder:{type:Boolean,default:!1},noPadding:{type:Boolean,default:!1},backgroundColor:{default:"var(--comfy-menu-bg)"}},setup(f){const l=R(()=>({label:o("g.beta"),text:"Comfy Cloud"}));return(x,y)=>(p(),ne(se,{badge:l.value,"display-mode":x.displayMode,"reverse-order":x.reverseOrder,"no-padding":x.noPadding,"background-color":x.backgroundColor},null,8,["badge","display-mode","reverse-order","no-padding","background-color"]))}}),me=""+new URL("images/cloud-subscription.webm",import.meta.url).href,fe=20,xe={class:"flex flex-col gap-8"},be={class:"flex justify-center"},ge={class:"flex items-center gap-2"},_e={key:0,class:"bg-primary-background text-white text-[11px] px-1 py-0.5 rounded-full flex items-center font-bold"},ye={class:"flex flex-col xl:flex-row items-stretch gap-6"},ve={class:"p-8 pb-0 flex flex-col gap-8"},he={class:"flex flex-row items-center gap-2 justify-between"},we={class:"font-inter text-base font-bold leading-normal text-base-foreground"},ke={key:0,class:"rounded-full bg-base-foreground px-1.5 text-[11px] font-bold uppercase text-base-background h-5 tracking-tight flex items-center"},$e={class:"flex flex-col"},Ce={class:"flex flex-col gap-2"},Ee={class:"flex flex-row items-baseline gap-2"},Pe={class:"font-inter text-[32px] font-semibold leading-normal text-base-foreground"},Se={class:"font-inter text-xl leading-normal text-base-foreground"},Te={class:"flex items-center gap-2"},Le={class:"text-sm text-muted-foreground"},Ae={class:"flex flex-col gap-4 pb-0 flex-1"},De={class:"flex flex-row items-center justify-between"},Re={class:"font-inter text-sm font-normal leading-normal text-foreground"},Be={class:"flex flex-row items-center gap-1"},Ie={class:"font-inter text-sm font-bold leading-normal text-base-foreground"},Oe={class:"flex flex-row items-center justify-between"},Ne={class:"text-sm font-normal text-foreground"},je={class:"font-inter text-sm font-bold leading-normal text-base-foreground"},Fe={class:"flex flex-row items-center justify-between"},Me={class:"text-sm font-normal text-foreground"},Ue={class:"flex flex-row items-center justify-between"},Ve={class:"text-sm font-normal text-foreground"},qe={class:"flex flex-row items-center justify-between"},ze={class:"text-sm font-normal text-foreground"},He={key:0,class:"pi pi-check text-xs text-success-foreground"},Ke={key:1,class:"pi pi-times text-xs text-foreground"},Ye={class:"flex flex-col gap-2"},We={class:"flex flex-row items-start justify-between"},Xe={class:"flex flex-col gap-2"},Ge={class:"text-sm font-normal text-foreground"},Qe={class:"flex flex-row items-center gap-2 group pt-2"},Je={class:"font-inter text-sm font-bold leading-normal text-base-foreground"},Ze={class:"flex flex-col p-8"},et={class:"flex flex-col gap-2"},tt={class:"text-sm text-base-foreground"},st={href:"https://cloud.comfy.org/?template=video_wan2_2_14B_fun_camera",target:"_blank",rel:"noopener noreferrer",class:"text-sm text-azure-600 hover:text-azure-400 underline"},ot=D({__name:"PricingTable",setup(f){const l={standard:{monthly:20,yearly:16,credits:4200,videoEstimate:164},creator:{monthly:35,yearly:28,credits:7400,videoEstimate:288},pro:{monthly:100,yearly:80,credits:21100,videoEstimate:821}},x=[{label:o("subscription.yearly"),value:"yearly"},{label:o("subscription.monthly"),value:"monthly"}],y={STANDARD:"standard",CREATOR:"creator",PRO:"pro",FOUNDERS_EDITION:"standard"},S=[{id:"STANDARD",key:"standard",name:o("subscription.tiers.standard.name"),pricing:l.standard,maxDuration:o("subscription.maxDuration.standard"),customLoRAs:!1,isPopular:!1},{id:"CREATOR",key:"creator",name:o("subscription.tiers.creator.name"),pricing:l.creator,maxDuration:o("subscription.maxDuration.creator"),customLoRAs:!0,isPopular:!0},{id:"PRO",key:"pro",name:o("subscription.tiers.pro.name"),pricing:l.pro,maxDuration:o("subscription.maxDuration.pro"),customLoRAs:!0,isPopular:!1}],{n:C}=ue(),{getAuthHeader:B}=Q(),{isActiveSubscription:T,subscriptionTier:g}=M(),{accessBillingPortal:v,reportError:h}=J(),{wrapWithErrorHandlingAsync:b}=Z(),L=P(!1),w=P(null),E=P(),d=P("yearly"),A=R(()=>g.value?y[g.value]:null),k=a(r=>A.value===r,"isCurrentPlan"),i=a(r=>{E.value.toggle(r)},"togglePopover"),_=a(r=>k(r.key)?o("subscription.currentPlan"):T.value?o("subscription.changeTo",{plan:r.name}):o("subscription.subscribeTo",{plan:r.name}),"getButtonLabel"),V=a(r=>k(r.key)?"secondary":r.key==="creator"?"primary":"secondary","getButtonSeverity"),q=a(r=>r.key==="creator"?"font-inter text-sm font-bold leading-normal text-base-background":"font-inter text-sm font-bold leading-normal text-primary-foreground","getButtonTextClass"),z=a(r=>r.pricing[d.value],"getPrice"),H=a(r=>r.pricing.yearly*12,"getAnnualTotal"),K=a(r=>r.pricing.credits*(d.value==="yearly"?12:1),"getCreditsDisplay"),Y=b(async r=>{},h);return(r,u)=>(p(),m("div",xe,[e("div",be,[c(t(X),{modelValue:d.value,"onUpdate:modelValue":u[0]||(u[0]=n=>d.value=n),options:x,"option-label":"label","option-value":"value","allow-empty":!1,unstyled:"",pt:{root:{class:"flex gap-1 bg-secondary-background rounded-lg p-1.5"},pcToggleButton:{root:a(({context:n})=>({class:["w-36  h-8 rounded-md transition-colors cursor-pointer border-none outline-none ring-0 text-sm font-medium flex items-center justify-center",n.active?"bg-base-foreground text-base-background":"bg-transparent text-muted-foreground hover:bg-secondary-background-hover"]}),"root"),label:{class:"flex items-center gap-2 "}}}},{option:O(({option:n})=>[e("div",ge,[e("span",null,s(n.label),1),n.value==="yearly"?(p(),m("div",_e," -20% ")):N("",!0)])]),_:1},8,["modelValue","pt"])]),e("div",ye,[(p(),m(re,null,ae(S,n=>e("div",{key:n.id,class:j(t(I)("flex-1 flex flex-col rounded-2xl border border-border-default bg-base-background shadow-[0_0_12px_rgba(0,0,0,0.1)]",n.isPopular?"border-muted-foreground":""))},[e("div",ve,[e("div",he,[e("span",we,s(n.name),1),n.isPopular?(p(),m("div",ke,s(t(o)("subscription.mostPopular")),1)):N("",!0)]),e("div",$e,[e("div",Ce,[e("div",Ee,[e("span",Pe,[ie(e("span",{class:"line-through text-2xl text-muted-foreground"}," $"+s(n.pricing.monthly),513),[[ce,d.value==="yearly"]]),le(" $"+s(z(n)),1)]),e("span",Se,s(t(o)("subscription.usdPerMonth")),1)]),e("div",Te,[e("span",Le,s(d.value==="yearly"?t(o)("subscription.billedYearly",{total:`$${H(n)}`}):t(o)("subscription.billedMonthly")),1)])])]),e("div",Ae,[e("div",De,[e("span",Re,s(d.value==="yearly"?t(o)("subscription.yearlyCreditsLabel"):t(o)("subscription.monthlyCreditsLabel")),1),e("div",Be,[u[1]||(u[1]=e("i",{class:"icon-[lucide--component] text-amber-400 text-sm"},null,-1)),e("span",Ie,s(t(C)(K(n))),1)])]),e("div",Oe,[e("span",Ne,s(t(o)("subscription.maxDurationLabel")),1),e("span",je,s(n.maxDuration),1)]),e("div",Fe,[e("span",Me,s(t(o)("subscription.gpuLabel")),1),u[2]||(u[2]=e("i",{class:"pi pi-check text-xs text-success-foreground"},null,-1))]),e("div",Ue,[e("span",Ve,s(t(o)("subscription.addCreditsLabel")),1),u[3]||(u[3]=e("i",{class:"pi pi-check text-xs text-success-foreground"},null,-1))]),e("div",qe,[e("span",ze,s(t(o)("subscription.customLoRAsLabel")),1),n.customLoRAs?(p(),m("i",He)):(p(),m("i",Ke))]),e("div",Ye,[e("div",We,[e("div",Xe,[e("span",Ge,s(t(o)("subscription.videoEstimateLabel")),1),e("div",Qe,[u[4]||(u[4]=e("i",{class:"pi pi-question-circle text-xs text-muted-foreground group-hover:text-base-foreground"},null,-1)),e("span",{class:"text-sm font-normal text-muted-foreground cursor-pointer group-hover:text-base-foreground",onClick:i},s(t(o)("subscription.videoEstimateHelp")),1)])]),e("span",Je,s(t(C)(n.pricing.videoEstimate)),1)])])])]),e("div",Ze,[c(t($),{label:_(n),severity:V(n),disabled:L.value||k(n.key),loading:w.value===n.key,class:j(t(I)("h-10 w-full",n.key==="creator"?"bg-base-foreground border-transparent hover:bg-inverted-background-hover":"bg-secondary-background border-transparent hover:bg-secondary-background-hover focus:bg-secondary-background-selected")),pt:{label:{class:q(n)}},onClick:a(()=>t(Y)(n.key),"onClick")},null,8,["label","severity","disabled","loading","class","pt","onClick"])])],2)),64))]),c(t(G),{ref_key:"popover",ref:E,"append-to":"body","auto-z-index":!0,"base-z-index":1e3,dismissable:!0,"close-on-escape":!0,unstyled:"",pt:{root:{class:"rounded-lg border border-interface-stroke bg-interface-panel-surface shadow-lg p-4 max-w-xs"}}},{default:O(()=>[e("div",et,[e("p",tt,s(t(o)("subscription.videoEstimateExplanation")),1),e("a",st,s(t(o)("subscription.videoEstimateTryTemplate")),1)])]),_:1},512)]))}}),nt={},rt={class:"flex flex-col items-start gap-0 self-stretch"},at={class:"flex items-center gap-2 py-2"},it={class:"text-sm text-text-primary"},lt={class:"flex items-center gap-2 py-2"},ct={class:"text-sm text-text-primary"};function dt(f,l){return p(),m("div",rt,[e("div",at,[l[0]||(l[0]=e("i",{class:"pi pi-check text-xs text-text-primary"},null,-1)),e("span",it,s(f.$t("subscription.benefits.benefit1")),1)]),e("div",lt,[l[1]||(l[1]=e("i",{class:"pi pi-check text-xs text-text-primary"},null,-1)),e("span",ct,s(f.$t("subscription.benefits.benefit2")),1)])])}a(dt,"_sfc_render");const ut=U(nt,[["render",dt]]),pt={key:0,class:"relative flex flex-col p-4 pt-8 md:p-16 !overflow-y-auto h-full gap-8"},mt={class:"text-center"},ft={class:"text-xl lg:text-2xl text-muted-foreground m-0"},xt={class:"flex flex-col items-center gap-2"},bt={class:"text-sm text-text-secondary m-0"},gt={class:"flex items-center gap-1.5"},_t={class:"text-sm text-text-secondary"},yt={key:1,class:"legacy-dialog relative grid h-full grid-cols-5"},vt={class:"col-span-3 flex flex-col justify-between p-8"},ht={class:"flex flex-col gap-6"},wt={class:"inline-flex items-center gap-2"},kt={class:"text-sm text-text-primary"},$t={class:"flex items-baseline gap-2"},Ct={class:"text-4xl font-bold"},Et={class:"text-xl"},Pt={class:"flex flex-col pt-8"},St=3e3,Tt=3,Lt=D({__name:"SubscriptionRequiredDialogContent",props:{onClose:{type:Function}},emits:["close"],setup(f,{emit:l}){const x=f,y=l,{fetchStatus:S,isActiveSubscription:C}=M(),B=new Intl.NumberFormat(navigator.language||"en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(fe),T=ee(),g=R(()=>te);let v=null,h=0;const b=a(()=>{v&&(clearInterval(v),v=null)},"stopPolling"),L=a(()=>{b(),h=0;const i=a(async()=>{try{await S(),h++,h>=Tt&&b()}catch(_){console.error("[SubscriptionDialog] Failed to poll subscription status",_),b()}},"poll");i(),v=window.setInterval(()=>{i()},St)},"startPolling"),w=a(()=>{g.value&&L()},"handleWindowFocus");F(g,i=>{i?window.addEventListener("focus",w):(window.removeEventListener("focus",w),b())},{immediate:!0}),F(()=>C.value,i=>{i&&g.value&&y("close",!0)});const E=a(()=>{y("close",!0)},"handleSubscribed"),d=a(()=>{b(),x.onClose()},"handleClose"),A=a(async()=>{await T.execute("Comfy.ContactSupport")},"handleContactUs"),k=a(()=>{window.open("https://www.comfy.org/cloud/enterprise","_blank")},"handleViewEnterprise");return de(()=>{b(),window.removeEventListener("focus",w)}),(i,_)=>g.value?(p(),m("div",pt,[c(t($),{pt:{icon:{class:"text-xl"}},icon:"pi pi-times",text:"",rounded:"",class:"shrink-0 text-text-secondary hover:bg-white/10 absolute right-2.5 top-2.5","aria-label":i.$t("g.close"),onClick:d},null,8,["aria-label"]),e("div",mt,[e("h2",ft,s(i.$t("subscription.description")),1)]),c(ot,{class:"flex-1"}),e("div",xt,[e("p",bt,s(i.$t("subscription.haveQuestions")),1),e("div",gt,[c(t($),{label:i.$t("subscription.contactUs"),text:"",severity:"secondary",icon:"pi pi-comments","icon-pos":"right",class:"h-6 p-1 text-sm text-text-secondary hover:text-base-foreground",onClick:A},null,8,["label"]),e("span",_t,s(i.$t("g.or")),1),c(t($),{label:i.$t("subscription.viewEnterprise"),text:"",severity:"secondary",icon:"pi pi-external-link","icon-pos":"right",class:"h-6 p-1 text-sm text-text-secondary hover:text-base-foreground",onClick:k},null,8,["label"])])])])):(p(),m("div",yt,[c(t($),{icon:"pi pi-times",text:"",rounded:"",class:"absolute top-2.5 right-2.5 z-10 h-8 w-8 p-0 text-white hover:bg-white/20","aria-label":i.$t("g.close"),onClick:d},null,8,["aria-label"]),_[0]||(_[0]=e("div",{class:"relative col-span-2 flex items-center justify-center overflow-hidden rounded-sm"},[e("video",{autoplay:"",loop:"",muted:"",playsinline:"",class:"h-full min-w-[125%] object-cover p-0",style:{"margin-left":"-20%"}},[e("source",{src:me,type:"video/webm"})])],-1)),e("div",vt,[e("div",null,[e("div",ht,[e("div",wt,[e("div",kt,s(i.$t("subscription.required.title")),1),c(pe,{"reverse-order":"","no-padding":"","background-color":"var(--p-dialog-background)","use-subscription":""})]),e("div",$t,[e("span",Ct,s(t(B)),1),e("span",Et,s(i.$t("subscription.perMonth")),1)])]),c(ut,{class:"mt-6 text-muted"})]),e("div",Pt,[c(oe,{class:"py-2 px-4 rounded-lg",pt:{root:{style:"background: var(--color-accent-blue, #0B8CE9);"},label:{class:"font-inter font-[700] text-sm"}},onSubscribed:E})])])]))}}),Gt=U(Lt,[["__scopeId","data-v-ac4a858b"]]);export{Gt as default};
//# sourceMappingURL=SubscriptionRequiredDialogContent-Ch44jdvw.js.map
