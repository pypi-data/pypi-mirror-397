{"version":3,"file":"NumberControlPopover-B5ORl5yy.js","sources":["../../src/renderer/extensions/vueNodes/widgets/components/NumberControlPopover.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport Popover from 'primevue/popover'\nimport ToggleSwitch from 'primevue/toggleswitch'\nimport { computed, ref } from 'vue'\n\nimport { useSettingStore } from '@/platform/settings/settingStore'\nimport { useDialogService } from '@/services/dialogService'\n\nimport { NumberControlMode } from '../composables/useStepperControl'\n\ntype ControlOption = {\n  description: string\n  mode: NumberControlMode\n  icon?: string\n  text?: string\n  title: string\n}\n\nconst popover = ref()\nconst settingStore = useSettingStore()\nconst dialogService = useDialogService()\n\nconst toggle = (event: Event) => {\n  popover.value.toggle(event)\n}\ndefineExpose({ toggle })\n\nconst ENABLE_LINK_TO_GLOBAL = false\n\nconst controlOptions: ControlOption[] = [\n  ...(ENABLE_LINK_TO_GLOBAL\n    ? ([\n        {\n          mode: NumberControlMode.LINK_TO_GLOBAL,\n          icon: 'pi pi-link',\n          title: 'linkToGlobal',\n          description: 'linkToGlobalDesc'\n        } satisfies ControlOption\n      ] as ControlOption[])\n    : []),\n  {\n    mode: NumberControlMode.RANDOMIZE,\n    icon: 'icon-[lucide--shuffle]',\n    title: 'randomize',\n    description: 'randomizeDesc'\n  },\n  {\n    mode: NumberControlMode.INCREMENT,\n    text: '+1',\n    title: 'increment',\n    description: 'incrementDesc'\n  },\n  {\n    mode: NumberControlMode.DECREMENT,\n    text: '-1',\n    title: 'decrement',\n    description: 'decrementDesc'\n  }\n]\n\nconst widgetControlMode = computed(() =>\n  settingStore.get('Comfy.WidgetControlMode')\n)\n\nconst props = defineProps<{\n  controlMode: NumberControlMode\n}>()\n\nconst emit = defineEmits<{\n  'update:controlMode': [mode: NumberControlMode]\n}>()\n\nconst handleToggle = (mode: NumberControlMode) => {\n  if (props.controlMode === mode) return\n  emit('update:controlMode', mode)\n}\n\nconst isActive = (mode: NumberControlMode) => {\n  return props.controlMode === mode\n}\n\nconst handleEditSettings = () => {\n  popover.value.hide()\n  dialogService.showSettingsDialog()\n}\n</script>\n\n<template>\n  <Popover\n    ref=\"popover\"\n    class=\"bg-interface-panel-surface border border-interface-stroke rounded-lg\"\n  >\n    <div class=\"w-113 max-w-md p-4 space-y-4\">\n      <div class=\"text-sm text-muted-foreground leading-tight\">\n        {{ $t('widgets.numberControl.header.prefix') }}\n        <span class=\"text-base-foreground font-medium\">\n          {{\n            widgetControlMode === 'before'\n              ? $t('widgets.numberControl.header.before')\n              : $t('widgets.numberControl.header.after')\n          }}\n        </span>\n        {{ $t('widgets.numberControl.header.postfix') }}\n      </div>\n\n      <div class=\"space-y-2\">\n        <div\n          v-for=\"option in controlOptions\"\n          :key=\"option.mode\"\n          class=\"flex items-center justify-between py-2 gap-7\"\n        >\n          <div class=\"flex items-center gap-2 flex-1 min-w-0\">\n            <div\n              class=\"flex items-center justify-center w-8 h-8 rounded-lg flex-shrink-0 bg-secondary-background border border-border-subtle\"\n            >\n              <i\n                v-if=\"option.icon\"\n                :class=\"option.icon\"\n                class=\"text-base text-base-foreground\"\n              />\n              <span\n                v-if=\"option.text\"\n                class=\"text-xs font-normal text-base-foreground\"\n              >\n                {{ option.text }}\n              </span>\n            </div>\n\n            <div class=\"flex flex-col gap-0.5 min-w-0 flex-1\">\n              <div\n                class=\"text-sm font-normal text-base-foreground leading-tight\"\n              >\n                <span v-if=\"option.mode === NumberControlMode.LINK_TO_GLOBAL\">\n                  {{ $t('widgets.numberControl.linkToGlobal') }}\n                  <em>{{ $t('widgets.numberControl.linkToGlobalSeed') }}</em>\n                </span>\n                <span v-else>\n                  {{ $t(`widgets.numberControl.${option.title}`) }}\n                </span>\n              </div>\n              <div\n                class=\"text-sm font-normal text-muted-foreground leading-tight\"\n              >\n                {{ $t(`widgets.numberControl.${option.description}`) }}\n              </div>\n            </div>\n          </div>\n\n          <ToggleSwitch\n            :model-value=\"isActive(option.mode)\"\n            class=\"flex-shrink-0\"\n            @update:model-value=\"handleToggle(option.mode)\"\n          />\n        </div>\n      </div>\n      <div class=\"border-t border-border-subtle\"></div>\n      <Button\n        class=\"w-full bg-secondary-background hover:bg-secondary-background-hover border-0 rounded-lg p-2 text-sm\"\n        @click=\"handleEditSettings\"\n      >\n        <div class=\"flex items-center justify-center gap-1\">\n          <i class=\"pi pi-cog text-xs text-muted-foreground\" />\n          <span class=\"font-normal text-base-foreground\">{{\n            $t('widgets.numberControl.editSettings')\n          }}</span>\n        </div>\n      </Button>\n    </div>\n  </Popover>\n</template>\n"],"names":["popover","ref","settingStore","useSettingStore","dialogService","useDialogService","__expose","__name","event","controlOptions","NumberControlMode","widgetControlMode","computed","props","__props","emit","__emit","handleToggle","mode","isActive","handleEditSettings"],"mappings":"8/CAmBA,MAAMA,EAAUC,IACVC,EAAeC,IACfC,EAAgBC,IAKTC,EAAA,CAAE,OAHAC,EAACC,GAAiB,CACvBR,EAAA,MAAM,OAAOQ,CAAK,CAAA,EADb,UAGQ,EAIvB,MAAMC,EAAkC,CAWtC,CACE,KAAMC,EAAkB,UACxB,KAAM,yBACN,MAAO,YACP,YAAa,eACf,EACA,CACE,KAAMA,EAAkB,UACxB,KAAM,KACN,MAAO,YACP,YAAa,eACf,EACA,CACE,KAAMA,EAAkB,UACxB,KAAM,KACN,MAAO,YACP,YAAa,eACf,CAAA,EAGIC,EAAoBC,EAAS,IACjCV,EAAa,IAAI,yBAAyB,CAAA,EAGtCW,EAAQC,EAIRC,EAAOC,EAIPC,EAAeV,EAACW,GAA4B,CAC5CL,EAAM,cAAgBK,GAC1BH,EAAK,qBAAsBG,CAAI,CAAA,EAFZ,gBAKfC,EAAWZ,EAACW,GACTL,EAAM,cAAgBK,EADd,YAIXE,EAAqBb,EAAA,IAAM,CAC/BP,EAAQ,MAAM,OACdI,EAAc,mBAAmB,CAAA,EAFR"}