[build-system]
requires = [
    "hatchling",
]
build-backend = "hatchling.build"

[project]
name = "ragraph"
version = "1.23.2"
description = "Ratio graph handling in Python."
keywords = [
    "graph",
    "network",
    "analysis",
    "visualization",
]
authors = [
    { name = "Ratio Innovations B.V.", email = "info@ratio-case.nl" },
]
license = "GPL-3.0-or-later"
license-files = [
    "LICENSE.md",
]
readme = "README.md"
requires-python = ">=3.11"
dependencies = [
    "dd>=0.6.0",
    "lxml>=6.0.2",
    "numpy>=2.3.5",
    "ratio-genetic-py>=0.4.0",
    "ruamel-yaml>=0.18.16",
    "strenum>=0.4.15",
]

[project.optional-dependencies]
esl = [
    "raesl",
]
plot = [
    "rachord>=0.2.0",
    "plotly[kaleido]>=6.5.0",
]
all = [
    "rachord>=0.2.0",
    "plotly[kaleido]>=6.5.0",
    "raesl",
]

[tool.uv]
package = true
default-groups = [
    "lint",
    "experiment",
    "test",
]

[dependency-groups]
lint = [
    "raver",
    "ruff",
]
experiment = [
    "jupyterlab",
    "pandas",
]
test = [
    "pytest",
    "pytest-cov",
    "pytest-examples",
    "pytest-watcher",
]

[project.urls]
Homepage = "https://ragraph.ratio-case.nl"
Repository = "https://gitlab.com/ratio-case-os/python/ragraph"
"Bug Tracker" = "https://gitlab.com/ratio-case-os/python/ragraph/-/issues"
Changelog = "https://ragraph.ratio-case.nl/CHANGELOG/"

[tool.black]
line-length = 100
target-version = [
    "py311",
]

[tool.pytest.ini_options]
addopts = "-s --cov --cov-report xml:./.pytest_cache/coverage.xml --cov-report term-missing --basetemp ./tests/.temp"
testpaths = [
    "tests",
]
markers = [
    "slow",
    "format",
]

[tool.coverage.run]
source = [
    "ragraph",
]
disable_warnings = [
    "module-not-imported",
]

[tool.coverage.paths]
source = [
    "ragraph",
]

[tool.coverage.report]
show_missing = true
skip_covered = true

[tool.raver]
ref = "origin/main"
module = "./src/ragraph/__init__.py"
changelog = "./docs/CHANGELOG.md"

[tool.ruff]
line-length = 100
lint.select = [
    "E", # pycodestyle
    "F", # pyflakes
    "I", # imports
]
target-version = "py311"
