(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[4126],{31746:(e,t,l)=>{var n={"./langAR":[95380,5380],"./langAR.js":[95380,5380],"./langCS":[64053,4053],"./langCS.js":[64053,4053],"./langDE":[87020,7020],"./langDE.js":[87020,7020],"./langEN":[45764],"./langEN.js":[45764],"./langES":[61591,1591],"./langES.js":[61591,1591],"./langFA":[78510,8510],"./langFA.js":[78510,8510],"./langFI":[9702,9702],"./langFI.js":[9702,9702],"./langFR":[51515,1515],"./langFR.js":[51515,1515],"./langHU":[45888,5888],"./langHU.js":[45888,5888],"./langIT":[48378,8378],"./langIT.js":[48378,8378],"./langJA":[1626,1626],"./langJA.js":[1626,1626],"./langKO":[95401,5401],"./langKO.js":[95401,5401],"./langNL":[13985,3985],"./langNL.js":[13985,3985],"./langPL":[39271,9271],"./langPL.js":[39271,9271],"./langPT-br":[43620,3620],"./langPT-br.js":[43620,3620],"./langRO":[28079,460],"./langRO.js":[28079,460],"./langRU":[69118,6737],"./langRU.js":[69118,6737],"./langSI":[72603,2603],"./langSI.js":[72603,2603],"./langSV":[46746,6746],"./langSV.js":[46746,6746],"./langTH":[90703,703],"./langTH.js":[90703,703],"./langTR":[26841,6841],"./langTR.js":[26841,6841],"./langUK":[82335,2335],"./langUK.js":[82335,2335],"./langVI":[10102,102],"./langVI.js":[10102,102],"./langZH":[23073],"./langZH.js":[23073]};function a(e){if(!l.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],a=t[0];return Promise.all(t.slice(1).map(l.e)).then((()=>l(a)))}a.keys=()=>Object.keys(n),a.id=31746,e.exports=a},34126:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>d});var n=l(2445),a=l(58083),r=l(29898),o=l(65432),c=l(96540),s=l(53695),i=l(46900),u=l(94309),g=l(13934);function d({echartOptions:e,emitCrossFilters:t,groupby:l,height:d,labelMap:h,onContextMenu:f,refs:p,setDataMask:y,selectedValues:v,width:x,formData:S,coltypeMapping:j}){const m=(0,c.useCallback)(((e,t)=>{if(null!=e&&e.children)return;const{treePath:n}=(0,u.Rq)(t),a=n.join(","),r=Object.values(v);let o;o=r.includes(a)?r.filter((e=>e!==a)):[a];const c=o.map((e=>h[e]));return{dataMask:{extraFormData:{filters:0===o.length?[]:l.map(((e,t)=>{const l=c.map((e=>e[t]));return null==l?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:l}}))},filterState:{value:c.length?c:null,selectedValues:o.length?o:null}},isCurrentValueSelected:r.includes(a)}}),[l,h,v]),b=(0,c.useCallback)(((e,n)=>{var a;if(!t||0===l.length)return;const r=null==(a=m(e,n))?void 0:a.dataMask;r&&y(r)}),[t,m,y]),T={click:e=>{const{data:t,treePathInfo:l}=e;b(t,l)},contextmenu:async e=>{if(f){e.event.stop();const{data:t,treePathInfo:n}=e,{treePath:c}=(0,u.Rq)(n);if(c.length>0){const s=e.event.event,u=[],d=[];c.forEach(((e,t)=>{const n="null"===e?i.mu:e;u.push({col:l[t],op:"==",val:n,formattedVal:e}),d.push({col:l[t],op:"==",val:n,formattedVal:(0,g.Wy)(n,{timeFormatter:(0,a.mo)(S.dateFormat),numberFormatter:(0,r.gV)(S.numberFormat),coltype:null==j?void 0:j[(0,o.A)(l[t])]})})})),f(s.clientX,s.clientY,{drillToDetail:u,crossFilter:l.length>0?m(t,n):void 0,drillBy:{filters:d,groupbyFieldName:"groupby"}})}}}};return(0,n.Y)(s.A,{refs:p,height:d,width:x,echartOptions:e,eventHandlers:T,selectedValues:v})}},53695:(e,t,l)=>{"use strict";l.d(t,{A:()=>Z});var n=l(55364),a=l.n(n),r=l(2445),o=l(96540),c=l(61225),s=l(50290),i=l(3087),u=l(53080),g=l(92351),d=l(42900),h=l(51719),f=l(17979),p=l(74508),y=l(61030),v=l(45567),x=l(49714),S=l(11734),j=l(80491),m=l(25652),b=l(73900),T=l(32003),E=l(22329),I=l(31441),C=l(12458),w=l(39539),F=l(5553),R=l(45967),O=l(40830),k=l(45620),A=l(39838),L=l(42998),P=l(69380),V=l(25384),D=l(6641),H=l(74064),U=l(28540),N=l(35278),M=l(46900);const K=s.I4.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function Y({width:e,height:t,echartOptions:n,eventHandlers:i,zrEventHandlers:d,selectedValues:h={},refs:f},p){const y=(0,s.DP)(),v=(0,o.useRef)(null);f&&(f.divRef=v);const[x,S]=(0,o.useState)(!1),j=(0,o.useRef)(),m=(0,o.useMemo)((()=>Object.keys(h)||[]),[h]),b=(0,o.useRef)([]);(0,o.useImperativeHandle)(p,(()=>({getEchartInstance:()=>j.current})));const T=(0,c.d4)((e=>{var t,l;return null!=(t=null==e||null==(l=e.common)?void 0:l.locale)?t:M.Xn})).toUpperCase(),E=(0,o.useCallback)((({width:e,height:t})=>{j.current&&j.current.resize({width:e,height:t})}),[]);return(0,o.useEffect)((()=>{(async e=>{var t;let n;try{n=await l(31746)(`./lang${e}`)}catch(t){console.error(`Locale ${e} not supported in ECharts`,t)}return null==(t=n)?void 0:t.default})(T).then((l=>{l&&(0,u.E)(T,l),v.current&&(j.current||(j.current=(0,g.Ts)(v.current,null,{locale:T})),E({width:e,height:t}),S(!0))}))}),[T]),(0,o.useEffect)((()=>{if(x){var e;Object.entries(i||{}).forEach((([e,t])=>{var l,n;null==(l=j.current)||l.off(e),null==(n=j.current)||n.on(e,t)})),Object.entries(d||{}).forEach((([e,t])=>{var l,n;null==(l=j.current)||l.getZr().off(e),null==(n=j.current)||n.getZr().on(e,t)}));const t=e=>{const t=y,l={textStyle:{color:t.colorText,fontFamily:t.fontFamily},title:{textStyle:{color:t.colorText}},legend:{textStyle:{color:t.colorTextSecondary},pageTextStyle:{color:t.colorTextSecondary},pageIconColor:t.colorTextSecondary,pageIconInactiveColor:t.colorTextDisabled,inactiveColor:t.colorTextDisabled},tooltip:{backgroundColor:t.colorBgContainer,textStyle:{color:t.colorText}},axisPointer:{lineStyle:{color:t.colorPrimary},label:{color:t.colorText}}};return null!=e&&e.xAxis&&(l.xAxis={axisLine:{lineStyle:{color:t.colorSplit}},axisLabel:{color:t.colorTextSecondary},splitLine:{lineStyle:{color:t.colorSplit}}}),null!=e&&e.yAxis&&(l.yAxis={axisLine:{lineStyle:{color:t.colorSplit}},axisLabel:{color:t.colorTextSecondary},splitLine:{lineStyle:{color:t.colorSplit}}}),l},l=a()({},t(n),n);null==(e=j.current)||e.setOption(l,!0)}}),[x,n,i,d,y]),(0,o.useEffect)((()=>()=>{var e;return null==(e=j.current)?void 0:e.dispose()}),[]),(0,o.useEffect)((()=>{j.current&&(j.current.dispatchAction({type:"downplay",dataIndex:b.current.filter((e=>!m.includes(e)))}),m.length&&j.current.dispatchAction({type:"highlight",dataIndex:m}),b.current=m)}),[m,j.current]),(0,o.useLayoutEffect)((()=>{E({width:e,height:t})}),[e,t,E]),(0,r.Y)(K,{ref:v,height:t,width:e})}(0,i.Y)([w.a,d.a,h.a,f.a,p.a,y.a,v.a,x.a,S.a,j.a,m.a,b.a,T.a,E.a,I.a,C.a,F.a,R.a,O.a,k.a,A.a,L.a,P.a,V.a,D.a,H.a,U.a,N._]);const Z=(0,o.forwardRef)(Y)}}]);