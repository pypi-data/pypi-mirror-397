name: erk
version: 0.2.8
description: Erk implementation workflow commands for creating worktrees from plans (.PLAN.md) and executing implementation. Includes commands for plan creation, execution, and quick access.
license: See LICENSE.md
artifacts:
  command:
    - commands/erk/plan-implement.md
    - commands/erk/merge-conflicts-fix.md
    - commands/erk/plan-submit.md
    - commands/erk/auto-restack.md
    - commands/erk/create-extraction-plan.md
    - commands/erk/save-plan.md
    - commands/erk/pr-address.md
  agent:
    - agents/erk/issue-wt-creator.md
    - agents/erk/plan-extractor.md
  doc:
    - docs/erk/EXAMPLES.md
    - docs/erk/includes/conflict-resolution.md
    - docs/erk/includes/create-github-issue.md
    - docs/erk/includes/enrichment-process.md
    - docs/erk/includes/extract-docs-analysis-shared.md
    - docs/erk/includes/extract-plan-workflow-shared.md
    - docs/erk/includes/planning/extract-plan-from-session.md
    - docs/erk/includes/planning/next-steps-output.md
    - docs/erk/includes/session-file-location.md
    - docs/erk/includes/success-output-format.md
    - docs/erk/includes/validate-git-repository.md
    - docs/erk/includes/validate-github-cli.md
    - docs/erk/includes/validate-plan-structure.md
scripts:
  - name: find-project-dir
    path: scripts/erk/find_project_dir.py
    description: Find Claude Code project directory for a given filesystem path
  - name: session-id-injector-hook
    path: scripts/erk/session_id_injector_hook.py
    description: Inject session ID into conversation context for plan creation
  - name: preprocess-session
    path: scripts/erk/preprocess_session.py
    description: Compress JSONL session logs to XML format, auto-discovering agent logs for comprehensive preprocessing
  - name: comment-worktree-creation
    path: scripts/erk/comment_worktree_creation.py
    description: Post GitHub comment documenting worktree creation
  - name: parse-issue-reference
    path: scripts/erk/parse_issue_reference.py
    description: Parse GitHub issue number from URL or plain number
  - name: issue-title-to-filename
    path: scripts/erk/issue_title_to_filename.py
    description: Convert GitHub issue title to plan filename
  - name: post-start-comment
    path: scripts/erk/post_start_comment.py
    description: Post implementation start comment to GitHub issue with worktree, branch, and steps list
  - name: post-plan-comment
    path: scripts/erk/post_plan_comment.py
    description: Post plan issue comment with workflow instructions
  - name: plan-save-to-issue
    path: scripts/erk/plan_save_to_issue.py
    description: Extract plan from ~/.claude/plans/ and create GitHub issue with schema v2 format
  - name: wrap-plan-in-metadata-block
    path: scripts/erk/wrap_plan_in_metadata_block.py
    description: Wrap plan content in collapsible GitHub metadata block
  - name: create-wt-from-issue
    path: scripts/erk/create_wt_from_issue.py
    description: Create worktree from GitHub issue with erk-plan label
  - name: create-plan-from-context
    path: scripts/erk/create_plan_from_context.py
    description: Create GitHub issue from plan content (stdin) with erk-plan label
  - name: check-impl
    path: scripts/erk/check_impl.py
    description: Check .impl/ folder structure and validate prerequisites
  - name: validate-plan-content
    path: scripts/erk/validate_plan_content.py
    description: Validate plan content structure and quality from stdin
  - name: format-success-output
    path: scripts/erk/format_success_output.py
    description: Format success output for GitHub issue creation with next steps and metadata
  - name: format-error
    path: scripts/erk/format_error.py
    description: Format error messages with consistent structure and suggested actions
  - name: create-worker-impl-from-issue
    path: scripts/erk/create_worker_impl_from_issue.py
    description: Create .worker-impl/ folder from GitHub issue with plan content
  - name: update-dispatch-info
    path: scripts/erk/update_dispatch_info.py
    description: Update dispatch info in GitHub issue plan-header metadata
  - name: post-pr-comment
    path: scripts/erk/post_pr_comment.py
    description: Post PR link comment to GitHub issue after PR publication
  - name: mark-step
    path: scripts/erk/mark_step.py
    description: Mark one or more steps as completed/incomplete in progress.md (supports batching to avoid race conditions)
  - name: get-progress
    path: scripts/erk/get_progress.py
    description: Query progress information from progress.md frontmatter
  - name: extract-latest-plan
    path: scripts/erk/extract_latest_plan.py
    description: Extract the latest plan from Claude session files
  - name: create-issue-from-session
    path: scripts/erk/create_issue_from_session.py
    description: Extract plan from Claude session and create GitHub issue
  - name: mark-impl-started
    path: scripts/erk/mark_impl_started.py
    description: Update last_local_impl_at in GitHub issue plan-header metadata
  - name: get-pr-body-footer
    path: scripts/erk/get_pr_body_footer.py
    description: Generate PR body footer with checkout command for remote implementations
  - name: get-closing-text
    path: scripts/erk/get_closing_text.py
    description: Get closing text for PR body based on .impl/issue.json reference
  - name: add-remote-execution-note
    path: scripts/erk/add_remote_execution_note.py
    description: Add remote execution tracking note to PR body for workflow runs
  - name: create-extraction-plan
    path: scripts/erk/create_extraction_plan.py
    description: Create extraction plan issue from stdin with erk-plan and erk-extraction labels
  - name: list-sessions
    path: scripts/erk/list_sessions.py
    description: List Claude Code sessions with metadata for the current project
  - name: exit-plan-mode-hook
    path: scripts/erk/exit_plan_mode_hook.py
    description: Save plan to GitHub when ExitPlanMode is called
  - name: add-issue-label
    path: scripts/erk/add_issue_label.py
    description: Add a label to a GitHub issue
  - name: create-extraction-branch
    path: scripts/erk/create_extraction_branch.py
    description: Create branch for extraction workflow
  - name: extract-session-from-issue
    path: scripts/erk/extract_session_from_issue.py
    description: Extract session data from GitHub issue comments
  - name: mark-impl-ended
    path: scripts/erk/mark_impl_ended.py
    description: Update implementation ended event in GitHub issue and local state file
  - name: post-extraction-comment
    path: scripts/erk/post_extraction_comment.py
    description: Post extraction workflow status comments to GitHub issues
  - name: impl-init
    path: scripts/erk/impl_init.py
    description: Initialize implementation by validating .impl/ folder and extracting phases
  - name: impl-signal
    path: scripts/erk/impl_signal.py
    description: Signal implementation events (started/ended) to GitHub
  - name: impl-verify
    path: scripts/erk/impl_verify.py
    description: Verify .impl/ folder exists after implementation (guardrail)
  - name: get-pr-review-comments
    path: scripts/erk/get_pr_review_comments.py
    description: Fetch PR review comments for agent context injection
  - name: resolve-review-thread
    path: scripts/erk/resolve_review_thread.py
    description: Resolve a PR review thread via GraphQL mutation
  - name: get-pr-discussion-comments
    path: scripts/erk/get_pr_discussion_comments.py
    description: Fetch PR discussion comments (main conversation) for agent context injection
  - name: add-reaction-to-comment
    path: scripts/erk/add_reaction_to_comment.py
    description: Add a reaction to a PR/issue comment to mark it as addressed
  - name: tripwires-reminder-hook
    path: scripts/erk/tripwires_reminder_hook.py
    description: Remind to check tripwires before common dangerous operations
  - name: get-pr-review-comments
    path: scripts/erk/get_pr_review_comments.py
    description: Fetch PR review comments for agent context injection
  - name: detect-trunk-branch
    path: scripts/erk/detect_trunk_branch.py
    description: Detect whether repo uses main or master as trunk branch
  - name: post-workflow-started-comment
    path: scripts/erk/post_workflow_started_comment.py
    description: Post workflow started comment to GitHub issue with YAML metadata
  - name: generate-pr-summary
    path: scripts/erk/generate_pr_summary.py
    description: Generate PR summary from PR diff using Claude (no commit messages)
  - name: update-pr-summary
    path: scripts/erk/update_pr_summary.py
    description: Update PR body with implementation summary from commit message
  - name: configure-git-user
    path: scripts/erk/configure_git_user.py
    description: Configure git user identity from GitHub username for CI environments
  - name: create-impl-run-info
    path: scripts/erk/create_impl_run_info.py
    description: Create .impl/run-info.json with workflow run metadata
  - name: update-pr-body
    path: scripts/erk/update_pr_body.py
    description: Update PR body with AI-generated summary and standardized footer
hooks:
  - id: session-id-injector-hook
    lifecycle: UserPromptSubmit
    matcher: "*"
    invocation: erk kit exec erk session-id-injector-hook
    description: Injects session ID into conversation context for plan-related commands
    timeout: 30
  - id: exit-plan-mode-hook
    lifecycle: PreToolUse
    matcher: ExitPlanMode
    invocation: erk kit exec erk exit-plan-mode-hook
    description: Auto-save plan to GitHub on Plan Mode exit
    timeout: 30
  - id: tripwires-reminder-hook
    lifecycle: UserPromptSubmit
    matcher: "*"
    invocation: erk kit exec erk tripwires-reminder-hook
    description: Reminds Claude to check tripwires before common operations
    timeout: 30
