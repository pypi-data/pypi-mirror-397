Metadata-Version: 2.4
Name: caicai-codeindex
Version: 0.3.2
Summary: CodeIndex Python SDK - Direct SQLite database access
Author-email: CodeIndex <opensource@example.com>
License: MIT
Project-URL: Homepage, https://github.com/LydiaCai1203/codeindex
Project-URL: Repository, https://github.com/LydiaCai1203/codeindex
Project-URL: Issues, https://github.com/LydiaCai1203/codeindex/issues
Keywords: codeindex,ast,code-index,tree-sitter,code-intelligence,semantic-search,sqlite
Requires-Python: >=3.9
Description-Content-Type: text/markdown
Requires-Dist: numpy>=1.24.0
Requires-Dist: requests>=2.28.0
Provides-Extra: dev
Requires-Dist: pytest; extra == "dev"
Requires-Dist: mypy; extra == "dev"
Requires-Dist: black; extra == "dev"

# CodeIndex Python SDK

[![Python Version](https://img.shields.io/badge/python-%3E%3D3.9-blue.svg)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

ç›´æ¥è®¿é—® CodeIndex SQLite æ•°æ®åº“çš„ Python SDKï¼Œæ— éœ€ Node.js è¿è¡Œæ—¶ã€‚

## âœ¨ ä¸»è¦ç‰¹æ€§

- âœ… **æ— éœ€ Node.js**ï¼šç›´æ¥è¯»å– SQLite æ•°æ®åº“ï¼Œæ— éœ€å¯åŠ¨ Node.js è¿›ç¨‹
- âœ… **æ€§èƒ½å“è¶Š**ï¼šæ— è¿›ç¨‹é—´é€šä¿¡å¼€é”€ï¼ŒæŸ¥è¯¢å»¶è¿Ÿä» 50-100ms é™è‡³ 1-5ms
- âœ… **ç®€å•æ˜“ç”¨**ï¼šAPI æ¸…æ™°ç›´è§‚ï¼Œä¿æŒå‘åå…¼å®¹
- âœ… **ç±»å‹æç¤º**ï¼šå®Œæ•´çš„ç±»å‹å®šä¹‰ï¼ŒIDE å‹å¥½
- âœ… **è½»é‡çº§**ï¼šä»…ä¾èµ– numpy å’Œ requests
- âœ… **è‡ªç„¶è¯­è¨€æŸ¥è¯¢**ï¼šæ”¯æŒä½¿ç”¨è‡ªç„¶è¯­è¨€è¿›è¡Œè¯­ä¹‰æœç´¢ï¼Œè‡ªåŠ¨ç”Ÿæˆ embedding

## ğŸ“¦ å®‰è£…

### ä» PyPI å®‰è£…ï¼ˆæ¨èï¼‰

```bash
# ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒæºï¼ˆæ¨èï¼Œé€Ÿåº¦æ›´å¿«ï¼‰
pip install -i https://mirrors.aliyun.com/pypi/simple/ caicai-codeindex-sdk

# æˆ–ä½¿ç”¨å®˜æ–¹ PyPI æº
pip install caicai-codeindex
```

### æœ¬åœ°å¼€å‘å®‰è£…

```bash
cd sdk/python
pip install -e .
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

åœ¨ä½¿ç”¨ SDK ä¹‹å‰ï¼Œéœ€è¦å…ˆä½¿ç”¨ CodeIndex CLI æ„å»ºç´¢å¼•æ•°æ®åº“ï¼š

```bash
node dist/src/cli/index.js index \
  --root /path/to/your/project \
  --db .codeindex/project.db \
  --lang go
```

### åŸºæœ¬ä½¿ç”¨

```python
from codeindex_sdk import CodeIndexClient

# æ–¹å¼1ï¼šç›´æ¥ä½¿ç”¨æ•°æ®åº“è·¯å¾„ï¼ˆæ¨èï¼‰
with CodeIndexClient(".codeindex/project.db") as client:
    # æŸ¥æ‰¾ç¬¦å·
    symbols = client.find_symbols(name="CreateUser", language="go")
    for symbol in symbols:
        print(f"{symbol['name']} at {symbol['location']['path']}:{symbol['location']['startLine']}")
    
    # æŸ¥æ‰¾å•ä¸ªç¬¦å·
    symbol = client.find_symbol("CreateUser", language="go")
    if symbol:
        print(f"Found: {symbol['qualifiedName']}")
    
    # æŸ¥è¯¢å¯¹è±¡å±æ€§
    props = client.object_properties("UserService", language="go")
    for prop in props:
        print(f"{prop['kind']} {prop['name']}")
    
    # ç”Ÿæˆè°ƒç”¨é“¾
    chain = client.call_chain(from_symbol=12345, direction="forward", depth=3)
    if chain:
        print(f"Call chain: {chain['name']} -> {len(chain.get('children', []))} calls")
    
    # è·å–å®šä¹‰ä½ç½®
    location = client.definition(12345)
    if location:
        print(f"Definition: {location['path']}:{location['startLine']}")
    
    # è·å–å¼•ç”¨
    refs = client.references(12345)
    print(f"Found {len(refs)} references")
```

### ä½¿ç”¨é…ç½®å¯¹è±¡ï¼ˆå‘åå…¼å®¹ï¼‰

```python
from codeindex_sdk import CodeIndexClient, CodeIndexConfig

# æ–¹å¼2ï¼šä½¿ç”¨é…ç½®å¯¹è±¡ï¼ˆå‘åå…¼å®¹ï¼‰
config = CodeIndexConfig(
    db_path=".codeindex/project.db",
    # ä»¥ä¸‹å‚æ•°å·²åºŸå¼ƒï¼Œä½†ä¿ç•™ç”¨äºå…¼å®¹æ€§
    root_dir="/path/to/project",
    languages=["go", "ts"],
)

with CodeIndexClient(config) as client:
    symbols = client.find_symbols(name="CreateUser", language="go")
```

### è¯­ä¹‰æœç´¢ï¼ˆè‡ªç„¶è¯­è¨€æŸ¥è¯¢ï¼‰

è¯­ä¹‰æœç´¢åŠŸèƒ½æ”¯æŒä½¿ç”¨è‡ªç„¶è¯­è¨€æŸ¥è¯¢ä»£ç ï¼Œç±»ä¼¼äº Node.js CLI çš„ `search` å‘½ä»¤ã€‚

#### å‰ç½®è¦æ±‚

1. ä½¿ç”¨ CLI ç”Ÿæˆ embeddingï¼š
```bash
node dist/cli/index.js embed --db .codeindex/project.db
```

2. é…ç½® embedding APIï¼ˆä¸‰ç§æ–¹å¼ï¼‰ï¼š
   - **æ–¹å¼1ï¼ˆæ¨èï¼‰**ï¼šåœ¨ `codeindex.config.json` ä¸­é…ç½®ï¼š
   ```json
   {
     "embedding": {
       "apiEndpoint": "https://api.example.com/v1/embeddings",
       "apiKey": "your-api-key",
       "model": "bge-m3",
       "dimension": 1024,
       "defaultModel": "bge-m3"
     }
   }
   ```
   
   - **æ–¹å¼2**ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š
   ```bash
   export CODEINDEX_EMBEDDING_API_ENDPOINT="https://api.example.com/v1/embeddings"
   export CODEINDEX_EMBEDDING_API_KEY="your-api-key"
   ```
   
   - **æ–¹å¼3**ï¼šåœ¨ä»£ç ä¸­ç›´æ¥ä¼ é€’å‚æ•°

#### ä½¿ç”¨ç¤ºä¾‹

**æœ€ç®€å•çš„ç”¨æ³•ï¼ˆæ¨èï¼‰**ï¼š
```python
from codeindex import CodeIndexClient

with CodeIndexClient(".codeindex/project.db") as client:
    # è‡ªç„¶è¯­è¨€æŸ¥è¯¢ï¼Œè‡ªåŠ¨ä»é…ç½®æ–‡ä»¶è¯»å– embedding é…ç½®
    results = client.semantic_search(
        query="ç”¨æˆ·ç™»å½•éªŒè¯",
        top_k=5
    )
    
    for result in results:
        symbol = result['symbol']
        print(f"{symbol['kind']} {symbol['qualifiedName']}")
        print(f"  ç›¸ä¼¼åº¦: {result['similarity']:.1%}")
        print(f"  ä½ç½®: {result['location']['path']}:{result['location']['startLine']}")
        if symbol.get('chunkSummary'):
            print(f"  æ‘˜è¦: {symbol['chunkSummary'][:80]}...")
        print()
```

**å¸¦è¿‡æ»¤æ¡ä»¶çš„æŸ¥è¯¢**ï¼š
```python
results = client.semantic_search(
    query="ç”¨æˆ·ç™»å½•éªŒè¯",
    top_k=5,
    language="go",  # åªæœç´¢ Go ä»£ç 
    kind="function",  # åªæœç´¢å‡½æ•°
    min_similarity=0.7  # æœ€å°ç›¸ä¼¼åº¦é˜ˆå€¼
)
```

**æ˜¾å¼æŒ‡å®š embedding é…ç½®**ï¼š
```python
results = client.semantic_search(
    query="ç”¨æˆ·ç™»å½•éªŒè¯",
    api_endpoint="https://api.example.com/v1/embeddings",
    api_key="your-api-key",
    model="bge-m3",
    top_k=5
)
```

**ä½¿ç”¨é¢„è®¡ç®—çš„ embedding**ï¼ˆé«˜çº§ç”¨æ³•ï¼‰ï¼š
```python
import openai

# æ‰‹åŠ¨ç”Ÿæˆ embedding
response = openai.embeddings.create(
    model="text-embedding-3-small",
    input="ç”¨æˆ·ç™»å½•éªŒè¯"
)
query_embedding = response.data[0].embedding

# ä½¿ç”¨é¢„è®¡ç®—çš„ embedding
results = client.semantic_search(
    query="ç”¨æˆ·ç™»å½•éªŒè¯",
    query_embedding=query_embedding,
    model="text-embedding-3-small",
    top_k=5
)
```

## ğŸ“š API æ–‡æ¡£

### CodeIndexClient

ä¸»è¦çš„å®¢æˆ·ç«¯ç±»ï¼Œç”¨äºä¸ CodeIndex æ•°æ®åº“äº¤äº’ã€‚

#### åˆå§‹åŒ–

```python
CodeIndexClient(db_path: str | CodeIndexConfig, **kwargs)
```

**å‚æ•°ï¼š**
- `db_path` (str | CodeIndexConfig): æ•°æ®åº“æ–‡ä»¶è·¯å¾„æˆ–é…ç½®å¯¹è±¡
- `**kwargs`: å…¶ä»–å‚æ•°ï¼ˆå·²åºŸå¼ƒï¼Œå¿½ç•¥ï¼‰

**ç¤ºä¾‹ï¼š**
```python
# ä½¿ç”¨è·¯å¾„
client = CodeIndexClient(".codeindex/project.db")

# ä½¿ç”¨é…ç½®å¯¹è±¡
config = CodeIndexConfig(db_path=".codeindex/project.db")
client = CodeIndexClient(config)
```

#### æŸ¥æ‰¾ç¬¦å·

##### `find_symbols(name: str, language: str | None = None) -> List[Dict]`

æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…åç§°çš„ç¬¦å·ã€‚

**å‚æ•°ï¼š**
- `name` (str): ç¬¦å·åç§°
- `language` (str, optional): è¯­è¨€è¿‡æ»¤å™¨ï¼ˆå¦‚ "go", "ts", "python"ï¼‰

**è¿”å›ï¼š** ç¬¦å·å­—å…¸åˆ—è¡¨ï¼Œæ¯ä¸ªå­—å…¸åŒ…å«ï¼š
- `symbolId`: ç¬¦å· ID
- `name`: ç¬¦å·åç§°
- `kind`: ç¬¦å·ç±»å‹
- `qualifiedName`: é™å®šå
- `location`: ä½ç½®ä¿¡æ¯ï¼ˆpath, startLine, endLine ç­‰ï¼‰

**ç¤ºä¾‹ï¼š**
```python
symbols = client.find_symbols(name="CreateUser", language="go")
```

##### `find_symbol(name: str, language: str | None = None, in_file: str | None = None, kind: str | None = None) -> Dict | None`

æŸ¥æ‰¾å•ä¸ªåŒ¹é…æ¡ä»¶çš„ç¬¦å·ã€‚

**å‚æ•°ï¼š**
- `name` (str): ç¬¦å·åç§°
- `language` (str, optional): è¯­è¨€è¿‡æ»¤å™¨
- `in_file` (str, optional): æ–‡ä»¶è·¯å¾„è¿‡æ»¤å™¨
- `kind` (str, optional): ç¬¦å·ç±»å‹è¿‡æ»¤å™¨ï¼ˆå¦‚ "function", "class", "struct"ï¼‰

**è¿”å›ï¼š** ç¬¦å·å­—å…¸æˆ– None

**ç¤ºä¾‹ï¼š**
```python
symbol = client.find_symbol(name="CreateUser", language="go", kind="function")
```

#### å¯¹è±¡å±æ€§

##### `object_properties(object_name: str, language: str | None = None) -> List[Dict]`

è·å–å¯¹è±¡/ç±»/ç»“æ„ä½“çš„å±æ€§å’Œæ–¹æ³•ã€‚

**å‚æ•°ï¼š**
- `object_name` (str): å¯¹è±¡åç§°
- `language` (str, optional): è¯­è¨€è¿‡æ»¤å™¨

**è¿”å›ï¼š** å±æ€§å­—å…¸åˆ—è¡¨ï¼Œæ¯ä¸ªå­—å…¸åŒ…å«ï¼š
- `name`: å±æ€§/æ–¹æ³•åç§°
- `kind`: ç±»å‹ï¼ˆå¦‚ "method", "field", "property"ï¼‰
- `signature`: ç­¾åä¿¡æ¯

**ç¤ºä¾‹ï¼š**
```python
props = client.object_properties("UserService", language="go")
```

#### è°ƒç”¨é“¾

##### `call_chain(from_symbol: int, direction: str = "forward", depth: int = 5) -> Dict | None`

æ„å»ºè°ƒç”¨é“¾ã€‚

**å‚æ•°ï¼š**
- `from_symbol` (int): èµ·å§‹ç¬¦å· ID
- `direction` (str): "forward"ï¼ˆå‘å‰ï¼Œè°ƒç”¨è°ï¼‰æˆ– "backward"ï¼ˆå‘åï¼Œè¢«è°è°ƒç”¨ï¼‰
- `depth` (int): æœ€å¤§æ·±åº¦

**è¿”å›ï¼š** è°ƒç”¨é“¾å­—å…¸æˆ– Noneï¼ŒåŒ…å«ï¼š
- `name`: ç¬¦å·åç§°
- `depth`: å½“å‰æ·±åº¦
- `children`: å­èŠ‚ç‚¹åˆ—è¡¨

**ç¤ºä¾‹ï¼š**
```python
chain = client.call_chain(from_symbol=12345, direction="forward", depth=3)
```

#### å®šä¹‰å’Œå¼•ç”¨

##### `definition(symbol_id: int) -> Dict | None`

è·å–ç¬¦å·çš„å®šä¹‰ä½ç½®ã€‚

**å‚æ•°ï¼š**
- `symbol_id` (int): ç¬¦å· ID

**è¿”å›ï¼š** ä½ç½®å­—å…¸æˆ– Noneï¼ŒåŒ…å« pathã€startLineã€endLine ç­‰

**ç¤ºä¾‹ï¼š**
```python
location = client.definition(12345)
```

##### `references(symbol_id: int) -> List[Dict]`

è·å–ç¬¦å·çš„æ‰€æœ‰å¼•ç”¨ã€‚

**å‚æ•°ï¼š**
- `symbol_id` (int): ç¬¦å· ID

**è¿”å›ï¼š** å¼•ç”¨ä½ç½®å­—å…¸åˆ—è¡¨

**ç¤ºä¾‹ï¼š**
```python
refs = client.references(12345)
```

#### è¯­ä¹‰æœç´¢

##### `semantic_search(query: str | None = None, query_embedding: List[float] | None = None, model: str | None = None, top_k: int = 10, language: str | None = None, kind: str | None = None, min_similarity: float = 0.7, api_endpoint: str | None = None, api_key: str | None = None, dimension: int | None = None) -> List[Dict]`

è¯­ä¹‰æœç´¢ï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€æŸ¥è¯¢ã€‚

**å‚æ•°ï¼š**
- `query` (str, optional): è‡ªç„¶è¯­è¨€æŸ¥è¯¢æ–‡æœ¬ï¼ˆå¦‚æœæœªæä¾› `query_embedding`ï¼Œåˆ™å¿…éœ€ï¼‰
- `query_embedding` (List[float], optional): æŸ¥è¯¢ embedding å‘é‡ï¼ˆå¦‚æœæœªæä¾›ï¼Œå°†ä» `query` è‡ªåŠ¨ç”Ÿæˆï¼‰
- `model` (str, optional): Embedding æ¨¡å‹åç§°ï¼ˆå¯é€‰ï¼Œå°†ä»é…ç½®æ–‡ä»¶è¯»å–ï¼‰
- `top_k` (int): è¿”å›ç»“æœæ•°é‡ï¼Œé»˜è®¤ 10
- `language` (str, optional): è¯­è¨€è¿‡æ»¤å™¨ï¼ˆå¦‚ "go", "ts", "python"ï¼‰
- `kind` (str, optional): ç¬¦å·ç±»å‹è¿‡æ»¤å™¨ï¼ˆå¦‚ "function", "class", "struct"ï¼‰
- `min_similarity` (float): æœ€å°ç›¸ä¼¼åº¦é˜ˆå€¼ï¼ˆ0.0-1.0ï¼‰ï¼Œé»˜è®¤ 0.7
- `api_endpoint` (str, optional): Embedding API ç«¯ç‚¹ï¼ˆå¯é€‰ï¼Œå°†ä»é…ç½®æ–‡ä»¶è¯»å–ï¼‰
- `api_key` (str, optional): Embedding API å¯†é’¥ï¼ˆå¯é€‰ï¼Œå°†ä»é…ç½®æ–‡ä»¶è¯»å–ï¼‰
- `dimension` (int, optional): Embedding ç»´åº¦ï¼ˆå¯é€‰ï¼Œå°†ä»é…ç½®æ–‡ä»¶è¯»å–ï¼‰

**è¿”å›ï¼š** æœç´¢ç»“æœåˆ—è¡¨ï¼Œæ¯ä¸ªç»“æœåŒ…å«ï¼š
- `symbol`: ç¬¦å·ä¿¡æ¯ï¼ˆåŒ…å« name, kind, qualifiedName, chunkSummary ç­‰ï¼‰
- `similarity`: ç›¸ä¼¼åº¦åˆ†æ•°ï¼ˆ0.0-1.0ï¼‰
- `location`: ä½ç½®ä¿¡æ¯ï¼ˆpath, startLine, endLine ç­‰ï¼‰

**é…ç½®ä¼˜å…ˆçº§ï¼š**
1. å‡½æ•°å‚æ•°ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
2. ç¯å¢ƒå˜é‡ï¼ˆ`CODEINDEX_EMBEDDING_API_ENDPOINT`, `CODEINDEX_EMBEDDING_API_KEY`, `CODEINDEX_EMBEDDING_MODEL`ï¼‰
3. `codeindex.config.json` é…ç½®æ–‡ä»¶
4. é»˜è®¤å€¼

**ç¤ºä¾‹ï¼š**
```python
# è‡ªç„¶è¯­è¨€æŸ¥è¯¢ï¼ˆæ¨èï¼‰
results = client.semantic_search(
    query="ç”¨æˆ·ç™»å½•éªŒè¯",
    top_k=5
)

# å¸¦è¿‡æ»¤æ¡ä»¶
results = client.semantic_search(
    query="ç”¨æˆ·ç™»å½•éªŒè¯",
    top_k=5,
    language="go",
    kind="function",
    min_similarity=0.7
)

# ä½¿ç”¨é¢„è®¡ç®—çš„ embedding
results = client.semantic_search(
    query="ç”¨æˆ·ç™»å½•éªŒè¯",
    query_embedding=embedding_vector,
    model="text-embedding-3-small",
    top_k=5
)
```

## âš™ï¸ å·¥ä½œåŸç†

1. **ç´¢å¼•æ„å»º**ï¼šä½¿ç”¨ CodeIndex CLIï¼ˆTypeScriptï¼‰æ„å»ºç´¢å¼•æ•°æ®åº“
2. **æ•°æ®åº“æŸ¥è¯¢**ï¼šPython SDK ç›´æ¥è¯»å– SQLite æ•°æ®åº“
3. **æ— éœ€ Node.js**ï¼šå®Œå…¨ç‹¬ç«‹äº Node.js è¿è¡Œæ—¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CodeIndex CLI  â”‚ â”€â”€â”€â”€â”€â”€> â”‚  SQLite DB   â”‚ <â”€â”€â”€â”€â”€â”€ â”‚ Python SDK  â”‚
â”‚   (TypeScript)  â”‚ æ„å»ºç´¢å¼•  â”‚  (.codeindex) â”‚  æŸ¥è¯¢   â”‚  (æœ¬ SDK)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ ä»æ—§ç‰ˆæœ¬è¿ç§»

### æ—§ç‰ˆæœ¬ï¼ˆ0.1.xï¼‰

```python
from codeindex_sdk import CodeIndexClient, CodeIndexConfig

config = CodeIndexConfig(
    root_dir="/path/to/project",
    db_path=".codeindex/project.db",
    languages=["go", "ts"],
)

with CodeIndexClient(config) as client:
    symbols = client.find_symbols(name="CreateUser", language="go")
```

### æ–°ç‰ˆæœ¬ï¼ˆ0.2.xï¼‰

```python
from codeindex_sdk import CodeIndexClient

# ç®€åŒ–ï¼šåªéœ€æ•°æ®åº“è·¯å¾„
with CodeIndexClient(".codeindex/project.db") as client:
    symbols = client.find_symbols(name="CreateUser", language="go")
```

**æ³¨æ„**ï¼šæ—§ç‰ˆæœ¬ä»£ç æ— éœ€ä¿®æ”¹å³å¯è¿è¡Œï¼ˆå‘åå…¼å®¹ï¼‰ï¼Œä½†å»ºè®®æ›´æ–°ä¸ºæ–° APIã€‚

## ğŸ†š æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | æ—§ç‰ˆæœ¬ï¼ˆNode Workerï¼‰ | æ–°ç‰ˆæœ¬ï¼ˆç›´æ¥ DBï¼‰ | æå‡ |
|------|---------------------|------------------|------|
| å¯åŠ¨æ—¶é—´ | ~500ms | ~10ms | **50x** |
| æŸ¥è¯¢å»¶è¿Ÿ | 50-100ms | 1-5ms | **20x** |
| å†…å­˜å ç”¨ | Node + Python | ä»… Python | **å‡å°‘ ~50MB** |
| ä¾èµ–è¦æ±‚ | Node.js + Python | ä»… Python | **ç®€åŒ–** |

## ğŸ› å¸¸è§é—®é¢˜

### Q: æ•°æ®åº“æ–‡ä»¶ä¸å­˜åœ¨ï¼Ÿ

**A:** è¯·å…ˆä½¿ç”¨ CodeIndex CLI æ„å»ºç´¢å¼•ï¼š

```bash
node dist/src/cli/index.js index \
  --root /path/to/project \
  --db .codeindex/project.db \
  --lang go
```

### Q: è¯­ä¹‰æœç´¢è¿”å›ç©ºç»“æœï¼Ÿ

**A:** ç¡®ä¿ï¼š
1. å·²ä½¿ç”¨ CLI ç”Ÿæˆ embeddingï¼š`node dist/cli/index.js embed --db .codeindex/project.db`
2. ä½¿ç”¨ç›¸åŒçš„ embedding æ¨¡å‹ï¼ˆå¯é€šè¿‡é…ç½®æ–‡ä»¶æˆ–å‚æ•°æŒ‡å®šï¼‰
3. æ£€æŸ¥ `min_similarity` é˜ˆå€¼æ˜¯å¦è¿‡é«˜ï¼ˆå°è¯•é™ä½åˆ° 0.5 æˆ–æ›´ä½ï¼‰
4. ç¡®ä¿å·²æ­£ç¡®é…ç½® embedding APIï¼ˆé…ç½®æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡ï¼‰

### Q: å¦‚ä½•é…ç½® embedding APIï¼Ÿ

**A:** æœ‰ä¸‰ç§æ–¹å¼ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰ï¼š

1. **ç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰**ï¼š
```bash
export CODEINDEX_EMBEDDING_API_ENDPOINT="https://api.example.com/v1/embeddings"
export CODEINDEX_EMBEDDING_API_KEY="your-api-key"
export CODEINDEX_EMBEDDING_MODEL="bge-m3"  # å¯é€‰
```

2. **é…ç½®æ–‡ä»¶**ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `codeindex.config.json`ï¼š
```json
{
  "embedding": {
    "apiEndpoint": "https://api.example.com/v1/embeddings",
    "apiKey": "your-api-key",
    "model": "bge-m3",
    "defaultModel": "bge-m3"
  }
}
```

3. **ä»£ç ä¸­ä¼ é€’**ï¼š
```python
results = client.semantic_search(
    query="ç”¨æˆ·ç™»å½•éªŒè¯",
    api_endpoint="https://api.example.com/v1/embeddings",
    api_key="your-api-key",
    model="bge-m3"
)
```

### Q: å¦‚ä½•ç”Ÿæˆ query_embeddingï¼Ÿ

**A:** é€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨ç”Ÿæˆï¼ç›´æ¥ä½¿ç”¨è‡ªç„¶è¯­è¨€æŸ¥è¯¢å³å¯ï¼š

```python
# æ¨èï¼šç›´æ¥ä½¿ç”¨è‡ªç„¶è¯­è¨€æŸ¥è¯¢
results = client.semantic_search(query="ç”¨æˆ·ç™»å½•éªŒè¯", top_k=5)
```

SDK ä¼šè‡ªåŠ¨è°ƒç”¨ embedding API ç”ŸæˆæŸ¥è¯¢å‘é‡ã€‚å¦‚æœéœ€è¦æ‰‹åŠ¨ç”Ÿæˆï¼ˆé«˜çº§ç”¨æ³•ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ä½ é€‰æ‹©çš„ embedding APIï¼ˆå¦‚ OpenAIï¼‰ï¼š

```python
import openai

response = openai.embeddings.create(
    model="text-embedding-3-small",  # ä¸ç´¢å¼•æ—¶ä½¿ç”¨çš„æ¨¡å‹ä¸€è‡´
    input="ä½ çš„æŸ¥è¯¢æ–‡æœ¬"
)
query_embedding = response.data[0].embedding

# ç„¶åä¼ é€’ç»™ semantic_search
results = client.semantic_search(
    query="ä½ çš„æŸ¥è¯¢æ–‡æœ¬",
    query_embedding=query_embedding,
    model="text-embedding-3-small"
)
```

### Q: æ”¯æŒå“ªäº›ç¼–ç¨‹è¯­è¨€ï¼Ÿ

**A:** æ”¯æŒ CodeIndex CLI æ”¯æŒçš„æ‰€æœ‰è¯­è¨€ï¼ŒåŒ…æ‹¬ï¼š
- Go
- TypeScript/JavaScript
- Python
- Java
- Rust
- HTML

å…·ä½“æ”¯æŒæƒ…å†µè¯·å‚è€ƒ [CodeIndex è¯­è¨€æ”¯æŒæ–‡æ¡£](../../docs/language-support.md)ã€‚

### Q: å¦‚ä½•å¤„ç†å¹¶å‘è®¿é—®ï¼Ÿ

**A:** SQLite æ”¯æŒå¤šè¯»å•å†™ã€‚å¤šä¸ª Python è¿›ç¨‹å¯ä»¥åŒæ—¶è¯»å–æ•°æ®åº“ï¼Œä½†å†™å…¥æ“ä½œï¼ˆå¦‚ç´¢å¼•æ›´æ–°ï¼‰éœ€è¦ç‹¬å è®¿é—®ã€‚å»ºè®®ï¼š
- è¯»å–æ“ä½œï¼šå¯ä»¥å¹¶å‘
- ç´¢å¼•æ›´æ–°ï¼šåœ¨æ›´æ–°æœŸé—´é¿å…è¯»å–æ“ä½œ

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- **Python**: >= 3.9
- **ç´¢å¼•æ•°æ®åº“**ï¼šéœ€è¦å…ˆä½¿ç”¨ CodeIndex CLI æ„å»ºç´¢å¼•
- **ä¾èµ–**: numpy >= 1.24.0, requests >= 2.28.0

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ”— ç›¸å…³é“¾æ¥

- [CodeIndex ä¸»é¡¹ç›®](https://github.com/LydiaCai1203/codeindex)
- [é—®é¢˜åé¦ˆ](https://github.com/LydiaCai1203/codeindex/issues)
- [è¯­è¨€æ”¯æŒæ–‡æ¡£](../../docs/language-support.md)

## ğŸ“ æ›´æ–°æ—¥å¿—

### v0.3.0
- âœ¨ æ–°å¢è‡ªç„¶è¯­è¨€æŸ¥è¯¢åŠŸèƒ½ï¼Œæ”¯æŒç›´æ¥ä½¿ç”¨è‡ªç„¶è¯­è¨€è¿›è¡Œè¯­ä¹‰æœç´¢
- âœ¨ è‡ªåŠ¨ä»é…ç½®æ–‡ä»¶è¯»å– embedding API é…ç½®
- âœ¨ æ”¯æŒç¯å¢ƒå˜é‡é…ç½® embedding API
- ğŸ”§ æ”¹è¿› `semantic_search` APIï¼Œè‡ªåŠ¨ç”ŸæˆæŸ¥è¯¢ embedding

### v0.2.0
- âœ¨ é‡æ„ä¸ºç›´æ¥è®¿é—® SQLite æ•°æ®åº“ï¼Œæ— éœ€ Node.js
- âš¡ æ€§èƒ½å¤§å¹…æå‡ï¼ˆå¯åŠ¨æ—¶é—´ 50xï¼ŒæŸ¥è¯¢å»¶è¿Ÿ 20xï¼‰
- ğŸ”„ ä¿æŒå‘åå…¼å®¹æ€§

### v0.1.x
- åˆå§‹ç‰ˆæœ¬ï¼Œé€šè¿‡ Node.js Worker è¿›ç¨‹è®¿é—®
