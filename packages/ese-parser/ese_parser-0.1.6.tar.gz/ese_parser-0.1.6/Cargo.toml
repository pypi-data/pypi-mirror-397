[package]
name = "ese-parser"
version = "0.1.6"
edition = "2021"
authors = ["Claude Sonnet 4.5 (LOL no way im doin this by myself)"]
description = "High-performance Microsoft ESE (Extensible Storage Engine) database parser"
license = "MIT OR Apache-2.0"
repository = "https://github.com/ac-rn/ese-rs"
readme = "README.md"
documentation = "https://docs.rs/ese-parser"
keywords = ["ese", "database", "parser", "forensics", "edb"]
categories = ["parser-implementations", "database"]
exclude = [
    "python_exports/",
    "rust_exports/",
    "*.mdb",
    "*.dat",
    "*.jsonl",
    "scripts/",
    "analysis.txt",
    "debug_output.txt",
    "extra_rows_investigation.txt",
    "verification_results.txt",
]

[lib]
name = "ese_parser"
crate-type = ["cdylib", "rlib"]  # cdylib for Python, rlib for Rust

[dependencies]
# Binary parsing - zero-copy where possible
zerocopy = { version = "0.7", features = ["derive"] }
bytemuck = { version = "1.14", features = ["derive"] }
nom = "7.1"

# Error handling
thiserror = "1.0"
anyhow = "1.0"

# Encoding
encoding_rs = "0.8"

# Collections
indexmap = "2.0"

# IO - memory-mapped files for performance
memmap2 = "0.9"

# Logging
log = "0.4"

# Hex encoding
hex = "0.4"

# JSON export
serde_json = "1.0"

# Python bindings (optional)
pyo3 = { version = "0.23.5", features = ["extension-module"], optional = true }

[dev-dependencies]
# Benchmarking
criterion = { version = "0.5", features = ["html_reports"] }

# Property-based testing
proptest = "1.4"

# Testing utilities
pretty_assertions = "1.4"

[features]
default = ["logging"]
logging = []
python = ["dep:pyo3"]

[[bench]]
name = "parsing_benchmarks"
harness = false

[profile.release]
opt-level = 3
lto = true
codegen-units = 1

[profile.bench]
inherits = "release"
