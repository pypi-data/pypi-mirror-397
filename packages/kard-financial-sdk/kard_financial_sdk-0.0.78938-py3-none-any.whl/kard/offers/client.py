# This file was auto-generated by Fern from our API Definition.

import typing

from ..commons.types.location_type import LocationType
from ..commons.types.source import Source
from ..core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ..core.request_options import RequestOptions
from .raw_client import AsyncRawOffersClient, RawOffersClient
from .types.create_offer_request_data import CreateOfferRequestData
from .types.offer_request_meta import OfferRequestMeta
from .types.offer_response import OfferResponse
from .types.offers_list_response import OffersListResponse
from .types.status import Status
from .types.update_offer_request_data import UpdateOfferRequestData

# this is used as the default value for optional parameters
OMIT = typing.cast(typing.Any, ...)


class OffersClient:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawOffersClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> RawOffersClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawOffersClient
        """
        return self._raw_client

    def get_offers(
        self,
        *,
        page_after: typing.Optional[str] = None,
        page_before: typing.Optional[str] = None,
        page_size: typing.Optional[int] = None,
        include: typing.Optional[str] = None,
        filter_name: typing.Optional[str] = None,
        filter_offer_type: typing.Optional[LocationType] = None,
        filter_merchant_id: typing.Optional[str] = None,
        filter_start_date: typing.Optional[str] = None,
        filter_expiration_date: typing.Optional[str] = None,
        filter_source: typing.Optional[Source] = None,
        filter_category: typing.Optional[str] = None,
        filter_status: typing.Optional[Status] = None,
        filter_id: typing.Optional[str] = None,
        filter_is_targeted: typing.Optional[bool] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> OffersListResponse:
        """
        Get offers

        Parameters
        ----------
        page_after : typing.Optional[str]
            Represents a cursor value, and if provided, returns the next page of results

        page_before : typing.Optional[str]
            Represents a cursor value, and if provided, returns the previous page of results

        page_size : typing.Optional[int]
            Maximum number of records to be returned [1 - 200], (default = 200)

        include : typing.Optional[str]
            Comma-separated list of related resources to include (e.g., merchant,locations,segments,audiences)

        filter_name : typing.Optional[str]
            Filter by offer name

        filter_offer_type : typing.Optional[LocationType]

        filter_merchant_id : typing.Optional[str]
            Filter by merchant ID

        filter_start_date : typing.Optional[str]
            Filter by start date (ISO 8601 format)

        filter_expiration_date : typing.Optional[str]
            Filter by expiration date (ISO 8601 format)

        filter_source : typing.Optional[Source]

        filter_category : typing.Optional[str]
            Filter by offer category

        filter_status : typing.Optional[Status]
            Filter by offer status

        filter_id : typing.Optional[str]
            Filter by id

        filter_is_targeted : typing.Optional[bool]
            Filter by isTargeted

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        OffersListResponse
            Multi resource response - paginated list of offers with metadata

        Examples
        --------
        from kard import KardApi

        client = KardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )
        client.offers.get_offers()
        """
        _response = self._raw_client.get_offers(
            page_after=page_after,
            page_before=page_before,
            page_size=page_size,
            include=include,
            filter_name=filter_name,
            filter_offer_type=filter_offer_type,
            filter_merchant_id=filter_merchant_id,
            filter_start_date=filter_start_date,
            filter_expiration_date=filter_expiration_date,
            filter_source=filter_source,
            filter_category=filter_category,
            filter_status=filter_status,
            filter_id=filter_id,
            filter_is_targeted=filter_is_targeted,
            request_options=request_options,
        )
        return _response.data

    def get_offer_by_id(
        self,
        offer_id: str,
        *,
        include: typing.Optional[str] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> OfferResponse:
        """
        Retrieve a specific offer by ID

        Parameters
        ----------
        offer_id : str
            Unique identifier of the offer

        include : typing.Optional[str]
            Comma-separated list of related resources to include

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        OfferResponse
            Single resource response - single offer resource

        Examples
        --------
        from kard import KardApi

        client = KardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )
        client.offers.get_offer_by_id(
            offer_id="offerId",
        )
        """
        _response = self._raw_client.get_offer_by_id(offer_id, include=include, request_options=request_options)
        return _response.data

    def create_offer(
        self,
        *,
        data: CreateOfferRequestData,
        meta: typing.Optional[OfferRequestMeta] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> OfferResponse:
        """
        Create a new offer

        Parameters
        ----------
        data : CreateOfferRequestData
            Offer data for creation

        meta : typing.Optional[OfferRequestMeta]
            Metadata for the offer creation request

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        OfferResponse
            Single resource response - created offer resource

        Examples
        --------
        import datetime

        from kard import KardApi
        from kard.offers import (
            Attribution,
            CreateOfferRequestAttributes,
            CreateOfferRequestData,
        )

        client = KardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )
        client.offers.create_offer(
            data=CreateOfferRequestData(
                attributes=CreateOfferRequestAttributes(
                    name="name",
                    merchant_id="merchantId",
                    offer_type="INSTORE",
                    is_location_specific=True,
                    status="INACTIVE",
                    merchant_network="merchantNetwork",
                    opt_in_required=True,
                    qualified_issuer=["qualifiedIssuer", "qualifiedIssuer"],
                    commission_type="FLAT",
                    commission_value=1.1,
                    issuer_commissions_map={"issuerCommissionsMap": 1.1},
                    start_date=datetime.datetime.fromisoformat(
                        "2024-01-15 09:30:00+00:00",
                    ),
                    expiration_date=datetime.datetime.fromisoformat(
                        "2024-01-15 09:30:00+00:00",
                    ),
                    redeemable_once=True,
                    source="NATIONAL",
                    attribution=Attribution(
                        is_required=True,
                        events=["IMPRESSION", "IMPRESSION"],
                    ),
                ),
            ),
        )
        """
        _response = self._raw_client.create_offer(data=data, meta=meta, request_options=request_options)
        return _response.data

    def update_offer(
        self,
        offer_id: str,
        *,
        data: UpdateOfferRequestData,
        meta: typing.Optional[OfferRequestMeta] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> OfferResponse:
        """
        Update an existing offer (replaces all fields - omitted optional fields will be removed)

        Parameters
        ----------
        offer_id : str
            Unique identifier of the offer to update

        data : UpdateOfferRequestData
            Offer data for update

        meta : typing.Optional[OfferRequestMeta]
            Metadata for the offer update request

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        OfferResponse
            Single resource response - updated offer resource

        Examples
        --------
        import datetime

        from kard import KardApi
        from kard.offers import (
            Attribution,
            UpdateOfferRequestAttributes,
            UpdateOfferRequestData,
        )

        client = KardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )
        client.offers.update_offer(
            offer_id="offerId",
            data=UpdateOfferRequestData(
                attributes=UpdateOfferRequestAttributes(
                    name="name",
                    merchant_id="merchantId",
                    offer_type="INSTORE",
                    is_location_specific=True,
                    status="INACTIVE",
                    merchant_network="merchantNetwork",
                    opt_in_required=True,
                    qualified_issuer=["qualifiedIssuer", "qualifiedIssuer"],
                    commission_type="FLAT",
                    commission_value=1.1,
                    issuer_commissions_map={"issuerCommissionsMap": 1.1},
                    start_date=datetime.datetime.fromisoformat(
                        "2024-01-15 09:30:00+00:00",
                    ),
                    expiration_date=datetime.datetime.fromisoformat(
                        "2024-01-15 09:30:00+00:00",
                    ),
                    redeemable_once=True,
                    source="NATIONAL",
                    attribution=Attribution(
                        is_required=True,
                        events=["IMPRESSION", "IMPRESSION"],
                    ),
                ),
            ),
        )
        """
        _response = self._raw_client.update_offer(offer_id, data=data, meta=meta, request_options=request_options)
        return _response.data


class AsyncOffersClient:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawOffersClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> AsyncRawOffersClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawOffersClient
        """
        return self._raw_client

    async def get_offers(
        self,
        *,
        page_after: typing.Optional[str] = None,
        page_before: typing.Optional[str] = None,
        page_size: typing.Optional[int] = None,
        include: typing.Optional[str] = None,
        filter_name: typing.Optional[str] = None,
        filter_offer_type: typing.Optional[LocationType] = None,
        filter_merchant_id: typing.Optional[str] = None,
        filter_start_date: typing.Optional[str] = None,
        filter_expiration_date: typing.Optional[str] = None,
        filter_source: typing.Optional[Source] = None,
        filter_category: typing.Optional[str] = None,
        filter_status: typing.Optional[Status] = None,
        filter_id: typing.Optional[str] = None,
        filter_is_targeted: typing.Optional[bool] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> OffersListResponse:
        """
        Get offers

        Parameters
        ----------
        page_after : typing.Optional[str]
            Represents a cursor value, and if provided, returns the next page of results

        page_before : typing.Optional[str]
            Represents a cursor value, and if provided, returns the previous page of results

        page_size : typing.Optional[int]
            Maximum number of records to be returned [1 - 200], (default = 200)

        include : typing.Optional[str]
            Comma-separated list of related resources to include (e.g., merchant,locations,segments,audiences)

        filter_name : typing.Optional[str]
            Filter by offer name

        filter_offer_type : typing.Optional[LocationType]

        filter_merchant_id : typing.Optional[str]
            Filter by merchant ID

        filter_start_date : typing.Optional[str]
            Filter by start date (ISO 8601 format)

        filter_expiration_date : typing.Optional[str]
            Filter by expiration date (ISO 8601 format)

        filter_source : typing.Optional[Source]

        filter_category : typing.Optional[str]
            Filter by offer category

        filter_status : typing.Optional[Status]
            Filter by offer status

        filter_id : typing.Optional[str]
            Filter by id

        filter_is_targeted : typing.Optional[bool]
            Filter by isTargeted

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        OffersListResponse
            Multi resource response - paginated list of offers with metadata

        Examples
        --------
        import asyncio

        from kard import AsyncKardApi

        client = AsyncKardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )


        async def main() -> None:
            await client.offers.get_offers()


        asyncio.run(main())
        """
        _response = await self._raw_client.get_offers(
            page_after=page_after,
            page_before=page_before,
            page_size=page_size,
            include=include,
            filter_name=filter_name,
            filter_offer_type=filter_offer_type,
            filter_merchant_id=filter_merchant_id,
            filter_start_date=filter_start_date,
            filter_expiration_date=filter_expiration_date,
            filter_source=filter_source,
            filter_category=filter_category,
            filter_status=filter_status,
            filter_id=filter_id,
            filter_is_targeted=filter_is_targeted,
            request_options=request_options,
        )
        return _response.data

    async def get_offer_by_id(
        self,
        offer_id: str,
        *,
        include: typing.Optional[str] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> OfferResponse:
        """
        Retrieve a specific offer by ID

        Parameters
        ----------
        offer_id : str
            Unique identifier of the offer

        include : typing.Optional[str]
            Comma-separated list of related resources to include

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        OfferResponse
            Single resource response - single offer resource

        Examples
        --------
        import asyncio

        from kard import AsyncKardApi

        client = AsyncKardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )


        async def main() -> None:
            await client.offers.get_offer_by_id(
                offer_id="offerId",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.get_offer_by_id(offer_id, include=include, request_options=request_options)
        return _response.data

    async def create_offer(
        self,
        *,
        data: CreateOfferRequestData,
        meta: typing.Optional[OfferRequestMeta] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> OfferResponse:
        """
        Create a new offer

        Parameters
        ----------
        data : CreateOfferRequestData
            Offer data for creation

        meta : typing.Optional[OfferRequestMeta]
            Metadata for the offer creation request

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        OfferResponse
            Single resource response - created offer resource

        Examples
        --------
        import asyncio
        import datetime

        from kard import AsyncKardApi
        from kard.offers import (
            Attribution,
            CreateOfferRequestAttributes,
            CreateOfferRequestData,
        )

        client = AsyncKardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )


        async def main() -> None:
            await client.offers.create_offer(
                data=CreateOfferRequestData(
                    attributes=CreateOfferRequestAttributes(
                        name="name",
                        merchant_id="merchantId",
                        offer_type="INSTORE",
                        is_location_specific=True,
                        status="INACTIVE",
                        merchant_network="merchantNetwork",
                        opt_in_required=True,
                        qualified_issuer=["qualifiedIssuer", "qualifiedIssuer"],
                        commission_type="FLAT",
                        commission_value=1.1,
                        issuer_commissions_map={"issuerCommissionsMap": 1.1},
                        start_date=datetime.datetime.fromisoformat(
                            "2024-01-15 09:30:00+00:00",
                        ),
                        expiration_date=datetime.datetime.fromisoformat(
                            "2024-01-15 09:30:00+00:00",
                        ),
                        redeemable_once=True,
                        source="NATIONAL",
                        attribution=Attribution(
                            is_required=True,
                            events=["IMPRESSION", "IMPRESSION"],
                        ),
                    ),
                ),
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.create_offer(data=data, meta=meta, request_options=request_options)
        return _response.data

    async def update_offer(
        self,
        offer_id: str,
        *,
        data: UpdateOfferRequestData,
        meta: typing.Optional[OfferRequestMeta] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> OfferResponse:
        """
        Update an existing offer (replaces all fields - omitted optional fields will be removed)

        Parameters
        ----------
        offer_id : str
            Unique identifier of the offer to update

        data : UpdateOfferRequestData
            Offer data for update

        meta : typing.Optional[OfferRequestMeta]
            Metadata for the offer update request

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        OfferResponse
            Single resource response - updated offer resource

        Examples
        --------
        import asyncio
        import datetime

        from kard import AsyncKardApi
        from kard.offers import (
            Attribution,
            UpdateOfferRequestAttributes,
            UpdateOfferRequestData,
        )

        client = AsyncKardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )


        async def main() -> None:
            await client.offers.update_offer(
                offer_id="offerId",
                data=UpdateOfferRequestData(
                    attributes=UpdateOfferRequestAttributes(
                        name="name",
                        merchant_id="merchantId",
                        offer_type="INSTORE",
                        is_location_specific=True,
                        status="INACTIVE",
                        merchant_network="merchantNetwork",
                        opt_in_required=True,
                        qualified_issuer=["qualifiedIssuer", "qualifiedIssuer"],
                        commission_type="FLAT",
                        commission_value=1.1,
                        issuer_commissions_map={"issuerCommissionsMap": 1.1},
                        start_date=datetime.datetime.fromisoformat(
                            "2024-01-15 09:30:00+00:00",
                        ),
                        expiration_date=datetime.datetime.fromisoformat(
                            "2024-01-15 09:30:00+00:00",
                        ),
                        redeemable_once=True,
                        source="NATIONAL",
                        attribution=Attribution(
                            is_required=True,
                            events=["IMPRESSION", "IMPRESSION"],
                        ),
                    ),
                ),
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.update_offer(offer_id, data=data, meta=meta, request_options=request_options)
        return _response.data
