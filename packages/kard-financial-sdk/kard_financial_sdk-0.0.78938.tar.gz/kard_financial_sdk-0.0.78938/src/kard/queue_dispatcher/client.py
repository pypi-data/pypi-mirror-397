# This file was auto-generated by Fern from our API Definition.

import typing

from ..commons.types.organization_id import OrganizationId
from ..core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ..core.request_options import RequestOptions
from .raw_client import AsyncRawQueueDispatcherClient, RawQueueDispatcherClient
from .types.generic_notification_response_object import GenericNotificationResponseObject
from .types.notification_resource import NotificationResource

# this is used as the default value for optional parameters
OMIT = typing.cast(typing.Any, ...)


class QueueDispatcherClient:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawQueueDispatcherClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> RawQueueDispatcherClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawQueueDispatcherClient
        """
        return self._raw_client

    def dispatch_event(
        self,
        organization_id: OrganizationId,
        issuer_name: str,
        *,
        x_kard_issuer_id: str,
        data: typing.Sequence[NotificationResource],
        request_options: typing.Optional[RequestOptions] = None,
    ) -> GenericNotificationResponseObject:
        """
        Call this endpoint to dispatch an event to the notifications service queue.<br/>
        <b>Required scopes:</b> `notifications:write`

        Parameters
        ----------
        organization_id : OrganizationId

        issuer_name : str

        x_kard_issuer_id : str

        data : typing.Sequence[NotificationResource]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        GenericNotificationResponseObject

        Examples
        --------
        from kard import KardApi
        from kard.commons import RelationshipData, RelationshipSingle
        from kard.queue_dispatcher import NotificationResource

        client = KardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )
        client.queue_dispatcher.dispatch_event(
            organization_id="organizationId",
            issuer_name="issuerName",
            x_kard_issuer_id="X-Kard-IssuerID",
            data=[
                NotificationResource(
                    id="id",
                    type="type",
                    attributes={"attributes": {"key": "value"}},
                    relationships={
                        "relationships": RelationshipSingle(
                            data=RelationshipData(
                                type="type",
                                id="id",
                            ),
                        )
                    },
                ),
                NotificationResource(
                    id="id",
                    type="type",
                    attributes={"attributes": {"key": "value"}},
                    relationships={
                        "relationships": RelationshipSingle(
                            data=RelationshipData(
                                type="type",
                                id="id",
                            ),
                        )
                    },
                ),
            ],
        )
        """
        _response = self._raw_client.dispatch_event(
            organization_id, issuer_name, x_kard_issuer_id=x_kard_issuer_id, data=data, request_options=request_options
        )
        return _response.data


class AsyncQueueDispatcherClient:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawQueueDispatcherClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> AsyncRawQueueDispatcherClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawQueueDispatcherClient
        """
        return self._raw_client

    async def dispatch_event(
        self,
        organization_id: OrganizationId,
        issuer_name: str,
        *,
        x_kard_issuer_id: str,
        data: typing.Sequence[NotificationResource],
        request_options: typing.Optional[RequestOptions] = None,
    ) -> GenericNotificationResponseObject:
        """
        Call this endpoint to dispatch an event to the notifications service queue.<br/>
        <b>Required scopes:</b> `notifications:write`

        Parameters
        ----------
        organization_id : OrganizationId

        issuer_name : str

        x_kard_issuer_id : str

        data : typing.Sequence[NotificationResource]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        GenericNotificationResponseObject

        Examples
        --------
        import asyncio

        from kard import AsyncKardApi
        from kard.commons import RelationshipData, RelationshipSingle
        from kard.queue_dispatcher import NotificationResource

        client = AsyncKardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )


        async def main() -> None:
            await client.queue_dispatcher.dispatch_event(
                organization_id="organizationId",
                issuer_name="issuerName",
                x_kard_issuer_id="X-Kard-IssuerID",
                data=[
                    NotificationResource(
                        id="id",
                        type="type",
                        attributes={"attributes": {"key": "value"}},
                        relationships={
                            "relationships": RelationshipSingle(
                                data=RelationshipData(
                                    type="type",
                                    id="id",
                                ),
                            )
                        },
                    ),
                    NotificationResource(
                        id="id",
                        type="type",
                        attributes={"attributes": {"key": "value"}},
                        relationships={
                            "relationships": RelationshipSingle(
                                data=RelationshipData(
                                    type="type",
                                    id="id",
                                ),
                            )
                        },
                    ),
                ],
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.dispatch_event(
            organization_id, issuer_name, x_kard_issuer_id=x_kard_issuer_id, data=data, request_options=request_options
        )
        return _response.data
