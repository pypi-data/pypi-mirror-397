# This file was auto-generated by Fern from our API Definition.

import datetime as dt
import typing

import pydantic
import typing_extensions
from ...commons.types.commission_type import CommissionType
from ...commons.types.location_type import LocationType
from ...commons.types.source import Source
from ...core.pydantic_utilities import IS_PYDANTIC_V2, UniversalBaseModel
from ...core.serialization import FieldMetadata
from .attribution import Attribution
from .status import Status


class OfferAttributes(UniversalBaseModel):
    """
    Base attributes of an offer
    """

    name: str = pydantic.Field()
    """
    Name of the offer
    """

    offer_type: typing_extensions.Annotated[typing.Optional[LocationType], FieldMetadata(alias="offerType")] = None
    merchant_id: typing_extensions.Annotated[str, FieldMetadata(alias="merchantId")] = pydantic.Field()
    """
    Merchant Id in Kard's system
    """

    is_location_specific: typing_extensions.Annotated[
        typing.Optional[bool], FieldMetadata(alias="isLocationSpecific")
    ] = pydantic.Field(default=None)
    """
    Whether offer is specific to certain locations
    """

    status: Status = pydantic.Field()
    """
    Current status of the offer
    """

    merchant_network: typing_extensions.Annotated[str, FieldMetadata(alias="merchantNetwork")] = pydantic.Field()
    """
    Network the merchant belongs to
    """

    merchant_location_ids: typing_extensions.Annotated[
        typing.Optional[typing.List[str]], FieldMetadata(alias="merchantLocationIds")
    ] = pydantic.Field(default=None)
    """
    List of merchant location IDs where offer is valid
    """

    opt_in_required: typing_extensions.Annotated[typing.Optional[bool], FieldMetadata(alias="optInRequired")] = (
        pydantic.Field(default=None)
    )
    """
    Whether user opt-in is required
    """

    qualified_issuer: typing_extensions.Annotated[typing.List[str], FieldMetadata(alias="qualifiedIssuer")] = (
        pydantic.Field()
    )
    """
    List of qualified issuer IDs
    """

    commission_type: typing_extensions.Annotated[CommissionType, FieldMetadata(alias="commissionType")]
    commission_value: typing_extensions.Annotated[float, FieldMetadata(alias="commissionValue")] = pydantic.Field()
    """
    Commission value
    """

    issuer_commissions_map: typing_extensions.Annotated[
        typing.Dict[str, float], FieldMetadata(alias="issuerCommissionsMap")
    ] = pydantic.Field()
    """
    Commission mapping by issuer
    """

    user_commissions_map: typing_extensions.Annotated[
        typing.Optional[typing.Dict[str, float]], FieldMetadata(alias="userCommissionsMap")
    ] = pydantic.Field(default=None)
    """
    User commission mapping
    """

    is_custom: typing_extensions.Annotated[typing.Optional[bool], FieldMetadata(alias="isCustom")] = pydantic.Field(
        default=None
    )
    """
    Whether this is a custom offer
    """

    terms: typing.Optional[str] = pydantic.Field(default=None)
    """
    Terms and conditions for the offer
    """

    min_transaction_amount: typing_extensions.Annotated[
        typing.Optional[int], FieldMetadata(alias="minTransactionAmount")
    ] = pydantic.Field(default=None)
    """
    Minimum transaction amount required
    """

    max_transaction_amount: typing_extensions.Annotated[
        typing.Optional[int], FieldMetadata(alias="maxTransactionAmount")
    ] = pydantic.Field(default=None)
    """
    Maximum transaction amount allowed
    """

    min_reward_amount: typing_extensions.Annotated[typing.Optional[int], FieldMetadata(alias="minRewardAmount")] = (
        pydantic.Field(default=None)
    )
    """
    Minimum reward amount
    """

    max_reward_amount: typing_extensions.Annotated[typing.Optional[int], FieldMetadata(alias="maxRewardAmount")] = (
        pydantic.Field(default=None)
    )
    """
    Maximum reward amount
    """

    min_user_reward_amount: typing_extensions.Annotated[
        typing.Optional[int], FieldMetadata(alias="minUserRewardAmount")
    ] = pydantic.Field(default=None)
    """
    Minimum user reward amount
    """

    max_user_reward_amount: typing_extensions.Annotated[
        typing.Optional[int], FieldMetadata(alias="maxUserRewardAmount")
    ] = pydantic.Field(default=None)
    """
    Maximum user reward amount
    """

    start_date: typing_extensions.Annotated[dt.datetime, FieldMetadata(alias="startDate")] = pydantic.Field()
    """
    When the offer becomes active (ISO 8601 UTC)
    """

    expiration_date: typing_extensions.Annotated[dt.datetime, FieldMetadata(alias="expirationDate")] = pydantic.Field()
    """
    When the offer expires (ISO 8601 UTC)
    """

    redeemable_once: typing_extensions.Annotated[typing.Optional[bool], FieldMetadata(alias="redeemableOnce")] = (
        pydantic.Field(default=None)
    )
    """
    Whether offer can only be redeemed once per user
    """

    source: Source
    valid_offer_for_issuer: typing_extensions.Annotated[
        typing.Optional[typing.Dict[str, bool]], FieldMetadata(alias="validOfferForIssuer")
    ] = pydantic.Field(default=None)
    """
    Validation mapping by issuer
    """

    category: typing.Optional[str] = pydantic.Field(default=None)
    """
    Category of the offer
    """

    mcc: typing.Optional[typing.List[str]] = pydantic.Field(default=None)
    """
    Merchant category codes
    """

    display_always: typing_extensions.Annotated[typing.Optional[bool], FieldMetadata(alias="displayAlways")] = (
        pydantic.Field(default=None)
    )
    """
    Whether to always display this offer
    """

    audiences: typing.Optional[typing.List[str]] = pydantic.Field(default=None)
    """
    User audiences this offer targets
    """

    segments: typing.Optional[typing.List[str]] = pydantic.Field(default=None)
    """
    User segments this offer targets
    """

    partner_offer_id: typing_extensions.Annotated[typing.Optional[str], FieldMetadata(alias="partnerOfferId")] = (
        pydantic.Field(default=None)
    )
    """
    Partner's offer identifier
    """

    is_targeted: typing_extensions.Annotated[bool, FieldMetadata(alias="isTargeted")] = pydantic.Field()
    """
    If the offer is targeted or not (either has segments or audiences)
    """

    attribution: Attribution = pydantic.Field()
    """
    Attribution details for the offer
    """

    created_date: typing_extensions.Annotated[typing.Optional[dt.datetime], FieldMetadata(alias="createdDate")] = (
        pydantic.Field(default=None)
    )
    """
    When the offer was created (ISO 8601 UTC)
    """

    last_modified: typing_extensions.Annotated[typing.Optional[dt.datetime], FieldMetadata(alias="lastModified")] = (
        pydantic.Field(default=None)
    )
    """
    When the offer was last modified (ISO 8601 UTC)
    """

    if IS_PYDANTIC_V2:
        model_config: typing.ClassVar[pydantic.ConfigDict] = pydantic.ConfigDict(extra="allow", frozen=True)  # type: ignore # Pydantic v2
    else:

        class Config:
            frozen = True
            smart_union = True
            extra = pydantic.Extra.allow
