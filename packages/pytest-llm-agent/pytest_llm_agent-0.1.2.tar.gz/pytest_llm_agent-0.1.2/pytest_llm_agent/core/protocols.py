from typing import Protocol

from pytest_llm_agent.core.dtos import UnitTest

DEFAULT_DB_PATH = "pytest_llm_agent_registry.sqlite3"


class UnitTestDbRepositoryProtocol(Protocol):

    def create(self, unit_test: UnitTest) -> None: ...
    def get_by_id(self, id: str) -> UnitTest | None: ...
    def update_unit_test(self, unit_test: UnitTest) -> UnitTest: ...
    def delete_unit_test(self, id: str) -> None: ...
    def bulk_register_unit_tests(self, unit_tests: list[UnitTest]): ...

    def get_by_target(self, target: str) -> list[UnitTest]: ...
    def get_by_target_file(self, target_file: str) -> list[UnitTest]: ...
    def get_by_test_file(self, test_file: str) -> list[UnitTest]: ...
