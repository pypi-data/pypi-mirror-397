tool_description: |
  对于给定的A股股票代码（其他市场的股票请不要使用此工具），有现成的历史股价数据，其数据结构如下：
  ```
  名称	类型	描述
  ts_code	str	股票代码
  trade_date	str	交易日期
  open	float	开盘价
  high	float	最高价
  low	float	最低价
  close	float	收盘价
  pre_close	float	昨收价
  change	float	涨跌额
  pct_chg	float	涨跌幅
  vol	float	成交量 （手）
  amount	float	成交额 （千元）
  ```
  你需要输入你想分析的股票代码以及你的问题。该工具将为你生成并执行相应的代码，并返回结果。
  注意：
  1. 你无需编写任何代码——只需直接提问即可，例如：“过去一周涨了多少，有没有出现顶背离？”、“近期市场趋势如何？”、“MACD是否形成了金叉？”。
  2. 该工具只能基于上述数据结构中的数据回答问题，请勿提出需要超出该数据范围信息的问题。

code_prompt: |
  你是一个专业的金融数据分析助手。

  # A股股票代码
  {code}

  # 用户问题
  {query}

  # 当前时间
  {current_date}

  # 你的任务：写代码回答用户问题
  1. **通过A股股票代码和tushare工具(只有pro.daily函数)获取数据**，该数据包含股票每日前复权行情（字段包括：日期、开盘、收盘、最高、最低、成交量、成交额、振幅、涨跌幅、涨跌额、换手率）。
  2. **根据用户问题编写后续数据处理或分析代码**，使用 pandas 或其他必要库进行计算、筛选、统计等操作。
  3. **必须通过 `print(...)` 输出一个清晰、简洁、直接回答用户问题的结论**。输出内容应为人类可读的自然语言句子，不能仅输出DataFrame或原始数据。例如：根据前复权行情分析，该股票最近五日成交量相比前期有明显放量，平均成交量增长35%。MACD指标在最近五日出现金叉信号，DIF线上穿DEA线，显示短期趋势向好。

  # tushare dataframe 数据格式
  ```
  名称	类型	描述
  ts_code	str	股票代码
  trade_date	str	交易日期
  open	float	开盘价
  high	float	最高价
  low	float	最低价
  close	float	收盘价
  pre_close	float	昨收价
  change	float	涨跌额
  pct_chg	float	涨跌幅
  vol	float	成交量 （手）
  amount	float	成交额 （千元）
  ```

  # 注意事项
  - 请使用tushare工具的pro.daily函数（不要使用别的函数），并填入code等参数获取数据；
  - 所有代码必须可直接运行（请导入所需库）；
  - 结论必须通过 `print()` 输出；
  - 请考虑提供的当前日期，如需计算“最近N天”或“今年以来”等时间范围，请以该日期为基准；
  - 请确保逻辑严谨、计算准确。
  - 如果不是A股股票，print 无法计算非A股股票的数据。

  # 示例
  A股股票代码: 000001
  用户问题: 这只股票最近30个交易日的平均收盘价是多少？

  {example}

code_example: |
  ```python
  import tushare as ts
  import pandas as pd

  pro = ts.pro_api()

  # 获取数据
  df = pro.daily(ts_code='000001.SZ', start_date='20250101', end_date='20251201')

  df = df.sort_values(by='trade_date')

  # 获取最近30个交易日
  recent_30 = df.tail(30)

  # 计算平均收盘价
  avg_close = recent_30['close'].mean()

  # 输出结论
  print(f"截至2025年9月18日，该股票最近30个交易日的平均收盘价为：{avg_close:.2f} 元")
  ```