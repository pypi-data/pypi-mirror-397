{# Google Tag Manager - must be placed as high as possible in <head> #}
{% if gtm_container_id %}
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','{{ gtm_container_id }}');</script>
{% endif %}

{# Basic Meta #}
<title>{{ title }}</title>
{% if description %}<meta name="description" content="{{ description }}">{% endif %}
{% if robots %}<meta name="robots" content="{{ robots }}">{% endif %}
{% if canonical_url %}<link rel="canonical" href="{{ canonical_url }}">{% endif %}

{# Open Graph #}
<meta property="og:type" content="{{ og_type }}">
{% if og_title %}<meta property="og:title" content="{{ og_title }}">{% endif %}
{% if og_description %}<meta property="og:description" content="{{ og_description }}">{% endif %}
{% if og_image %}<meta property="og:image" content="{{ og_image }}">{% endif %}
{% if og_image_alt %}<meta property="og:image:alt" content="{{ og_image_alt }}">{% endif %}
{% if og_image_width %}<meta property="og:image:width" content="{{ og_image_width }}">{% endif %}
{% if og_image_height %}<meta property="og:image:height" content="{{ og_image_height }}">{% endif %}
{% if og_url %}<meta property="og:url" content="{{ og_url }}">{% endif %}
{% if og_site_name %}<meta property="og:site_name" content="{{ og_site_name }}">{% endif %}
<meta property="og:locale" content="{{ og_locale }}">

{# Twitter Card #}
<meta name="twitter:card" content="{{ twitter_card }}">
{% if twitter_site %}<meta name="twitter:site" content="@{{ twitter_site }}">{% endif %}
{% if twitter_title %}<meta name="twitter:title" content="{{ twitter_title }}">{% endif %}
{% if twitter_description %}<meta name="twitter:description" content="{{ twitter_description }}">{% endif %}
{% if twitter_image %}<meta name="twitter:image" content="{{ twitter_image }}">{% endif %}
{% if twitter_image_alt %}<meta name="twitter:image:alt" content="{{ twitter_image_alt }}">{% endif %}

{# Favicon #}
{% if favicon_svg %}<link rel="icon" type="image/svg+xml" href="{{ favicon_svg }}">{% endif %}
{% if favicon_png %}<link rel="icon" type="image/png" sizes="48x48" href="{{ favicon_png }}">{% endif %}
{% if apple_touch_icon %}<link rel="apple-touch-icon" sizes="180x180" href="{{ apple_touch_icon }}">{% endif %}

{# Custom Head HTML - output raw, no escaping #}
{% if custom_head_html %}{{ custom_head_html|safe }}{% endif %}
