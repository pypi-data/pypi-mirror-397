(self.webpackChunk_jupyterlab_application_top=self.webpackChunk_jupyterlab_application_top||[]).push([["1951"],{8394:function(e,t,r){e=r.nmd(e);var n,i,s,o,a,c,u,l,d,f,h,p="__lodash_hash_undefined__",g="[object Arguments]",m="[object Function]",y="[object Object]",v=/^\[object .+?Constructor\]$/,b=/^(?:0|[1-9]\d*)$/,_={};_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_[g]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object Boolean]"]=_["[object DataView]"]=_["[object Date]"]=_["[object Error]"]=_[m]=_["[object Map]"]=_["[object Number]"]=_[y]=_["[object RegExp]"]=_["[object Set]"]=_["[object String]"]=_["[object WeakMap]"]=!1;var T="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,w="object"==typeof self&&self&&self.Object===Object&&self,E=T||w||Function("return this")(),S=t&&!t.nodeType&&t,C=S&&e&&!e.nodeType&&e,R=C&&C.exports===S,k=R&&T.process,M=function(){try{var e=C&&C.require&&C.require("util").types;if(e)return e;return k&&k.binding&&k.binding("util")}catch(e){}}(),j=M&&M.isTypedArray,O=Array.prototype,P=Function.prototype,N=Object.prototype,x=E["__core-js_shared__"],L=P.toString,q=N.hasOwnProperty,A=(u=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",$=N.toString,D=L.call(Object),z=RegExp("^"+L.call(q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),I=R?E.Buffer:void 0,B=E.Symbol,W=E.Uint8Array,U=I?I.allocUnsafe:void 0,F=(l=Object.getPrototypeOf,d=Object,function(e){return l(d(e))}),J=Object.create,V=N.propertyIsEnumerable,H=O.splice,G=B?B.toStringTag:void 0,K=function(){try{var e=eh(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Q=I?I.isBuffer:void 0,X=Math.max,Y=Date.now,Z=eh(E,"Map"),ee=eh(Object,"create"),et=function(){function e(){}return function(t){if(!eC(t))return{};if(J)return J(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function er(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function en(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ei(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function es(e){var t=this.__data__=new en(e);this.size=t.size}function eo(e,t,r){(void 0===r||ev(e[t],r))&&(void 0!==r||t in e)||ec(e,t,r)}function ea(e,t){for(var r=e.length;r--;)if(ev(e[r][0],t))return r;return -1}function ec(e,t,r){"__proto__"==t&&K?K(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}er.prototype.clear=function(){this.__data__=ee?ee(null):{},this.size=0},er.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t},er.prototype.get=function(e){var t=this.__data__;if(ee){var r=t[e];return r===p?void 0:r}return q.call(t,e)?t[e]:void 0},er.prototype.has=function(e){var t=this.__data__;return ee?void 0!==t[e]:q.call(t,e)},er.prototype.set=function(e,t){var r=this.__data__;return this.size+=+!this.has(e),r[e]=ee&&void 0===t?p:t,this},en.prototype.clear=function(){this.__data__=[],this.size=0},en.prototype.delete=function(e){var t=this.__data__,r=ea(t,e);return!(r<0)&&(r==t.length-1?t.pop():H.call(t,r,1),--this.size,!0)},en.prototype.get=function(e){var t=this.__data__,r=ea(t,e);return r<0?void 0:t[r][1]},en.prototype.has=function(e){return ea(this.__data__,e)>-1},en.prototype.set=function(e,t){var r=this.__data__,n=ea(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},ei.prototype.clear=function(){this.size=0,this.__data__={hash:new er,map:new(Z||en),string:new er}},ei.prototype.delete=function(e){var t=ef(this,e).delete(e);return this.size-=!!t,t},ei.prototype.get=function(e){return ef(this,e).get(e)},ei.prototype.has=function(e){return ef(this,e).has(e)},ei.prototype.set=function(e,t){var r=ef(this,e),n=r.size;return r.set(e,t),this.size+=+(r.size!=n),this},es.prototype.clear=function(){this.__data__=new en,this.size=0},es.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},es.prototype.get=function(e){return this.__data__.get(e)},es.prototype.has=function(e){return this.__data__.has(e)},es.prototype.set=function(e,t){var r=this.__data__;if(r instanceof en){var n=r.__data__;if(!Z||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ei(n)}return r.set(e,t),this.size=r.size,this};var eu=function(e,t,r){for(var n=-1,i=Object(e),s=r(e),o=s.length;o--;){var a=s[++n];if(!1===t(i[a],a,i))break}return e};function el(e){var t;return null==e?void 0===e?"[object Undefined]":"[object Null]":G&&G in Object(e)?function(e){var t=q.call(e,G),r=e[G];try{e[G]=void 0;var n=!0}catch(e){}var i=$.call(e);return n&&(t?e[G]=r:delete e[G]),i}(e):(t=e,$.call(t))}function ed(e){return eR(e)&&el(e)==g}function ef(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function eh(e,t){var r,n=null==e?void 0:e[t];return!(!eC(n)||(r=n,A&&A in r))&&(eE(n)?z:v).test(function(e){if(null!=e){try{return L.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(n))?n:void 0}function ep(e,t){var r=typeof e;return!!(t=null==t?0x1fffffffffffff:t)&&("number"==r||"symbol"!=r&&b.test(e))&&e>-1&&e%1==0&&e<t}function eg(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||N)}function em(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var ey=(n=K?function(e,t){var r;return K(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0})}:eO,i=0,s=0,function(){var e=Y(),t=16-(e-s);if(s=e,t>0){if(++i>=800)return arguments[0]}else i=0;return n.apply(void 0,arguments)});function ev(e,t){return e===t||e!=e&&t!=t}var eb=ed(function(){return arguments}())?ed:function(e){return eR(e)&&q.call(e,"callee")&&!V.call(e,"callee")},e_=Array.isArray;function eT(e){return null!=e&&eS(e.length)&&!eE(e)}var ew=Q||function(){return!1};function eE(e){if(!eC(e))return!1;var t=el(e);return t==m||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function eS(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}function eC(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eR(e){return null!=e&&"object"==typeof e}var ek=j?function(e){return j(e)}:function(e){return eR(e)&&eS(e.length)&&!!_[el(e)]};function eM(e){return eT(e)?function(e,t){var r=e_(e),n=!r&&eb(e),i=!r&&!n&&ew(e),s=!r&&!n&&!i&&ek(e),o=r||n||i||s,a=o?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=a.length;for(var u in e)(t||q.call(e,u))&&!(o&&("length"==u||i&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ep(u,c)))&&a.push(u);return a}(e,!0):function(e){if(!eC(e)){var t=e,r=[];if(null!=t)for(var n in Object(t))r.push(n);return r}var i=eg(e),s=[];for(var o in e)"constructor"==o&&(i||!q.call(e,o))||s.push(o);return s}(e)}var ej=(f=function(e,t,r,n){!function e(t,r,n,i,s){t!==r&&eu(r,function(o,a){if(s||(s=new es),eC(o))!function(e,t,r,n,i,s,o){var a=em(e,r),c=em(t,r),u=o.get(c);if(u)return eo(e,r,u);var l=s?s(a,c,r+"",e,t,o):void 0,d=void 0===l;if(d){var f,h,p,g,m,v,b,_=e_(c),T=!_&&ew(c),w=!_&&!T&&ek(c);l=c,_||T||w?e_(a)?l=a:eR(f=a)&&eT(f)?l=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(a):T?(d=!1,l=function(e,t){if(t)return e.slice();var r=e.length,n=U?U(r):new e.constructor(r);return e.copy(n),n}(c,!0)):w?(d=!1,h=c,m=(new W(g=new(p=h.buffer).constructor(p.byteLength)).set(new W(p)),g),l=new h.constructor(m,h.byteOffset,h.length)):l=[]:function(e){if(!eR(e)||el(e)!=y)return!1;var t=F(e);if(null===t)return!0;var r=q.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&L.call(r)==D}(c)||eb(c)?(l=a,eb(a)?l=function(e,t,r,n){var i=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var a=t[s],c=void 0;void 0===c&&(c=e[a]),i?ec(r,a,c):function(e,t,r){var n=e[t];q.call(e,t)&&ev(n,r)&&(void 0!==r||t in e)||ec(e,t,r)}(r,a,c)}return r}(v=a,eM(v)):(!eC(a)||eE(a))&&(l="function"!=typeof(b=c).constructor||eg(b)?{}:et(F(b)))):d=!1}d&&(o.set(c,l),i(l,c,n,s,o),o.delete(c)),eo(e,r,l)}(t,r,a,n,e,i,s);else{var c=i?i(em(t,a),o,a+"",t,r,s):void 0;void 0===c&&(c=o),eo(t,a,c)}},eM)}(e,t,r,n)},ey((o=h=function(e,t){var r=-1,n=t.length,i=n>1?t[n-1]:void 0,s=n>2?t[2]:void 0;for(i=f.length>3&&"function"==typeof i?(n--,i):void 0,s&&function(e,t,r){if(!eC(r))return!1;var n=typeof t;return("number"==n?!!(eT(r)&&ep(t,r.length)):"string"==n&&t in r)&&ev(r[t],e)}(t[0],t[1],s)&&(i=n<3?void 0:i,n=1),e=Object(e);++r<n;){var o=t[r];o&&f(e,o,r,i)}return e},a=void 0,c=eO,a=X(void 0===a?o.length-1:a,0),function(){for(var e=arguments,t=-1,r=X(e.length-a,0),n=Array(r);++t<r;)n[t]=e[a+t];t=-1;for(var i=Array(a+1);++t<a;)i[t]=e[t];i[a]=c(n);switch(i.length){case 0:return o.call(this);case 1:return o.call(this,i[0]);case 2:return o.call(this,i[0],i[1]);case 3:return o.call(this,i[0],i[1],i[2])}return o.apply(this,i)}),h+""));function eO(e){return e}e.exports=ej},76439:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.BrowserMessageWriter=t.BrowserMessageReader=void 0,r(54615).default.install();let s=r(53281);i(r(53281),t);class o extends s.AbstractMessageReader{constructor(e){super(),this._onData=new s.Emitter,this._messageListener=e=>{this._onData.fire(e.data)},e.addEventListener("error",e=>this.fireError(e)),e.onmessage=this._messageListener}listen(e){return this._onData.event(e)}}t.BrowserMessageReader=o;class a extends s.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.addEventListener("error",e=>this.fireError(e))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.BrowserMessageWriter=a,t.createMessageConnection=function(e,t,r,n){return void 0===r&&(r=s.NullLogger),s.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,s.createMessageConnection)(e,t,r,n)}},54615:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(53281);class i extends n.AbstractMessageBuffer{constructor(e="utf-8"){super(e),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return i.emptyBuffer}fromString(e,t){return new TextEncoder().encode(e)}toString(e,t){return"ascii"===t?this.asciiDecoder.decode(e):new TextDecoder(t).decode(e)}asNative(e,t){return void 0===t?e:e.slice(0,t)}allocNative(e){return new Uint8Array(e)}}i.emptyBuffer=new Uint8Array(0);class s{constructor(e){this.socket=e,this._onData=new n.Emitter,this._messageListener=e=>{e.data.arrayBuffer().then(e=>{this._onData.fire(new Uint8Array(e))},()=>{(0,n.RAL)().console.error("Converting blob to array buffer failed.")})},this.socket.addEventListener("message",this._messageListener)}onClose(e){return this.socket.addEventListener("close",e),n.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),n.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),n.Disposable.create(()=>this.socket.removeEventListener("end",e))}onData(e){return this._onData.event(e)}}class o{constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener("close",e),n.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),n.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),n.Disposable.create(()=>this.socket.removeEventListener("end",e))}write(e,t){if("string"==typeof e){if(void 0!==t&&"utf-8"!==t)throw Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}}let a=new TextEncoder,c=Object.freeze({messageBuffer:Object.freeze({create:e=>new i(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{if("utf-8"!==t.charset)throw Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t.charset}`);return Promise.resolve(a.encode(JSON.stringify(e,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{if(!(e instanceof Uint8Array))throw Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(t.charset).decode(e)))}})}),stream:Object.freeze({asReadableStream:e=>new s(e),asWritableStream:e=>new o(e)}),console:console,timer:Object.freeze({setTimeout(e,t,...r){let n=setTimeout(e,t,...r);return{dispose:()=>clearTimeout(n)}},setImmediate(e,...t){let r=setTimeout(e,0,...t);return{dispose:()=>clearTimeout(r)}},setInterval(e,t,...r){let n=setInterval(e,t,...r);return{dispose:()=>clearInterval(n)}}})});function u(){return c}(u||(u={})).install=function(){n.RAL.install(c)},t.default=u},53281:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressType=t.ProgressToken=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.AbstractMessageBuffer=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.SharedArrayReceiverStrategy=t.SharedArraySenderStrategy=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.LRUCache=t.Touch=t.LinkedMap=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.Message=t.RAL=void 0,t.MessageStrategy=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=void 0;let n=r(96177);Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return n.Message}}),Object.defineProperty(t,"RequestType",{enumerable:!0,get:function(){return n.RequestType}}),Object.defineProperty(t,"RequestType0",{enumerable:!0,get:function(){return n.RequestType0}}),Object.defineProperty(t,"RequestType1",{enumerable:!0,get:function(){return n.RequestType1}}),Object.defineProperty(t,"RequestType2",{enumerable:!0,get:function(){return n.RequestType2}}),Object.defineProperty(t,"RequestType3",{enumerable:!0,get:function(){return n.RequestType3}}),Object.defineProperty(t,"RequestType4",{enumerable:!0,get:function(){return n.RequestType4}}),Object.defineProperty(t,"RequestType5",{enumerable:!0,get:function(){return n.RequestType5}}),Object.defineProperty(t,"RequestType6",{enumerable:!0,get:function(){return n.RequestType6}}),Object.defineProperty(t,"RequestType7",{enumerable:!0,get:function(){return n.RequestType7}}),Object.defineProperty(t,"RequestType8",{enumerable:!0,get:function(){return n.RequestType8}}),Object.defineProperty(t,"RequestType9",{enumerable:!0,get:function(){return n.RequestType9}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return n.ResponseError}}),Object.defineProperty(t,"ErrorCodes",{enumerable:!0,get:function(){return n.ErrorCodes}}),Object.defineProperty(t,"NotificationType",{enumerable:!0,get:function(){return n.NotificationType}}),Object.defineProperty(t,"NotificationType0",{enumerable:!0,get:function(){return n.NotificationType0}}),Object.defineProperty(t,"NotificationType1",{enumerable:!0,get:function(){return n.NotificationType1}}),Object.defineProperty(t,"NotificationType2",{enumerable:!0,get:function(){return n.NotificationType2}}),Object.defineProperty(t,"NotificationType3",{enumerable:!0,get:function(){return n.NotificationType3}}),Object.defineProperty(t,"NotificationType4",{enumerable:!0,get:function(){return n.NotificationType4}}),Object.defineProperty(t,"NotificationType5",{enumerable:!0,get:function(){return n.NotificationType5}}),Object.defineProperty(t,"NotificationType6",{enumerable:!0,get:function(){return n.NotificationType6}}),Object.defineProperty(t,"NotificationType7",{enumerable:!0,get:function(){return n.NotificationType7}}),Object.defineProperty(t,"NotificationType8",{enumerable:!0,get:function(){return n.NotificationType8}}),Object.defineProperty(t,"NotificationType9",{enumerable:!0,get:function(){return n.NotificationType9}}),Object.defineProperty(t,"ParameterStructures",{enumerable:!0,get:function(){return n.ParameterStructures}});let i=r(93352);Object.defineProperty(t,"LinkedMap",{enumerable:!0,get:function(){return i.LinkedMap}}),Object.defineProperty(t,"LRUCache",{enumerable:!0,get:function(){return i.LRUCache}}),Object.defineProperty(t,"Touch",{enumerable:!0,get:function(){return i.Touch}});let s=r(34019);Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return s.Disposable}});let o=r(62676);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return o.Event}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return o.Emitter}});let a=r(59850);Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return a.CancellationTokenSource}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return a.CancellationToken}});let c=r(74996);Object.defineProperty(t,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return c.SharedArraySenderStrategy}}),Object.defineProperty(t,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return c.SharedArrayReceiverStrategy}});let u=r(59085);Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return u.MessageReader}}),Object.defineProperty(t,"AbstractMessageReader",{enumerable:!0,get:function(){return u.AbstractMessageReader}}),Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return u.ReadableStreamMessageReader}});let l=r(23193);Object.defineProperty(t,"MessageWriter",{enumerable:!0,get:function(){return l.MessageWriter}}),Object.defineProperty(t,"AbstractMessageWriter",{enumerable:!0,get:function(){return l.AbstractMessageWriter}}),Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return l.WriteableStreamMessageWriter}});let d=r(89244);Object.defineProperty(t,"AbstractMessageBuffer",{enumerable:!0,get:function(){return d.AbstractMessageBuffer}});let f=r(90577);Object.defineProperty(t,"ConnectionStrategy",{enumerable:!0,get:function(){return f.ConnectionStrategy}}),Object.defineProperty(t,"ConnectionOptions",{enumerable:!0,get:function(){return f.ConnectionOptions}}),Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return f.NullLogger}}),Object.defineProperty(t,"createMessageConnection",{enumerable:!0,get:function(){return f.createMessageConnection}}),Object.defineProperty(t,"ProgressToken",{enumerable:!0,get:function(){return f.ProgressToken}}),Object.defineProperty(t,"ProgressType",{enumerable:!0,get:function(){return f.ProgressType}}),Object.defineProperty(t,"Trace",{enumerable:!0,get:function(){return f.Trace}}),Object.defineProperty(t,"TraceValues",{enumerable:!0,get:function(){return f.TraceValues}}),Object.defineProperty(t,"TraceFormat",{enumerable:!0,get:function(){return f.TraceFormat}}),Object.defineProperty(t,"SetTraceNotification",{enumerable:!0,get:function(){return f.SetTraceNotification}}),Object.defineProperty(t,"LogTraceNotification",{enumerable:!0,get:function(){return f.LogTraceNotification}}),Object.defineProperty(t,"ConnectionErrors",{enumerable:!0,get:function(){return f.ConnectionErrors}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return f.ConnectionError}}),Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return f.CancellationReceiverStrategy}}),Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return f.CancellationSenderStrategy}}),Object.defineProperty(t,"CancellationStrategy",{enumerable:!0,get:function(){return f.CancellationStrategy}}),Object.defineProperty(t,"MessageStrategy",{enumerable:!0,get:function(){return f.MessageStrategy}}),t.RAL=r(69590).default},59850:function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=t.CancellationToken=void 0;let s=r(69590),o=r(78585),a=r(62676);(i=n||(t.CancellationToken=n={})).None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:a.Event.None}),i.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:a.Event.None}),i.is=function(e){return e&&(e===i.None||e===i.Cancelled||o.boolean(e.isCancellationRequested)&&!!e.onCancellationRequested)};let c=Object.freeze(function(e,t){let r=(0,s.default)().timer.setTimeout(e.bind(t),0);return{dispose(){r.dispose()}}});class u{constructor(){this._isCancelled=!1}cancel(){!this._isCancelled&&(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?c:(this._emitter||(this._emitter=new a.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new u),this._token}cancel(){this._token?this._token.cancel():this._token=n.Cancelled}dispose(){this._token?this._token instanceof u&&this._token.dispose():this._token=n.None}}},90577:function(e,t,r){"use strict";var n,i,s,o,a,c,u,l,d,f,h,p,g,m,y,v,b,_,T,w,E,S,C,R,k,M,j,O,P;Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.ConnectionOptions=t.MessageStrategy=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.RequestCancellationReceiverStrategy=t.IdCancellationReceiverStrategy=t.ConnectionStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=t.NullLogger=t.ProgressType=t.ProgressToken=void 0;let N=r(69590),x=r(78585),L=r(96177),q=r(93352),A=r(62676),$=r(59850);(n||(n={})).type=new L.NotificationType("$/cancelRequest"),(i||(t.ProgressToken=i={})).is=function(e){return"string"==typeof e||"number"==typeof e},(s||(s={})).type=new L.NotificationType("$/progress"),t.ProgressType=class{constructor(){}},(o||(o={})).is=function(e){return x.func(e)},t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),(w=a||(t.Trace=a={}))[w.Off=0]="Off",w[w.Messages=1]="Messages",w[w.Compact=2]="Compact",w[w.Verbose=3]="Verbose",(E=c||(t.TraceValues=c={})).Off="off",E.Messages="messages",E.Compact="compact",E.Verbose="verbose",(S=a||(t.Trace=a={})).fromString=function(e){if(!x.string(e))return S.Off;switch(e=e.toLowerCase()){case"off":default:return S.Off;case"messages":return S.Messages;case"compact":return S.Compact;case"verbose":return S.Verbose}},S.toString=function(e){switch(e){case S.Off:return"off";case S.Messages:return"messages";case S.Compact:return"compact";case S.Verbose:return"verbose";default:return"off"}},(C=u||(t.TraceFormat=u={})).Text="text",C.JSON="json",(R=u||(t.TraceFormat=u={})).fromString=function(e){return x.string(e)&&"json"===(e=e.toLowerCase())?R.JSON:R.Text},(l||(t.SetTraceNotification=l={})).type=new L.NotificationType("$/setTrace"),(d||(t.LogTraceNotification=d={})).type=new L.NotificationType("$/logTrace"),(k=f||(t.ConnectionErrors=f={}))[k.Closed=1]="Closed",k[k.Disposed=2]="Disposed",k[k.AlreadyListening=3]="AlreadyListening";class D extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,D.prototype)}}t.ConnectionError=D,(h||(t.ConnectionStrategy=h={})).is=function(e){return e&&x.func(e.cancelUndispatched)},(p||(t.IdCancellationReceiverStrategy=p={})).is=function(e){return e&&(void 0===e.kind||"id"===e.kind)&&x.func(e.createCancellationTokenSource)&&(void 0===e.dispose||x.func(e.dispose))},(g||(t.RequestCancellationReceiverStrategy=g={})).is=function(e){return e&&"request"===e.kind&&x.func(e.createCancellationTokenSource)&&(void 0===e.dispose||x.func(e.dispose))},(M=m||(t.CancellationReceiverStrategy=m={})).Message=Object.freeze({createCancellationTokenSource:e=>new $.CancellationTokenSource}),M.is=function(e){return p.is(e)||g.is(e)},(j=y||(t.CancellationSenderStrategy=y={})).Message=Object.freeze({sendCancellation:(e,t)=>e.sendNotification(n.type,{id:t}),cleanup(e){}}),j.is=function(e){return e&&x.func(e.sendCancellation)&&x.func(e.cleanup)},(O=v||(t.CancellationStrategy=v={})).Message=Object.freeze({receiver:m.Message,sender:y.Message}),O.is=function(e){return e&&m.is(e.receiver)&&y.is(e.sender)},(b||(t.MessageStrategy=b={})).is=function(e){return e&&x.func(e.handleMessage)},(_||(t.ConnectionOptions=_={})).is=function(e){return e&&(v.is(e.cancellationStrategy)||h.is(e.connectionStrategy)||b.is(e.messageStrategy))},(P=T||(T={}))[P.New=1]="New",P[P.Listening=2]="Listening",P[P.Closed=3]="Closed",P[P.Disposed=4]="Disposed",t.createMessageConnection=function(e,r,c,h){let g,m,y,_,w=void 0!==c?c:t.NullLogger,E=0,S=0,C=0,R=new Map,k=new Map,M=new Map,j=new q.LinkedMap,O=new Map,P=new Set,z=new Map,I=a.Off,B=u.Text,W=T.New,U=new A.Emitter,F=new A.Emitter,J=new A.Emitter,V=new A.Emitter,H=new A.Emitter,G=h&&h.cancellationStrategy?h.cancellationStrategy:v.Message;function K(e){if(null===e)throw Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function Q(e){}function X(){return W===T.Listening}function Y(){return W===T.Closed}function Z(){return W===T.Disposed}function ee(){(W===T.New||W===T.Listening)&&(W=T.Closed,F.fire(void 0))}function et(e){L.Message.isRequest(e)?function(e){let t,n;if(Z())return;function i(t,n,i){let s={jsonrpc:"2.0",id:e.id};t instanceof L.ResponseError?s.error=t.toJson():s.result=void 0===t?null:t,ei(s,n,i),r.write(s).catch(()=>w.error("Sending response failed."))}function s(t,n,i){let s={jsonrpc:"2.0",id:e.id,error:t.toJson()};ei(s,n,i),r.write(s).catch(()=>w.error("Sending response failed."))}var o,c,l=e;if(I!==a.Off&&m)if(B===u.Text){let e;(I===a.Verbose||I===a.Compact)&&l.params&&(e=`Params: ${en(l.params)}

`),m.log(`Received request '${l.method} - (${l.id})'.`,e)}else eo("receive-request",l);let d=R.get(e.method);d&&(t=d.type,n=d.handler);let f=Date.now();if(n||y){let a=e.id??String(Date.now()),u=p.is(G.receiver)?G.receiver.createCancellationTokenSource(a):G.receiver.createCancellationTokenSource(e);null!==e.id&&P.has(e.id)&&u.cancel(),null!==e.id&&z.set(a,u);try{let l;if(n)if(void 0===e.params){if(void 0!==t&&0!==t.numberOfParams)return void s(new L.ResponseError(L.ErrorCodes.InvalidParams,`Request ${e.method} defines ${t.numberOfParams} params but received none.`),e.method,f);l=n(u.token)}else if(Array.isArray(e.params)){if(void 0!==t&&t.parameterStructures===L.ParameterStructures.byName)return void s(new L.ResponseError(L.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,f);l=n(...e.params,u.token)}else{if(void 0!==t&&t.parameterStructures===L.ParameterStructures.byPosition)return void s(new L.ResponseError(L.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,f);l=n(e.params,u.token)}else y&&(l=y(e.method,e.params,u.token));let d=l;if(l)d.then?d.then(t=>{z.delete(a),i(t,e.method,f)},t=>{z.delete(a),t instanceof L.ResponseError?s(t,e.method,f):t&&x.string(t.message)?s(new L.ResponseError(L.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,f):s(new L.ResponseError(L.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,f)}):(z.delete(a),i(l,e.method,f));else{let t;z.delete(a),o=l,c=e.method,void 0===o&&(o=null),t={jsonrpc:"2.0",id:e.id,result:o},ei(t,c,f),r.write(t).catch(()=>w.error("Sending response failed."))}}catch(t){z.delete(a),t instanceof L.ResponseError?i(t,e.method,f):t&&x.string(t.message)?s(new L.ResponseError(L.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,f):s(new L.ResponseError(L.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,f)}}else s(new L.ResponseError(L.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,f)}(e):L.Message.isNotification(e)?function(e){let t,r;if(!Z()){if(e.method===n.type.method){let t=e.params.id;P.delete(t),es(e);return}{let n=k.get(e.method);n&&(t=n.handler,r=n.type)}if(t||_)try{if(es(e),t)if(void 0===e.params)void 0!==r&&0!==r.numberOfParams&&r.parameterStructures!==L.ParameterStructures.byName&&w.error(`Notification ${e.method} defines ${r.numberOfParams} params but received none.`),t();else if(Array.isArray(e.params)){let n=e.params;e.method===s.type.method&&2===n.length&&i.is(n[0])?t({token:n[0],value:n[1]}):(void 0!==r&&(r.parameterStructures===L.ParameterStructures.byName&&w.error(`Notification ${e.method} defines parameters by name but received parameters by position`),r.numberOfParams!==e.params.length&&w.error(`Notification ${e.method} defines ${r.numberOfParams} params but received ${n.length} arguments`)),t(...n))}else void 0!==r&&r.parameterStructures===L.ParameterStructures.byPosition&&w.error(`Notification ${e.method} defines parameters by position but received parameters by name`),t(e.params);else _&&_(e.method,e.params)}catch(t){t.message?w.error(`Notification handler '${e.method}' failed with message: ${t.message}`):w.error(`Notification handler '${e.method}' failed unexpectedly.`)}else J.fire(e)}}(e):L.Message.isResponse(e)?function(e){if(!Z())if(null===e.id)e.error?w.error(`Received response message without id: Error is: 
${JSON.stringify(e.error,void 0,4)}`):w.error("Received response message without id. No further error information provided.");else{let t=e.id,r=O.get(t);if(function(e,t){if(I!==a.Off&&m)if(B===u.Text){let r;if((I===a.Verbose||I===a.Compact)&&(e.error&&e.error.data?r=`Error data: ${en(e.error.data)}

`:e.result?r=`Result: ${en(e.result)}

`:void 0===e.error&&(r="No result returned.\n\n")),t){let n=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";m.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${n}`,r)}else m.log(`Received response ${e.id} without active response promise.`,r)}else eo("receive-response",e)}(e,r),void 0!==r){O.delete(t);try{if(e.error){let t=e.error;r.reject(new L.ResponseError(t.code,t.message,t.data))}else if(void 0!==e.result)r.resolve(e.result);else throw Error("Should never happen.")}catch(e){e.message?w.error(`Response handler '${r.method}' failed with message: ${e.message}`):w.error(`Response handler '${r.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return w.error("Received empty message.");if(w.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(e,null,4)}`),x.string(e.id)||x.number(e.id)){let t=e.id,r=O.get(t);r&&r.reject(Error("The received response has neither a result nor an error property."))}}(e)}e.onClose(ee),e.onError(function(e){U.fire([e,void 0,void 0])}),r.onClose(ee),r.onError(function(e){U.fire(e)});let er=e=>{try{if(L.Message.isNotification(e)&&e.method===n.type.method){let t=e.params.id,n=K(t),i=j.get(n);if(L.Message.isRequest(i)){let s=h?.connectionStrategy,o=s&&s.cancelUndispatched?s.cancelUndispatched(i,Q):Q(i);if(o&&(void 0!==o.error||void 0!==o.result)){j.delete(n),z.delete(t),o.id=i.id,ei(o,e.method,Date.now()),r.write(o).catch(()=>w.error("Sending response for canceled message failed."));return}}let s=z.get(t);if(void 0!==s){s.cancel(),es(e);return}P.add(t)}var t,i=j;L.Message.isRequest(e)?i.set(K(e.id),e):L.Message.isResponse(e)?i.set(null===(t=e.id)?"res-unknown-"+(++C).toString():"res-"+t.toString(),e):i.set("not-"+(++S).toString(),e)}finally{!function e(){g||0===j.size||(g=(0,N.default)().timer.setImmediate(()=>{g=void 0,function(){if(0===j.size)return;let t=j.shift();try{let e=h?.messageStrategy;b.is(e)?e.handleMessage(t,et):et(t)}finally{e()}}()}))}()}};function en(e){if(null!=e)switch(I){case a.Verbose:return JSON.stringify(e,null,4);case a.Compact:return JSON.stringify(e);default:return}}function ei(e,t,r){if(I!==a.Off&&m)if(B===u.Text){let n;(I===a.Verbose||I===a.Compact)&&(e.error&&e.error.data?n=`Error data: ${en(e.error.data)}

`:e.result?n=`Result: ${en(e.result)}

`:void 0===e.error&&(n="No result returned.\n\n")),m.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-r}ms`,n)}else eo("send-response",e)}function es(e){if(I!==a.Off&&m&&e.method!==d.type.method)if(B===u.Text){let t;(I===a.Verbose||I===a.Compact)&&(t=e.params?`Params: ${en(e.params)}

`:"No parameters provided.\n\n"),m.log(`Received notification '${e.method}'.`,t)}else eo("receive-notification",e)}function eo(e,t){if(!m||I===a.Off)return;let r={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};m.log(r)}function ea(){if(Y())throw new D(f.Closed,"Connection is closed.");if(Z())throw new D(f.Disposed,"Connection is disposed.")}function ec(e){return void 0===e?null:e}function eu(e){if(null!==e)return e}function el(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function ed(e,t){switch(e){case L.ParameterStructures.auto:if(el(t))return eu(t);return[ec(t)];case L.ParameterStructures.byName:if(!el(t))throw Error("Received parameters by name but param is not an object literal.");return eu(t);case L.ParameterStructures.byPosition:return[ec(t)];default:throw Error(`Unknown parameter structure ${e.toString()}`)}}function ef(e,t){let r,n=e.numberOfParams;switch(n){case 0:r=void 0;break;case 1:r=ed(e.parameterStructures,t[0]);break;default:r=[];for(let e=0;e<t.length&&e<n;e++)r.push(ec(t[e]));if(t.length<n)for(let e=t.length;e<n;e++)r.push(null)}return r}let eh={sendNotification:(e,...t)=>{let n,i;if(ea(),x.string(e)){n=e;let r=t[0],s=0,o=L.ParameterStructures.auto;L.ParameterStructures.is(r)&&(s=1,o=r);let a=t.length,c=a-s;switch(c){case 0:i=void 0;break;case 1:i=ed(o,t[s]);break;default:if(o===L.ParameterStructures.byName)throw Error(`Received ${c} parameters for 'by Name' notification parameter structure.`);i=t.slice(s,a).map(e=>ec(e))}}else n=e.method,i=ef(e,t);let s={jsonrpc:"2.0",method:n,params:i};if(I!==a.Off&&m)if(B===u.Text){let e;(I===a.Verbose||I===a.Compact)&&(e=s.params?`Params: ${en(s.params)}

`:"No parameters provided.\n\n"),m.log(`Sending notification '${s.method}'.`,e)}else eo("send-notification",s);return r.write(s).catch(e=>{throw w.error("Sending notification failed."),e})},onNotification:(e,t)=>{let r;return ea(),x.func(e)?_=e:t&&(x.string(e)?(r=e,k.set(e,{type:void 0,handler:t})):(r=e.method,k.set(e.method,{type:e,handler:t}))),{dispose:()=>{void 0!==r?k.delete(r):_=void 0}}},onProgress:(e,t,r)=>{if(M.has(t))throw Error(`Progress handler for token ${t} already registered`);return M.set(t,r),{dispose:()=>{M.delete(t)}}},sendProgress:(e,t,r)=>eh.sendNotification(s.type,{token:t,value:r}),onUnhandledProgress:V.event,sendRequest:(e,...t)=>{let n,i,s,o;if(ea(),!X())throw Error("Call listen() first.");if(x.string(e)){n=e;let r=t[0],s=t[t.length-1],a=0,c=L.ParameterStructures.auto;L.ParameterStructures.is(r)&&(a=1,c=r);let u=t.length;$.CancellationToken.is(s)&&(u-=1,o=s);let l=u-a;switch(l){case 0:i=void 0;break;case 1:i=ed(c,t[a]);break;default:if(c===L.ParameterStructures.byName)throw Error(`Received ${l} parameters for 'by Name' request parameter structure.`);i=t.slice(a,u).map(e=>ec(e))}}else{n=e.method,i=ef(e,t);let r=e.numberOfParams;o=$.CancellationToken.is(t[r])?t[r]:void 0}let c=E++;o&&(s=o.onCancellationRequested(()=>{let e=G.sender.sendCancellation(eh,c);return void 0===e?(w.log(`Received no promise from cancellation strategy when cancelling id ${c}`),Promise.resolve()):e.catch(()=>{w.log(`Sending cancellation messages for id ${c} failed`)})}));let l={jsonrpc:"2.0",id:c,method:n,params:i};if(I!==a.Off&&m)if(B===u.Text){let e;(I===a.Verbose||I===a.Compact)&&l.params&&(e=`Params: ${en(l.params)}

`),m.log(`Sending request '${l.method} - (${l.id})'.`,e)}else eo("send-request",l);return"function"==typeof G.sender.enableCancellation&&G.sender.enableCancellation(l),new Promise(async(e,t)=>{let i={method:n,timerStart:Date.now(),resolve:t=>{e(t),G.sender.cleanup(c),s?.dispose()},reject:e=>{t(e),G.sender.cleanup(c),s?.dispose()}};try{await r.write(l),O.set(c,i)}catch(e){throw w.error("Sending request failed."),i.reject(new L.ResponseError(L.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),e}})},onRequest:(e,t)=>{ea();let r=null;return o.is(e)?(r=void 0,y=e):x.string(e)?(r=null,void 0!==t&&(r=e,R.set(e,{handler:t,type:void 0}))):void 0!==t&&(r=e.method,R.set(e.method,{type:e,handler:t})),{dispose:()=>{null!==r&&(void 0!==r?R.delete(r):y=void 0)}}},hasPendingResponse:()=>O.size>0,trace:async(e,t,r)=>{let n=!1,i=u.Text;void 0!==r&&(x.boolean(r)?n=r:(n=r.sendNotification||!1,i=r.traceFormat||u.Text)),I=e,B=i,m=I===a.Off?void 0:t,!n||Y()||Z()||await eh.sendNotification(l.type,{value:a.toString(e)})},onError:U.event,onClose:F.event,onUnhandledNotification:J.event,onDispose:H.event,end:()=>{r.end()},dispose:()=>{if(Z())return;W=T.Disposed,H.fire(void 0);let t=new L.ResponseError(L.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let e of O.values())e.reject(t);O=new Map,z=new Map,P=new Set,j=new q.LinkedMap,x.func(r.dispose)&&r.dispose(),x.func(e.dispose)&&e.dispose()},listen:()=>{if(ea(),X())throw new D(f.AlreadyListening,"Connection is already listening");W=T.Listening,e.listen(er)},inspect:()=>{(0,N.default)().console.log("inspect")}};return eh.onNotification(d.type,e=>{if(I===a.Off||!m)return;let t=I===a.Verbose||I===a.Compact;m.log(e.message,t?e.verbose:void 0)}),eh.onNotification(s.type,e=>{let t=M.get(e.token);t?t(e.value):V.fire(e)}),eh}},34019:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=void 0,(r||(t.Disposable=r={})).create=function(e){return{dispose:e}}},62676:function(e,t,r){"use strict";var n,i;let s;Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;let o=r(69590);i=n||(t.Event=n={}),s={dispose(){}},i.None=function(){return s};class a{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let r=!1;for(let n=0,i=this._callbacks.length;n<i;n++)if(this._callbacks[n]===e)if(this._contexts[n]===t){this._callbacks.splice(n,1),this._contexts.splice(n,1);return}else r=!0;if(r)throw Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let t=[],r=this._callbacks.slice(0),n=this._contexts.slice(0);for(let i=0,s=r.length;i<s;i++)try{t.push(r[i].apply(n[i],e))}catch(e){(0,o.default)().console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class c{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,r)=>{this._callbacks||(this._callbacks=new a),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);let n={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),n.dispose=c._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(n),n}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=c,c._noop=function(){}},78585:function(e,t){"use strict";function r(e){return"string"==typeof e||e instanceof String}function n(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=n,t.stringArray=function(e){return n(e)&&e.every(e=>r(e))}},93352:function(e,t){"use strict";var r,n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=void 0,(i=n||(t.Touch=n={})).None=0,i.First=1,i.AsOld=i.First,i.Last=2,i.AsNew=i.Last;class s{constructor(){this[r]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=n.None){let r=this._map.get(e);if(r)return t!==n.None&&this.touch(r,t),r.value}set(e,t,r=n.None){let i=this._map.get(e);if(i)i.value=t,r!==n.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case n.None:this.addItemLast(i);break;case n.First:this.addItemFirst(i);break;case n.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let r=this._state,n=this._head;for(;n;){if(t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),this._state!==r)throw Error("LinkedMap got modified during iteration.");n=n.next}}keys(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw Error("LinkedMap got modified during iteration.");if(!t)return{value:void 0,done:!0};{let e={value:t.key,done:!1};return t=t.next,e}}};return r}values(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw Error("LinkedMap got modified during iteration.");if(!t)return{value:void 0,done:!0};{let e={value:t.value,done:!1};return t=t.next,e}}};return r}entries(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw Error("LinkedMap got modified during iteration.");if(!t)return{value:void 0,done:!0};{let e={value:[t.key,t.value],done:!1};return t=t.next,e}}};return r}[(r=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,r=this.size;for(;t&&r>e;)this._map.delete(t.key),t=t.next,r--;this._head=t,this._size=r,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail)if(this._head)e.next=this._head,this._head.previous=e;else throw Error("Invalid list");else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail)if(this._tail)e.previous=this._tail,this._tail.next=e;else throw Error("Invalid list");else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,r=e.previous;if(!t||!r)throw Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw Error("Invalid list");if(t===n.First||t===n.Last){if(t===n.First){if(e===this._head)return;let t=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(t.previous=r,r.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===n.Last){if(e===this._tail)return;let t=e.next,r=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=r,r.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){for(let[t,r]of(this.clear(),e))this.set(t,r)}}t.LinkedMap=s,t.LRUCache=class extends s{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=n.AsNew){return super.get(e,t)}peek(e){return super.get(e,n.None)}set(e,t){return super.set(e,t,n.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},89244:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMessageBuffer=void 0,t.AbstractMessageBuffer=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(0===this._chunks.length)return;let t=0,r=0,n=0,i=0;e:for(;r<this._chunks.length;){let e=this._chunks[r];for(n=0;n<e.length;){switch(e[n]){case 13:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case 10:switch(t){case 1:t=2;break;case 3:t=4,n++;break e;default:t=0}break;default:t=0}n++}i+=e.byteLength,r++}if(4!==t)return;let s=this._read(i+n),o=new Map,a=this.toString(s,"ascii").split("\r\n");if(a.length<2)return o;for(let t=0;t<a.length-2;t++){let r=a[t],n=r.indexOf(":");if(-1===n)throw Error(`Message header must separate key and value using ':'
${r}`);let i=r.substr(0,n),s=r.substr(n+1).trim();o.set(e?i.toLowerCase():i,s)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){let t=this._chunks[0],r=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,r}let t=this.allocNative(e),r=0;for(;e>0;){let n=this._chunks[0];if(n.byteLength>e){let i=n.slice(0,e);t.set(i,r),r+=e,this._chunks[0]=n.slice(e),this._totalLength-=e,e-=e}else t.set(n,r),r+=n.byteLength,this._chunks.shift(),this._totalLength-=n.byteLength,e-=n.byteLength}return t}}},59085:function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=void 0;let s=r(69590),o=r(78585),a=r(62676),c=r(94323);(n||(t.MessageReader=n={})).is=function(e){return e&&o.func(e.listen)&&o.func(e.dispose)&&o.func(e.onError)&&o.func(e.onClose)&&o.func(e.onPartialMessage)};class u{constructor(){this.errorEmitter=new a.Emitter,this.closeEmitter=new a.Emitter,this.partialMessageEmitter=new a.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:Error(`Reader received error. Reason: ${o.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=u,(i||(i={})).fromOptions=function(e){let t,r,n,i=new Map,o=new Map;if(void 0===e||"string"==typeof e)t=e??"utf-8";else{if(t=e.charset??"utf-8",void 0!==e.contentDecoder&&(r=e.contentDecoder,i.set(r.name,r)),void 0!==e.contentDecoders)for(let t of e.contentDecoders)i.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(n=e.contentTypeDecoder,o.set(n.name,n)),void 0!==e.contentTypeDecoders)for(let t of e.contentTypeDecoders)o.set(t.name,t)}return void 0===n&&(n=(0,s.default)().applicationJson.decoder,o.set(n.name,n)),{charset:t,contentDecoder:r,contentDecoders:i,contentTypeDecoder:n,contentTypeDecoders:o}},t.ReadableStreamMessageReader=class extends u{constructor(e,t){super(),this.readable=e,this.options=i.fromOptions(t),this.buffer=(0,s.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new c.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let t=this.readable.onData(e=>{this.onData(e)});return this.readable.onError(e=>this.fireError(e)),this.readable.onClose(()=>this.fireClose()),t}onData(e){try{for(this.buffer.append(e);;){if(-1===this.nextMessageLength){let e=this.buffer.tryReadHeaders(!0);if(!e)return;let t=e.get("content-length");if(!t)return void this.fireError(Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(e))}`));let r=parseInt(t);if(isNaN(r))return void this.fireError(Error(`Content-Length value must be a number. Got ${t}`));this.nextMessageLength=r}let e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let t=void 0!==this.options.contentDecoder?await this.options.contentDecoder.decode(e):e,r=await this.options.contentTypeDecoder.decode(t,this.options);this.callback(r)}).catch(e=>{this.fireError(e)})}}catch(e){this.fireError(e)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=(0,s.default)().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}},23193:function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=void 0;let s=r(69590),o=r(78585),a=r(94323),c=r(62676);(n||(t.MessageWriter=n={})).is=function(e){return e&&o.func(e.dispose)&&o.func(e.onClose)&&o.func(e.onError)&&o.func(e.write)};class u{constructor(){this.errorEmitter=new c.Emitter,this.closeEmitter=new c.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:Error(`Writer received error. Reason: ${o.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=u,(i||(i={})).fromOptions=function(e){return void 0===e||"string"==typeof e?{charset:e??"utf-8",contentTypeEncoder:(0,s.default)().applicationJson.encoder}:{charset:e.charset??"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:e.contentTypeEncoder??(0,s.default)().applicationJson.encoder}},t.WriteableStreamMessageWriter=class extends u{constructor(e,t){super(),this.writable=e,this.options=i.fromOptions(t),this.errorCount=0,this.writeSemaphore=new a.Semaphore(1),this.writable.onError(e=>this.fireError(e)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e).then(t=>{let r=[];return r.push("Content-Length: ",t.byteLength.toString(),"\r\n"),r.push("\r\n"),this.doWrite(e,r,t)},e=>{throw this.fireError(e),e}))}async doWrite(e,t,r){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(r)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}},96177:function(e,t,r){"use strict";var n,i,s,o;Object.defineProperty(t,"__esModule",{value:!0}),t.Message=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType=t.RequestType0=t.AbstractMessageSignature=t.ParameterStructures=t.ResponseError=t.ErrorCodes=void 0;let a=r(78585);(s=n||(t.ErrorCodes=n={})).ParseError=-32700,s.InvalidRequest=-32600,s.MethodNotFound=-32601,s.InvalidParams=-32602,s.InternalError=-32603,s.jsonrpcReservedErrorRangeStart=-32099,s.serverErrorStart=-32099,s.MessageWriteError=-32099,s.MessageReadError=-32098,s.PendingResponseRejected=-32097,s.ConnectionInactive=-32096,s.ServerNotInitialized=-32002,s.UnknownErrorCode=-32001,s.jsonrpcReservedErrorRangeEnd=-32e3,s.serverErrorEnd=-32e3;class c extends Error{constructor(e,t,r){super(t),this.code=a.number(e)?e:n.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,c.prototype)}toJson(){let e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),e}}t.ResponseError=c;class u{constructor(e){this.kind=e}static is(e){return e===u.auto||e===u.byName||e===u.byPosition}toString(){return this.kind}}t.ParameterStructures=u,u.auto=new u("auto"),u.byPosition=new u("byPosition"),u.byName=new u("byName");class l{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return u.auto}}t.AbstractMessageSignature=l,t.RequestType0=class extends l{constructor(e){super(e,0)}},t.RequestType=class extends l{constructor(e,t=u.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType1=class extends l{constructor(e,t=u.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType2=class extends l{constructor(e){super(e,2)}},t.RequestType3=class extends l{constructor(e){super(e,3)}},t.RequestType4=class extends l{constructor(e){super(e,4)}},t.RequestType5=class extends l{constructor(e){super(e,5)}},t.RequestType6=class extends l{constructor(e){super(e,6)}},t.RequestType7=class extends l{constructor(e){super(e,7)}},t.RequestType8=class extends l{constructor(e){super(e,8)}},t.RequestType9=class extends l{constructor(e){super(e,9)}},t.NotificationType=class extends l{constructor(e,t=u.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType0=class extends l{constructor(e){super(e,0)}},t.NotificationType1=class extends l{constructor(e,t=u.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType2=class extends l{constructor(e){super(e,2)}},t.NotificationType3=class extends l{constructor(e){super(e,3)}},t.NotificationType4=class extends l{constructor(e){super(e,4)}},t.NotificationType5=class extends l{constructor(e){super(e,5)}},t.NotificationType6=class extends l{constructor(e){super(e,6)}},t.NotificationType7=class extends l{constructor(e){super(e,7)}},t.NotificationType8=class extends l{constructor(e){super(e,8)}},t.NotificationType9=class extends l{constructor(e){super(e,9)}},(o=i||(t.Message=i={})).isRequest=function(e){return e&&a.string(e.method)&&(a.string(e.id)||a.number(e.id))},o.isNotification=function(e){return e&&a.string(e.method)&&void 0===e.id},o.isResponse=function(e){return e&&(void 0!==e.result||!!e.error)&&(a.string(e.id)||a.number(e.id)||null===e.id)}},69590:function(e,t){"use strict";let r;function n(){if(void 0===r)throw Error("No runtime abstraction layer installed");return r}Object.defineProperty(t,"__esModule",{value:!0}),(n||(n={})).install=function(e){if(void 0===e)throw Error("No runtime abstraction layer provided");r=e},t.default=n},94323:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;let n=r(69590);t.Semaphore=class{constructor(e=1){if(e<=0)throw Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()})}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&(0,n.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(t=>{this._active--,e.resolve(t),this.runNext()},t=>{this._active--,e.reject(t),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}}},74996:function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.SharedArrayReceiverStrategy=t.SharedArraySenderStrategy=void 0;let s=r(59850);(i=n||(n={})).Continue=0,i.Cancelled=1,t.SharedArraySenderStrategy=class{constructor(){this.buffers=new Map}enableCancellation(e){if(null===e.id)return;let t=new SharedArrayBuffer(4);new Int32Array(t,0,1)[0]=n.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){let r=this.buffers.get(t);if(void 0===r)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,n.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};class o{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===n.Cancelled}get onCancellationRequested(){throw Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}class a{constructor(e){this.token=new o(e)}cancel(){}dispose(){}}t.SharedArrayReceiverStrategy=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let t=e.$cancellationData;return void 0===t?new s.CancellationTokenSource:new a(t)}}},74739:function(e,t,r){"use strict";r.d(t,{ConsoleLogger:()=>c,listen:()=>u});var n=r(76439);r(96177);var i=r(59085);class s extends i.AbstractMessageReader{constructor(e){super(),this.socket=e,this.state="initial",this.events=[],this.socket.onMessage(e=>this.readMessage(e)),this.socket.onError(e=>this.fireError(e)),this.socket.onClose((e,t)=>{if(1e3!==e){let r={name:""+e,message:`Error during socket reconnect: code = ${e}, reason = ${t}`};this.fireError(r)}this.fireClose()})}listen(e){if("initial"===this.state)for(this.state="listening",this.callback=e;0!==this.events.length;){let e=this.events.pop();e.message?this.readMessage(e.message):e.error?this.fireError(e.error):this.fireClose()}return{dispose:()=>{this.callback===e&&(this.callback=void 0)}}}readMessage(e){if("initial"===this.state)this.events.splice(0,0,{message:e});else if("listening"===this.state){let t=JSON.parse(e);this.callback(t)}}fireError(e){"initial"===this.state?this.events.splice(0,0,{error:e}):"listening"===this.state&&super.fireError(e)}fireClose(){"initial"===this.state?this.events.splice(0,0,{}):"listening"===this.state&&super.fireClose(),this.state="closed"}}var o=r(23193);class a extends o.AbstractMessageWriter{constructor(e){super(),this.socket=e,this.errorCount=0}end(){}async write(e){try{let t=JSON.stringify(e);this.socket.send(t)}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}}class c{error(e){console.error(e)}warn(e){console.warn(e)}info(e){console.info(e)}log(e){console.log(e)}debug(e){console.debug(e)}}function u(e){let{webSocket:t,onConnection:r}=e,i=e.logger||new c;t.onopen=()=>{var e,o;let c,u,l;r((o=t,c=new s(e={send:e=>o.send(e),onMessage:e=>{o.onmessage=t=>e(t.data)},onError:e=>{o.onerror=t=>{"message"in t&&e(t.message)}},onClose:e=>{o.onclose=t=>e(t.code,t.reason)},dispose:()=>o.close()}),u=new a(e),(l=(0,n.createMessageConnection)(c,u,i)).onClose(()=>l.dispose()),l))}}}}]);