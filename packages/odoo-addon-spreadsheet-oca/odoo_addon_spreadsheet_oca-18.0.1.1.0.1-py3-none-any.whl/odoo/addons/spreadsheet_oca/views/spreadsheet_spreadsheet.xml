<?xml version="1.0" encoding="utf-8" ?>
<!-- Copyright 2022 CreuBlanca
     License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl). -->
<odoo>
    <record model="ir.ui.view" id="spreadsheet_spreadsheet_search_view">
        <field name="name">spreadsheet.spreadsheet.search (in spreadsheet_oca)</field>
        <field name="model">spreadsheet.spreadsheet</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" />
                <field name="spreadsheet_tag_ids" />
                <separator />
                <field name="owner_id" />
                <field name="contributor_ids" />
                <separator />
                <filter
                    name="mysheets"
                    string="My Sheets"
                    domain="[('owner_id', '=', uid)]"
                />
                <separator />
                <filter
                    name="active"
                    string="Archived"
                    domain="[('active', '=', False)]"
                />
                <searchpanel />
            </search>
        </field>
    </record>

    <record model="ir.ui.view" id="spreadsheet_spreadsheet_tree_view">
        <field name="name">spreadsheet.spreadsheet.tree (in spreadsheet_oca)</field>
        <field name="model">spreadsheet.spreadsheet</field>
        <field name="arch" type="xml">
            <list js_class="spreadsheet_tree">
                <field name="name" />
                <field name="company_id" groups="base.group_multi_company" />
                <button
                    name="open_spreadsheet"
                    type="object"
                    string="Edit"
                    icon="fa-pencil"
                />
            </list>
        </field>
    </record>

    <record model="ir.ui.view" id="spreadsheet_spreadsheet_form_view">
        <field name="name">spreadsheet.spreadsheet.tree (in spreadsheet_oca)</field>
        <field name="model">spreadsheet.spreadsheet</field>
        <field name="arch" type="xml">
            <form>
                <header />
                <sheet>
                    <field name="active" invisible="1" />
                    <widget
                        name="web_ribbon"
                        title="Archived"
                        bg_color="text-bg-danger"
                        invisible="active"
                    />
                    <div name="button_box" id="button_box" class="oe_button_box">
                        <button
                            name="open_spreadsheet"
                            type="object"
                            string="Edit"
                            icon="fa-pencil"
                        />
                    </div>
                    <field name="badge_image" widget="image" class="oe_avatar" />
                    <div class="oe_title">
                        <h1>
                            <div class="d-flex">
                                <field name="name" placeholder="e.g. Sales KPI" />
                            </div>
                        </h1>
                    </div>
                    <separator />
                    <group>
                        <group string="Ownership">
                            <field name="owner_id" />
                            <field
                                name="company_id"
                                groups="base.group_multi_company"
                            />
                        </group>
                        <group string="Context">
                            <field
                                name="spreadsheet_tag_ids"
                                widget="many2many_tags"
                                options="{'color_field': 'color'}"
                            />
                        </group>
                        <group string="Write Access">
                            <field name="contributor_ids" widget="many2many_tags" />
                            <field
                                name="contributor_group_ids"
                                widget="many2many_tags"
                            />
                        </group>
                        <group string="Read Access">
                            <field name="reader_ids" widget="many2many_tags" />
                            <field name="reader_group_ids" widget="many2many_tags" />
                        </group>
                        <group colspan="4">
                            <field
                                name="spreadsheet_binary_data"
                                filename="filename"
                                groups="base.group_no_one"
                            />
                            <field name="filename" invisible="1" />
                        </group>
                    </group>
                </sheet>
                <chatter />
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="spreadsheet_spreadsheet_kanban_view">
        <field name="name">spreadsheet.spreadsheet.kanban</field>
        <field name="model">spreadsheet.spreadsheet</field>
        <field name="arch" type="xml">
            <kanban archivable="1" can_open="0">
                <templates>
                    <t t-name="menu">
                        <a
                            t-if="widget.editable"
                            type="open"
                            class="dropdown-item"
                        >Edit</a>
                        <a
                            t-if="widget.deletable"
                            type="delete"
                            class="dropdown-item"
                        >Delete</a>
                    </t>
                    <t t-name="card" class="flex-row">
                        <widget
                            name="web_ribbon"
                            title="Archived"
                            bg_color="text-bg-danger"
                            invisible="active"
                        />
                        <aside class="o_kanban_aside_full">
                            <div class="o_kanban_image_fill position-relative w-100">
                                <a type="object" name="open_spreadsheet">
                                    <t t-if="record.badge_image.raw_value">
                                        <field
                                            name="badge_image"
                                            class="h-100"
                                            widget="image"
                                            options="{'img_class': 'object-fit-cover'}"
                                        />
                                    </t>
                                    <t t-else="">
                                        <img
                                            class="h-100 img-fluid"
                                            src="/spreadsheet_oca/static/description/icon.png"
                                            alt="Spreasheet Image"
                                        />
                                    </t>
                                </a>
                            </div>
                        </aside>
                        <main class="ps-2 ps-md-0">
                            <div class="mb-1">
                                <a type="object" name="open_spreadsheet">
                                    <field class="fw-bold fs-4" name="display_name" />
                                </a>
                                <div class="text-muted d-flex flex-column">
                                    <field
                                        name="spreadsheet_tag_ids"
                                        widget="many2many_tags"
                                        options="{'color_field': 'color'}"
                                        class="mt-2"
                                    />
                                </div>
                            </div>
                            <footer>
                                <div class="d-flex">
                                    <field
                                        name="owner_id"
                                        widget="many2one_avatar_user"
                                    />
                                </div>
                                <div class="d-flex ms-auto">
                                    <field
                                        name="contributor_ids"
                                        widget="many2many_avatar_user"
                                    />
                                </div>
                            </footer>
                        </main>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <record model="ir.actions.act_window" id="spreadsheet_spreadsheet_tags_act_window">
        <field name="name">Spreadsheets Tags</field>
        <field name="res_model">spreadsheet.spreadsheet.tag</field>
        <field name="view_mode">list,form</field>
        <field name="domain">[]</field>
        <field name="context">{}</field>
    </record>

    <record model="ir.actions.act_window" id="spreadsheet_spreadsheet_act_window">
        <field name="name">Spreadsheets</field>
        <field name="res_model">spreadsheet.spreadsheet</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[]</field>
        <field name="context">{'search_default_mysheets': 1}</field>
    </record>

    <record model="ir.ui.menu" id="spreadsheet_spreadsheet_menu">
        <field name="name">Spreadsheets</field>
        <field name="action" ref="spreadsheet_spreadsheet_act_window" />
        <field name="web_icon">spreadsheet_oca,static/description/icon.png</field>
        <field name="groups_id" eval="[(4, ref('spreadsheet_oca.group_user'))]" />
        <field name="sequence" eval="16" />
    </record>

    <record model="ir.ui.menu" id="spreadsheet_spreadsheet_configuration_menu">
        <field name="name">Configuration</field>
        <field name="parent_id" ref="spreadsheet_spreadsheet_menu" />
        <field name="groups_id" eval="[(4, ref('spreadsheet_oca.group_user'))]" />
        <field name="sequence" eval="16" />
    </record>

    <record model="ir.ui.menu" id="spreadsheet_spreadsheet_tag_menu">
        <field name="name">Spreadsheets Tags</field>
        <field name="parent_id" ref="spreadsheet_spreadsheet_configuration_menu" />
        <field name="action" ref="spreadsheet_spreadsheet_tags_act_window" />
        <field name="groups_id" eval="[(4, ref('spreadsheet_oca.group_user'))]" />
        <field name="sequence" eval="16" />
    </record>
</odoo>
