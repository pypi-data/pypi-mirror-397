[build-system]
build-backend = "setuptools.build_meta"
requires = ["setuptools>=60", "setuptools_scm[toml]>=8.0"]

[project]
authors = [
  { name = "Ken Lauer", email = "152229072+ken-lauer@users.noreply.github.com" },
]
classifiers = [
  "Development Status :: 4 - Beta",
  "Natural Language :: English",
  "Programming Language :: Python :: 3",
  "Topic :: Scientific/Engineering",
]
dependencies = ["rich", 'typing_extensions; python_version < "3.11"']
description = "Bmad lattice parser/formatter tool"
dynamic = ["version"]
keywords = []
name = "latform"
readme = { file = "README.md", content-type = "text/markdown" }
requires-python = ">=3.10"

[project.optional-dependencies]
test = ["pytest", "pytest-cov", "pytest-mock"]
doc = [
  "mkdocs",
  # "mkdocs-macros-plugin",
  "mkdocstrings",
  "mkdocstrings-python",
]

[tool.setuptools.packages.find]
where = ["src"]
namespaces = false

[project.license]
file = "LICENSE"

[project.scripts]
"latform" = "latform.main:cli_main"
"latform-graph" = "latform.graph:cli_main"
"latform-dump" = "latform.dump:cli_main"

[tool.ruff]
# Reference and defaults: https://docs.astral.sh/ruff/configuration/
# exclude = []
line-length = 100
indent-width = 4
target-version = "py312"

[tool.ruff.lint]
select = [
  # Pycodestyle E errors: https://pycodestyle.pycqa.org/en/latest/intro.html
  "E4",
  "E7",
  "E9",
  # pyflakes F error codes:
  # https://flake8.pycqa.org/en/latest/user/error-codes.html
  "F",
]
ignore = [
  # Ignore ambiguous variables such as `I`
  "E741",
]

[tool.pytest]
addopts = ["--cov=src/"]
log_cli_level = "INFO"
log_level = "DEBUG"
testpaths = ["src/latform/tests"]

[tool.setuptools_scm]
version_file = "src/latform/_version.py"
# For publishing to testpypi (no funny local dev+hash suffix)
local_scheme = "no-local-version"
