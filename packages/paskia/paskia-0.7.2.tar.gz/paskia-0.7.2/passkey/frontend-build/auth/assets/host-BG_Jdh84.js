import{_ as S,r as A,c as a,o as B,d as u,e as r,g as N,f as e,t as n,h as I,i as L,u as i,l as g,q as U}from"./_plugin-vue_export-helper-DBJ1JH0N.js";import{u as C,_ as H,U as V,c as x}from"./UserBasicInfo-Cs5YqwNh.js";import{g as h}from"./helpers-CU0-cyzg.js";const D={class:"app-shell"},P={class:"view-root host-view"},T={class:"view-header"},E={class:"view-lede"},F={class:"section-block"},M={class:"section-body"},W={key:1,class:"empty-state"},q={class:"section-block"},z={class:"section-body host-actions"},Y={class:"button-row"},j=["disabled"],G=["disabled"],J={class:"note"},K={__name:"HostApp",setup(Q){const t=C(),d=A(!0),_=window.location.host,c=a(()=>t.userInfo?.user||null),f=a(()=>t.userInfo?.org?.display_name||""),y=a(()=>t.userInfo?.role?.display_name||""),b=a(()=>{const o=t.settings?.rp_name;return o?`${o} account`:"Account overview"}),w=a(()=>(t.settings?.rp_name,`You're signed in to ${_}.`)),p=a(()=>t.settings?.auth_host||""),l=a(()=>{const o=p.value;if(!o)return"";let s=t.settings?.ui_base_path??"/auth/";return s.startsWith("/")||(s=`/${s}`),s.endsWith("/")||(s=`${s}/`),`${window.location.protocol||"https:"}//${o}${s}`}),k=()=>{l.value&&(window.location.href=l.value)},$=async()=>{await t.logout()};return B(async()=>{try{await t.loadSettings();const o=t.settings?.rp_name;o&&(document.title=`${o} · Account summary`),await t.loadUserInfo()}catch(o){const s=o instanceof Error?o.message:"Unable to load session details";t.showMessage(s,"error",4e3)}finally{d.value=!1}}),(o,s)=>(r(),u("div",D,[N(H),e("main",P,[e("header",T,[e("h1",null,n(b.value),1),e("p",E,n(w.value),1)]),e("section",F,[e("div",M,[c.value?(r(),I(V,{key:0,name:c.value.user_name,visits:c.value.visits||0,"created-at":c.value.created_at,"last-seen":c.value.last_seen,"org-display-name":f.value,"role-name":y.value,"can-edit":!1},null,8,["name","visits","created-at","last-seen","org-display-name","role-name"])):(r(),u("p",W,n(d.value?"Loading your account…":"No active session found."),1))])]),e("section",q,[e("div",z,[e("div",Y,[e("button",{type:"button",class:"btn-secondary",onClick:s[0]||(s[0]=(...m)=>i(h)&&i(h)(...m))}," Back "),e("button",{type:"button",class:"btn-danger",disabled:i(t).isLoading,onClick:$},n(i(t).isLoading?"Signing out…":"Logout"),9,j),l.value?(r(),u("button",{key:0,type:"button",class:"btn-primary",disabled:i(t).isLoading,onClick:k}," Full Profile ",8,G)):L("",!0)]),e("p",J,[s[1]||(s[1]=e("strong",null,"Logout",-1)),g(" from "+n(i(_))+", or access your ",1),s[2]||(s[2]=e("strong",null,"Full Profile",-1)),g(" at "+n(p.value)+" (you may need to sign in again).",1)])])])])]))}},O=S(K,[["__scopeId","data-v-f941d2e2"]]),v=U(O);v.use(x());v.mount("#app");
