import{_ as re,r as $,c as H,b as v,d as m,e as a,f as x,t as A,F as U,i as J,j as we,C as X,B as _,D as ie,l as $e,L as he,y as V,x as ae,E as pe,H as M,A as je,k as z,h as ne,v as oe,z as be,o as Ge,m as He,a as Je,q as We,u as Ye,w as Ze,J as Qe,K as Xe}from"./_plugin-vue_export-helper-rKFEraYH.js";import{u as De,U as et,_ as tt,a as st,R as nt,N as ce,M as ot,b as at,L as it,A as rt,B as lt,c as ut}from"./AccessDenied-C-lL9vbN.js";import"./helpers-DzjFIx78.js";const dt={key:0},ct=["onClick"],mt=["onClick"],ft={class:"role-names"},gt={class:"center"},yt={key:0,class:"center"},vt=["onClick"],ht={key:0,class:"permissions-section"},pt={class:"matrix-scroll"},bt=["title"],wt=["title"],$t={class:"display-text"},Dt=["checked","onChange"],kt={class:"perm-name-cell"},Rt={class:"perm-title"},Ot={class:"display-text"},St=["onClick"],Ct={class:"perm-id-info"},Ut={class:"id-text"},At={class:"perm-members center"},Pt={class:"perm-actions center"},Mt=["onClick"],Et={__name:"AdminOverview",props:{info:Object,orgs:Array,permissions:Array,permissionSummary:Object,navigationDisabled:{type:Boolean,default:!1}},emits:["createOrg","openOrg","updateOrg","deleteOrg","toggleOrgPermission","openDialog","deletePermission","renamePermissionDisplay","navigateOut"],setup(n,{expose:I,emit:K}){const b=n,y=K,R=$(null),E=$(null),C=$(null),q=$(null),N=$(null),L=$(null),T=H(()=>[...b.orgs].sort((s,t)=>{const o=s.display_name.localeCompare(t.display_name);return o!==0?o:s.uuid.localeCompare(t.uuid)})),w=H(()=>[...b.permissions].sort((s,t)=>s.id.localeCompare(t.id)));function W(s){return s.roles.slice().sort((t,o)=>t.display_name.localeCompare(o.display_name)).map(t=>t.display_name).join(", ")}function h(s,t){if(b.navigationDisabled)return;const o=_(s);if(!o)return;const r=s.target,d=r.closest("tr");if(!d)return;const D=d.closest("tbody");if(!D)return;const c=Array.from(D.querySelectorAll("tr")),u=c.indexOf(d);if(u===-1)return;if(o==="left"||o==="right"){s.preventDefault();const S=Array.from(d.querySelectorAll("a, button:not([disabled])")),F=S.indexOf(r);if(F===-1)return;o==="left"&&F>0?S[F-1].focus():o==="right"&&F<S.length-1&&S[F+1].focus();return}let k=u;if(o==="up"&&u>0)k=u-1;else if(o==="down"&&u<c.length-1)k=u+1;else if(o==="up"&&u===0){s.preventDefault(),t==="org"?X(E.value,{itemSelector:"button"}):t==="perm"&&X(N.value,{itemSelector:"button"});return}else if(o==="down"&&u===c.length-1){if(s.preventDefault(),t==="org"&&b.info.is_global_admin&&q.value){const S=q.value.querySelector('input[type="checkbox"]');S?S.focus():X(N.value,{itemSelector:"button"})}return}if(k!==u){s.preventDefault();const F=c[k].querySelector("a, button:not([disabled])");F&&F.focus()}}function Y(s){if(b.navigationDisabled)return;const t=_(s);if(t){if(s.preventDefault(),t==="left"||t==="right")ie(E.value,s.target,t,{itemSelector:"button"});else if(t==="up")y("navigateOut","up");else if(t==="down"){const o=C.value?.querySelector("tbody tr a, tbody tr button:not([disabled])");o&&o.focus()}}}function Z(s){if(b.navigationDisabled)return;const t=_(s);if(!t)return;const o=s.target;if(o.tagName!=="INPUT")return;s.preventDefault();const r=Array.from(q.value.querySelectorAll('input[type="checkbox"]')),d=r.indexOf(o);if(d===-1)return;const D=T.value.length,c=w.value.length;if(D===0||c===0)return;const u=Math.floor(d/D),k=d%D;let S=d;if(t==="left")k>0&&(S=d-1);else if(t==="right")k<D-1&&(S=d+1);else if(t==="up")if(u>0)S=d-D;else{const ee=C.value?.querySelector("tbody tr:last-child")?.querySelector("a, button:not([disabled])");ee&&ee.focus();return}else if(t==="down")if(u<c-1)S=d+D;else{X(N.value,{itemSelector:"button"});return}S!==d&&r[S]&&r[S].focus()}function Q(s){if(b.navigationDisabled)return;const t=_(s);if(t){if(s.preventDefault(),t==="left"||t==="right")ie(N.value,s.target,t,{itemSelector:"button"});else if(t==="up"){const o=q.value?.querySelectorAll('input[type="checkbox"]');if(o?.length){const r=T.value.length,D=(w.value.length-1)*r;o[D]?o[D].focus():o[0].focus()}else{const d=C.value?.querySelector("tbody tr:last-child")?.querySelector("a, button:not([disabled])");d&&d.focus()}}else if(t==="down"){const o=L.value?.querySelector("tbody tr button:not([disabled])");o&&o.focus()}}}function f(){if(b.info.is_global_admin)X(E.value,{itemSelector:"button"});else{const s=C.value?.querySelector("tbody tr a, tbody tr button:not([disabled])");s&&s.focus()}}return I({focusFirstElement:f}),(s,t)=>(m(),v(U,null,[a("div",{class:"permissions-section",ref_key:"orgSection",ref:R},[a("h2",null,A(n.info.is_global_admin?"Organizations":"Your Organizations"),1),a("div",{class:"actions",ref_key:"orgActionsRef",ref:E,onKeydown:Y},[n.info.is_global_admin?(m(),v("button",{key:0,onClick:t[0]||(t[0]=o=>s.$emit("createOrg"))},"+ Create Org")):x("",!0)],544),a("table",{class:"org-table",ref_key:"orgTableRef",ref:C,onKeydown:t[1]||(t[1]=o=>h(o,"org"))},[a("thead",null,[a("tr",null,[t[4]||(t[4]=a("th",null,"Name",-1)),t[5]||(t[5]=a("th",null,"Roles",-1)),t[6]||(t[6]=a("th",null,"Members",-1)),n.info.is_global_admin?(m(),v("th",dt,"Actions")):x("",!0)])]),a("tbody",null,[(m(!0),v(U,null,J(T.value,o=>(m(),v("tr",{key:o.uuid},[a("td",null,[a("a",{href:"#org/{{o.uuid}}",onClick:$e(r=>s.$emit("openOrg",o),["prevent"])},A(o.display_name),9,ct),n.info.is_global_admin||n.info.is_org_admin?(m(),v("button",{key:0,onClick:r=>s.$emit("updateOrg",o),class:"icon-btn edit-org-btn","aria-label":"Rename organization",title:"Rename organization"},"âœï¸",8,mt)):x("",!0)]),a("td",ft,A(W(o)),1),a("td",gt,A(o.roles.reduce((r,d)=>r+d.users.length,0)),1),n.info.is_global_admin?(m(),v("td",yt,[a("button",{onClick:r=>s.$emit("deleteOrg",o),class:"icon-btn delete-icon","aria-label":"Delete organization",title:"Delete organization"},"âŒ",8,vt)])):x("",!0)]))),128))])],544)],512),n.info.is_global_admin?(m(),v("div",ht,[t[10]||(t[10]=a("h2",null,"Permissions",-1)),a("div",{class:"matrix-wrapper",ref_key:"permMatrixRef",ref:q,onKeydown:Z},[a("div",pt,[a("div",{class:"perm-matrix-grid",style:we({gridTemplateColumns:"minmax(180px, 1fr) "+T.value.map(()=>"2.2rem").join(" ")})},[t[7]||(t[7]=a("div",{class:"grid-head perm-head"},"Permission",-1)),(m(!0),v(U,null,J(T.value,o=>(m(),v("div",{key:"head-"+o.uuid,class:"grid-head org-head",title:o.display_name},[a("span",null,A(o.display_name),1)],8,bt))),128)),(m(!0),v(U,null,J(w.value,o=>(m(),v(U,{key:o.id},[a("div",{class:"perm-name",title:o.id},[a("span",$t,A(o.display_name),1)],8,wt),(m(!0),v(U,null,J(T.value,r=>(m(),v("div",{key:r.uuid+"-"+o.id,class:"matrix-cell"},[a("input",{type:"checkbox",checked:r.permissions.includes(o.id),onChange:d=>s.$emit("toggleOrgPermission",r,o.id,d.target.checked)},null,40,Dt)]))),128))],64))),128))],4)]),t[8]||(t[8]=a("p",{class:"matrix-hint muted"},"Toggle which permissions each organization can grant to its members.",-1))],544),a("div",{class:"actions",ref_key:"permActionsRef",ref:N,onKeydown:Q},[n.info.is_global_admin?(m(),v("button",{key:0,onClick:t[2]||(t[2]=o=>s.$emit("openDialog","perm-create",{display_name:"",id:""}))},"+ Create Permission")):x("",!0)],544),a("table",{class:"org-table",ref_key:"permTableRef",ref:L,onKeydown:t[3]||(t[3]=o=>h(o,"perm"))},[t[9]||(t[9]=a("thead",null,[a("tr",null,[a("th",{scope:"col"},"Permission"),a("th",{scope:"col",class:"center"},"Members"),a("th",{scope:"col",class:"center"},"Actions")])],-1)),a("tbody",null,[(m(!0),v(U,null,J(w.value,o=>(m(),v("tr",{key:o.id},[a("td",kt,[a("div",Rt,[a("span",Ot,A(o.display_name),1),a("button",{onClick:r=>s.$emit("renamePermissionDisplay",o),class:"icon-btn edit-display-btn","aria-label":"Edit display name",title:"Edit display name"},"âœï¸",8,St)]),a("div",Ct,[a("span",Ut,A(o.id),1)])]),a("td",At,A(n.permissionSummary[o.id]?.userCount||0),1),a("td",Pt,[a("button",{onClick:r=>s.$emit("deletePermission",o),class:"icon-btn delete-icon","aria-label":"Delete permission",title:"Delete permission"},"âŒ",8,Mt)])]))),128))])],544)])):x("",!0)],64))}},qt=re(Et,[["__scopeId","data-v-fabb2aac"]]),Nt=["title"],Tt={class:"org-name"},xt={class:"matrix-scroll"},It=["title"],Ft=["title"],Lt=["checked","onChange"],Kt=["onDrop"],Bt=["onKeydown"],zt=["title"],_t=["onClick"],Vt={class:"role-actions"},jt=["onClick"],Gt=["onDragstart","onClick","onKeydown","title"],Ht={class:"name"},Jt={class:"meta"},Wt=["onKeydown"],Yt=["onClick"],Zt={__name:"AdminOrgDetail",props:{selectedOrg:Object,permissions:Array,navigationDisabled:{type:Boolean,default:!1}},emits:["updateOrg","createRole","updateRole","deleteRole","createUserInRole","openUser","toggleRolePermission","onRoleDragOver","onRoleDrop","onUserDragStart","navigateOut"],setup(n,{expose:I,emit:K}){const b=n,y=K,R=$(null),E=$(null),C=$(null),q=H(()=>[...b.selectedOrg.roles].sort((f,s)=>{const t=f.display_name.toLowerCase(),o=s.display_name.toLowerCase();return t!==o?t.localeCompare(o):f.uuid.localeCompare(s.uuid)}));function N(f){return b.permissions.find(s=>s.id===f)?.display_name||f}function L(f,s,t){y("toggleRolePermission",f,s,t)}function T(f){if(b.navigationDisabled)return;const s=_(f);if(s){if(f.preventDefault(),s==="left"||s==="right")ie(R.value,f.target,s,{itemSelector:"button"});else if(s==="up")y("navigateOut","up");else if(s==="down"){const t=E.value?.querySelector('input[type="checkbox"]');t?t.focus():Z()}}}function w(f){if(b.navigationDisabled)return;const s=_(f);if(!s)return;const t=f.target;if(t.tagName!=="INPUT")return;f.preventDefault();const o=Array.from(E.value.querySelectorAll('input[type="checkbox"]')),r=o.indexOf(t);if(r===-1)return;const d=q.value.length,D=b.selectedOrg.permissions.length,c=Math.floor(r/d),u=r%d;let k=r;if(s==="left"&&u>0)k=r-1;else if(s==="right"&&u<d-1)k=r+1;else if(s==="up"&&c>0)k=r-d;else if(s==="down"&&c<D-1)k=r+d;else if(s==="up"&&c===0){const S=R.value?.querySelector("button");S&&S.focus();return}else if(s==="down"&&c===D-1){Z();return}k!==r&&o[k]&&o[k].focus()}function W(f){if(b.navigationDisabled)return;const s=_(f);if(!s)return;const t=f.target;if(!t.classList.contains("user-chip"))return;const o=t.closest(".user-list");if(!o)return;const r=Array.from(o.querySelectorAll(".user-chip")),d=r.indexOf(t);if(d!==-1){if(s==="up"&&d>0){f.preventDefault(),r[d-1].focus();return}else if(s==="down"&&d<r.length-1){f.preventDefault(),r[d+1].focus();return}if(s==="up"&&d===0){f.preventDefault();const c=o.closest(".role-column")?.querySelector(".role-header button");c&&c.focus();return}if(!(s==="down"&&d===r.length-1)&&(s==="left"||s==="right")){f.preventDefault();const D=Array.from(C.value?.querySelectorAll(".role-column")||[]),c=o.closest(".role-column"),u=D.indexOf(c);let k=s==="left"?u-1:u+1;if(k>=0&&k<D.length){const S=D[k],F=S.querySelectorAll(".user-chip"),ee=Math.min(d,F.length-1);if(F[ee])F[ee].focus();else{const le=S.querySelector(".plus-btn");le&&le.focus()}}else if(s==="left"&&u===0){const S=E.value?.querySelector('input[type="checkbox"]:last-of-type');S&&S.focus()}}}}function h(f,s){if(b.navigationDisabled)return;const t=_(f);if(!t)return;const o=Array.from(C.value?.querySelectorAll(".role-column")||[]);if(t==="left"||t==="right"){f.preventDefault();const r=f.currentTarget.querySelectorAll("button:not([disabled])"),d=Array.from(r).indexOf(f.target);if(t==="left"&&d>0)r[d-1].focus();else if(t==="right"&&d<r.length-1)r[d+1].focus();else if(t==="left"&&d===0&&s>0){const c=o[s-1]?.querySelectorAll(".role-header button");c?.length&&c[c.length-1].focus()}else if(t==="right"&&d===r.length-1&&s<o.length-1){const c=o[s+1]?.querySelector(".role-header button");c&&c.focus()}}else if(t==="up"){f.preventDefault();const r=E.value?.querySelectorAll('input[type="checkbox"]');if(r?.length){const d=q.value.length,c=(b.selectedOrg.permissions.length-1)*d+s;r[c]?r[c].focus():r[r.length-1].focus()}else{const d=R.value?.querySelector("button");d&&d.focus()}}else if(t==="down"){f.preventDefault();const d=o[s]?.querySelector(".user-chip");d&&d.focus()}}function Y(f,s){if(b.navigationDisabled)return;const t=_(f);if(!t)return;const o=Array.from(C.value?.querySelectorAll(".role-column")||[]);if(t==="up"){f.preventDefault();const d=o[s]?.querySelector(".role-header button");d&&d.focus()}else if(t==="left"&&s>0){f.preventDefault();const r=o[s-1],d=r?.querySelector(".empty-role button"),D=r?.querySelector(".user-chip:last-child");d?d.focus():D&&D.focus()}else if(t==="right"&&s<o.length-1){f.preventDefault();const r=o[s+1],d=r?.querySelector(".empty-role button"),D=r?.querySelector(".user-chip");d?d.focus():D&&D.focus()}}function Z(){const s=C.value?.querySelector(".role-column")?.querySelector(".role-header button");s&&s.focus()}function Q(){const f=R.value?.querySelector("button");f&&f.focus()}return I({focusFirstElement:Q}),(f,s)=>(m(),v(U,null,[a("h2",{class:"org-title",ref_key:"orgTitleRef",ref:R,onKeydown:T,title:n.selectedOrg.uuid},[a("span",Tt,A(n.selectedOrg.display_name),1),a("button",{onClick:s[0]||(s[0]=t=>f.$emit("updateOrg",n.selectedOrg)),class:"icon-btn","aria-label":"Rename organization",title:"Rename organization"},"âœï¸")],40,Nt),a("div",{class:"matrix-wrapper",ref_key:"permMatrixRef",ref:E,onKeydown:w},[a("div",xt,[a("div",{class:"perm-matrix-grid",style:we({gridTemplateColumns:"minmax(180px, 1fr) "+q.value.map(()=>"2.2rem").join(" ")+" 2.2rem"})},[s[5]||(s[5]=a("div",{class:"grid-head perm-head"},"Permission",-1)),(m(!0),v(U,null,J(q.value,t=>(m(),v("div",{key:"head-"+t.uuid,class:"grid-head role-head",title:t.display_name},[a("span",null,A(t.display_name),1)],8,It))),128)),a("div",{class:"grid-head role-head add-role-head",title:"Add role",onClick:s[1]||(s[1]=t=>f.$emit("createRole",n.selectedOrg)),role:"button",tabindex:"0",onKeydown:s[2]||(s[2]=he(t=>f.$emit("createRole",n.selectedOrg),["enter"]))},"âž•",32),(m(!0),v(U,null,J(n.selectedOrg.permissions,t=>(m(),v(U,{key:t},[a("div",{class:"perm-name",title:t},A(N(t)),9,Ft),(m(!0),v(U,null,J(q.value,o=>(m(),v("div",{key:o.uuid+"-"+t,class:"matrix-cell"},[a("input",{type:"checkbox",checked:o.permissions.includes(t),onChange:r=>L(o,t,r.target.checked)},null,40,Lt)]))),128)),s[4]||(s[4]=a("div",{class:"matrix-cell add-role-cell"},null,-1))],64))),128))],4)]),s[6]||(s[6]=a("p",{class:"matrix-hint muted"},"Toggle which permissions each role grants.",-1))],544),a("div",{class:"roles-grid",ref_key:"rolesGridRef",ref:C},[(m(!0),v(U,null,J(q.value,(t,o)=>(m(),v("div",{key:t.uuid,class:"role-column",onDragover:s[3]||(s[3]=r=>f.$emit("onRoleDragOver",r)),onDrop:r=>f.$emit("onRoleDrop",r,n.selectedOrg,t)},[a("div",{class:"role-header",onKeydown:r=>h(r,o)},[a("strong",{class:"role-name",title:t.uuid},[a("span",null,A(t.display_name),1),a("button",{onClick:r=>f.$emit("updateRole",t),class:"icon-btn","aria-label":"Edit role",title:"Edit role"},"âœï¸",8,_t)],8,zt),a("div",Vt,[a("button",{onClick:r=>f.$emit("createUserInRole",n.selectedOrg,t),class:"plus-btn","aria-label":"Add user",title:"Add user"},"âž•",8,jt)])],40,Bt),t.users.length>0?(m(),v("ul",{key:0,class:"user-list",onKeydown:W},[(m(!0),v(U,null,J(t.users.slice().sort((r,d)=>{const D=r.display_name.toLowerCase(),c=d.display_name.toLowerCase();return D!==c?D.localeCompare(c):r.uuid.localeCompare(d.uuid)}),r=>(m(),v("li",{key:r.uuid,class:"user-chip",tabindex:"0",draggable:"true",onDragstart:d=>f.$emit("onUserDragStart",d,r,n.selectedOrg.uuid),onClick:d=>f.$emit("openUser",r),onKeydown:he(d=>f.$emit("openUser",r),["enter"]),title:r.uuid},[a("span",Ht,A(r.display_name),1),a("span",Jt,A(r.last_seen?new Date(r.last_seen).toLocaleDateString():"â€”"),1)],40,Gt))),128))],32)):(m(),v("div",{key:1,class:"empty-role",onKeydown:r=>Y(r,o)},[s[7]||(s[7]=a("p",{class:"empty-text muted"},"No members",-1)),a("button",{onClick:r=>f.$emit("deleteRole",t),class:"icon-btn delete-icon","aria-label":"Delete empty role",title:"Delete role"},"âŒ",8,Yt)],40,Wt))],40,Kt))),128))],512)],64))}},Qt=re(Zt,[["__scopeId","data-v-25f08cdd"]]),Xt={class:"user-detail"},es={key:0,class:"error small"},ts=["disabled"],ss={class:"section-block","data-section":"registered-passkeys"},ns={class:"section-body"},os={__name:"AdminUserDetail",props:{selectedUser:Object,userDetail:Object,selectedOrg:Object,loading:Boolean,showRegModal:Boolean,navigationDisabled:{type:Boolean,default:!1}},emits:["generateUserRegistrationLink","goOverview","openOrg","onUserNameSaved","closeRegModal","editUserName","refreshUserDetail","navigateOut"],setup(n,{expose:I,emit:K}){const b=n,y=K,R=De(),E=$({}),C=$(null),q=$(null),N=$(null),L=$(null),T=$(null),w=$(null),W=$(null),h=H(()=>b.showRegModal);function Y(){R.showMessage(`ðŸ“‹ Link copied! Send it to ${b.selectedUser.display_name}.`),y("closeRegModal")}function Z(){y("editUserName",b.selectedUser)}async function Q(c){try{const u=await M(`/auth/api/admin/orgs/${b.selectedUser.org_uuid}/users/${b.selectedUser.uuid}/credentials/${c.credential_uuid}`,{method:"DELETE"});u.status==="ok"?y("onUserNameSaved"):console.error("Failed to delete credential",u)}catch(u){console.error("Delete credential error",u)}}async function f(c){const u=c?.id;if(u){E.value={...E.value,[u]:!0};try{const k=await M(`/auth/api/admin/orgs/${b.selectedUser.org_uuid}/users/${b.selectedUser.uuid}/sessions/${u}`,{method:"DELETE"});if(k.status==="ok"){if(k.current_session_terminated){sessionStorage.clear(),location.reload();return}y("refreshUserDetail"),R.showMessage("Session terminated","success",2500)}else R.showMessage(k.detail||"Failed to terminate session","error")}catch(k){console.error("Terminate session error",k),R.showMessage(k.message||"Failed to terminate session","error")}finally{const k={...E.value};delete k[u],E.value=k}}}function s(c){if(h.value||b.navigationDisabled)return;const u=_(c);u&&(c.preventDefault(),u==="left"||u==="right"?ie(N.value,c.target,u,{itemSelector:".mini-btn"}):u==="up"?y("navigateOut","up"):u==="down"&&X(L.value,{itemSelector:"button"}))}function t(c){if(h.value||b.navigationDisabled)return;const u=_(c);u&&(c.preventDefault(),u==="left"||u==="right"?ie(L.value,c.target,u,{itemSelector:"button"}):u==="up"?X(N.value,{itemSelector:".mini-btn"}):u==="down"&&T.value?.$el?.focus())}function o(c){h.value||b.navigationDisabled||(c==="up"?X(L.value,{itemSelector:"button"}):c==="down"&&pe(w.value?.$el,0,{itemSelector:".session-group"}))}function r(c){if(!(h.value||b.navigationDisabled)){if(c==="up")T.value?.$el?.focus();else if(c==="down"){const u=W.value?.querySelector("button");u&&u.focus()}}}function d(c){if(h.value||b.navigationDisabled)return;const u=_(c);u&&(c.preventDefault(),u==="up"&&pe(w.value?.$el,-1,{itemSelector:".session-group"}))}function D(){X(N.value,{itemSelector:".mini-btn"})}return I({focusFirstElement:D}),(c,u)=>(m(),v("div",Xt,[a("div",{ref_key:"userInfoRef",ref:N,onKeydown:s},[n.userDetail&&!n.userDetail.error?(m(),V(et,{key:0,name:n.userDetail.display_name||n.selectedUser.display_name,visits:n.userDetail.visits,"created-at":n.userDetail.created_at,"last-seen":n.userDetail.last_seen,loading:n.loading,"org-display-name":n.userDetail.org.display_name,"role-name":n.userDetail.role,"update-endpoint":`/auth/api/admin/orgs/${n.selectedUser.org_uuid}/users/${n.selectedUser.uuid}/display-name`,onSaved:u[0]||(u[0]=k=>c.$emit("onUserNameSaved")),onEditName:Z},null,8,["name","visits","created-at","last-seen","loading","org-display-name","role-name","update-endpoint"])):x("",!0)],544),n.userDetail?.error?(m(),v("div",es,A(n.userDetail.error),1)):x("",!0),n.userDetail&&!n.userDetail.error?(m(),v(U,{key:1},[a("div",{class:"registration-actions",ref_key:"regActionsRef",ref:L,onKeydown:t},[a("button",{class:"btn-secondary reg-token-btn",onClick:u[1]||(u[1]=k=>c.$emit("generateUserRegistrationLink",n.selectedUser)),disabled:n.loading},"Generate Registration Token",8,ts),u[6]||(u[6]=a("p",{class:"matrix-hint muted"}," Generate a one-time registration link so this user can register or add another passkey. Copy the link from the dialog and send it to the user, or have the user scan the QR code on their device. ",-1))],544),a("section",ss,[u[7]||(u[7]=a("div",{class:"section-header"},[a("h2",null,"Registered Passkeys")],-1)),a("div",ns,[ae(tt,{ref_key:"credentialListRef",ref:T,credentials:n.userDetail.credentials,"aaguid-info":n.userDetail.aaguid_info,"allow-delete":!0,"hovered-credential-uuid":C.value,"hovered-session-credential-uuid":q.value?.credential_uuid,"navigation-disabled":h.value,onDelete:Q,onCredentialHover:u[2]||(u[2]=k=>C.value=k),onNavigateOut:o},null,8,["credentials","aaguid-info","hovered-credential-uuid","hovered-session-credential-uuid","navigation-disabled"])])]),ae(st,{ref_key:"sessionListRef",ref:w,sessions:n.userDetail.sessions||[],"terminating-sessions":E.value,"hovered-credential-uuid":C.value,"navigation-disabled":h.value,"empty-message":"This user has no active sessions.","section-description":"View and manage the active sessions for this user.",onTerminate:f,onSessionHover:u[3]||(u[3]=k=>q.value=k),onNavigateOut:r},null,8,["sessions","terminating-sessions","hovered-credential-uuid","navigation-disabled"])],64)):x("",!0),a("div",{class:"actions ancillary-actions",ref_key:"backButtonRef",ref:W,onKeydown:d},[n.selectedOrg?(m(),v("button",{key:0,onClick:u[4]||(u[4]=k=>c.$emit("openOrg",n.selectedOrg)),class:"icon-btn",title:"Back to Org"},"â†©ï¸")):x("",!0)],544),n.showRegModal?(m(),V(nt,{key:2,endpoint:`/auth/api/admin/orgs/${n.selectedUser.org_uuid}/users/${n.selectedUser.uuid}/create-link`,"user-name":n.userDetail?.display_name||n.selectedUser.display_name,onClose:u[5]||(u[5]=k=>c.$emit("closeRegModal")),onCopied:Y},null,8,["endpoint","user-name"])):x("",!0)]))}},as=re(os,[["__scopeId","data-v-70289426"]]),is={class:"modal-title"},rs={key:0},ls={key:2},us={class:"small muted"},ds=["placeholder","pattern"],cs={key:7},ms={key:8,class:"error small"},fs={key:9,class:"modal-actions"},gs=["disabled"],ys=["disabled"],vs={__name:"AdminDialogs",props:{dialog:Object,PERMISSION_ID_PATTERN:String},emits:["submitDialog","closeDialog"],setup(n,{emit:I}){const K=new Set(["org-update","role-update","user-update-name"]);return(b,y)=>n.dialog.type?(m(),V(ot,{key:0,onClose:y[13]||(y[13]=R=>b.$emit("closeDialog"))},{default:je(()=>[a("h3",is,[n.dialog.type==="org-create"?(m(),v(U,{key:0},[z("Create Organization")],64)):n.dialog.type==="org-update"?(m(),v(U,{key:1},[z("Rename Organization")],64)):n.dialog.type==="role-create"?(m(),v(U,{key:2},[z("Create Role")],64)):n.dialog.type==="role-update"?(m(),v(U,{key:3},[z("Edit Role")],64)):n.dialog.type==="user-create"?(m(),v(U,{key:4},[z("Add User To Role")],64)):n.dialog.type==="user-update-name"?(m(),v(U,{key:5},[z("Edit User Name")],64)):n.dialog.type==="perm-create"||n.dialog.type==="perm-display"?(m(),v(U,{key:6},[z(A(n.dialog.type==="perm-create"?"Create Permission":"Edit Permission Display"),1)],64)):n.dialog.type==="confirm"?(m(),v(U,{key:7},[z("Confirm")],64)):x("",!0)]),a("form",{onSubmit:y[12]||(y[12]=$e(R=>b.$emit("submitDialog"),["prevent"])),class:"modal-form"},[n.dialog.type==="org-create"?(m(),v("label",rs,[y[14]||(y[14]=z("Name ",-1)),ne(a("input",{ref:"nameInput","onUpdate:modelValue":y[0]||(y[0]=R=>n.dialog.data.name=R),required:""},null,512),[[oe,n.dialog.data.name]])])):n.dialog.type==="org-update"?(m(),V(ce,{key:1,label:"Organization Name",modelValue:n.dialog.data.name,"onUpdate:modelValue":y[1]||(y[1]=R=>n.dialog.data.name=R),busy:n.dialog.busy,error:n.dialog.error,onCancel:y[2]||(y[2]=R=>b.$emit("closeDialog"))},null,8,["modelValue","busy","error"])):n.dialog.type==="role-create"?(m(),v("label",ls,[y[15]||(y[15]=z("Role Name ",-1)),ne(a("input",{"onUpdate:modelValue":y[3]||(y[3]=R=>n.dialog.data.name=R),placeholder:"Role name",required:""},null,512),[[oe,n.dialog.data.name]])])):n.dialog.type==="role-update"?(m(),V(ce,{key:3,label:"Role Name",modelValue:n.dialog.data.name,"onUpdate:modelValue":y[4]||(y[4]=R=>n.dialog.data.name=R),busy:n.dialog.busy,error:n.dialog.error,onCancel:y[5]||(y[5]=R=>b.$emit("closeDialog"))},null,8,["modelValue","busy","error"])):n.dialog.type==="user-create"?(m(),v(U,{key:4},[a("p",us,"Role: "+A(n.dialog.data.role.display_name),1),a("label",null,[y[16]||(y[16]=z("Display Name ",-1)),ne(a("input",{"onUpdate:modelValue":y[6]||(y[6]=R=>n.dialog.data.name=R),placeholder:"User display name",required:""},null,512),[[oe,n.dialog.data.name]])])],64)):n.dialog.type==="user-update-name"?(m(),V(ce,{key:5,label:"Display Name",modelValue:n.dialog.data.name,"onUpdate:modelValue":y[7]||(y[7]=R=>n.dialog.data.name=R),busy:n.dialog.busy,error:n.dialog.error,onCancel:y[8]||(y[8]=R=>b.$emit("closeDialog"))},null,8,["modelValue","busy","error"])):n.dialog.type==="perm-create"||n.dialog.type==="perm-display"?(m(),v(U,{key:6},[a("label",null,[y[17]||(y[17]=z("Display Name ",-1)),ne(a("input",{ref:"displayNameInput","onUpdate:modelValue":y[9]||(y[9]=R=>n.dialog.data.display_name=R),required:""},null,512),[[oe,n.dialog.data.display_name]])]),a("label",null,[y[18]||(y[18]=z("Permission ID ",-1)),ne(a("input",{"onUpdate:modelValue":y[10]||(y[10]=R=>n.dialog.data.id=R),placeholder:n.dialog.type==="perm-create"?"yourapp:permission":n.dialog.data.permission.id,required:"",pattern:n.PERMISSION_ID_PATTERN,title:"Allowed: A-Za-z0-9:._~-","data-form-type":"other"},null,8,ds),[[oe,n.dialog.data.id]])]),y[19]||(y[19]=a("p",{class:"small muted"},"The permission ID is used for permission checks in the application. Changing it may break deployed applications that reference this permission.",-1))],64)):n.dialog.type==="confirm"?(m(),v("p",cs,A(n.dialog.data.message),1)):x("",!0),n.dialog.error&&!be(K).has(n.dialog.type)?(m(),v("div",ms,A(n.dialog.error),1)):x("",!0),be(K).has(n.dialog.type)?x("",!0):(m(),v("div",fs,[a("button",{type:"button",class:"btn-secondary",onClick:y[11]||(y[11]=R=>b.$emit("closeDialog")),disabled:n.dialog.busy}," Cancel ",8,gs),a("button",{type:"submit",class:"btn-primary",disabled:n.dialog.busy},A(n.dialog.type==="confirm"?"OK":"Save"),9,ys)]))],32)]),_:1})):x("",!0)}},hs=re(vs,[["__scopeId","data-v-b4640c15"]]),ps={class:"app-shell admin-shell"},bs={class:"app-main"},ws={key:2,class:"view-root view-root--wide view-admin"},$s={class:"view-header"},Ds={class:"section-block admin-section"},ks={class:"section-body admin-section-body"},Rs={key:0,class:"surface surface--tight error"},Os={key:1,class:"admin-panels"},Ss="^[A-Za-z0-9:._~-]+$",Cs={__name:"AdminApp",setup(n){const I=$(null),K=$(!0),b=$("Loading..."),y=$(!1),R=$(!1),E=$(null),C=$([]),q=$([]),N=$(null),L=$(null),T=$(null),w=De(),W=$(null);$(null),$(""),$(null),$("");const h=$({type:null,data:null,busy:!1,error:""}),Y=$(null),Z=$(null),Q=$(null),f=$(null),s=$(null),t=H(()=>h.value.type!==null||ue.value);function o(e){if(!W.value)return;const i=e.target.closest(".org-add-menu"),l=e.target.closest(".add-org-btn");!i&&!l&&(W.value=null)}Ge(async()=>{document.addEventListener("click",o),window.addEventListener("hashchange",D);const e=await He();e?.rp_name&&(document.title=e.rp_name+" Admin"),await S()}),Je(()=>{document.removeEventListener("click",o),window.removeEventListener("hashchange",D)});const r=H(()=>{const e={};for(const l of C.value){const g={uuid:l.uuid,display_name:l.display_name},p=new Set(l.permissions||[]);for(const O of l.permissions||[])e[O]||(e[O]={orgs:[],orgSet:new Set,userCount:0}),e[O].orgSet.has(l.uuid)||(e[O].orgs.push(g),e[O].orgSet.add(l.uuid));for(const O of l.roles)for(const P of O.permissions)p.has(P)&&(e[P]||(e[P]={orgs:[],orgSet:new Set,userCount:0}),e[P].orgSet.has(l.uuid)||(e[P].orgs.push(g),e[P].orgSet.add(l.uuid)),e[P].userCount+=O.users.length)}const i={};for(const[l,g]of Object.entries(e))i[l]={orgs:g.orgs.sort((p,O)=>p.display_name.localeCompare(O.display_name)),userCount:g.userCount};return i});function d(e){j("perm-display",{permission:e,id:e.id,display_name:e.display_name})}function D(){const e=window.location.hash||"";N.value=null,L.value=null,e.startsWith("#org/")?N.value=e.slice(5):e.startsWith("#user/")&&(L.value=e.slice(6))}async function c(){const e=await M("/auth/api/admin/orgs");C.value=e.map(i=>{const l=i.roles.map(p=>({...p,org_uuid:i.uuid,users:[]})),g=Object.fromEntries(l.map(p=>[p.display_name,p]));for(const p of i.users||[])g[p.role]&&g[p.role].users.push(p);return{...i,roles:l}})}async function u(){q.value=await M("/auth/api/admin/permissions")}async function k(){I.value=await M("/auth/api/user-info",{method:"POST"}),y.value=!0}async function S(){K.value=!0,b.value="Loading...",E.value=null;try{await Promise.all([c(),u()]),await k(),!I.value.is_global_admin&&I.value.is_org_admin&&C.value.length===1&&(!window.location.hash||window.location.hash==="#overview")?(N.value=C.value[0].uuid,window.location.hash=`#org/${N.value}`,w.showMessage(`Navigating to ${C.value[0].display_name} Administration`,"info",3e3)):D()}catch(e){e.name==="AuthCancelledError"?R.value=!0:E.value=e.message}finally{K.value=!1}}function F(){j("org-create",{})}function ee(e){j("org-update",{org:e,name:e.display_name})}function le(e){j("user-update-name",{user:e,name:e.display_name})}async function me(e){await M(`/auth/api/admin/orgs/${e}`,{method:"DELETE"}),await Promise.all([c(),u()])}function Re(e){if(!I.value?.is_global_admin){w.showMessage("Global admin only");return}if(e.roles.reduce((p,O)=>p+O.users.length,0)===0){me(e.uuid).then(()=>{w.showMessage(`Organization "${e.display_name}" deleted.`,"success",2500)}).catch(p=>{w.showMessage(p.message||"Failed to delete organization","error")});return}const g=e.roles.filter(p=>p.users.length>0).map(p=>`${p.users.length} ${p.display_name}`).join(", ");j("confirm",{message:`Delete organization "${e.display_name}", including accounts of ${g})?`,action:async()=>{await me(e.uuid)}})}function Oe(e,i){j("user-create",{org:e,role:i})}async function Se(e,i,l){if(i.role!==l)try{await M(`/auth/api/admin/orgs/${e.uuid}/users/${i.uuid}/role`,{method:"PUT",body:{role:l}}),await c()}catch(g){w.showMessage(g.message||"Failed to update user role")}}function Ce(e,i,l){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",JSON.stringify({user_uuid:i.uuid,org_uuid:l}))}function Ue(e){e.preventDefault(),e.dataTransfer.dropEffect="move"}function Ae(e,i,l){e.preventDefault();try{const g=JSON.parse(e.dataTransfer.getData("text/plain"));if(g.org_uuid!==i.uuid)return;const p=i.roles.flatMap(O=>O.users).find(O=>O.uuid===g.user_uuid);p&&Se(i,p,l.display_name)}catch{}}function Pe(e){j("role-create",{org:e})}function Me(e){j("role-update",{role:e,name:e.display_name})}function Ee(e){M(`/auth/api/admin/orgs/${e.org_uuid}/roles/${e.uuid}`,{method:"DELETE"}).then(()=>{w.showMessage(`Role "${e.display_name}" deleted.`,"success",2500),c()}).catch(i=>{w.showMessage(i.message||"Failed to delete role","error")})}async function qe(e,i,l){const g=l?[...e.permissions,i]:e.permissions.filter(O=>O!==i),p=[...e.permissions];e.permissions=g;try{await M(`/auth/api/admin/orgs/${e.org_uuid}/roles/${e.uuid}`,{method:"PUT",body:{display_name:e.display_name,permissions:g}}),await c()}catch(O){w.showMessage(O.message||"Failed to update role permission"),e.permissions=p}}async function fe(e){const i=new URLSearchParams({permission_id:e});await M(`/auth/api/admin/permission?${i.toString()}`,{method:"DELETE"}),await u()}function Ne(e){const i=r.value[e.id]?.userCount||0;let l=0;for(const O of C.value)for(const P of O.roles)P.permissions.includes(e.id)&&l++;if(l===0){fe(e.id).then(()=>{w.showMessage(`Permission "${e.display_name}" deleted.`,"success",2500)}).catch(O=>{w.showMessage(O.message||"Failed to delete permission","error")});return}const g=[];l>0&&g.push(`${l} role${l!==1?"s":""}`),i>0&&g.push(`${i} user${i!==1?"s":""}`);const p=g.join(", ");j("confirm",{message:`Delete permission "${e.display_name}" (${p})?`,action:async()=>{await fe(e.id)}})}function Te(){window.location.reload()}const se=H(()=>C.value.find(e=>e.uuid===N.value)||null);function ge(e){window.location.hash=`#org/${e.uuid}`}function xe(){window.location.hash="#overview"}function Ie(e){window.location.hash=`#user/${e.uuid}`}const B=H(()=>{if(!L.value)return null;for(const e of C.value)for(const i of e.roles){const l=i.users.find(g=>g.uuid===L.value);if(l)return{...l,org_uuid:e.uuid,role_display_name:i.display_name}}return null}),Fe=H(()=>B.value?"Admin: User":se.value?"Admin: Org":(w.settings?.rp_name||"Master")+" Admin"),Le=H(()=>{const e=[{label:"Auth",href:We()},{label:"Admin",href:Ye()}];let i=null;B.value&&(i=C.value.find(g=>g.uuid===B.value.org_uuid)||null);const l=se.value||i;return l&&e.push({label:l.display_name,href:`#org/${l.uuid}`}),B.value&&e.push({label:B.value.display_name||"User",href:`#user/${B.value.uuid}`}),e});Ze(B,async e=>{if(!e){T.value=null;return}try{T.value=await M(`/auth/api/admin/orgs/${e.org_uuid}/users/${e.uuid}`)}catch(i){T.value={error:i.message}}});const ue=$(!1);function Ke(e){ue.value=!0}async function Be(e,i,l){const g=e.permissions.includes(i);if(l&&g||!l&&!g)return;const p=l?[...e.permissions,i]:e.permissions.filter(P=>P!==i),O=[...e.permissions];e.permissions=p;try{const P=new URLSearchParams({permission_id:i});await M(`/auth/api/admin/orgs/${e.uuid}/permission?${P.toString()}`,{method:l?"POST":"DELETE"}),await c()}catch(P){w.showMessage(P.message||"Failed to update organization permission"),e.permissions=O}}function j(e,i){const l=document.activeElement;if(Y.value=l,e==="confirm"&&l){const g=l.closest("tr");if(g){const p=g.closest("tbody");if(p){const O=Array.from(p.querySelectorAll("tr")),P=O.indexOf(g);h.value.focusContext={tbody:p,index:P,total:O.length,selector:"button:not([disabled]), a"}}}}h.value={...h.value,type:e,data:i,busy:!1,error:""}}function G(){const e=Y.value,i=h.value.focusContext;h.value={type:null,data:null,busy:!1,error:""},ze(e,i),Y.value=null}function ze(e,i){if(!e)return;if(document.body.contains(e)&&!e.disabled){e.focus();return}if(i?.tbody&&i.selector){const p=Array.from(i.tbody.querySelectorAll("tr"));if(p.length>0){const O=Math.min(i.index,p.length-1),te=p[O]?.querySelector(i.selector);if(te){te.focus();return}}}const l=document.querySelector(".admin-panels");if(!l)return;const g=l.querySelector('button:not([disabled]), a, input:not([disabled]), [tabindex="0"]');g&&g.focus()}function _e(e){if(t.value)return;const i=_(e);i&&i==="down"&&(e.preventDefault(),Q.value?Q.value.focusFirstElement?.():f.value?f.value.focusFirstElement?.():s.value&&s.value.focusFirstElement?.())}function de(e){t.value||e==="up"&&Z.value?.focusCurrent?.()}async function ye(){if(await c(),B.value)try{T.value=await M(`/auth/api/admin/orgs/${B.value.org_uuid}/users/${B.value.uuid}`)}catch(e){w.showMessage(e.message||"Failed to reload user","error")}}async function ve(){await ye(),w.showMessage("User renamed","success",1500)}async function Ve(){if(!(!h.value.type||h.value.busy)){h.value.busy=!0,h.value.error="";try{const e=h.value.type;if(e==="org-create"){const i=h.value.data.name?.trim();if(!i)throw new Error("Name required");G(),M("/auth/api/admin/orgs",{method:"POST",body:{display_name:i,permissions:[]}}).then(()=>{w.showMessage(`Organization "${i}" created.`,"success",2500),Promise.all([c(),u()])}).catch(l=>{w.showMessage(l.message||"Failed to create organization","error")});return}else if(e==="org-update"){const{org:i}=h.value.data,l=h.value.data.name?.trim();if(!l)throw new Error("Name required");G(),M(`/auth/api/admin/orgs/${i.uuid}`,{method:"PUT",body:{display_name:l,permissions:i.permissions}}).then(()=>{w.showMessage(`Organization renamed to "${l}".`,"success",2500),c()}).catch(g=>{w.showMessage(g.message||"Failed to update organization","error")});return}else if(e==="role-create"){const{org:i}=h.value.data,l=h.value.data.name?.trim();if(!l)throw new Error("Name required");G(),M(`/auth/api/admin/orgs/${i.uuid}/roles`,{method:"POST",body:{display_name:l,permissions:[]}}).then(()=>{w.showMessage(`Role "${l}" created.`,"success",2500),c()}).catch(g=>{w.showMessage(g.message||"Failed to create role","error")});return}else if(e==="role-update"){const{role:i}=h.value.data,l=h.value.data.name?.trim();if(!l)throw new Error("Name required");G(),M(`/auth/api/admin/orgs/${i.org_uuid}/roles/${i.uuid}`,{method:"PUT",body:{display_name:l,permissions:i.permissions}}).then(()=>{w.showMessage(`Role renamed to "${l}".`,"success",2500),c()}).catch(g=>{w.showMessage(g.message||"Failed to update role","error")});return}else if(e==="user-create"){const{org:i,role:l}=h.value.data,g=h.value.data.name?.trim();if(!g)throw new Error("Name required");G(),M(`/auth/api/admin/orgs/${i.uuid}/users`,{method:"POST",body:{display_name:g,role:l.display_name}}).then(()=>{w.showMessage(`User "${g}" added to ${l.display_name} role.`,"success",2500),c()}).catch(p=>{w.showMessage(p.message||"Failed to add user","error")});return}else if(e==="user-update-name"){const{user:i}=h.value.data,l=h.value.data.name?.trim();if(!l)throw new Error("Name required");G(),M(`/auth/api/admin/orgs/${i.org_uuid}/users/${i.uuid}/display-name`,{method:"PUT",body:{display_name:l}}).then(()=>{w.showMessage(`User renamed to "${l}".`,"success",2500),ve()}).catch(g=>{w.showMessage(g.message||"Failed to update user name","error")});return}else if(e==="perm-display"){const{permission:i}=h.value.data,l=h.value.data.id?.trim(),g=h.value.data.display_name?.trim();if(!g)throw new Error("Display name required");if(!l)throw new Error("ID required");G();let p;if(l!==i.id)p=M("/auth/api/admin/permission/rename",{method:"POST",body:{old_id:i.id,new_id:l,display_name:g}});else if(g!==i.display_name){const te=new URLSearchParams({permission_id:i.id,display_name:g});p=M(`/auth/api/admin/permission?${te.toString()}`,{method:"PUT"})}else return;p.then(()=>{w.showMessage(`Permission "${g}" updated.`,"success",2500),u()}).catch(te=>{w.showMessage(te.message||"Failed to update permission","error")});return}else if(e==="confirm"){const i=h.value.data.action;i&&await i()}G()}catch(e){h.value.error=e.message||"Error"}finally{h.value.busy=!1}}}return(e,i)=>(m(),v("div",ps,[ae(at),a("main",bs,[K.value?(m(),V(it,{key:0,message:b.value},null,8,["message"])):R.value?(m(),V(rt,{key:1,onReload:Te})):y.value&&(I.value?.is_global_admin||I.value?.is_org_admin)?(m(),v("section",ws,[a("header",$s,[a("h1",null,A(Fe.value),1),ae(lt,{ref_key:"breadcrumbsRef",ref:Z,entries:Le.value,onKeydown:_e},null,8,["entries"])]),a("section",Ds,[a("div",ks,[E.value?(m(),v("div",Rs,A(E.value),1)):(m(),v("div",Os,[!B.value&&!se.value&&(I.value.is_global_admin||I.value.is_org_admin)?(m(),V(qt,{key:0,ref_key:"adminOverviewRef",ref:Q,info:I.value,orgs:C.value,permissions:q.value,"navigation-disabled":t.value,"permission-summary":r.value,onCreateOrg:F,onOpenOrg:ge,onUpdateOrg:ee,onDeleteOrg:Re,onToggleOrgPermission:Be,onOpenDialog:j,onDeletePermission:Ne,onRenamePermissionDisplay:d,onNavigateOut:de},null,8,["info","orgs","permissions","navigation-disabled","permission-summary"])):B.value?(m(),V(as,{key:1,ref_key:"adminUserDetailRef",ref:s,"selected-user":B.value,"user-detail":T.value,"selected-org":se.value,loading:K.value,"show-reg-modal":ue.value,"navigation-disabled":t.value,onGenerateUserRegistrationLink:Ke,onGoOverview:xe,onOpenOrg:ge,onOnUserNameSaved:ve,onRefreshUserDetail:ye,onEditUserName:le,onCloseRegModal:i[0]||(i[0]=l=>ue.value=!1),onNavigateOut:de},null,8,["selected-user","user-detail","selected-org","loading","show-reg-modal","navigation-disabled"])):se.value?(m(),V(Qt,{key:2,ref_key:"adminOrgDetailRef",ref:f,"selected-org":se.value,permissions:q.value,"navigation-disabled":t.value,onUpdateOrg:ee,onCreateRole:Pe,onUpdateRole:Me,onDeleteRole:Ee,onCreateUserInRole:Oe,onOpenUser:Ie,onToggleRolePermission:qe,onOnRoleDragOver:Ue,onNavigateOut:de,onOnRoleDrop:Ae,onOnUserDragStart:Ce},null,8,["selected-org","permissions","navigation-disabled"])):x("",!0)]))])])])):x("",!0)]),ae(hs,{dialog:h.value,"permission-id-pattern":Ss,onSubmitDialog:Ve,onCloseDialog:G},null,8,["dialog"])]))}},Us=re(Cs,[["__scopeId","data-v-3974e020"]]),ke=Qe(Us);ke.use(ut());ke.mount("#admin-app");Xe();
