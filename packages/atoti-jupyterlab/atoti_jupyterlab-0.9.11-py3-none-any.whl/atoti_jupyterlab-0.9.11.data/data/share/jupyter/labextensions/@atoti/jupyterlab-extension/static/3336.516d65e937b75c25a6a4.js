"use strict";(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[3336],{63711:(t,e,s)=>{function i(t,e){[["x"],["y"]].forEach((([s])=>{const i=t["x"===s?"horizontal":"vertical"],{keys:a,captions:o}=i;for(let t=0;t<a.length;t++){const i="x"===s?t+1:2*t+1;e({axis:s,subplotKey:`${s}axis${1===i?"":i}`,caption:o[t]})}}))}s.d(e,{U:()=>i})},53248:(t,e,s)=>{s.d(e,{F:()=>c});var i=s(31529),a=s(69278),o=s(16888),n=s(63711);function r(t){const{numberOfDecimals:e=2,numberFormat:s}=t,i=`,.${e}f`;let a;switch(s){case"percentage":a=" %";break;case"thousands":a=" K";break;case"millions":a=" M";break;case"billions":a=" B";break;default:a=void 0}return{tickformat:i,ticksuffix:a}}const c=(t,e,s)=>{if(!t)return{};const{mapping:c,style:u}=t;if((0,i.isEmpty)(u?.measures))return{};const l={},f={};(0,a.W)(e).forEach((([t,e])=>{if(!e)return;const s=c[e];if(s&&0!==s.length)for(const e of s){if(!(0,o.isMeasureInMapping)(e))continue;const s=u?.measures?.[e.measureName];if(!s)continue;const i=r(s);l[t]={tickformat:i.tickformat,...i.ticksuffix&&{ticksuffix:i.ticksuffix}},f[t]=i;break}}));const d=((t,e)=>{const s={};return(0,n.U)(t,(({axis:t,subplotKey:i})=>{const a=e[`${t}axis`];a&&(s[i]={tickformat:a.tickformat,...a.ticksuffix&&{ticksuffix:a.ticksuffix}})})),s})(s,f);return{...l,...d}}},14763:(t,e,s)=>{s.d(e,{U:()=>o});var i=s(69278),a=s(16888);const o=(t,e)=>{if(!t?.style?.areAxisTitlesVisible)return{};const s={},{mapping:o}=t;return(0,i.W)(e).forEach((([t,e])=>{const i=e?o[e]:void 0,n=[];i?.forEach((e=>{!(0,a.isMeasureInMapping)(e)||"yaxis2"===t&&o.verticalSubplots?.[0]?(0,a.isHierarchyInMapping)(e)&&n.push(e.levelName):n.push(e.caption??e.measureName)})),s[t]={title:{text:n.join(", "),standoff:20}}})),s}},77693:(t,e,s)=>{s.d(e,{w:()=>o});var i=s(95678),a=s(34007);const o=t=>{if(t.hasSecondaryYAxis){const e=(0,a.y)(t.subplots.vertical),s={};for(let t=0;t<e;t++)s["yaxis"+2*(t+1)]={overlaying:(0,i.D)(t),position:1,side:"right"};return s}return{}}},27675:(t,e,s)=>{s.d(e,{M:()=>a});var i=s(63711);const a=(t,e)=>{const s={};return(0,i.U)(t,(({axis:t,subplotKey:i,caption:a})=>{const o={title:a,...e?.fontSize&&{titlefont:{size:e?.fontSize}},...e?.[t]};s[i]=o})),s}},64811:(t,e,s)=>{s.d(e,{w:()=>o});var i=s(95678),a=s(34007);const o=t=>{if(0===t.horizontal.captions.length&&0===t.vertical.captions.length)return{};const e=(0,a.y)(t.vertical),s=(0,a.y)(t.horizontal),o=[];for(let t=0;t<e;t++){const e=[];for(let a=0;a<s;a++){const s=0===a?"x":`x${a+1}`,o=(0,i.D)(t);e.push(`${s}${o}`)}o.push(e)}return{grid:{rows:e,columns:s,subplots:o,pattern:"coupled"}}}},39153:(t,e,s)=>{s.d(e,{u:()=>i});const i=(t,e)=>{const s={};if(!t.orderedAxis.isTimeAxis)return s;s[e]={};const i=Boolean(t.orderMode),a=t.orderedAxis.isSorted;if(i&&!a)return s[e]={type:"category"},s;const o=t.orderedAxis.captions.length;return s[e]={type:"date",tickformat:t.d3DateFormat??"%Y-%m-%d",nticks:o<5?o:void 0},t.orderMode?.endsWith("DESC")&&(s[e].autorange="reversed"),s}},95678:(t,e,s)=>{function i(t){return 0===t?"y":"y"+(2*t+1)}s.d(e,{D:()=>i})},34007:(t,e,s)=>{s.d(e,{y:()=>i});const i=({captions:t,limit:e})=>Math.max(1,Math.min(t.length,e))},18594:(t,e,s)=>{s.d(e,{n:()=>a});const i={showspikes:!0,spikethickness:1,spikemode:"toaxis+across+marker"},a={xaxis:i,yaxis:i}},18665:(t,e,s)=>{s.d(e,{C:()=>o});var i=s(90147),a=s(31529);const o=(t,{axes:e,fontSize:s})=>void 0===s?t:(0,i.produce)(t,(t=>{for(const s of e)s in t||(t[s]={});for(const e in t)e.startsWith("xaxis")||e.startsWith("yaxis")?(0,a.set)(t,[e,"tickfont","size"],s):e.startsWith("polar")&&(0,a.set)(t,[e,"angularaxis","tickfont","size"],s)}))},3336:(t,e,s)=>{s.r(e),s.d(e,{default:()=>d});var i=s(74389),a=s(93345),o=s(47357),n=s(46250),r=s(54809),c=s(80343),u=s(17231),l=s(8169),f=s(77112);const d=(0,u.withLoadingOverlay)((0,u.withoutIrrelevantRenders)((0,n.c)((0,a.memo)((t=>{const{cube:e,data:s,metaData:n,widgetState:u}=t,{formatMessage:d}=(0,o.useIntl)(),[p]=(0,c.i)("style.members"),x=d({id:"aui.total"}),m=(0,a.useMemo)((()=>(0,f.A)({cube:e,data:s,metaData:n,widgetState:u,captionForTotals:x,userTupleStyles:p})),[e,s,n,u,x,p]),y=(0,a.useMemo)((()=>((t,e)=>(0,l.v)(t,e))(n,u)),[n,u]);return(0,i.Y)(r.Kl,{...t,traces:m,layout:y,cube:e,data:s,metaData:n})})))))},8169:(t,e,s)=>{s.d(e,{v:()=>p});var i=s(18594),a=s(64811),o=s(27675),n=s(39153),r=s(77693),c=s(14763),u=s(53248),l=s(18665),f=s(78351);const d={xaxis:"xAxis",yaxis:"values",yaxis2:"secondaryValues"},p=(t,e)=>{if(!t)return{};let s=(0,f.Z)(i.n,(0,a.w)(t.subplots),(0,o.M)(t.subplots,{fontSize:e?.style?.axisLabelFontSize}),(0,n.u)(t,"xaxis"),(0,r.w)(t),(0,c.U)(e,d),(0,u.F)(e,d,t.subplots));return s=(0,l.C)(s,{axes:["xaxis","yaxis"],fontSize:e?.style?.axisLabelFontSize}),s}},78351:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(90147),a=s(31529);const o=function(t,...e){return(0,i.produce)(t??{},(t=>{(0,a.defaultsDeep)(t,...e)}))}}}]);