"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3150],{77213:function(e,t,i){i.d(t,{Z:function(){return f}});var n=i(24246),a=i(41013),s=i(88038),r=i.n(s),o=i(86677);i(27378);var l=i(25980),u=i(90867),d=i(42478),c=i(77830),g=()=>{let e=(0,o.useRouter)();return(0,n.jsx)(a.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,n.jsxs)(a.xuv,{children:[(0,n.jsxs)(a.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,n.jsx)(a.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,n.jsx)(a.wpx,{onClick:()=>{e.push(c.AD)},children:"Configure"})]}),(0,n.jsxs)(a.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},f=e=>{let{children:t,title:i,padded:s=!0,mainProps:c}=e,f=(0,l.hz)(),p=(0,o.useRouter)(),m="/privacy-requests"===p.pathname||"/datastore-connection"===p.pathname,y=!(f.flags.messagingConfiguration&&m),{data:v}=(0,d.JE)(void 0,{skip:y}),{data:h}=(0,u.PW)(void 0,{skip:y}),x=f.flags.messagingConfiguration&&(!v||!h)&&m;return(0,n.jsxs)(a.kCb,{"data-testid":i,direction:"column",h:"100vh",children:[(0,n.jsxs)(r(),{children:[(0,n.jsxs)("title",{children:["Fides Admin UI - ",i]}),(0,n.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)(a.kCb,{as:"main",direction:"column",py:s?6:0,px:s?10:0,h:s?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[x?(0,n.jsx)(g,{}):null,t]})]})}},58754:function(e,t,i){var n=i(24246),a=i(41013),s=i(70788);t.Z=e=>{let{heading:t,breadcrumbItems:i,isSticky:r=!0,children:o,rightContent:l,style:u,...d}=e;return(0,n.jsxs)("div",{...d,style:r?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...u}:{paddingBottom:"24px",...u},children:[(0,n.jsxs)(a.jqI,{justify:"space-between",children:["string"==typeof t?(0,n.jsx)(a.lQT,{className:i||o?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,l&&(0,n.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!i&&(0,n.jsx)(s.m,{className:o?"pb-4":void 0,items:i,"data-testid":"page-breadcrumb"}),o]})}},83099:function(e,t,i){var n=i(24246),a=i(79283),s=i(34929);t.Z=e=>{let{selectedTaxonomies:t,showDisabled:i=!1,...r}=e,{getDataUseDisplayNameProps:o,getDataUses:l}=(0,s.Z)(),u=(i?l():l().filter(e=>e.active)).filter(e=>!(null==t?void 0:t.includes(e.fides_key))).map(e=>{let{name:t,primaryName:i}=o(e.fides_key);return{value:e.fides_key,name:t,primaryName:i,description:e.description||""}});return(0,n.jsx)(a.l,{options:u,...r})}},70788:function(e,t,i){i.d(t,{m:function(){return u}});var n=i(24246),a=i(41013),s=i(79894),r=i.n(s),o=i(27378);let{Text:l}=a.AntTypography,u=e=>{let{items:t,...i}=e,s=(0,o.useMemo)(()=>null==t?void 0:t.map((e,i)=>{let s=i===t.length-1,o={...e},u=o.onClick&&!o.href;return("string"==typeof o.title&&(o.title=(0,n.jsx)(l,{style:{color:"inherit",maxWidth:s?void 0:400},ellipsis:!s,id:s?"breadcrumb-current-page":void 0,children:o.title})),u)?o.title=(0,n.jsx)(a.wpx,{type:"text",size:"small",icon:o.icon,onClick:o.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:o.title}):(o.icon&&(o.title=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"anticon align-text-bottom",children:o.icon}),o.title]})),o.href&&o.title&&(o.title=(0,n.jsx)(r(),{href:o.href,className:"ant-breadcrumb-link",children:o.title}),delete o.href)),o}),[t]);return(0,n.jsx)(a.zrq,{items:s,...i})}},26183:function(e,t,i){var n=i(24246);i(27378),t.Z=e=>{let{children:t,className:i,...a}=e;return(0,n.jsx)("div",{className:"relative flex w-full flex-wrap items-center gap-2 overflow-x-auto py-2 ".concat(i||""),...a,children:t})}},3765:function(e,t,i){var n=i(41013),a=i(20987),s=i(812),r=i(46628),o=i(32885),l=i(1315),u=i(31883);let d=(e,t)=>{let i=[],n=[];return Object.entries(e).forEach(e=>{let[a,s]=e;s?i.push({id:a,value:s,resource_id:t,custom_field_definition_id:a}):n.push(a)}),{upsert:i,delete:n,resource_type:a.J.PRIVACY_DECLARATION,resource_id:t}};t.Z=e=>{let t=(0,n.pmc)(),[i]=(0,l.qQ)(),[a]=(0,o._D)(),c=i=>!!e.privacy_declarations.find(e=>e.data_use===i.data_use&&e.name===i.name)&&(t((0,r.Vo)("A declaration already exists with that data use in this system. Please supply a different data use.")),!0),g=e=>{let{systemResult:i,customFieldsResult:n,isDelete:a}=e;if((0,u.D4)(i)){let e=(0,s.e$)(i.error,"An unexpected error occurred while updating the system. Please try again.");t((0,r.Vo)(e));return}if(n&&(0,u.D4)(n)){let e=(0,s.e$)(n.error,"Data use was updated, but an error occurred while updating custom fields. Please try again.");t((0,r.Vo)(e));return}return t((0,r.t5)(a?"Data use deleted":"Data use saved")),i.data.privacy_declarations},f=async(t,n,s,r)=>{let o;let l=t.map(e=>{var t;return{...e,name:null!==(t=e.name)&&void 0!==t?t:""}}),u={...e,privacy_declarations:l},c=await i(u);if(s&&r){var f,p;let e=null==c?void 0:null===(p=c.data)||void 0===p?void 0:null===(f=p.privacy_declarations)||void 0===f?void 0:f.find(e=>e.data_use===r);if(e){let t=d(s,e.id);o=await a(t)}}return g({systemResult:c,customFieldsResult:o,isDelete:n})};return{createDataUse:async i=>{if(c(i))return;let{customFieldValues:n,...a}=i;return t.closeAll(),f([...e.privacy_declarations,a],!1,n,a.data_use)},updateDataUse:async(t,i)=>{if(i.id!==t.id&&c(i))return;let{customFieldValues:n,...a}=i;return f(e.privacy_declarations.map(e=>e.id===t.id?a:e),!1,n,a.data_use)},deleteDataUse:async t=>f(e.privacy_declarations.filter(e=>e.id!==t.id),!0),deleteDeclarationByDataUse:async t=>f(e.privacy_declarations.filter(e=>e.data_use!==t),!0)}}},42478:function(e,t,i){i.d(t,{FU:function(){return u},JE:function(){return a},Ki:function(){return c},SU:function(){return g},W:function(){return f},h9:function(){return s},jc:function(){return n},qt:function(){return l},sn:function(){return d}});let{useGetEmailInviteStatusQuery:n,useGetActiveMessagingProviderQuery:a,useCreateMessagingConfigurationMutation:s,useCreateMessagingConfigurationSecretsMutation:r,useGetMessagingConfigurationDetailsQuery:o,useGetMessagingConfigurationsQuery:l,useGetMessagingConfigurationByKeyQuery:u,useUpdateMessagingConfigurationByKeyMutation:d,useUpdateMessagingConfigurationSecretsByKeyMutation:c,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:f}=i(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,i,n)=>{let a=await n({url:"messaging/default/active"});return a.error&&404===a.error.status?{data:null}:a},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},54748:function(e,t,i){var n=i(27378),a=i(60240);t.Z=()=>({legalBasisOptions:(0,n.useMemo)(()=>Object.keys(a.gP).map(e=>({value:a.gP[e],label:a.gP[e]})),[])})},28325:function(e,t,i){var n=i(27378),a=i(60240);t.Z=()=>({specialCategoryLegalBasisOptions:(0,n.useMemo)(()=>Object.keys(a.nV).map(e=>({value:a.nV[e],label:a.nV[e]})),[])})}}]);