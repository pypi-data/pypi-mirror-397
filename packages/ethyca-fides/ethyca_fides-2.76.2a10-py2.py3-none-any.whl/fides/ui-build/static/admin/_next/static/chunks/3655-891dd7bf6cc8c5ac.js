"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3655],{59969:function(e,n,r){var t=r(24246),l=r(41013);r(27378);var i=r(8557);n.Z=e=>{let n,{daysLeft:r,includeText:a,status:s}=e;if(!r||s===i.q.COMPLETE||s===i.q.CANCELED||s===i.q.DENIED||s===i.q.IDENTITY_UNVERIFIED)return(0,t.jsx)("span",{children:"-"});switch(!0){case r>=10:n=l.tAb.SUCCESS;break;case r<10&&r>4:n=l.tAb.WARNING;break;case r<5:n=l.tAb.ERROR}return(0,t.jsx)(l.j8w,{color:n,children:a?"".concat(r," days left"):r})}},18225:function(e,n,r){var t=r(24246),l=r(41013);n.Z=e=>{let{alignment:n="center",...r}=e;return(0,t.jsx)(l.kCb,{boxSize:"full",align:"center",justify:n,children:(0,t.jsx)(l.$jN,{color:"primary",...r})})}},19904:function(e,n,r){r.d(n,{Tg:function(){return a}});var t=r(24246),l=r(16134),i=r(31793);let a=e=>(0,l.C)(i.uu).filter(n=>e.includes(n)).length>0;n.ZP=e=>{let{scopes:n,children:r}=e;return a(n)?(0,t.jsx)(t.Fragment,{children:r}):null}},57526:function(e,n,r){var t=r(24246),l=r(41013),i=r(27378),a=r(90449);n.Z=e=>{let{isOpen:n,onClose:r,onApproveRequest:s,isLoading:u,subjectRequest:c}=e,{identity:o,identity_verified_at:d,custom_privacy_request_fields:h}=c,f=(0,a.o8)(o),x=(0,a.Ub)(o,f),y=[...f?[f]:[],...x],p=(0,a.aP)(h),m=(0,i.useCallback)(()=>{s().then(()=>{r()})},[s,r]);return(0,t.jsxs)(l.u_l,{isOpen:n,onClose:r,size:"lg",isCentered:!0,children:[(0,t.jsx)(l.ZAr,{}),(0,t.jsxs)(l.hzk,{children:[(0,t.jsx)(l.xBx,{children:"Privacy request approval"}),(0,t.jsxs)(l.fef,{paddingTop:0,paddingBottom:0,children:[(0,t.jsx)(l.xvT,{color:"gray.500",fontSize:"14px",marginBottom:4,children:"Are you sure you want to approve this privacy request?"}),(0,t.jsxs)(l.QI$,{children:[y.map(e=>(0,t.jsx)(l.HCh,{children:(0,t.jsxs)(l.kCb,{alignItems:"flex-start",children:[(0,t.jsxs)(l.xvT,{mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[e.label,":"]}),(0,t.jsx)(l.xvT,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:e.value}),"(",d?"Verified":"Unverified",")"]})},e.key)),p.map(e=>(0,t.jsx)(l.HCh,{children:(0,t.jsxs)(l.kCb,{alignItems:"flex-start",children:[(0,t.jsxs)(l.xvT,{mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[e.label,":"]}),(0,t.jsx)(l.xvT,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:Array.isArray(e.value)?e.value.join(", "):String(e.value)}),"(Unverified)"]})},e.key))]})]}),(0,t.jsx)(l.mzw,{children:(0,t.jsxs)(l.MIq,{columns:2,width:"100%",children:[(0,t.jsx)(l.wpx,{onClick:r,className:"mr-3","data-testid":"cancel-btn",children:"Cancel"}),(0,t.jsx)(l.wpx,{type:"primary","data-testid":"continue-btn",onClick:m,loading:u,children:"Confirm"})]})})]})]})}},66548:function(e,n,r){var t=r(24246),l=r(40324),i=r(41013),a=r(34090),s=r(27378),u=r(55484);let c={denialReason:""};n.Z=e=>{let{isOpen:n,onClose:r,onDenyRequest:o}=e,d=(0,s.useCallback)((e,n)=>{let{setSubmitting:t}=n;o(e.denialReason).then(()=>{t(!1),r()})},[o,r]);return(0,t.jsxs)(i.u_l,{isOpen:n,onClose:r,isCentered:!0,returnFocusOnClose:!1,children:[(0,t.jsx)(i.ZAr,{}),(0,t.jsx)(i.hzk,{width:"100%",maxWidth:"456px","data-testid":"deny-privacy-request-modal",children:(0,t.jsx)(a.J9,{initialValues:c,validationSchema:u.Ry({denialReason:u.Z_().required().label("Reason for denial")}),onSubmit:d,children:e=>{let{isSubmitting:n,dirty:s,isValid:u}=e;return(0,t.jsxs)(a.l0,{children:[(0,t.jsx)(i.xBx,{children:"Privacy request denial"}),(0,t.jsx)(i.fef,{color:"gray.500",fontSize:"14px",children:"Please enter a reason for denying this privacy request. Please note: this can be seen by the user in their notification email."}),(0,t.jsx)(i.fef,{children:(0,t.jsx)(l.Ks,{name:"denialReason",textAreaProps:{focusBorderColor:"primary.600",resize:"none"}})}),(0,t.jsxs)(i.mzw,{className:"flex w-full gap-4",children:[(0,t.jsx)(i.wpx,{disabled:n,onClick:r,className:"grow",children:"Cancel"}),(0,t.jsx)(i.wpx,{htmlType:"submit",type:"primary",disabled:!s||!u,loading:n,className:"grow","data-testid":"deny-privacy-request-modal-btn",children:"Confirm"})]})]})}})})]})}},90449:function(e,n,r){r.d(n,{$u:function(){return y},Pp:function(){return c},Ub:function(){return h},V1:function(){return x},aP:function(){return f},o8:function(){return d}});var t=r(90104),l=r.n(t),i=r(30644),a=r.n(i),s=r(71975),u=r.n(s);let c=(0,r(40431).jo)({parse:e=>{try{return JSON.parse(e)}catch(e){return null}},serialize:e=>JSON.stringify(e)}).withOptions({throttleMs:500}),o=(e,n)=>n?"string"==typeof n&&n.length>0?{value:n,label:e,key:e}:"object"!=typeof n||l()(n.value)?null:{value:n.value,label:n.label,key:e}:null,d=e=>{if(!e)return null;let n=o("email",e.email);if(n)return n;let r=o("phone_number",e.phone_number);if(r)return r;let t=Object.keys(e);return t.length>0?o(t[0],e[t[0]]):null},h=(e,n)=>e?Object.entries(e).map(e=>{let[n,r]=e;return o(n,r)}).filter(e=>!!e).filter(e=>e.key!==(null==n?void 0:n.key)):[],f=e=>e&&e?Object.entries(e).filter(e=>{let[,n]=e;return!a()(n.value)&&""!==n.value}).map(e=>{let[n,r]=e;return{key:n,label:r.label,value:r.value}}):[],x=e=>{if(!e)return{};let n={};return e.forEach(e=>{e.custom_privacy_request_fields&&Object.entries(e.custom_privacy_request_fields).forEach(e=>{let[r,t]=e;n[r]||(n[r]=t)})}),n},y=e=>{if(!e)return null;let n=u()(e,e=>null!==e);return Object.keys(n).length>0?n:null}},45489:function(e,n,r){r.d(n,{Z:function(){return l}});var t=r(90867);let l=e=>{let{subjectRequest:n}=e,[r,l]=(0,t.RW)({fixedCacheKey:n.id}),[i,a]=(0,t.F1)({fixedCacheKey:n.id}),[s,u]=(0,t.rC)({fixedCacheKey:n.id}),[c,o]=(0,t.zB)({fixedCacheKey:n.id}),d=a.isLoading||l.isLoading||o.isLoading;return{approveRequest:r,approveRequestResult:l,denyRequest:i,denyRequestResult:a,handleApproveRequest:()=>r({id:n.id}),handleDenyRequest:e=>i({id:n.id,reason:e}),handleDeleteRequest:()=>s({id:n.id}),handleFinalizeRequest:()=>c({privacyRequestId:n.id}),softDeleteRequestResult:u,finalizeRequestResult:o,isLoading:d}}},72281:function(e,n,r){r.d(n,{G:function(){return s},d:function(){return u}});var t=r(86677),l=r(27378),i=r(19904),a=r(60240);let s={REQUEST:"request",MANUAL_TASK:"manual-tasks"},u=()=>{let e=(0,t.useRouter)(),n=(0,i.Tg)([a.Sh.PRIVACY_REQUEST_READ]),r=(0,i.Tg)([a.Sh.MANUAL_FIELD_READ_OWN,a.Sh.MANUAL_FIELD_READ_ALL]),u=(0,l.useMemo)(()=>({request:n,manualTask:r}),[n,r]),[c,o]=(0,l.useState)(u.request?s.REQUEST:s.MANUAL_TASK),d=(0,l.useCallback)(()=>{let{tab:n}=e.query;return n&&"string"==typeof n&&Object.values(s).includes(n)?n:null},[e.query]),h=(0,l.useCallback)(n=>{e.replace({pathname:e.pathname,query:{tab:n}},void 0,{shallow:!0})},[e]);return(0,l.useEffect)(()=>{if(!e.isReady)return;let n=d();n?(n===s.REQUEST||n===s.MANUAL_TASK&&u.manualTask)&&o(n):u.request&&o(s.REQUEST)},[e.isReady,e.query,u,d,h]),{activeTab:c,handleTabChange:(0,l.useCallback)(e=>{Object.values(s).includes(e)&&(o(e),h(e))},[h]),availableTabs:u}}}}]);