(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7890],{58095:function(e,t,n){var i=n(8817);e.exports=function(e,t){return!!(null==e?0:e.length)&&i(e,t,0)>-1}},21796:function(e){e.exports=function(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}},95372:function(e){e.exports=function(e,t,n,i){for(var r=e.length,l=n+(i?1:-1);i?l--:++l<r;)if(t(e[l],l,e))return l;return -1}},8817:function(e,t,n){var i=n(95372),r=n(1129),l=n(58263);e.exports=function(e,t,n){return t==t?l(e,t,n):i(e,r,n)}},1129:function(e){e.exports=function(e){return e!=e}},74833:function(e,t,n){var i=n(56127),r=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(r,""):e}},92198:function(e,t,n){var i=n(52485),r=n(58095),l=n(21796),o=n(65581),s=n(47111),a=n(43735);e.exports=function(e,t,n){var u=-1,c=r,d=e.length,f=!0,m=[],p=m;if(n)f=!1,c=l;else if(d>=200){var h=t?null:s(e);if(h)return a(h);f=!1,c=o,p=new i}else p=t?[]:m;e:for(;++u<d;){var v=e[u],g=t?t(v):v;if(v=n||0!==v?v:0,f&&g==g){for(var x=p.length;x--;)if(p[x]===g)continue e;t&&p.push(g),m.push(v)}else c(p,g,n)||(p!==m&&p.push(g),m.push(v))}return m}},56632:function(e,t,n){var i=n(89278),r=n(80068),l=n(50098);e.exports=function(e){return function(t,n,o){var s=Object(t);if(!r(t)){var a=i(n,3);t=l(t),n=function(e){return a(s[e],e,s)}}var u=e(t,n,o);return u>-1?s[a?t[u]:u]:void 0}}},47111:function(e,t,n){var i=n(46151),r=n(50344),l=n(43735),o=i&&1/l(new i([,-0]))[1]==1/0?function(e){return new i(e)}:r;e.exports=o},58263:function(e){e.exports=function(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return -1}},56127:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},66726:function(e,t,n){var i=n(11611),r=n(82846),l=n(91936),o=Math.max,s=Math.min;e.exports=function(e,t,n){var a,u,c,d,f,m,p=0,h=!1,v=!1,g=!0;if("function"!=typeof e)throw TypeError("Expected a function");function x(t){var n=a,i=u;return a=u=void 0,p=t,d=e.apply(i,n)}function y(e){var n=e-m,i=e-p;return void 0===m||n>=t||n<0||v&&i>=c}function j(){var e,n,i,l=r();if(y(l))return b(l);f=setTimeout(j,(e=l-m,n=l-p,i=t-e,v?s(i,c-n):i))}function b(e){return(f=void 0,g&&a)?x(e):(a=u=void 0,d)}function k(){var e,n=r(),i=y(n);if(a=arguments,u=this,m=n,i){if(void 0===f)return p=e=m,f=setTimeout(j,t),h?x(e):d;if(v)return clearTimeout(f),f=setTimeout(j,t),x(m)}return void 0===f&&(f=setTimeout(j,t)),d}return t=l(t)||0,i(n)&&(h=!!n.leading,c=(v="maxWait"in n)?o(l(n.maxWait)||0,t):c,g="trailing"in n?!!n.trailing:g),k.cancel=function(){void 0!==f&&clearTimeout(f),p=0,a=m=u=f=void 0},k.flush=function(){return void 0===f?d:b(r())},k}},64925:function(e,t,n){var i=n(56632)(n(66259));e.exports=i},66259:function(e,t,n){var i=n(95372),r=n(89278),l=n(47991),o=Math.max;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return -1;var a=null==n?0:l(n);return a<0&&(a=o(s+a,0)),i(e,r(t,3),a)}},50344:function(e){e.exports=function(){}},82846:function(e,t,n){var i=n(77400);e.exports=function(){return i.Date.now()}},94919:function(e,t,n){var i=n(91936),r=1/0;e.exports=function(e){return e?(e=i(e))===r||e===-r?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},47991:function(e,t,n){var i=n(94919);e.exports=function(e){var t=i(e),n=t%1;return t==t?n?t-n:t:0}},91936:function(e,t,n){var i=n(74833),r=n(11611),l=n(55193),o=0/0,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(l(e))return o;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=a.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):s.test(e)?o:+e}},83766:function(e,t,n){var i=n(92198);e.exports=function(e){return e&&e.length?i(e):[]}},50755:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center/infrastructure/[monitorId]",function(){return n(72734)}])},58754:function(e,t,n){"use strict";var i=n(24246),r=n(41013),l=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:o=!0,children:s,rightContent:a,style:u,...c}=e;return(0,i.jsxs)("div",{...c,style:o?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...u}:{paddingBottom:"24px",...u},children:[(0,i.jsxs)(r.jqI,{justify:"space-between",children:["string"==typeof t?(0,i.jsx)(r.lQT,{className:n||s?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,a&&(0,i.jsx)("div",{"data-testid":"page-header-right-content",children:a})]}),!!n&&(0,i.jsx)(l.m,{className:s?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),s]})}},79283:function(e,t,n){"use strict";n.d(t,{l:function(){return c}});var i=n(24246),r=n(41013),l=n(72707),o=n.n(l);let s=e=>{let{data:{formattedTitle:t,description:n,name:l,primaryName:o}}=e;return(0,i.jsxs)(r.jqI,{gap:12,title:"".concat(t," - ").concat(n),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:o||l}),o&&": ".concat(l)]}),(0,i.jsx)("em",{className:"overflow-hidden text-ellipsis",children:n})]})},a=e=>"options"in e&&Array.isArray(e.options),u=e=>({...e,className:o().option,formattedTitle:e.formattedTitle||[e.primaryName,e.name].filter(e=>e).join(": ")}),c=e=>{let{options:t,...n}=e,l=null==t?void 0:t.map(e=>a(e)?{...e,options:e.options.map(u)}:u(e));return(0,i.jsx)(r.WPr,{options:l,filterOption:(e,t)=>{var n,i;return(null==t?void 0:null===(n=t.formattedTitle)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null==t?void 0:null===(i=t.value)||void 0===i?void 0:i.toLowerCase().includes(e.toLowerCase()))||!1},optionFilterProp:"label",autoFocus:!0,variant:"borderless",optionRender:s,styles:{popup:{root:{minWidth:"500px"}}},className:"w-full p-0","data-testid":"taxonomy-select",...n})}},34929:function(e,t,n){"use strict";var i=n(24246),r=n(64925),l=n.n(r),o=n(27378),s=n(16134),a=n(30002),u=n(28079),c=n(57072);let d=()=>{let{isLoading:e}=(0,u.fd)(),t=(0,s.C)(u.U3),{isLoading:n}=(0,c.MO)(),i=(0,s.C)(c.qb),{isLoading:r}=(0,a.te)();return{dataUses:t,dataSubjects:(0,s.C)(a.ZL),dataCategories:i,isLoading:e||n||r}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:n,isLoading:r}=d(),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t(e);if(!i)return{};let r=t(s(e,n)),l=!!i.parent_key;return{name:i.name||void 0,primaryName:l&&(null==r?void 0:r.name)!==i.name&&(null==r?void 0:r.name)||void 0}},u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{name:r,primaryName:l}=a(e,t,n);return r?l?(0,i.jsxs)(o.Fragment,{children:[(0,i.jsxs)("strong",{children:[l,":"]})," ",r]},e):(0,i.jsx)("strong",{children:r},e):e},c=t=>l()(e,{fides_key:t}),f=e=>l()(t,{fides_key:e}),m=e=>l()(n,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:c,getDataUseDisplayName:e=>u(e,c,1),getDataUseDisplayNameProps:e=>a(e,c,1),getDataCategories:()=>t,getDataCategoryByKey:f,getDataCategoryDisplayName:e=>u(e,f,2),getDataCategoryDisplayNameProps:e=>a(e,f,2),getDataSubjects:()=>n,getDataSubjectByKey:m,getDataSubjectDisplayName:e=>{let t=m(e);return t?t.name:e},getDataSubjectDisplayNameProps:e=>{let t=m(e);return t?{name:t.name||e}:{}},getPrimaryKey:s,isLoading:r}}},70788:function(e,t,n){"use strict";n.d(t,{m:function(){return u}});var i=n(24246),r=n(41013),l=n(79894),o=n.n(l),s=n(27378);let{Text:a}=r.AntTypography,u=e=>{let{items:t,...n}=e,l=(0,s.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let l=n===t.length-1,s={...e},u=s.onClick&&!s.href;return("string"==typeof s.title&&(s.title=(0,i.jsx)(a,{style:{color:"inherit",maxWidth:l?void 0:400},ellipsis:!l,id:l?"breadcrumb-current-page":void 0,children:s.title})),u)?s.title=(0,i.jsx)(r.wpx,{type:"text",size:"small",icon:s.icon,onClick:s.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:s.title}):(s.icon&&(s.title=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"anticon align-text-bottom",children:s.icon}),s.title]})),s.href&&s.title&&(s.title=(0,i.jsx)(o(),{href:s.href,className:"ant-breadcrumb-link",children:s.title}),delete s.href)),s}),[t]);return(0,i.jsx)(r.zrq,{items:l,...n})}},9270:function(e,t,n){"use strict";n.d(t,{S:function(){return l}});var i=n(27378),r=n(36866);let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.h)(e),{pageIndex:n,pageSize:l,updatePageIndex:o,updatePageSize:s,pageSizeOptions:a,showSizeChanger:u}=t,c=(0,i.useMemo)(()=>({current:n,pageSize:l,showSizeChanger:u,pageSizeOptions:a.map(String),onChange:o,onShowSizeChange:(e,t)=>{s(t)}}),[n,l,u,a,o,s]);return{...t,paginationProps:c}}},57072:function(e,t,n){"use strict";n.d(t,{Bd:function(){return i.Bd},L5:function(){return i.L5},MO:function(){return i.MO},qb:function(){return i.qb}});var i=n(5785)},72734:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var i=n(24246),r=n(86677),l=n(35287),o=n(77830),s=n(58754),a=n(41013),u=n(27378),c=n(30952),d=n(37059),f=n(16394),m=n(79283),p=n(34929),h=e=>{let{onSelectDataCategory:t,urn:n,...r}=e,{getDataUseDisplayNameProps:l,getDataUses:o}=(0,p.Z)(),s=o().filter(e=>e.active),[c,d]=(0,u.useState)(!1),f=s.map(e=>{let{name:t,primaryName:n}=l(e.fides_key);return{value:e.fides_key,label:(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:n||t}),n&&": ".concat(t)]}),name:t,primaryName:n,description:e.description||""}});return(0,i.jsx)(m.l,{options:f,prefix:(0,i.jsx)(a.wpx,{"aria-label":"Add Data Category",type:"text",size:"small",icon:(0,i.jsx)(a.PJP.mm_,{}),disabled:r.disabled}),placeholder:"",suffixIcon:null,classNames:{root:"w-full max-w-full overflow-hidden p-0 cursor-pointer -ml-5"},style:{"--ant-select-multiple-selector-bg-disabled":"transparent"},variant:"borderless",autoFocus:!1,maxTagCount:"responsive",open:c,onOpenChange:e=>d(e),onSelect:e=>{t(e),d(!1)},"data-classification-select":n,popupMatchSelectWidth:600,...r})},v=n(812),g=n(46628),x=n(70675),y=n(88708);let j=e=>{let{monitorId:t,system:n,allowIgnore:r,activeTab:l,addIcon:o=(0,i.jsx)(a.PJP.MCw,{}),ignoreIcon:s=(0,i.jsx)(a.PJP.uzw,{}),onPromoteSuccess:u}=e,[c,{isLoading:d}]=(0,x.Kj)(),[f,{isLoading:m}]=(0,x.Lm)(),[p,{isLoading:h}]=(0,x.RA)(),j=(0,a.pmc)(),b=async()=>{if(!n.urn){j((0,g.Vo)("Cannot promote: system URN is missing"));return}let e=await c({monitor_config_key:t,urn:n.urn});(0,v.D4)(e)?j((0,g.Vo)((0,v.e$)(e.error))):(j((0,g.t5)("".concat(n.name||"System"," has been promoted to the system inventory."))),u&&u())},k=async()=>{if(!n.urn){j((0,g.Vo)("Cannot ignore: system URN is missing"));return}let e=await f({monitor_config_key:t,urn:n.urn});(0,v.D4)(e)?j((0,g.Vo)((0,v.e$)(e.error))):(j((0,g.t5)("".concat(n.name||"System"," has been ignored."))),u&&u())},_=async()=>{if(!n.urn){j((0,g.Vo)("Cannot restore: system URN is missing"));return}let e=await p({monitor_config_key:t,urn:n.urn});(0,v.D4)(e)?j((0,g.Vo)((0,v.e$)(e.error))):(j((0,g.t5)("".concat(n.name||"System"," has been restored."))),u&&u())},w=d||m||h,S=l===y.A.IGNORED;return(0,i.jsxs)(a.vyj,{children:[r&&!S&&(0,i.jsx)(a.esZ,{title:"Ignore",children:(0,i.jsx)(a.wpx,{"data-testid":"ignore-btn",size:"small",onClick:k,disabled:!n.urn||w,loading:m,icon:s,"aria-label":"Ignore",children:!s&&"Ignore"})}),S?(0,i.jsx)(a.esZ,{title:n.urn?"Restore":"This system cannot be restored: URN is missing.",children:(0,i.jsx)(a.wpx,{"data-testid":"restore-btn",size:"small",onClick:_,disabled:!n.urn||w,loading:h,icon:(0,i.jsx)(a.PJP.CQM,{}),"aria-label":"Restore",children:"Restore"})}):(0,i.jsx)(a.esZ,{title:n.urn?"Add":"This system cannot be promoted: URN is missing.",children:(0,i.jsx)(a.wpx,{"data-testid":"add-btn",size:"small",onClick:b,disabled:!n.urn||w,loading:d,icon:o,"aria-label":"Add",children:!o&&"Add"})})]})},b=e=>{let{label:t,closable:n,onClose:r,isFromClassifier:l}=e;return(0,i.jsx)(a.j8w,{color:"white",bordered:!0,onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},closable:n,onClose:r,style:{marginInlineEnd:"calc((var(--ant-padding-xs) * 0.5))"},icon:l&&(0,i.jsx)(a.QMR,{}),children:(0,i.jsx)(a.lKn,{size:"sm",children:t})})},k=e=>{var t,n,r,l,o;let{item:s,selected:c,onSelect:d,onNavigate:m,rowClickUrl:p,monitorId:v,activeTab:g,allowIgnore:x,onSetDataCategories:y,onSelectDataCategory:k,dataCategoriesDisabled:_,onPromoteSuccess:w}=e,S=null!==(n=null!==(t=s.urn)&&void 0!==t?t:s.id)&&void 0!==n?n:"",C=null==p?void 0:p(s),{metadata:N}=s,I=null!==(r=s.name)&&void 0!==r?r:"Uncategorized",E=null!==(l=null==N?void 0:N.app_type)&&void 0!==l?l:"System type",D=(0,u.useMemo)(()=>{if(null==N?void 0:N.vendor_logo_url)return N.vendor_logo_url;let e=s.vendor_id||I;if(e&&"Uncategorized"!==e)try{let t=(0,f.ge)(e);if(t)return(0,f.Ms)(t,36)}catch(e){}},[null==N?void 0:N.vendor_logo_url,s.vendor_id,I]),R=e=>{d&&S&&d(S,e)};return(0,i.jsx)(a.krs.Item,{actions:[(0,i.jsx)(j,{monitorId:v,system:s,allowIgnore:x,activeTab:g,onPromoteSuccess:w},"actions")],children:(0,i.jsx)(a.krs.Item.Meta,{avatar:(0,i.jsxs)(a.jqI,{align:"center",gap:"small",children:[(0,i.jsx)(a.E_O,{checked:c,onChange:e=>R(e.target.checked),onClick:e=>e.stopPropagation()}),(0,i.jsx)(a.t3Z,{size:18,src:D,icon:(0,i.jsx)(a.PJP.Zrf,{}),alt:I})]}),title:(0,i.jsxs)(a.jqI,{gap:"small",align:"center",wrap:"wrap",children:[(0,i.jsx)(a.wpx,{type:"text",size:"small",onClick:()=>{C&&m&&m(C)},children:(0,i.jsx)(a.lKn,{strong:!0,children:I})}),(0,i.jsx)(a.lKn,{type:"secondary",style:{fontWeight:400},children:E})]}),description:(0,i.jsx)(h,{mode:"multiple",value:null!==(o=s.preferred_data_categories)&&void 0!==o?o:[],urn:S,tagRender:e=>{var t;let n=!!(null===(t=s.classifications)||void 0===t?void 0:t.find(t=>t.label===e.value));return b({...e,isFromClassifier:n,onClose:()=>{if(y&&S){var t,n;y(S,null!==(n=null===(t=s.preferred_data_categories)||void 0===t?void 0:t.filter(t=>t!==e.value))&&void 0!==n?n:[])}}})},onSelectDataCategory:e=>{if(k)k(e);else if(y&&S){var t;let n=null!==(t=s.preferred_data_categories)&&void 0!==t?t:[];n.includes(e)||y(S,[...n,e])}},disabled:_})})},S)};var _=n(98145),w=n(83766),S=n.n(w);let C=e=>{let{statusFilters:t,setStatusFilters:n,vendorFilters:r,setVendorFilters:l,reset:o}=e,[s,c]=(0,u.useState)(t),[d,f]=(0,u.useState)(r),[m,p]=(0,u.useState)([_.oq.STATUS]);(0,u.useEffect)(()=>{c(t)},[t]),(0,u.useEffect)(()=>{f(r)},[r]);let h=(0,u.useMemo)(()=>_.sv.filter(e=>"all"!==e&&"known"!==e&&"unknown"!==e).map(e=>({title:_.bE[e],key:e,checkable:!0,selectable:!1,isLeaf:!0})),[]),v=(0,u.useMemo)(()=>_.sv.filter(e=>"known"===e||"unknown"===e).map(e=>({title:_.bE[e],key:e,checkable:!0,selectable:!1,isLeaf:!0})),[]),g=(0,u.useMemo)(()=>{let e=[];return h.length>0&&e.push({title:"Status",key:_.oq.STATUS,checkable:!0,selectable:!1,isLeaf:!1,children:h}),v.length>0&&e.push({title:"Vendor",key:_.oq.VENDOR,checkable:!0,selectable:!1,isLeaf:!1,children:v}),e},[h,v]),x=(0,u.useMemo)(()=>S()([...null!=s?s:[],...null!=d?d:[]]),[s,d]),y=(0,u.useMemo)(()=>{let e=0;return t&&(e+=new Set(t).size),r&&(e+=new Set(r).size),e},[t,r]);return(0,i.jsx)(a.wn$,{treeProps:{checkable:!0,checkedKeys:x,onCheck:e=>{let t=Array.isArray(e)?e:e.checked,n=[],i=[],r=Object.values(_.oq);t.forEach(e=>{let t=e.toString();if(r.some(e=>e===t))return;let l=_.sv.find(e=>e===t&&"known"!==e&&"unknown"!==e);if(l)n.push(l);else{let e=_.sv.find(e=>e===t&&("known"===e||"unknown"===e));e&&i.push(e)}}),c(n.length>0?n:[]),f(i.length>0?i:[])},treeData:g,expandedKeys:m,onExpand:e=>{p(e)}},onApply:()=>{n(s&&s.length>0?Array.from(new Set(s)):s),l(d&&d.length>0?Array.from(new Set(d)):d)},onReset:()=>{o(),c([]),f([])},onClear:()=>{c([]),f([])},onOpenChange:e=>{e||(c(t),f(r))},activeFiltersCount:y})};var N=n(40431);let I=()=>{let[e,t]=(0,N.v1)("statusFilters",(0,N.S$)((0,N.km)(_.sv)).withDefault([])),[n,i]=(0,N.v1)("vendorFilters",(0,N.S$)(N.Oi).withDefault([]));return{statusFilters:e,setStatusFilters:t,vendorFilters:n,setVendorFilters:i,reset:()=>{t([]),i([])}}};var E=n(17245),D=n(9270),R=n(71985);let M=e=>{let{monitorId:t,statusFilters:n,vendorFilters:i}=e,{paginationProps:r,pageIndex:l,pageSize:s,resetPagination:a}=(0,D.S)({defaultPageSize:50}),c=(0,E.Rx)(),{activeTab:d,filterTabs:f,activeParams:m,onTabChange:p}=(0,y.Z)(),h=(0,u.useMemo)(()=>{if(!n||0===n.length)return m.diff_status;let e=[];return(n.forEach(t=>{let n=(0,_.$Q)(t);n&&e.push(n)}),1===e.length)?e[0]:e.length>0?e:m.diff_status},[n,m.diff_status]),v=(0,u.useMemo)(()=>{if(!n||0===n.length)return;let e=[];return n.forEach(t=>{let n=(0,_.Lh)(t);n&&e.push(n)}),e.length>0?e:void 0},[n]),g=(0,u.useMemo)(()=>{if(!i||0===i.length)return;let e=[];return(i.includes("unknown")&&e.push("null"),i.includes("known")&&!i.includes("unknown"))?"not_null":e.length>0?e:void 0},[i]);(0,u.useEffect)(()=>{a()},[n,i,a]);let{data:j,isLoading:b,isFetching:k,refetch:w}=(0,x.QP)({monitor_config_key:t,page:l,size:s,search:c.searchQuery,diff_status:h,status:v,vendor_id:g},{refetchOnMountOrArgChange:!0}),S=(0,u.useMemo)(()=>{var e;return(null==j?void 0:j.items)?{items:j.items.map(e=>{var t,n,i,r,l,o,s;return{id:e.urn,urn:e.urn,name:null!==(t=e.name)&&void 0!==t?t:null,system_key:null!==(n=e.system_key)&&void 0!==n?n:null,data_uses:null!==(i=e.data_uses)&&void 0!==i?i:[],vendor_id:null!==(r=e.vendor_id)&&void 0!==r?r:null,total_updates:1,locations:null!==(l=e.locations)&&void 0!==l?l:[],domains:e.domain?[e.domain]:[],consent_status:null,metadata:null!==(o=e.metadata)&&void 0!==o?o:null,diff_status:null!==(s=e.diff_status)&&void 0!==s?s:null}}),total:null!==(e=j.total)&&void 0!==e?e:0}:{items:[],total:0}},[j]),C=(0,u.useCallback)(async e=>{await p(e),a(),w()},[p,a,w]),N=(0,u.useCallback)(e=>{var n,i;let r=null!==(i=null!==(n=e.urn)&&void 0!==n?n:e.id)&&void 0!==i?i:o.Kl,l=d?"#".concat(d):"";return"".concat(o.vi,"/").concat(R.w.INFRASTRUCTURE,"/").concat(t,"/").concat(r).concat(l)},[t,d]);return{data:S,isLoading:b,isFetching:k,refetch:w,searchQuery:c.searchQuery,updateSearch:c.updateSearch,paginationProps:r,filterTabs:f,activeTab:d,handleTabChange:C,activeParams:m,rowClickUrl:N,getRecordKey:(0,u.useCallback)(e=>{var t,n,i,r;return null!==(r=null!==(i=null!==(n=null!==(t=e.urn)&&void 0!==t?t:e.id)&&void 0!==n?n:e.vendor_id)&&void 0!==i?i:e.name)&&void 0!==r?r:o.Kl},[])}},P=e=>{let{monitorId:t,onSuccess:n}=e,i=(0,a.pmc)(),[r,{isLoading:l}]=(0,x.OB)(),[o,{isLoading:s}]=(0,x.ip)(),[c,{isLoading:d}]=(0,x.Vd)();return{handleBulkAction:(0,u.useCallback)(async(e,l)=>{let s,a;let u=l.map(e=>e.urn).filter(e=>!!e);if(0===u.length){i((0,g.Vo)("No valid systems selected. Please select systems with URNs."));return}if(e===_.Qk.ADD){s=await r({monitor_config_key:t,urns:u});let e=u.length;a="".concat(e," system").concat(e>1?"s":""," ").concat(e>1?"have":"has"," been promoted to the system inventory.")}else if(e===_.Qk.IGNORE){s=await o({monitor_config_key:t,urns:u});let e=u.length;a="".concat(e," system").concat(e>1?"s":""," ").concat(e>1?"have":"has"," been ignored.")}else{if(e!==_.Qk.RESTORE)return;s=await c({monitor_config_key:t,urns:u});let n=u.length;a="".concat(n," system").concat(n>1?"s":""," ").concat(n>1?"have":"has"," been restored.")}(0,v.D4)(s)?i((0,g.Vo)((0,v.e$)(s.error))):(i((0,g.t5)(a)),null==n||n())},[t,r,o,c,i,n]),isBulkActionInProgress:l||s||d}},T=e=>{let{items:t,getRecordKey:n}=e,[i,r]=(0,u.useState)(new Set),l=i.size>0,o=i.size,s=(0,u.useCallback)(e=>{if(e){var i;r(new Set(null!==(i=null==t?void 0:t.map(e=>n(e)))&&void 0!==i?i:[]))}else r(new Set)},[t,n]),a=(0,u.useCallback)((e,t)=>{r(n=>{let i=new Set(n);return t?i.add(e):i.delete(e),i})},[]),c=(0,u.useCallback)(()=>{r(new Set)},[]),d=(0,u.useMemo)(()=>!!t&&0!==t.length&&i.size>0&&i.size===t.length&&t.every(e=>i.has(n(e))),[t,i,n]),f=(0,u.useMemo)(()=>!!t&&0!==t.length&&i.size>0&&i.size<t.length,[t,i]),m=(0,u.useMemo)(()=>t?t.filter(e=>i.has(n(e))):[],[t,i,n]),p=(0,u.useCallback)(e=>i.has(n(e)),[i,n]);return{selectedKeys:i,hasSelectedRows:l,selectedRowsCount:o,selectedItems:m,isAllSelected:d,isIndeterminate:f,handleSelectAll:s,handleSelectItem:a,clearSelection:c,isItemSelected:p}};var A=n(60240);let L=e=>{let{isIgnoredTab:t,allowIgnore:n,isBulkActionInProgress:i,onBulkAction:r}=e;return t?[{key:_.Qk.RESTORE,label:"Restore",onClick:()=>r(_.Qk.RESTORE),disabled:i}]:[...n?[{key:_.Qk.IGNORE,label:"Ignore",onClick:()=>r(_.Qk.IGNORE),disabled:i}]:[],{key:_.Qk.ADD,label:"Add",onClick:()=>r(_.Qk.ADD),disabled:i}]},O=e=>!!e.diff_status&&!e.diff_status.includes(A.LL.MUTED),z=e=>{var t,n;let{monitorId:r}=e,l=I(),{data:o,isLoading:s,searchQuery:f,updateSearch:m,paginationProps:p,activeTab:h,handleTabChange:v,activeParams:g,rowClickUrl:x,getRecordKey:j,refetch:b}=M({monitorId:r,statusFilters:l.statusFilters,vendorFilters:l.vendorFilters}),{data:w}=(0,d.vc)({monitor_config_id:r}),{selectedItems:S,hasSelectedRows:N,selectedRowsCount:E,isAllSelected:D,isIndeterminate:R,handleSelectAll:A,handleSelectItem:z,clearSelection:q,isItemSelected:Q}=T({items:null==o?void 0:o.items,getRecordKey:j}),{handleBulkAction:U,isBulkActionInProgress:F}=P({monitorId:r,getRecordKey:j,onSuccess:()=>{q(),b()}}),Z=h===y.A.IGNORED,V=O(g),$=(0,u.useCallback)(e=>{U(e,S)},[U,S]),K=(0,u.useMemo)(()=>L({isIgnoredTab:Z,allowIgnore:V,isBulkActionInProgress:F,onBulkAction:$}),[Z,V,F,$]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Niu,{"aria-label":"Asset state filter",mode:"horizontal",items:_.hc.map(e=>({key:e.key,label:e.label})),selectedKeys:[h],onClick:async e=>{await v(e.key),q()},className:"mb-4","data-testid":"asset-state-filter"}),(0,i.jsxs)(a.jqI,{vertical:!0,gap:"middle",className:"h-full",children:[(0,i.jsxs)(a.jqI,{justify:"space-between",children:[(0,i.jsx)(a.lQT,{level:2,children:"Monitor results"}),(0,i.jsx)(a.jqI,{align:"center",children:(null==w?void 0:w.last_monitored)&&(0,i.jsxs)(a.lKn,{type:"secondary",children:["Last scan:"," ",new Date(w.last_monitored).toLocaleString()]})})]}),(0,i.jsxs)(a.jqI,{justify:"space-between",children:[(0,i.jsx)(a.jqI,{gap:"small",children:(0,i.jsx)(c.f,{value:f,onChange:m,placeholder:"Search"})}),(0,i.jsxs)(a.jqI,{gap:"small",children:[(0,i.jsx)(C,{...l}),(0,i.jsx)(a.S0p,{menu:{items:K},disabled:!N||F,children:(0,i.jsx)(a.wpx,{type:"primary",icon:(0,i.jsx)(a.PJP._ME,{}),iconPosition:"end",disabled:!N||F,loading:F,children:"Actions"})}),(0,i.jsx)(a.esZ,{title:"Refresh",children:(0,i.jsx)(a.wpx,{icon:(0,i.jsx)(a.PJP.CQM,{}),"aria-label":"Refresh",onClick:b,loading:s})})]})]}),(0,i.jsxs)(a.jqI,{gap:"middle",align:"center",children:[(0,i.jsx)(a.E_O,{checked:D,indeterminate:R,onChange:e=>A(e.target.checked),title:"Select all"}),(0,i.jsx)("span",{className:"ml-2",children:"Select all"}),E>0&&(0,i.jsxs)(a.lKn,{strong:!0,children:[E.toLocaleString()," selected"]})]}),(0,i.jsx)(a.krs,{dataSource:null==o?void 0:o.items,loading:s,className:"h-full overflow-y-scroll",locale:{emptyText:(0,i.jsx)(a.oj8,{image:a.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up!"})},renderItem:e=>(0,i.jsx)(k,{item:e,selected:Q(e),onSelect:z,rowClickUrl:x,monitorId:r,activeTab:h,allowIgnore:V,onPromoteSuccess:b})}),(0,i.jsx)(a.B7X,{...p,total:(null==o?void 0:o.total)||0,showSizeChanger:{suffixIcon:(0,i.jsx)(a.PJP._ME,{})},hideOnSinglePage:(null===(t=p.pageSize)||void 0===t?void 0:t.toString())===(null===(n=p.pageSizeOptions)||void 0===n?void 0:n[0])})]})]})};var q=()=>{let e=decodeURIComponent((0,r.useRouter)().query.monitorId);return(0,i.jsxs)(l.Z,{title:"Action center - Discovered infrastructure systems",children:[(0,i.jsx)(s.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity",href:o.vi},{title:e}]}),(0,i.jsx)(z,{monitorId:e})]})}},72707:function(e){e.exports={option:"TaxonomySelect_option__vY6v2"}}},function(e){e.O(0,[431,7245,4589,2888,9774,179],function(){return e(e.s=50755)}),_N_E=e.O()}]);