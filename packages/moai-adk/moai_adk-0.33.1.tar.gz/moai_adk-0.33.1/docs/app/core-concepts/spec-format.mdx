# SPEC과 EARS 포맷

MoAI-ADK의 핵심은 **SPEC** (사양서)입니다. SPEC은 프로젝트 요구사항을 체계적으로 정의하고, 자동화된 구현의 기초가 됩니다.

## SPEC이란?

SPEC (Specification)은 프로젝트의 모든 요구사항을 구조화된 형식으로 정의한 문서입니다.

```yaml
---
id: SPEC-001
version: "1.0.0"
status: "active"
priority: "HIGH"
---

# 프로젝트 제목

## 개요
프로젝트 목표와 핵심 기능

## 요구사항
구체적인 구현 요구사항

## 성공 기준
프로젝트 완료의 기준
```

## EARS 포맷

EARS (Easy Approach to Requirements Syntax)는 요구사항을 명확하게 작성하는 방법입니다.

### 기본 구조

```
GIVEN [전제 조건]
WHEN [특정 상황이 발생했을 때]
THEN [예상되는 결과]
```

### 예제

**시나리오: 사용자 로그인**

```
GIVEN 사용자가 로그인 페이지에 접근했을 때
WHEN 올바른 사용자명과 비밀번호를 입력하고 "로그인" 버튼을 클릭했을 때
THEN 대시보드 페이지로 이동하고 "OOO님 반갑습니다" 메시지가 표시되어야 한다
```

## SPEC 구조

### 필수 항목

| 항목 | 설명 | 예시 |
|------|------|------|
| `id` | SPEC 고유 ID | SPEC-AUTH-001 |
| `title` | 프로젝트 제목 | 사용자 인증 시스템 |
| `priority` | 우선순위 | HIGH, MEDIUM, LOW |
| `version` | 버전 | 1.0.0 |

### 권장 항목

| 항목 | 설명 |
|------|------|
| `created` | 생성 날짜 |
| `updated` | 마지막 수정 날짜 |
| `author` | 작성자 |
| `status` | 상태 (draft, active, completed) |

## 효과적인 SPEC 작성

### 1. 구체적으로 작성

```
❌ 나쁜 예
사용자가 로그인할 수 있어야 한다

✅ 좋은 예
사용자는 올바른 이메일과 비밀번호로 로그인하면
대시보드 페이지로 이동하고 접근 토큰을 받아야 한다
```

### 2. 검증 가능한 요구사항

```
❌ 검증 불가능
시스템이 빨라야 한다

✅ 검증 가능
API 응답 시간은 500ms 이하여야 한다
```

### 3. 테스트 가능한 구조

```
✅ 테스트 가능
GIVEN: 데이터베이스에 10명의 사용자가 있을 때
WHEN: /api/users 엔드포인트에 GET 요청을 보낼 때
THEN: 200 상태 코드와 10명의 사용자 목록을 반환해야 한다
```

## SPEC 작성 팁

### 사용자 관점에서 작성

```yaml
GIVEN 개발자가 새 프로젝트를 시작하고 싶을 때
WHEN moai init 명령어를 실행했을 때
THEN 프로젝트 구조가 자동으로 생성되고
필요한 설정 파일들이 준비되어야 한다
```

### 경계 조건 포함

```yaml
# 정상 케이스
WHEN 올바른 데이터를 입력할 때
THEN 저장되고 성공 메시지가 표시된다

# 에러 케이스
WHEN 필수 필드가 비어있을 때
THEN 에러 메시지가 표시되고 저장되지 않는다
```

### 의존성 명시

```yaml
---
dependencies:
  - SPEC-SETUP-001  # 기본 환경 설정
  - SPEC-AUTH-001   # 인증 시스템
---

## 본문
이 SPEC은 사용자 프로필 관리 기능을 구현합니다.
```

## SPEC 예제

### 간단한 SPEC

```yaml
---
id: SPEC-CALC-001
title: 계산기 애플리케이션
priority: HIGH
---

## 개요
기본 수학 연산을 수행하는 계산기

## 요구사항

- 덧셈: a + b
- 뺄셈: a - b
- 곱셈: a * b
- 나눗셈: a / b (0으로 나누기 방지)

## 성공 기준

- [ ] 모든 연산이 정확하게 작동
- [ ] 0으로 나누기 오류 처리
- [ ] 테스트 커버리지 100%
```

### 복잡한 SPEC

```yaml
---
id: SPEC-API-001
title: REST API 백엔드
priority: HIGH
version: 1.0.0
---

## 요구사항 (Event-driven)

GIVEN 클라이언트가 새 사용자를 생성하고 싶을 때
WHEN POST /api/users에 다음 데이터를 보낼 때
```json
{
  "email": "user@example.com",
  "name": "John Doe",
  "password": "secure123"
}
```
THEN 상태 코드 201과 함께 다음을 반환해야 한다
```json
{
  "id": "uuid-v4",
  "email": "user@example.com",
  "created_at": "2024-01-15T10:30:00Z"
}
```

## 성공 기준

- [ ] API 응답 시간 < 500ms
- [ ] 입력 검증 완료
- [ ] 데이터베이스 연동
- [ ] 테스트 커버리지 > 85%
```

## SPEC 상태 관리

### 상태 라이프사이클

```
draft → active → in_progress → completed
  ↓
rejected
```

| 상태 | 설명 | 진행 가능 |
|------|------|---------|
| `draft` | 작성 중 | 아니오 |
| `active` | 구현 준비 완료 | 예 |
| `in_progress` | 구현 중 | 예 |
| `completed` | 완료 | 아니오 |
| `rejected` | 거부됨 | 아니오 |

## 다음 단계

- [에이전트 시스템](/core-concepts/agents) 학습
- [개발 워크플로우](/core-concepts/workflow) 이해
- [첫 SPEC 작성](/getting-started/first-spec) 시작
