/*! For license information please see 23957.730aae13c247a04e.js.LICENSE.txt */
"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["23957"],{29781:function(t,e,s){s.d(e,{$:function(){return v}});s(23792),s(62953);var a=s(40445),i=s(96592),o=s(77845),r=s(12451),n=s(12130),c=s(84730),l=s(96196),h=s(94333);let d,p,_,u=t=>t;const g=n.QQ?{passive:!0}:void 0;class f extends r.O{get scrollTarget(){return this._scrollTarget||window}set scrollTarget(t){this.unregisterScrollListener();const e=this.scrollTarget;this._scrollTarget=t,this.updateRootPosition(),this.requestUpdate("scrollTarget",e),this.registerScrollListener()}updateRootPosition(){if(this.mdcRoot){const t=this.scrollTarget===window;this.mdcRoot.style.position=t?"":"absolute"}}render(){let t=(0,l.qy)(d||(d=u`<span class="mdc-top-app-bar__title"><slot name="title"></slot></span>`));return this.centerTitle&&(t=(0,l.qy)(p||(p=u`<section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-center">${0}</section>`),t)),(0,l.qy)(_||(_=u` <header class="mdc-top-app-bar ${0}"> <div class="mdc-top-app-bar__row"> <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start" id="navigation"> <slot name="navigationIcon" @click="${0}"></slot> ${0} </section> ${0} <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end" id="actions" role="toolbar"> <slot name="actionItems"></slot> </section> </div> </header> <div class="${0}"> <slot></slot> </div> `),(0,h.H)(this.barClasses()),this.handleNavigationClick,this.centerTitle?null:t,this.centerTitle?t:null,(0,h.H)(this.contentClasses()))}createAdapter(){return Object.assign(Object.assign({},(0,r.i)(this.mdcRoot)),{setStyle:(t,e)=>this.mdcRoot.style.setProperty(t,e),getTopAppBarHeight:()=>this.mdcRoot.clientHeight,notifyNavigationIconClicked:()=>{this.dispatchEvent(new Event(c.P$.NAVIGATION_EVENT,{bubbles:!0,cancelable:!0}))},getViewportScrollY:()=>this.scrollTarget instanceof Window?this.scrollTarget.pageYOffset:this.scrollTarget.scrollTop,getTotalActionItems:()=>this._actionItemsSlot.assignedNodes({flatten:!0}).length})}registerListeners(){this.registerScrollListener()}unregisterListeners(){this.unregisterScrollListener()}registerScrollListener(){this.scrollTarget.addEventListener("scroll",this.handleTargetScroll,g)}unregisterScrollListener(){this.scrollTarget.removeEventListener("scroll",this.handleTargetScroll)}firstUpdated(){super.firstUpdated(),this.updateRootPosition(),this.registerListeners()}disconnectedCallback(){super.disconnectedCallback(),this.unregisterListeners()}constructor(){super(...arguments),this.centerTitle=!1,this.handleTargetScroll=()=>{this.mdcFoundation.handleTargetScroll()},this.handleNavigationClick=()=>{this.mdcFoundation.handleNavigationClick()}}}(0,a.__decorate)([(0,o.P)(".mdc-top-app-bar")],f.prototype,"mdcRoot",void 0),(0,a.__decorate)([(0,o.P)('slot[name="actionItems"]')],f.prototype,"_actionItemsSlot",void 0),(0,a.__decorate)([(0,o.MZ)({type:Boolean})],f.prototype,"centerTitle",void 0),(0,a.__decorate)([(0,o.MZ)({type:Object})],f.prototype,"scrollTarget",null);class m extends f{barClasses(){return{"mdc-top-app-bar--dense":this.dense,"mdc-top-app-bar--prominent":this.prominent,"center-title":this.centerTitle}}contentClasses(){return{"mdc-top-app-bar--fixed-adjust":!this.dense&&!this.prominent,"mdc-top-app-bar--dense-fixed-adjust":this.dense&&!this.prominent,"mdc-top-app-bar--prominent-fixed-adjust":!this.dense&&this.prominent,"mdc-top-app-bar--dense-prominent-fixed-adjust":this.dense&&this.prominent}}registerListeners(){super.registerListeners(),window.addEventListener("resize",this.handleResize,g)}unregisterListeners(){super.unregisterListeners(),window.removeEventListener("resize",this.handleResize)}constructor(){super(...arguments),this.mdcFoundationClass=i.A,this.prominent=!1,this.dense=!1,this.handleResize=()=>{this.mdcFoundation.handleWindowResize()}}}(0,a.__decorate)([(0,o.MZ)({type:Boolean,reflect:!0})],m.prototype,"prominent",void 0),(0,a.__decorate)([(0,o.MZ)({type:Boolean,reflect:!0})],m.prototype,"dense",void 0);var y=s(23665);class v extends m{barClasses(){return Object.assign(Object.assign({},super.barClasses()),{"mdc-top-app-bar--fixed":!0})}registerListeners(){this.scrollTarget.addEventListener("scroll",this.handleTargetScroll,g)}unregisterListeners(){this.scrollTarget.removeEventListener("scroll",this.handleTargetScroll)}constructor(){super(...arguments),this.mdcFoundationClass=y.A}}},27330:function(t,e,s){s(23792),s(62953);var a=s(40445),i=s(29781),o=s(71467),r=s(96196),n=s(77845);let c;class l extends i.${constructor(...t){super(...t),this.narrow=!1}}l.styles=[o.R,(0,r.AH)(c||(c=(t=>t)`header{padding-top:var(--safe-area-inset-top)}.mdc-top-app-bar__row{height:var(--header-height);border-bottom:var(--app-header-border-bottom)}.mdc-top-app-bar--fixed-adjust{padding-top:calc(var(--header-height,0px) + var(--safe-area-inset-top,0px));padding-bottom:var(--safe-area-inset-bottom);padding-right:var(--safe-area-inset-right)}:host([narrow]) .mdc-top-app-bar--fixed-adjust{padding-left:var(--safe-area-inset-left)}.mdc-top-app-bar{--mdc-typography-headline6-font-weight:var(--ha-font-weight-normal);color:var(--app-header-text-color,var(--mdc-theme-on-primary,#fff));background-color:var(--app-header-background-color,var(--mdc-theme-primary));padding-top:var(--safe-area-inset-top);padding-right:var(--safe-area-inset-right)}:host([narrow]) .mdc-top-app-bar{padding-left:var(--safe-area-inset-left)}.mdc-top-app-bar__title{font-size:var(--ha-font-size-xl);padding-inline-start:24px;padding-inline-end:initial}`))],(0,a.__decorate)([(0,n.MZ)({type:Boolean,reflect:!0})],l.prototype,"narrow",void 0),l=(0,a.__decorate)([(0,n.EM)("ha-top-app-bar-fixed")],l)},4203:function(t,e,s){s.a(t,async function(t,a){try{s.r(e),s.d(e,{DEFAULT_ENERGY_COLLECTION_KEY:function(){return w}});s(74423),s(23792),s(44114),s(26910),s(13609),s(18111),s(22489),s(7588),s(61701),s(13579),s(3362),s(17642),s(58004),s(33853),s(45876),s(32475),s(15024),s(31698),s(62953),s(3296),s(27208),s(48408),s(14603),s(47566),s(98721);var i=s(40445),o=s(96196),r=s(77845),n=s(91926),c=(s(38962),s(90248),s(2054),s(27330),s(38114)),l=s(14503),h=s(33668),d=s(73887),p=s(29994),_=s(53019),u=(s(87778),t([d,p,_,c]));[d,p,_,c]=u.then?(await u)():u;let g,f,m,y,v=t=>t;const b="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",w="energy_dashboard",k={energy_sources:[],device_consumption:[],device_consumption_water:[]},D={path:"overview",strategy:{type:"energy-overview",collection_key:w}},x={path:"electricity",strategy:{type:"energy",collection_key:w}},C={path:"water",strategy:{type:"water",collection_key:w}},E={path:"gas",strategy:{type:"gas",collection_key:w}},$={path:"now",strategy:{type:"power",collection_key:"energy_dashboard_now"}},T={type:"panel",path:"setup",cards:[{type:"custom:energy-setup-wizard-card"}]};class z extends o.WF{get _extraActionItems(){return[{icon:b,labelKey:"ui.panel.energy.download_data",action:this._dumpCSV}]}willUpdate(t){if(super.willUpdate(t),!this.hasUpdated)return this.hass.loadFragmentTranslation("lovelace"),void this._loadConfig();if(!t.has("hass"))return;const e=t.get("hass");e&&e.localize!==this.hass.localize&&this._setLovelace()}async _loadConfig(){var t;try{this._error=void 0;const t=await this._fetchEnergyPrefs();this._prefs=t||k}catch(a){console.error("Failed to load prefs:",a),this._prefs=k,this._error=a.message||"Unknown error"}await this._setLovelace();const e=((null===(t=this._lovelace.config)||void 0===t?void 0:t.views)||[]).map(t=>t.path),s=this.route.path.split("/")[1];s&&e.includes(s)?this.route=Object.assign({},this.route):(0,n.o)(`${this.route.prefix}/${e[0]}`)}async _setLovelace(){const t=await this._generateLovelaceConfig();this._lovelace={config:t,rawConfig:t,editMode:!1,urlPath:"energy",mode:"generated",locale:this.hass.locale,enableFullEditMode:()=>{},saveConfig:async()=>{},deleteConfig:async()=>{},setEditMode:()=>this._navigateConfig(),showToast:()=>{}}}render(){return this._error?(0,o.qy)(g||(g=v` <div class="centered"> <ha-alert alert-type="error"> An error occurred loading energy preferences: ${0} </ha-alert> </div> `),this._error):this._prefs?this._lovelace?(0,o.qy)(m||(m=v` <hui-root .hass="${0}" .narrow="${0}" .lovelace="${0}" .route="${0}" .panel="${0}" .extraActionItems="${0}" @reload-energy-panel="${0}"></hui-root> `),this.hass,this.narrow,this._lovelace,this.route,this.panel,this._extraActionItems,this._reloadConfig):o.s6:(0,o.qy)(f||(f=v` <div class="centered"> <ha-spinner size="large"></ha-spinner> </div> `))}async _generateLovelaceConfig(){var t;if(!this._prefs||0===this._prefs.device_consumption.length&&0===this._prefs.energy_sources.length)return await Promise.all([s.e("71380"),s.e("86236")]).then(s.bind(s,97431)),{views:[T]};const e=this._prefs.energy_sources.some(t=>["grid","solar","battery"].includes(t.type)),a=this._prefs.energy_sources.some(t=>{var e;return"solar"===t.type&&t.stat_rate||"battery"===t.type&&t.stat_rate||"grid"===t.type&&(null===(e=t.power)||void 0===e?void 0:e.length)})||this._prefs.device_consumption.some(t=>t.stat_rate),i=this._prefs.energy_sources.some(t=>"water"===t.type)||(null===(t=this._prefs.device_consumption_water)||void 0===t?void 0:t.length)>0,o=this._prefs.energy_sources.some(t=>"gas"===t.type),r=this._prefs.device_consumption.length>0,n=[];return(e||r)&&n.push(x),o&&n.push(E),i&&n.push(C),a&&n.push($),n.length>1&&n.unshift(D),{views:n.map(t=>Object.assign(Object.assign({},t),{},{title:t.title||this.hass.localize(`ui.panel.energy.title.${t.path}`)}))}}_navigateConfig(t){null==t||t.stopPropagation(),(0,n.o)("/config/energy?historyBack=1")}_reloadConfig(){this._loadConfig()}static get styles(){return[l.RF,(0,o.AH)(y||(y=v`:host{--ha-view-sections-column-max-width:100%;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none}.toolbar{height:var(--header-height);display:flex;flex:1;align-items:center;font-size:var(--ha-font-size-xl);padding:0px 12px;font-weight:var(--ha-font-weight-normal);box-sizing:border-box}:host([narrow]) .toolbar{padding:0 4px}.main-title{margin:var(--margin-title);line-height:var(--ha-line-height-normal);flex-grow:1}.centered{width:100%;height:100%;display:flex;align-items:center;justify-content:center}`))]}constructor(...t){super(...t),this.narrow=!1,this._fetchEnergyPrefs=async()=>{const t=(0,c.tb)(this.hass,{key:w});try{await t.refresh()}catch(e){if("not_found"===e.code)return;throw e}return t.prefs},this._dumpCSV=async()=>{const t=(0,c.tb)(this.hass,{key:"energy_dashboard"});if(!t.prefs||!t.state.stats)return;const e=t.state.gasUnit,s="kWh",a=t.prefs.energy_sources,i=t.prefs.device_consumption,o=t.prefs.device_consumption_water,r=t.state.stats,n=new Set;Object.values(r).forEach(t=>{t.forEach(t=>{n.add(t.start)})});const l=Array.from(n).sort(),d="entity_id,type,unit,"+l.map(t=>new Date(t).toISOString()).join(",")+"\n",p=[];p[0]=d;const _=function(t,e,s,a){let i=0;const o=[];o.push(t),o.push(e),o.push(s.normalize("NFKD")),l.forEach(t=>{var e;i<a.length&&a[i].start===t?(o.push((null!==(e=a[i].change)&&void 0!==e?e:"").toString()),i++):o.push("")}),p.push(o.join(",")+"\n")},u=function(t,e,s){r[t]&&_(t,e,s,r[t])},g=this.hass.config.currency,f=function(t,e,s,a,i){e.length&&(e.forEach(e=>u(e,t,s)),a&&i&&i.forEach(t=>u(t,a,g)))},m=[],y=[],v=[],b=[];a.filter(t=>"grid"===t.type).forEach(e=>{e.flow_from.forEach(e=>{const s=e.stat_energy_from;m.push(s);const a=e.stat_cost||t.state.info.cost_sensors[s];a&&v.push(a)}),e.flow_to.forEach(e=>{const s=e.stat_energy_to;y.push(s);const a=e.stat_compensation||t.state.info.cost_sensors[s];a&&b.push(a)})}),f("grid_consumption",m,s,"grid_consumption_cost",v),f("grid_return",y,s,"grid_return_compensation",b);const w=[],k=[];a.filter(t=>"battery"===t.type).forEach(t=>{w.push(t.stat_energy_to),k.push(t.stat_energy_from)}),f("battery_in",w,s),f("battery_out",k,s);const D=[];a.filter(t=>"solar"===t.type).forEach(t=>{D.push(t.stat_energy_from)}),f("solar_production",D,s);const x=[],C=[];a.filter(t=>"gas"===t.type).forEach(e=>{const s=e.stat_energy_from;x.push(s);const a=e.stat_cost||t.state.info.cost_sensors[s];a&&C.push(a)}),f("gas_consumption",x,e,"gas_consumption_cost",C);const E=[],$=[];a.filter(t=>"water"===t.type).forEach(e=>{const s=e.stat_energy_from;E.push(s);const a=e.stat_cost||t.state.info.cost_sensors[s];a&&$.push(a)}),f("water_consumption",E,t.state.waterUnit,"water_consumption_cost",$);const T=[];if(i.forEach(t=>{T.push(t.stat_consumption)}),f("device_consumption",T,s),o){const e=[];o.forEach(t=>{e.push(t.stat_consumption)}),f("device_consumption_water",e,t.state.waterUnit)}const{summedData:z,compareSummedData:O}=(0,c.gv)(t.state),{consumption:L,compareConsumption:S}=(0,c.DR)(z,void 0),A=function(t,e,s){const a=[];Object.entries(s).forEach(([t,e])=>{a.push({start:Number(t),end:NaN,change:e})}),_("",t,e,a)},R=!!D.length,M=!!w.length,P=!!y.length,j=!!m.length;j&&(A("calculated_consumed_grid",s,L.used_grid),M&&A("calculated_grid_to_battery",s,L.grid_to_battery)),P&&M&&A("calculated_battery_to_grid",s,L.battery_to_grid),M&&A("calculated_consumed_battery",s,L.used_battery),R&&(A("calculated_consumed_solar",s,L.used_solar),M&&A("calculated_solar_to_battery",s,L.solar_to_battery),P&&A("calculated_solar_to_grid",s,L.solar_to_grid)),(j?1:0)+(R?1:0)+(M?1:0)>1&&A("calculated_total_consumption",s,L.used_total);const N=new Blob(p,{type:"text/csv"}),U=window.URL.createObjectURL(N);(0,h.R)(U,"energy.csv")}}}(0,i.__decorate)([(0,r.MZ)({attribute:!1})],z.prototype,"hass",void 0),(0,i.__decorate)([(0,r.MZ)({type:Boolean,reflect:!0})],z.prototype,"narrow",void 0),(0,i.__decorate)([(0,r.MZ)({attribute:!1})],z.prototype,"panel",void 0),(0,i.__decorate)([(0,r.wk)()],z.prototype,"_lovelace",void 0),(0,i.__decorate)([(0,r.MZ)({attribute:!1})],z.prototype,"route",void 0),(0,i.__decorate)([(0,r.wk)()],z.prototype,"_prefs",void 0),(0,i.__decorate)([(0,r.wk)()],z.prototype,"_error",void 0),z=(0,i.__decorate)([(0,r.EM)("ha-panel-energy")],z),a()}catch(g){a(g)}})},73887:function(t,e,s){s.a(t,async function(t,e){try{var a=s(69235),i=(s(23792),s(3362),s(62953),s(40445)),o=s(35932),r=s(73983),n=s(52640),c=s(69137),l=s(6946),h=s(55144),d=s(40600),p=s(78016),_=s(31810),u=s(49134),g=s(96196),f=s(77845),m=s(22786),y=s(91069),v=s(380),b=s(72487),w=s(9899),k=(s(13416),s(18350)),D=(s(58349),s(15397)),x=(s(3059),s(45100),s(38114)),C=s(54706),E=s(46223),$=t([a,k,D,b,v,E,x,y]);[a,k,D,b,v,E,x,y]=$.then?(await $)():$;let T,z,O,L,S=t=>t;const A="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",R=["today","yesterday","this_week","this_month","this_quarter","this_year","now-7d","now-30d","now-12m"];class M extends((0,C.E)(g.WF)){hassSubscribe(){return[(0,x.tb)(this.hass,{key:this.collectionKey}).subscribe(t=>this._updateDates(t))]}_measure(){this.narrow=this.offsetWidth<450}async _attachObserver(){this._resizeObserver||(this._resizeObserver=new ResizeObserver((0,w.s)(()=>this._measure(),250,!1))),this._resizeObserver.observe(this)}firstUpdated(){this._attachObserver()}connectedCallback(){super.connectedCallback(),this.updateComplete.then(()=>this._attachObserver())}disconnectedCallback(){super.disconnectedCallback(),this._resizeObserver&&this._resizeObserver.disconnect()}willUpdate(t){var e,s;super.willUpdate(t),this.hasUpdated||this._measure(),(!this.hasUpdated||t.has("hass")&&(null===(e=this.hass)||void 0===e?void 0:e.localize)!==(null===(s=t.get("hass"))||void 0===s?void 0:s.localize))&&(this._ranges={},R.forEach(t=>{this._ranges[this.hass.localize(`ui.components.date-range-picker.ranges.${t}`)]=(0,E.b)(this.hass,t)}))}render(){if(!this.hass||!this._startDate)return g.s6;const t=this._simpleRange(this._startDate,this._endDate,this.hass.locale,this.hass.config);return(0,g.qy)(T||(T=S` <div class="row"> <div class="label"> ${0} </div> <div class="time-handle"> <ha-icon-button-prev .label="${0}" @click="${0}"></ha-icon-button-prev> <ha-icon-button-next .label="${0}" @click="${0}"></ha-icon-button-next> <ha-date-range-picker .hass="${0}" .startDate="${0}" .endDate="${0}" .ranges="${0}" @value-changed="${0}" @preset-selected="${0}" minimal header-position></ha-date-range-picker> </div> ${0} <ha-button-menu> <ha-icon-button slot="trigger" .label="${0}" .path="${0}"></ha-icon-button> ${0} <slot name="overflow-menu"></slot> </ha-button-menu> </div> `),"day"===t?this.narrow?(0,b.kz)(this._startDate,this.hass.locale,this.hass.config):(0,b.Yq)(this._startDate,this.hass.locale,this.hass.config):"month"===t?(0,b.fr)(this._startDate,this.hass.locale,this.hass.config):"year"===t?(0,b.Pm)(this._startDate,this.hass.locale,this.hass.config):`${(0,b.sl)(this._startDate,this.hass.locale,this.hass.config)} â€“ ${(0,b.sl)(this._endDate||new Date,this.hass.locale,this.hass.config)}`,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.previous"),this._pickPrevious,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.next"),this._pickNext,this.hass,this._startDate,this._endDate||new Date,this._ranges,this._dateRangeChanged,this._presetSelected,this.narrow?g.s6:(0,g.qy)(z||(z=S`<ha-button appearance="filled" size="small" @click="${0}"> ${0} </ha-button>`),this._pickNow,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.now")),this.hass.localize("ui.common.menu"),A,this.allowCompare?(0,g.qy)(O||(O=S`<ha-check-list-item left @request-selected="${0}" .selected="${0}"> ${0} </ha-check-list-item>`),this._toggleCompare,this._compare,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.compare")):g.s6)}_updateCollectionPeriod(){const t=(0,x.tb)(this.hass,{key:this.collectionKey});t.setPeriod(this._startDate,this._endDate),t.refresh()}_dateRangeChanged(t){this._startDate=(0,y.ol)(t.detail.value.startDate,o.o,this.hass.locale,this.hass.config),this._endDate=(0,y.ol)(t.detail.value.endDate,r.D,this.hass.locale,this.hass.config),this._updateCollectionPeriod()}_presetSelected(t){localStorage.setItem(`energy-default-period-_${this.collectionKey||"energy"}`,R[t.detail.index])}_pickNow(){if(!this._startDate)return;const t=this._simpleRange(this._startDate,this._endDate,this.hass.locale,this.hass.config),e=new Date;if("month"===t)[this._startDate,this._endDate]=(0,E.b)(this.hass,"this_month");else if("quarter"===t)[this._startDate,this._endDate]=(0,E.b)(this.hass,"this_quarter");else if("year"===t)[this._startDate,this._endDate]=(0,E.b)(this.hass,"this_year");else{const t=(0,v.P)(this.hass.locale),s=(0,y.ol)(this._endDate,n.k,this.hass.locale,this.hass.config,{weekStartsOn:t}),a=(0,y.ol)(this._endDate,c.$,this.hass.locale,this.hass.config,{weekStartsOn:t});if(this._startDate.getTime()===s.getTime()&&this._endDate.getTime()===a.getTime())[this._startDate,this._endDate]=(0,E.b)(this.hass,"this_week");else{const s=(0,y.EO)(this._endDate,this._startDate,l.c,this.hass.locale,this.hass.config);this._startDate=(0,y.ol)((0,y.ol)(e,h.e,this.hass.locale,this.hass.config,s),o.o,this.hass.locale,this.hass.config,{weekStartsOn:t}),this._endDate=(0,y.ol)(e,r.D,this.hass.locale,this.hass.config,{weekStartsOn:t})}}this._updateCollectionPeriod()}_pickPrevious(){this._shift(!1)}_pickNext(){this._shift(!0)}_shift(t){if(!this._startDate)return;const{start:e,end:s}=(0,y.eE)(this._startDate,this._endDate,t,this.hass.locale,this.hass.config);this._startDate=e,this._endDate=s,this._updateCollectionPeriod()}_updateDates(t){this._compare=void 0!==t.startCompare,this._startDate=t.start,this._endDate=t.end||(0,d.o)()}_toggleCompare(t){if("interaction"!==t.detail.source)return;this._compare=t.detail.selected;const e=(0,x.tb)(this.hass,{key:this.collectionKey});e.setCompare(this._compare?x.lh.PREVIOUS:x.lh.NONE),e.refresh()}constructor(...t){super(...t),this.allowCompare=!0,this._ranges={},this._compare=!1,this._simpleRange=(0,m.A)((t,e,s,a)=>{if(0===(0,l.c)(e,t))return"day";if((0,y.xo)(t,p.e,s,a)&&(0,y.xo)(e,_.c,s,a)){if(0===(0,y.EO)(e,t,u.W,s,a))return"month";if(2===(0,y.EO)(e,t,u.W,s,a)&&t.getMonth()%3==0)return"quarter"}return(0,y.xo)(t,p.e,s,a)&&(0,y.xo)(e,_.c,s,a)&&11===(0,y.EO)(e,t,u.W,s,a)?"year":"other"})}}M.styles=(0,g.AH)(L||(L=S`.row{display:flex;align-items:center}:host .time-handle{display:flex;justify-content:flex-end;align-items:center}:host([narrow]) .time-handle{margin-left:auto;margin-inline-start:auto;margin-inline-end:initial}.label{display:flex;align-items:center;justify-content:flex-end;font-size:var(--ha-font-size-xl);margin-left:auto;margin-inline-start:auto;margin-inline-end:initial}:host([narrow]) .label{margin-left:unset;margin-inline-start:unset;margin-inline-end:initial}ha-button{margin-left:8px;margin-inline-start:8px;margin-inline-end:initial;flex-shrink:0;--ha-button-theme-color:currentColor}`)),(0,i.__decorate)([(0,f.MZ)({attribute:!1})],M.prototype,"hass",void 0),(0,i.__decorate)([(0,f.MZ)({attribute:"collection-key"})],M.prototype,"collectionKey",void 0),(0,i.__decorate)([(0,f.MZ)({type:Boolean,reflect:!0})],M.prototype,"narrow",void 0),(0,i.__decorate)([(0,f.MZ)({type:Boolean,attribute:"allow-compare"})],M.prototype,"allowCompare",void 0),(0,i.__decorate)([(0,f.wk)()],M.prototype,"_startDate",void 0),(0,i.__decorate)([(0,f.wk)()],M.prototype,"_endDate",void 0),(0,i.__decorate)([(0,f.wk)()],M.prototype,"_ranges",void 0),(0,i.__decorate)([(0,f.wk)()],M.prototype,"_compare",void 0),M=(0,i.__decorate)([(0,f.EM)("hui-energy-period-selector")],M),e()}catch(T){e(T)}})},33668:function(t,e,s){s.d(e,{h:function(){return o},R:function(){return i}});var a=s(37177);const i=(t,e="")=>{const s=document.createElement("a");s.target="_blank",s.href=t,s.download=e,s.style.display="none",document.body.appendChild(s),s.dispatchEvent(new MouseEvent("click")),document.body.removeChild(s)},o=t=>{var e;return!(t=>!!t.auth.external&&a.n)(t)||!(null===(e=t.auth.external)||void 0===e||!e.config.downloadFileSupported)}},37177:function(t,e,s){s.d(e,{n:function(){return a}});s(27495);const a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},56434:function(t,e,s){s.d(e,{e:function(){return i}});var a=s(81977);function i(t,e,s){return(0,a.P)(t,12*e,s)}},40600:function(t,e,s){s.d(e,{o:function(){return i}});var a=s(73983);function i(t){return(0,a.D)(Date.now(),t)}}}]);
//# sourceMappingURL=23957.730aae13c247a04e.js.map