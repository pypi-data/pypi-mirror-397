"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["61288"],{34296:function(e,t,r){r(23792),r(62953);var n=r(40445),i=r(96229),a=r(26069),o=r(91735),s=r(42034),c=r(96196),l=r(77845);let u,_,d,p,v=e=>e;class y extends i.k{renderOutline(){return this.filled?(0,c.qy)(u||(u=v`<span class="filled"></span>`)):super.renderOutline()}getContainerClasses(){return Object.assign(Object.assign({},super.getContainerClasses()),{},{active:this.active})}renderPrimaryContent(){return(0,c.qy)(_||(_=v` <span class="leading icon" aria-hidden="true"> ${0} </span> <span class="label">${0}</span> <span class="touch"></span> <span class="trailing leading icon" aria-hidden="true"> ${0} </span> `),this.renderLeadingIcon(),this.label,this.renderTrailingIcon())}renderTrailingIcon(){return(0,c.qy)(d||(d=v`<slot name="trailing-icon"></slot>`))}constructor(...e){super(...e),this.filled=!1,this.active=!1}}y.styles=[o.R,s.R,a.R,(0,c.AH)(p||(p=v`:host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-assist-chip-container-shape:var(
          --ha-assist-chip-container-shape,
          16px
        );--md-assist-chip-outline-color:var(--outline-color);--md-assist-chip-label-text-weight:400}.filled{display:flex;pointer-events:none;border-radius:inherit;inset:0;position:absolute;background-color:var(--ha-assist-chip-filled-container-color)}::slotted([slot=icon]),::slotted([slot=trailing-icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px);font-size:var(--_label-text-size)!important}.trailing.icon ::slotted(*),.trailing.icon svg{margin-inline-end:unset;margin-inline-start:var(--_icon-label-space)}::before{background:var(--ha-assist-chip-container-color,transparent);opacity:var(--ha-assist-chip-container-opacity, 1)}:where(.active)::before{background:var(--ha-assist-chip-active-container-color);opacity:var(--ha-assist-chip-active-container-opacity)}.label{font-family:var(--ha-font-family-body)}`))],(0,n.__decorate)([(0,l.MZ)({type:Boolean,reflect:!0})],y.prototype,"filled",void 0),(0,n.__decorate)([(0,l.MZ)({type:Boolean})],y.prototype,"active",void 0),y=(0,n.__decorate)([(0,l.EM)("ha-assist-chip")],y)},72001:function(e,t,r){r.d(t,{$D:function(){return se},$O:function(){return ie},Bm:function(){return b},Cr:function(){return Y},Cy:function(){return i},DE:function(){return l},DJ:function(){return w},El:function(){return U},Eo:function(){return P},GP:function(){return s},Hz:function(){return a},Is:function(){return f},JZ:function(){return $},Lx:function(){return L},MY:function(){return y},PY:function(){return J},RE:function(){return N},Re:function(){return oe},S0:function(){return H},SG:function(){return h},TH:function(){return k},Tx:function(){return q},U:function(){return G},VA:function(){return x},VL:function(){return c},Ve:function(){return ae},W6:function(){return Z},YG:function(){return u},YP:function(){return j},Yn:function(){return z},Z1:function(){return te},Zp:function(){return W},aG:function(){return E},aL:function(){return o},au:function(){return d},dZ:function(){return p},fC:function(){return T},i4:function(){return O},iK:function(){return S},in:function(){return ne},jF:function(){return B},jT:function(){return F},lz:function(){return g},m:function(){return I},mQ:function(){return A},mR:function(){return Q},mX:function(){return X},of:function(){return ee},pN:function(){return re},qN:function(){return M},re:function(){return C},sM:function(){return _},sb:function(){return R},tj:function(){return V},u1:function(){return n},wI:function(){return m},zI:function(){return v},zP:function(){return K},zb:function(){return D}});r(16280),r(3362);var n=function(e){return e[e.Idle=0]="Idle",e[e.Including=1]="Including",e[e.Excluding=2]="Excluding",e[e.Busy=3]="Busy",e[e.SmartStart=4]="SmartStart",e}({}),i=function(e){return e[e.Default=0]="Default",e[e.SmartStart=1]="SmartStart",e[e.Insecure=2]="Insecure",e[e.Security_S0=3]="Security_S0",e[e.Security_S2=4]="Security_S2",e}({}),a=function(e){return e[e.Temporary=-2]="Temporary",e[e.None=-1]="None",e[e.S2_Unauthenticated=0]="S2_Unauthenticated",e[e.S2_Authenticated=1]="S2_Authenticated",e[e.S2_AccessControl=2]="S2_AccessControl",e[e.S0_Legacy=7]="S0_Legacy",e}({}),o=function(e){return e[e.SmartStart=0]="SmartStart",e}({}),s=function(e){return e[e.ZWave=0]="ZWave",e[e.ZWaveLongRange=1]="ZWaveLongRange",e}({}),c=function(e){return e[e.Error_Timeout=-1]="Error_Timeout",e[e.Error_Checksum=0]="Error_Checksum",e[e.Error_TransmissionFailed=1]="Error_TransmissionFailed",e[e.Error_InvalidManufacturerID=2]="Error_InvalidManufacturerID",e[e.Error_InvalidFirmwareID=3]="Error_InvalidFirmwareID",e[e.Error_InvalidFirmwareTarget=4]="Error_InvalidFirmwareTarget",e[e.Error_InvalidHeaderInformation=5]="Error_InvalidHeaderInformation",e[e.Error_InvalidHeaderFormat=6]="Error_InvalidHeaderFormat",e[e.Error_InsufficientMemory=7]="Error_InsufficientMemory",e[e.Error_InvalidHardwareVersion=8]="Error_InvalidHardwareVersion",e[e.OK_WaitingForActivation=253]="OK_WaitingForActivation",e[e.OK_NoRestart=254]="OK_NoRestart",e[e.OK_RestartPending=255]="OK_RestartPending",e}({}),l=function(e){return e[e.Error_Timeout=0]="Error_Timeout",e[e.Error_RetryLimitReached=1]="Error_RetryLimitReached",e[e.Error_Aborted=2]="Error_Aborted",e[e.Error_NotSupported=3]="Error_NotSupported",e[e.OK=255]="OK",e}({}),u=function(e){return e[e.Active=0]="Active",e[e.Inactive=1]="Inactive",e}({});const _=52;var d=function(e){return e[e.NotAvailable=127]="NotAvailable",e[e.ReceiverSaturated=126]="ReceiverSaturated",e[e.NoSignalDetected=125]="NoSignalDetected",e}({}),p=function(e){return e[e.ZWave_9k6=1]="ZWave_9k6",e[e.ZWave_40k=2]="ZWave_40k",e[e.ZWave_100k=3]="ZWave_100k",e[e.LongRange_100k=4]="LongRange_100k",e}({}),v=function(e){return e[e.Unknown=0]="Unknown",e[e.Asleep=1]="Asleep",e[e.Awake=2]="Awake",e[e.Dead=3]="Dead",e[e.Alive=4]="Alive",e}({});const y=(e,t,r,n,i,a,o)=>e.callWS({type:"zwave_js/invoke_cc_api",device_id:t,command_class:r,endpoint:n,method_name:i,parameters:a,wait_for_result:o}),f=(e,t)=>{if(t.device_id&&t.entry_id)throw new Error("Only one of device or entry ID should be supplied.");if(!t.device_id&&!t.entry_id)throw new Error("Either device or entry ID should be supplied.");return e.callWS({type:"zwave_js/network_status",device_id:t.device_id,entry_id:t.entry_id})},h=(e,t)=>e.callWS({type:"zwave_js/data_collection_status",entry_id:t}),g=(e,t,r)=>e.callWS({type:"zwave_js/update_data_collection_preference",entry_id:t,opted_in:r}),b=(e,t)=>e.callWS({type:"zwave_js/get_provisioning_entries",entry_id:t}),w=(e,t,r,n,i,a,o,s=0)=>e.connection.subscribeMessage(e=>r(e),{type:"zwave_js/add_node",entry_id:t,inclusion_strategy:s,qr_code_string:i,qr_provisioning_information:n,planned_provisioning_entry:a,dsk:o}),m=(e,t)=>e.callWS({type:"zwave_js/stop_inclusion",entry_id:t}),S=(e,t,r,n)=>e.callWS({type:"zwave_js/grant_security_classes",entry_id:t,securityClasses:r,clientSideAuth:n}),z=(e,t,r)=>e.callWS({type:"zwave_js/try_parse_dsk_from_qr_code_string",entry_id:t,qr_code_string:r}),j=(e,t,r)=>e.callWS({type:"zwave_js/validate_dsk_and_enter_pin",entry_id:t,pin:r}),W=(e,t,r)=>e.callWS({type:"zwave_js/supports_feature",entry_id:t,feature:r}),k=(e,t,r)=>e.callWS({type:"zwave_js/parse_qr_code_string",entry_id:t,qr_code_string:r}),I=(e,t,r,n,i,a)=>e.callWS({type:"zwave_js/lookup_device",entry_id:t,manufacturerId:r,productType:n,productId:i,applicationVersion:a}),E=(e,t,r,n,i,a)=>e.callWS({type:"zwave_js/provision_smart_start_node",entry_id:t,qr_provisioning_information:r,protocol:n,device_name:i,area_id:a}),$=(e,t,r,n)=>e.callWS({type:"zwave_js/unprovision_smart_start_node",entry_id:t,dsk:r,node_id:n}),M=(e,t,r)=>e.connection.subscribeMessage(e=>r(e),{type:"zwave_js/subscribe_new_devices",entry_id:t}),A=(e,t)=>e.callWS({type:"zwave_js/node_status",device_id:t}),O=(e,t)=>e.callWS({type:"zwave_js/node_capabilities",device_id:t}),R=(e,t,r)=>e.connection.subscribeMessage(e=>r(e),{type:"zwave_js/subscribe_node_status",device_id:t}),C=(e,t)=>e.callWS({type:"zwave_js/node_metadata",device_id:t}),D=(e,t)=>e.callWS({type:"zwave_js/node_alerts",device_id:t}),Z=(e,t)=>e.callWS({type:"zwave_js/get_config_parameters",device_id:t}),T=(e,t,r,n,i,a)=>{const o={type:"zwave_js/set_config_parameter",device_id:t,property:r,endpoint:n,value:i,property_key:a};return e.callWS(o)},x=(e,t,r,n,i,a)=>{const o={type:"zwave_js/set_raw_config_parameter",device_id:t,property:r,value:n,value_size:i,value_format:a};return e.callWS(o)},N=(e,t,r)=>e.callWS({type:"zwave_js/get_raw_config_parameter",device_id:t,property:r}).then(e=>e.value),P=(e,t,r)=>e.connection.subscribeMessage(e=>r(e),{type:"zwave_js/refresh_node_info",device_id:t}),F=(e,t)=>e.callWS({type:"zwave_js/rebuild_node_routes",device_id:t}),V=(e,t,r)=>e.connection.subscribeMessage(e=>r(e),{type:"zwave_js/remove_failed_node",device_id:t}),L=(e,t)=>e.callWS({type:"zwave_js/begin_rebuilding_routes",entry_id:t}),q=(e,t)=>e.callWS({type:"zwave_js/stop_rebuilding_routes",entry_id:t}),H=(e,t,r)=>e.connection.subscribeMessage(e=>r(e),{type:"zwave_js/subscribe_rebuild_routes_progress",entry_id:t}),K=(e,t,r)=>e.connection.subscribeMessage(e=>r(e),{type:"zwave_js/subscribe_controller_statistics",entry_id:t}),B=(e,t,r)=>e.connection.subscribeMessage(e=>r(e),{type:"zwave_js/subscribe_node_statistics",device_id:t}),U=(e,t,r)=>e.connection.subscribeMessage(e=>r(e),{type:"zwave_js/subscribe_s2_inclusion",entry_id:t}),Y=(e,t)=>e.callWS({type:"zwave_js/is_node_firmware_update_in_progress",device_id:t}),G=(e,t)=>e.callWS({type:"zwave_js/is_any_ota_firmware_update_in_progress",entry_id:t}),J=(e,t)=>e.callWS({type:"zwave_js/hard_reset_controller",entry_id:t}),Q=async(e,t,r,n,i)=>{const a=new FormData;a.append("file",r),void 0!==n&&a.append("target",n.toString());const o=await e.fetchWithAuth(`/api/zwave_js/firmware/upload/${t}`,{method:"POST",body:a,signal:i});if(200!==o.status)throw new Error(o.statusText)},X=(e,t,r)=>e.connection.subscribeMessage(e=>r(e),{type:"zwave_js/subscribe_firmware_update_status",device_id:t}),ee=(e,t)=>e.callWS({type:"zwave_js/abort_firmware_update",device_id:t}),te=(e,t,r)=>e.connection.subscribeMessage(r,{type:"zwave_js/backup_nvm",entry_id:t}),re=(e,t,r,n)=>e.connection.subscribeMessage(n,{type:"zwave_js/restore_nvm",entry_id:t,data:r}),ne=(e,t,r)=>e.connection.subscribeMessage(r,{type:"zwave_js/subscribe_log_updates",entry_id:t}),ie=(e,t)=>e.callWS({type:"zwave_js/get_log_config",entry_id:t}),ae=(e,t,r)=>e.callWS({type:"zwave_js/update_log_config",entry_id:t,config:{level:r}}),oe=e=>e.callWS({type:"zwave_js/get_integration_settings"}),se=(e,t)=>e.callWS({type:"zwave_js/cancel_secure_bootstrap_s2",entry_id:t})},77158:function(e,t,r){r.a(e,async function(e,n){try{r.r(t),r.d(t,{ZWaveJSNetworkVisualization:function(){return b}});r(23792),r(44114),r(18111),r(22489),r(20116),r(7588),r(61701),r(13579),r(3362),r(62953);var i=r(40445),a=r(96196),o=r(77845),s=r(22786),c=r(76774),l=r(91926),u=r(9899),_=r(7358),d=r(72001),p=(r(31168),r(54706)),v=r(49181),y=e([_]);_=(y.then?(await y)():y)[0];let f,h,g=e=>e;class b extends((0,p.E)(a.WF)){hassSubscribe(){return Object.values(this.hass.devices).filter(e=>e.config_entries.some(e=>e===this.configEntryId)).map(e=>(0,d.jF)(this.hass,e.id,t=>{var r;const n=null!==(r=t.nodeId)&&void 0!==r?r:t.node_id;this._devices[n]=e,this._nodeStatistics[n]=t,this._handleUpdatedNodeStatistics()}))}connectedCallback(){super.connectedCallback(),this._fetchNetworkStatus()}render(){return(0,a.qy)(f||(f=g` <hass-tabs-subpage .hass="${0}" .narrow="${0}" .route="${0}" .tabs="${0}"> <ha-network-graph .hass="${0}" .data="${0}" .tooltipFormatter="${0}" @chart-click="${0}"></ha-network-graph></hass-tabs-subpage> `),this.hass,this.narrow,this.route,v.configTabs,this.hass,this._getNetworkData(this._nodeStatuses,this._nodeStatistics),this._tooltipFormatter,this._handleChartClick)}async _fetchNetworkStatus(){const e=await(0,d.Is)(this.hass,{entry_id:this.configEntryId}),t={};e.controller.nodes.forEach(e=>{t[e.node_id]=e}),this._nodeStatuses=t}_handleChartClick(e){if("node"===e.detail.dataType&&"pointer"===e.detail.event.target.cursor){const{id:t}=e.detail.data,r=this._devices[t];r&&(0,l.o)(`/config/devices/device/${r.id}`)}}_getLineWidth(e){return e>-50?3:e>-75?2:1}static get styles(){return[(0,a.AH)(h||(h=g`ha-network-graph{height:100%}`))]}constructor(...e){super(...e),this.isWide=!1,this.narrow=!1,this._nodeStatuses={},this._nodeStatistics={},this._devices={},this._tooltipFormatter=e=>{const{dataType:t,data:r}=e;if("edge"===t){var n,i,a,o,s,l;const{source:e,target:t,value:c}=r,u=this._devices[e],_=this._devices[t];let d=`${null!==(n=null!==(i=null==u?void 0:u.name_by_user)&&void 0!==i?i:null==u?void 0:u.name)&&void 0!==n?n:e} â†’ ${null!==(a=null!==(o=null==_?void 0:_.name_by_user)&&void 0!==o?o:null==_?void 0:_.name)&&void 0!==a?a:t}`;const p=(null===(s=this._nodeStatistics[e])||void 0===s?void 0:s.lwr)||(null===(l=this._nodeStatistics[e])||void 0===l?void 0:l.nlwr);return null!=p&&p.protocol_data_rate&&(d+=`<br><b>${this.hass.localize("ui.panel.config.zwave_js.visualization.data_rate")}:</b> ${this.hass.localize(`ui.panel.config.zwave_js.protocol_data_rate.${p.protocol_data_rate}`)}`),c&&(d+=`<br><b>RSSI:</b> ${c}`),d}const{id:u,name:_}=r,d=this._devices[u],p=this._nodeStatuses[u];let v=`${e.marker} ${_}`;if(v+=`<br><b>${this.hass.localize("ui.panel.config.zwave_js.visualization.node_id")}:</b> ${u}`,d&&(v+=`<br><b>${this.hass.localize("ui.panel.config.zwave_js.visualization.manufacturer")}:</b> ${d.manufacturer||"-"}`,v+=`<br><b>${this.hass.localize("ui.panel.config.zwave_js.visualization.model")}:</b> ${d.model||"-"}`),p&&(v+=`<br><b>${this.hass.localize("ui.panel.config.zwave_js.visualization.status")}:</b> ${this.hass.localize(`ui.panel.config.zwave_js.node_status.${p.status}`)}`,p.zwave_plus_version&&(v+=`<br><b>Z-Wave Plus:</b> ${this.hass.localize("ui.panel.config.zwave_js.visualization.version")} ${p.zwave_plus_version}`)),d){const e=(0,c.w)(d,this.hass).area;e&&(v+=`<br><b>${this.hass.localize("ui.panel.config.zwave_js.visualization.area")}:</b> ${e.name}`)}return v},this._getNetworkData=(0,s.A)((e,t)=>{const r=getComputedStyle(this),n=[],i=[],a=[{name:this.hass.localize("ui.panel.config.zwave_js.visualization.controller"),symbol:"roundRect",itemStyle:{color:r.getPropertyValue("--primary-color")}},{name:this.hass.localize("ui.panel.config.zwave_js.visualization.node"),symbol:"circle",itemStyle:{color:r.getPropertyValue("--cyan-color")}},{name:this.hass.localize("ui.panel.config.zwave_js.visualization.asleep_node"),symbol:"circle",itemStyle:{color:r.getPropertyValue("--disabled-color")}},{name:this.hass.localize("ui.panel.config.zwave_js.visualization.dead_node"),symbol:"circle",itemStyle:{color:r.getPropertyValue("--error-color")}}];if(!Object.keys(e).length)return{nodes:n,links:i,categories:a};let o;return Object.values(e).forEach(e=>{var t,i;e.is_controller_node&&(o=e.node_id);const a=this._devices[e.node_id],s=a?(0,c.w)(a,this.hass).area:void 0;n.push({id:String(e.node_id),name:null!==(t=null!==(i=null==a?void 0:a.name_by_user)&&void 0!==i?i:null==a?void 0:a.name)&&void 0!==t?t:String(e.node_id),context:null==s?void 0:s.name,value:e.is_controller_node?3:e.is_routing?2:1,category:e.status===d.zI.Dead?3:e.status===d.zI.Asleep?2:e.is_controller_node?0:1,symbolSize:e.is_controller_node?40:e.is_routing?30:20,symbol:e.is_controller_node?"roundRect":"circle",itemStyle:{color:e.status===d.zI.Dead?r.getPropertyValue("--error-color"):e.status===d.zI.Asleep?r.getPropertyValue("--disabled-color"):e.is_controller_node?r.getPropertyValue("--primary-color"):r.getPropertyValue("--cyan-color")},polarDistance:e.is_controller_node?0:e.status===d.zI.Dead?.9:.5,fixed:e.is_controller_node})}),Object.entries(t).forEach(([e,t])=>{const n=t.lwr||t.nlwr;if(n){const t=[...n.repeaters.map((e,t)=>{var r;return[null===(r=Object.keys(this._devices).find(t=>{var r;return(null===(r=this._devices[t])||void 0===r?void 0:r.id)===e}))||void 0===r?void 0:r[0],n.repeater_rssi[t]]}),[o,n.rssi]];let a=e;t.forEach(([e,t])=>{const s="number"==typeof t&&t<=0?t:-100,c=i.find(t=>t.source===a&&t.target===String(e)),l=this._getLineWidth(s);c?(c.value=Math.max(c.value,s),c.lineStyle=Object.assign(Object.assign({},c.lineStyle),{},{width:Math.max(c.lineStyle.width,l),type:n.protocol_data_rate>1?"solid":c.lineStyle.type})):i.push({source:a,target:String(e),value:s,lineStyle:{width:l,color:e===o?r.getPropertyValue("--primary-color"):r.getPropertyValue("--disabled-color"),type:n.protocol_data_rate>1?"solid":"dotted"},symbolSize:3*l}),a=String(e)})}}),{nodes:n,links:i,categories:a}}),this._handleUpdatedNodeStatistics=(0,u.s)(()=>{this._nodeStatistics=Object.assign({},this._nodeStatistics)},500)}}(0,i.__decorate)([(0,o.MZ)({attribute:!1})],b.prototype,"route",void 0),(0,i.__decorate)([(0,o.MZ)({attribute:"is-wide",type:Boolean})],b.prototype,"isWide",void 0),(0,i.__decorate)([(0,o.MZ)({type:Boolean})],b.prototype,"narrow",void 0),(0,i.__decorate)([(0,o.MZ)({attribute:!1})],b.prototype,"configEntryId",void 0),(0,i.__decorate)([(0,o.wk)()],b.prototype,"_nodeStatuses",void 0),(0,i.__decorate)([(0,o.wk)()],b.prototype,"_nodeStatistics",void 0),(0,i.__decorate)([(0,o.wk)()],b.prototype,"_devices",void 0),b=(0,i.__decorate)([(0,o.EM)("zwave_js-network-visualization")],b),n()}catch(f){n(f)}})},69235:function(e,t,r){r.a(e,async function(e,t){try{r(23792),r(3362),r(62953);"function"!=typeof window.ResizeObserver&&(window.ResizeObserver=(await r.e("71055").then(r.bind(r,52370))).default),t()}catch(n){t(n)}},1)}}]);
//# sourceMappingURL=61288.f3f85d39061c8584.js.map