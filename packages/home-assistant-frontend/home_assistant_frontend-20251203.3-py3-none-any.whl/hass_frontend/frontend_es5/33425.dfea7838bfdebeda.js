"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["33425"],{60543:function(e,t,a){a.r(t),a.d(t,{HaQrCode:function(){return _}});a(23792),a(18111),a(61701),a(62953);var i=a(40445),r=a(96196),s=a(77845),o=a(81298),c=(a(38962),a(79468));let n,d,h,l=e=>e;class _ extends r.WF{willUpdate(e){super.willUpdate(e),(e.has("data")||e.has("scale")||e.has("width")||e.has("margin")||e.has("maskPattern")||e.has("errorCorrectionLevel"))&&this._error&&(this._error=void 0)}updated(e){const t=this._canvas;if(t&&this.data&&(e.has("data")||e.has("scale")||e.has("width")||e.has("margin")||e.has("maskPattern")||e.has("errorCorrectionLevel")||e.has("centerImage"))){const e=getComputedStyle(this),a=e.getPropertyValue("--rgb-primary-text-color"),i=e.getPropertyValue("--rgb-card-background-color"),r=(0,c.v2)(a.split(",").map(e=>parseInt(e,10))),s=(0,c.v2)(i.split(",").map(e=>parseInt(e,10)));if(o.toCanvas(t,this.data,{errorCorrectionLevel:this.errorCorrectionLevel||(this.centerImage?"Q":"M"),width:this.width,scale:this.scale,margin:this.margin,maskPattern:this.maskPattern,color:{light:s,dark:r}}).catch(e=>{this._error=e.message}),this.centerImage){const e=this._canvas.getContext("2d"),a=new Image;a.src=this.centerImage,a.onload=()=>{null==e||e.drawImage(a,.375*t.width,.375*t.height,t.width/4,t.height/4)}}}}render(){return this.data?this._error?(0,r.qy)(n||(n=l`<ha-alert alert-type="error">${0}</ha-alert>`),this._error):(0,r.qy)(d||(d=l`<canvas></canvas>`)):r.s6}constructor(...e){super(...e),this.errorCorrectionLevel="medium",this.width=4,this.scale=4,this.margin=4}}_.styles=(0,r.AH)(h||(h=l`:host{display:block}`)),(0,i.__decorate)([(0,s.MZ)()],_.prototype,"data",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:"error-correction-level"})],_.prototype,"errorCorrectionLevel",void 0),(0,i.__decorate)([(0,s.MZ)({type:Number})],_.prototype,"width",void 0),(0,i.__decorate)([(0,s.MZ)({type:Number})],_.prototype,"scale",void 0),(0,i.__decorate)([(0,s.MZ)({type:Number})],_.prototype,"margin",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1,type:Number})],_.prototype,"maskPattern",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:"center-image"})],_.prototype,"centerImage",void 0),(0,i.__decorate)([(0,s.wk)()],_.prototype,"_error",void 0),(0,i.__decorate)([(0,s.P)("canvas")],_.prototype,"_canvas",void 0),_=(0,i.__decorate)([(0,s.EM)("ha-qr-code")],_)},21288:function(e,t,a){a.a(e,async function(e,i){try{a.r(t);a(18111),a(61701),a(3362);var r=a(40445),s=a(96196),o=a(77845),c=a(1087),n=a(72554),d=(a(8630),a(28732),a(60543),a(65829)),h=a(20559),l=a(65063),_=a(14503),p=e([d]);d=(p.then?(await p)():p)[0];let g,m,v,f,b,u=e=>e;const y="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z";class w extends s.WF{async showDialog(e){this.device_id=e.device_id,this._fetchNodeDetails()}render(){return this.device_id?(0,s.qy)(g||(g=u` <ha-dialog open hideActions @closed="${0}" .heading="${0}"> <p> ${0} </p> ${0} </ha-dialog> `),this.closeDialog,(0,n.l)(this.hass,this.hass.localize("ui.panel.config.matter.manage_fabrics.title")),this.hass.localize("ui.panel.config.matter.manage_fabrics.fabrics"),this._nodeDiagnostics?(0,s.qy)(m||(m=u`<ha-list> ${0} </ha-list>`),this._nodeDiagnostics.active_fabrics.map(e=>(0,s.qy)(v||(v=u`<ha-list-item noninteractive .hasMeta="${0}">${0} <ha-icon-button @click="${0}" slot="meta" .fabric="${0}" .path="${0}"></ha-icon-button> </ha-list-item>`),this._nodeDiagnostics.available&&e.fabric_index!==this._nodeDiagnostics.active_fabric_index,e.vendor_name||e.fabric_label||e.vendor_id,this._removeFabric,e,y))):(0,s.qy)(f||(f=u`<div class="center"> <ha-spinner></ha-spinner> </div>`))):s.s6}async _fetchNodeDetails(){if(this.device_id)try{this._nodeDiagnostics=await(0,h.eB)(this.hass,this.device_id)}catch(e){this._nodeDiagnostics=void 0}}async _removeFabric(e){const t=e.target.fabric;if(this._nodeDiagnostics.active_fabric_index===t.fabric_index)return;const a=t.vendor_name||t.fabric_label||t.vendor_id.toString();if(await(0,l.dk)(this,{title:this.hass.localize("ui.panel.config.matter.manage_fabrics.remove_fabric_confirm_header",{fabric:a}),text:this.hass.localize("ui.panel.config.matter.manage_fabrics.remove_fabric_confirm_text",{fabric:a}),warning:!0}))try{await(0,h.vX)(this.hass,this.device_id,t.fabric_index),this._fetchNodeDetails()}catch(i){(0,l.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.matter.manage_fabrics.remove_fabric_failed_header",{fabric:a}),text:this.hass.localize("ui.panel.config.matter.manage_fabrics.remove_fabric_failed_text")})}}closeDialog(){this.device_id=void 0,this._nodeDiagnostics=void 0,(0,c.r)(this,"dialog-closed",{dialog:this.localName})}static get styles(){return[_.nA,(0,s.AH)(b||(b=u`ha-dialog{--dialog-content-padding:0;--mdc-list-side-padding:24px;--mdc-list-side-padding-right:16px;--mdc-list-item-meta-size:48px}p{margin:8px 24px}.center{display:flex;align-items:center;justify-content:center}`))]}}(0,r.__decorate)([(0,o.MZ)({attribute:!1})],w.prototype,"hass",void 0),(0,r.__decorate)([(0,o.wk)()],w.prototype,"device_id",void 0),(0,r.__decorate)([(0,o.wk)()],w.prototype,"_nodeDiagnostics",void 0),w=(0,r.__decorate)([(0,o.EM)("dialog-matter-manage-fabrics")],w),i()}catch(g){i(g)}})}}]);
//# sourceMappingURL=33425.dfea7838bfdebeda.js.map