# This file was auto-generated by Fern from our API Definition.

import typing

import pydantic
import typing_extensions
from ..core.pydantic_utilities import IS_PYDANTIC_V2, UniversalBaseModel
from ..core.serialization import FieldMetadata
from .regex_group_rule_flags_item import RegexGroupRuleFlagsItem


class RegexGroupRule(UniversalBaseModel):
    """
    Defines a replacement rule that uses regex capture groups to apply different replacements to different parts of the matched text.
    """

    pattern: str = pydantic.Field()
    """
    The regular expression pattern containing capture groups `(...)`. The entire pattern must match for replacements to occur.
    """

    group_replacements: typing_extensions.Annotated[typing.Dict[str, str], FieldMetadata(alias="groupReplacements")] = (
        pydantic.Field()
    )
    """
    An object where keys are capture group numbers (as strings, e.g., "1", "2") and values are the respective replacement strings for those groups. Groups not listed are kept as matched. The entire match is reconstructed using these replacements.
    """

    flags: typing.Optional[typing.List[RegexGroupRuleFlagsItem]] = pydantic.Field(default=None)
    """
    An array of flags to modify the regex behavior.
    """

    if IS_PYDANTIC_V2:
        model_config: typing.ClassVar[pydantic.ConfigDict] = pydantic.ConfigDict(extra="allow", frozen=True)  # type: ignore # Pydantic v2
    else:

        class Config:
            frozen = True
            smart_union = True
            extra = pydantic.Extra.allow
