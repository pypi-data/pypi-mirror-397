[workspace]
name = "intronic-refactored"
version = "2.0.9"
description = "Intron classification tool for identifying U2-type and U12-type introns using SVM (refactored version)"
authors = ["Graham E. Larue <egrahamlarue@gmail.com>"]
channels = ["conda-forge"]
platforms = ["linux-64", "osx-64", "osx-arm64", "win-64"]

[dependencies]
python = ">=3.8"
numpy = "*"
scipy = "*"
scikit-learn = ">=0.22"
matplotlib = "*"
networkx = ">=2.5.1"
rich = ">=10.0"
tqdm = "*"
pip = "*"
smart-open = ">=5.0.0"
tomli = ">=2.3.0,<3"
pyyaml = "*"
joblib = ">=1.0.0"
pytest = ">=9.0.1,<10"
psutil = ">=7.1.3,<8"

[pypi-dependencies]
biogl = ">=3.0.1"
pysam = ">=0.23.3, <0.24"
pyfaidx = ">=0.9.0.3, <0.10"
biopython = ">=1.86, <2"
pyfastx = ">=2.2.0, <3"
build = ">=1.0.0"

[tasks]
# Installation: install intronIC in development mode
install = "pip install -e ."

# Run intronIC (after install)
intronIC = "intronIC"

# Alternative: run as module (no install needed)
run = "python -m intronIC"

# Show help
help = "intronIC --help"

# Test with default pretrained model (fast, 1-2 minutes with -p 4)
test-small = """
python __main__.py \
  -g ../data/test_data/Homo_sapiens.Chr19.Ensembl_91.fa.gz \
  -a ../data/test_data/Homo_sapiens.Chr19.Ensembl_91.gff3.gz \
  -n homo_sapiens_test_small \
  -p 4
"""

# Test with training from scratch (training time varies widely)
test-full = """
python __main__.py \
  -g ../data/test_data/Homo_sapiens.Chr19.Ensembl_91.fa.gz \
  -a ../data/test_data/Homo_sapiens.Chr19.Ensembl_91.gff3.gz \
  -n homo_sapiens_test_full \
  --train \
  -p 4
"""

# Extract sequences only (no classification, ~1 minute)
test-seqs-only = """
python __main__.py \
  -g ../data/test_data/Homo_sapiens.Chr19.Ensembl_91.fa.gz \
  -a ../data/test_data/Homo_sapiens.Chr19.Ensembl_91.gff3.gz \
  -n homo_sapiens_seqs \
  -s
"""

# Legacy: Run old monolithic version (from parent directory)
intronic-legacy = "cd .. && python -m intronIC.intronIC"
test-legacy = "cd .. && python -m intronIC.intronIC -g intronIC/test_data/Homo_sapiens.Chr19.Ensembl_91.fa.gz -a intronIC/test_data/Homo_sapiens.Chr19.Ensembl_91.gff3.gz -n homo_sapiens_legacy"

[feature.dev.dependencies]
pytest = "*"
pytest-cov = "*"
black = "*"
mypy = "*"
ruff = "*"
twine = "*"

[environments]
default = { solve-group = "default" }
dev = { features = ["dev"], solve-group = "default" }
