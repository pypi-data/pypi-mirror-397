# Integration Test Environment Configuration
# This file contains environment variables for running NexusLIMS integration tests
# with Docker services (NEMO, CDCS, etc.)

# ============================================================================
# NEMO Configuration
# ============================================================================

# NEMO API endpoint (Docker service)
NX_NEMO_ADDRESS_1=http://localhost:8000/api/

# NEMO API authentication token
# This matches the test token configured in the NEMO Docker service
NX_NEMO_TOKEN_1=test-api-token

# Timezone for NEMO instance
NX_NEMO_TZ_1=America/Denver

# Optional: NEMO datetime format override (if different from default)
# NX_NEMO_DATEFMT_1=%Y-%m-%dT%H:%M:%S%z


# ============================================================================
# CDCS Configuration
# ============================================================================

# CDCS instance URL (Docker service)
NX_CDCS_URL=http://localhost:8080

# CDCS authentication credentials (matches docker-entrypoint.sh defaults)
NX_CDCS_USER=admin
NX_CDCS_PASS=admin


# ============================================================================
# Test Data Paths
# ============================================================================

# Instrument data directory (mounted in Docker fileserver)
# This directory contains microscopy data files organized by instrument
NX_INSTRUMENT_DATA_PATH=/tmp/nexuslims-test-instrument-data

# NexusLIMS data directory (mounted in Docker fileserver)
# This directory contains metadata, previews, records, logs, etc.
NX_DATA_PATH=/tmp/nexuslims-test-data

# Database file path (SQLite)
NX_DB_PATH=/tmp/nexuslims-test-data/nexuslims_test.db

# Log directory (optional - defaults to NX_DATA_PATH/logs/)
NX_LOG_PATH=/tmp/nexuslims-test-data/logs

# Records directory (optional - defaults to NX_DATA_PATH/records/)
NX_RECORDS_PATH=/tmp/nexuslims-test-data/records


# ============================================================================
# File Strategy Configuration
# ============================================================================

# File discovery strategy
# - "exclusive": Only include files with known extractors (recommended for testing)
# - "inclusive": Include all files (with basic metadata for unknown types)
NX_FILE_STRATEGY=exclusive

# File patterns to ignore (JSON array format)
# Common patterns for temporary files, databases, etc.
NX_IGNORE_PATTERNS=["*.mib", "*.db", "*.tmp", "*.swp", "Thumbs.db", ".DS_Store"]

# File modification time delay (in days)
# Files must be at least this old before being processed (allows for file transfer delays)
NX_FILE_DELAY_DAYS=0


# ============================================================================
# External Service URLs
# ============================================================================

# Fileserver URLs (for XSLT rendering in CDCS)
# These URLs are used by the CDCS XSLT templates to reference dataset files and previews
FILESERVER_DATASET_URL=http://localhost:8081/instrument-data
FILESERVER_PREVIEW_URL=http://localhost:8081/data


# ============================================================================
# Optional: Local Instrument Profiles
# ============================================================================

# Path to site-specific instrument profiles (if any)
# For integration tests, we typically use only the built-in profiles
# NX_LOCAL_PROFILES_PATH=/path/to/local/profiles


# ============================================================================
# Optional: SSL/TLS Configuration
# ============================================================================

# Certificate bundle for HTTPS requests (not typically needed for local Docker services)
# NX_CERT_BUNDLE=/path/to/cert/bundle.pem

# Disable SSL verification (NOT recommended for production, useful for testing)
# NX_DISABLE_SSL_VERIFY=false


# ============================================================================
# Optional: Email Notifications
# ============================================================================

# Email configuration for record builder notifications
# (Typically disabled for integration tests)
# NX_SMTP_HOST=smtp.example.com
# NX_SMTP_PORT=587
# NX_SMTP_USER=notifications@example.com
# NX_SMTP_PASS=password
# NX_EMAIL_FROM=nexuslims@example.com
# NX_EMAIL_TO=admin@example.com


# ============================================================================
# Debug and Development Settings
# ============================================================================

# Enable debug logging
# NX_DEBUG=true

# Set log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
# NX_LOG_LEVEL=DEBUG
