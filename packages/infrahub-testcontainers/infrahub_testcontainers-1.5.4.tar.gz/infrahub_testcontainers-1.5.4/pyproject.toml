[project]
name = "infrahub-testcontainers"
version = "1.5.4"
requires-python = ">=3.9"

[tool.poetry]
name = "infrahub-testcontainers"
version = "1.5.4"
description = "Testcontainers instance for Infrahub to easily build integration tests"
authors = ["OpsMill <info@opsmill.com>"]
readme = "README.md"
license = "Apache-2.0"
homepage = "https://opsmill.com"
repository = "https://github.com/opsmill/infrahub"
packages = [{ include = "infrahub_testcontainers" }]
classifiers = [
    "Intended Audience :: Developers",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
]

include = ["infrahub_testcontainers/docker-compose.test.yml", "infrahub_testcontainers/docker-compose-cluster.test.yml", "infrahub_testcontainers/haproxy.cfg", "infrahub_testcontainers/prometheus.yml"]


[tool.setuptools.package-data]
infrahub_testcontainers = ["docker-compose.test.yml", "docker-compose-cluster.test.yml", "haproxy.cfg", "prometheus.yml"]

[tool.poetry.plugins."pytest11"]
"pytest-infrahub-performance-test" = "infrahub_testcontainers.plugin"

[tool.poetry.dependencies]
python = "^3.9, < 3.14"
testcontainers = "~4.8"
psutil = "*"
pytest = "*"
httpx = "^0.28.1"
pydantic = "^2.10.6"
prefect-client = "3.4.23"

[tool.poetry.group.dev.dependencies]
rich = "^13.9.4"
pytest-cov = "7.0.0"
pytest-xdist = "~3.4"

[tool.ruff]
line-length = 120
target-version = "py39"
