"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[3307],{73307(e,t,o){o.r(t),o.d(t,{default:()=>O,fileUploadStatus:()=>j});var r=o(49711),i=o(96576),a=o(18504),n=o(62246),s=o(56128),l=o(54006),d=o(69464),c=o(59182),p=o(96190),u=o(43154),m=o(90182),g=o(64530),h=o(45945),b=o(47079);const w="FileBrowser",f="@jupyterlab/filebrowser-extension:browser";var y;!function(e){e.copy="filebrowser:copy",e.copyDownloadLink="filebrowser:copy-download-link",e.cut="filebrowser:cut",e.del="filebrowser:delete",e.download="filebrowser:download",e.duplicate="filebrowser:duplicate",e.selectAll="filebrowser:select-all",e.hideBrowser="filebrowser:hide-main",e.goToPath="filebrowser:go-to-path",e.goUp="filebrowser:go-up",e.openPath="filebrowser:open-path",e.openUrl="filebrowser:open-url",e.open="filebrowser:open",e.openBrowserTab="filebrowser:open-browser-tab",e.paste="filebrowser:paste",e.createNewDirectory="filebrowser:create-new-directory",e.createNewFile="filebrowser:create-new-file",e.createNewMarkdownFile="filebrowser:create-new-markdown-file",e.refresh="filebrowser:refresh",e.rename="filebrowser:rename",e.copyShareableLink="filebrowser:share-main",e.copyPath="filebrowser:copy-path",e.showBrowser="filebrowser:activate",e.shutdown="filebrowser:shutdown",e.toggleBrowser="filebrowser:toggle-main",e.toggleFileFilter="filebrowser:toggle-file-filter",e.toggleNavigateToCurrentDirectory="filebrowser:toggle-navigate-to-current-directory",e.toggleLastModified="filebrowser:toggle-last-modified",e.toggleShowFullPath="filebrowser:toggle-show-full-path",e.toggleFileSize="filebrowser:toggle-file-size",e.toggleSortNotebooksFirst="filebrowser:toggle-sort-notebooks-first",e.search="filebrowser:search",e.toggleHiddenFiles="filebrowser:toggle-hidden-files",e.toggleSingleClick="filebrowser:toggle-single-click-navigation",e.toggleFileCheckboxes="filebrowser:toggle-file-checkboxes"}(y||(y={}));const _="filebrowser",F={id:f,description:"Set up the default file browser commands and state restoration",requires:[d.IDefaultFileBrowser,d.IFileBrowserFactory,m.ITranslator],optional:[i.ILayoutRestorer,c.ISettingRegistry,i.ITreePathUpdater,a.ICommandPalette],provides:d.IFileBrowserCommands,autoStart:!0,activate:async(e,t,o,r,i,s,l,d)=>{const c=t;i&&i.add(c,_);const p=n.PageConfig.getOption("preferredPath");return p&&await c.model.cd(p),function(e,t,o,r,i,s){const l=r.load("jupyterlab"),{docRegistry:d,commands:c}=e,{tracker:p}=o,u="true"===n.PageConfig.getOption("delete_to_trash");c.addCommand(y.del,{execute:()=>{const e=p.currentWidget;if(e)return e.delete()},icon:g.closeIcon.bindprops({stylesheet:"menuItem"}),label:u?l.__("Move to Trash"):l.__("Delete"),mnemonic:0,describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.copy,{execute:()=>{const e=p.currentWidget;if(e)return e.copy()},icon:g.copyIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Copy"),mnemonic:0,describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.cut,{execute:()=>{const e=p.currentWidget;if(e)return e.cut()},icon:g.cutIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Cut"),describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.duplicate,{execute:()=>{const e=p.currentWidget;if(e)return e.duplicate()},icon:g.copyIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Duplicate"),describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.selectAll,{execute:()=>{const e=p.currentWidget;if(e)return e.selectAll()},label:l.__("Select All"),describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.goToPath,{label:l.__("Update the file browser to display the provided `path`."),describedBy:{args:{type:"object",properties:{path:{type:"string",description:l.__("The path to navigate to")},dontShowBrowser:{type:"boolean",description:l.__("Whether to avoid showing the browser")}}}},execute:async e=>{var i;const a=e.path||"",n=!(null!==(i=null==e?void 0:e.dontShowBrowser)&&void 0!==i&&i);try{if("directory"!==(await L.navigateToPath(a,t,o,r)).type&&n){const e=L.getBrowserForPath(a,t,o);if(e){e.clearSelectedItems();const t=a.split("/"),o=t[t.length-1];o&&await e.selectItemByName(o)}}}catch(e){console.warn(`${y.goToPath} failed to go to: ${a}`,e)}if(n)return c.execute(y.showBrowser,{path:a})}}),c.addCommand(y.goUp,{label:"go up",execute:async()=>{const e=L.getBrowserForPath("",t,o);if(!e)return;const{model:r}=e;await r.restored,e.goUp()},describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.openPath,{label:e=>e.path?l.__("Open %1",e.path):l.__("Open from Path…"),caption:e=>e.path?l.__("Open %1",e.path):l.__("Open from path"),execute:async e=>{var r;let i;if(i=(null==e?void 0:e.path)?e.path:null!==(r=(await a.InputDialog.getText({label:l.__("Path"),placeholder:"/path/relative/to/jlab/root",title:l.__("Open Path"),okLabel:l.__("Open")})).value)&&void 0!==r?r:void 0,i)try{const r="/"!==i&&i.endsWith("/");r&&(i=i.slice(0,i.length-1));const a=L.getBrowserForPath(i,t,o),{services:n}=a.model.manager,s=await n.contents.get(i,{content:!1});if(r&&"directory"!==s.type)throw new Error(`Path ${i}/ is not a directory`);if(await c.execute(y.goToPath,{path:i,dontShowBrowser:e.dontShowBrowser}),"directory"===s.type)return;return c.execute("docmanager:open",{path:i})}catch(e){return e.response&&404===e.response.status&&(e.message=l.__("Could not find path: %1",i)),(0,a.showErrorMessage)(l.__("Cannot open"),e)}},describedBy:{args:{type:"object",properties:{path:{type:"string",description:l.__("Path to the file or directory to open")},dontShowBrowser:{type:"boolean",description:l.__("Whether to avoid showing the file browser")}}}}}),s&&s.addItem({command:y.openPath,category:l.__("File Operations")}),c.addCommand(y.open,{execute:e=>{const t=e.factory||void 0,o=p.currentWidget;if(!o)return;const{contents:r}=o.model.manager.services;return Promise.all(Array.from((0,h.map)(o.selectedItems(),i=>{if("directory"===i.type){const e=r.localPath(i.path);return o.model.cd(`/${e}`)}return c.execute("docmanager:open",{factory:t,path:i.path,kernelPreference:e.kernelPreference})})))},icon:e=>{var t;const o=e.factory||void 0;if(o){const e=d.getFileType(o);return null===(t=null==e?void 0:e.icon)||void 0===t?void 0:t.bindprops({stylesheet:"menuItem"})}return g.folderIcon.bindprops({stylesheet:"menuItem"})},label:e=>e.label||e.factory||l.__("Open"),mnemonic:0,describedBy:{args:{type:"object",properties:{factory:{type:"string",description:l.__("The name of the widget factory to use")},label:{type:"string",description:l.__("The label to display for the command")}}}}}),c.addCommand(y.paste,{execute:()=>{const e=p.currentWidget;if(e)return e.paste()},icon:g.pasteIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Paste"),mnemonic:0,describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.createNewDirectory,{execute:()=>{const e=p.currentWidget;if(e)return e.createNewDirectory()},icon:g.newFolderIcon.bindprops({stylesheet:"menuItem"}),label:l.__("New Folder"),describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.createNewFile,{execute:e=>{var t;const o=p.currentWidget;if(o)return o.createNewFile({ext:null!==(t=e.ext)&&void 0!==t?t:"txt"})},icon:e=>e.iconName?g.LabIcon.resolve({icon:e.iconName}):g.textEditorIcon.bindprops({stylesheet:"menuItem"}),label:e=>{var t;return l.__(null!==(t=e.label)&&void 0!==t?t:"New File")},describedBy:{args:{type:"object",properties:{label:{type:"string",default:"New File",description:l.__("The command label.")},iconName:{type:"string",description:l.__("The command icon.")},ext:{type:"string",default:"txt",description:l.__("The file extension.")}}}}}),c.addCommand(y.createNewMarkdownFile,{execute:()=>{const e=p.currentWidget;if(e)return e.createNewFile({ext:"md"})},icon:g.markdownIcon.bindprops({stylesheet:"menuItem"}),label:l.__("New Markdown File"),describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.refresh,{execute:e=>{const t=p.currentWidget;if(t)return t.model.refresh()},icon:g.refreshIcon.bindprops({stylesheet:"menuItem"}),caption:l.__("Refresh the file browser."),label:l.__("Refresh File List"),describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.rename,{execute:e=>{const t=p.currentWidget;if(t)return t.rename()},isVisible:()=>!!p.currentWidget&&1===Array.from(p.currentWidget.selectedItems()).length,icon:g.editIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Rename"),mnemonic:0,describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.copyPath,{execute:()=>{var e;const t=p.currentWidget;if(!t)return;const o=t.selectedItems().next();if(!o.done)if("true"===n.PageConfig.getOption("copyAbsolutePath")){const t=n.PathExt.joinWithLeadingSlash(null!==(e=n.PageConfig.getOption("serverRoot"))&&void 0!==e?e:"",o.value.path);a.Clipboard.copyToSystem(t)}else a.Clipboard.copyToSystem(o.value.path)},isVisible:()=>!!p.currentWidget&&1===Array.from(p.currentWidget.selectedItems()).length,icon:g.fileIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Copy Path"),describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.shutdown,{execute:()=>{const e=p.currentWidget;if(e)return e.shutdownKernels()},icon:g.stopIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Shut Down Kernel"),describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.toggleFileFilter,{execute:()=>{t.showFileFilter=!t.showFileFilter,c.notifyCommandChanged(y.toggleFileFilter)},isToggled:()=>t.showFileFilter,icon:g.filterIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Toggle File Filter"),describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.toggleLastModified,{label:l.__("Show Last Modified Column"),isToggled:()=>t.showLastModifiedColumn,execute:()=>{const e=!t.showLastModifiedColumn,o="showLastModifiedColumn";if(i)return i.set(f,o,e).catch(e=>{console.error(`Failed to set ${o} setting`)})},describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.toggleShowFullPath,{label:l.__("Show Full Path"),isToggled:()=>t.showFullPath,execute:()=>{const e=!t.showFullPath,o="showFullPath";if(i)return i.set(f,o,e).catch(e=>{console.error(`Failed to set ${o} setting`)})},describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.toggleSortNotebooksFirst,{label:l.__("Sort Notebooks Above Files"),isToggled:()=>t.sortNotebooksFirst,execute:()=>{const e=!t.sortNotebooksFirst,o="sortNotebooksFirst";if(i)return i.set(f,o,e).catch(e=>{console.error(`Failed to set ${o} setting`)})},describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.toggleFileSize,{label:l.__("Show File Size Column"),isToggled:()=>t.showFileSizeColumn,execute:()=>{const e=!t.showFileSizeColumn,o="showFileSizeColumn";if(i)return i.set(f,o,e).catch(e=>{console.error(`Failed to set ${o} setting`)})},describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.toggleSingleClick,{label:l.__("Enable Single Click Navigation"),isToggled:()=>t.singleClickNavigation,execute:()=>{const e=!t.singleClickNavigation;if(i)return i.set(f,"singleClickNavigation",e).catch(e=>{console.error("Failed to set singleClickNavigation setting")})},describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.toggleHiddenFiles,{label:l.__("Show Hidden Files"),isToggled:()=>t.showHiddenFiles,isVisible:()=>"true"===n.PageConfig.getOption("allow_hidden_files"),execute:()=>{const e=!t.showHiddenFiles;if(i)return i.set(f,"showHiddenFiles",e).catch(e=>{console.error("Failed to set showHiddenFiles setting")})},describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.toggleFileCheckboxes,{label:l.__("Show File Checkboxes"),isToggled:()=>t.showFileCheckboxes,execute:()=>{const e=!t.showFileCheckboxes;if(i)return i.set(f,"showFileCheckboxes",e).catch(e=>{console.error("Failed to set showFileCheckboxes setting")})},describedBy:{args:{type:"object",properties:{}}}}),c.addCommand(y.search,{label:l.__("Search on File Names"),execute:()=>alert("search"),describedBy:{args:{type:"object",properties:{}}}})}(e,c,o,r,s,d),Promise.all([e.restored,c.model.restored]).then(()=>{l&&c.model.pathChanged.connect((e,t)=>{l(t.newValue)})}),{openPath:y.openPath}}},v={id:"@jupyterlab/filebrowser-extension:settings",description:"Set up the default file browser settings",requires:[d.IDefaultFileBrowser],optional:[c.ISettingRegistry],autoStart:!0,activate:(e,t,o)=>{o&&o.load(f).then(e=>{const o={navigateToCurrentDirectory:!1,singleClickNavigation:!1,showLastModifiedColumn:!0,showFileSizeColumn:!1,showHiddenFiles:!1,showFileCheckboxes:!1,sortNotebooksFirst:!1,showFullPath:!1,allowFileUploads:!0};function r(e){let r;for(r in o){const o=e.get(r).composite;t[r]=o}const i=e.get("breadcrumbs").composite;t.minimumBreadcrumbsLeftItems=i.minimumLeftItems,t.minimumBreadcrumbsRightItems=i.minimumRightItems;const a=e.get("filterDirectories").composite,n=e.get("useFuzzyFilter").composite;t.model.filterDirectories=a,t.model.useFuzzyFilter=n}e.changed.connect(r),r(e)})}},C={id:"@jupyterlab/filebrowser-extension:factory",description:"Provides the file browser factory.",provides:d.IFileBrowserFactory,requires:[s.IDocumentManager,m.ITranslator],optional:[p.IStateDB,i.JupyterLab.IInfo],activate:async(e,t,o,r,i)=>{const n=new a.WidgetTracker({namespace:_});return{createFileBrowser:(e,a={})=>{var s,l;const c=null===a.state?void 0:a.state||r||void 0,p=new d.FilterFileBrowserModel({translator:o,auto:null===(s=a.auto)||void 0===s||s,manager:t,driveName:a.driveName||"",refreshInterval:a.refreshInterval,refreshStandby:()=>i&&!i.isConnected||"when-hidden",state:c,allowFileUploads:null===(l=a.allowFileUploads)||void 0===l||l}),u=a.restore,m=new d.FileBrowser({id:e,model:p,restore:u,translator:o,state:c});return n.add(m),m},tracker:n}}},I={id:"@jupyterlab/filebrowser-extension:default-file-browser",description:"Provides the default file browser",provides:d.IDefaultFileBrowser,requires:[d.IFileBrowserFactory],optional:[i.IRouter,i.JupyterFrontEnd.ITreeResolver,i.ILabShell,m.ITranslator],activate:async(e,t,o,r,i,a)=>{const{commands:n}=e,s=(null!=a?a:m.nullTranslator).load("jupyterlab"),l=t.createFileBrowser("filebrowser",{auto:!1,restore:!1});l.node.setAttribute("role","region"),l.node.setAttribute("aria-label",s.__("File Browser Section")),l.title.icon=g.folderIcon;const d=()=>{const t=e.commands.keyBindings.find(e=>e.command===y.toggleBrowser);if(t){const e=t.keys.map(b.CommandRegistry.formatKeystroke).join(", ");l.title.caption=s.__("File Browser (%1)",e)}else l.title.caption=s.__("File Browser")};return d(),e.commands.keyBindingChanged.connect(()=>{d()}),L.restoreBrowser(l,n,o,r,e,i),l}},B={id:"@jupyterlab/filebrowser-extension:download",description:"Adds the download file commands. Disabling this plugin will NOT disable downloading files from the server, if the user enters the appropriate download URLs.",requires:[d.IFileBrowserFactory,m.ITranslator],autoStart:!0,activate:(e,t,o)=>{const r=o.load("jupyterlab"),{commands:i}=e,{tracker:n}=t;i.addCommand(y.download,{execute:()=>{const e=n.currentWidget;if(e)return e.download()},icon:g.downloadIcon.bindprops({stylesheet:"menuItem"}),label:r.__("Download"),describedBy:{args:{type:"object",properties:{}}}}),i.addCommand(y.copyDownloadLink,{execute:()=>{const e=n.currentWidget;if(e)return e.model.manager.services.contents.getDownloadUrl(e.selectedItems().next().value.path).then(e=>{a.Clipboard.copyToSystem(e)})},isVisible:()=>!!n.currentWidget&&1===Array.from(n.currentWidget.selectedItems()).length,icon:g.copyIcon.bindprops({stylesheet:"menuItem"}),label:r.__("Copy Download Link"),mnemonic:0,describedBy:{args:{type:"object",properties:{}}}})}},x={id:"@jupyterlab/filebrowser-extension:create-new-language-file",description:"Adds context menu entries for creating Python/R/Julia files",requires:[m.ITranslator],autoStart:!0,activate:async(e,t)=>{const o=t.load("jupyterlab");let i=new r.DisposableSet;const a=e.serviceManager.kernelspecs,n=async()=>{var t,n;i&&(i.dispose(),i=new r.DisposableSet);const s=await(0,l.getAvailableKernelFileTypes)(a);for(const r of s)i.add(e.contextMenu.addItem({command:y.createNewFile,selector:".jp-DirListing",args:{ext:r.extensions[0],label:o.__("New %1 File",r.displayName),iconName:null!==(n=null===(t=r.icon)||void 0===t?void 0:t.toString())&&void 0!==n?n:""},rank:52}))};a.specsChanged.connect(n),n().catch(console.warn)}},S={id:"@jupyterlab/filebrowser-extension:widget",description:"Adds the file browser to the application shell.",requires:[s.IDocumentManager,d.IDefaultFileBrowser,d.IFileBrowserFactory,c.ISettingRegistry,a.IToolbarWidgetRegistry,m.ITranslator,i.ILabShell,d.IFileBrowserCommands],optional:[a.ICommandPalette],autoStart:!0,activate:(e,t,o,r,i,n,s,l,c,p)=>{const{commands:u}=e,{tracker:m}=r,g=s.load("jupyterlab");n.addFactory(w,"uploader",e=>new d.Uploader({model:e.model,translator:s})),(0,a.setToolbar)(o,(0,a.createToolbarFactory)(n,i,w,S.id,s)),l.add(o,"left",{rank:100,type:"File Browser"}),u.addCommand(y.toggleBrowser,{label:g.__("File Browser"),describedBy:{args:{type:"object",properties:{}}},execute:()=>o.isHidden?u.execute(y.showBrowser,void 0):u.execute(y.hideBrowser,void 0)}),u.addCommand(y.showBrowser,{label:g.__("Open the file browser for the provided `path`."),describedBy:{args:{type:"object",properties:{path:{type:"string",description:g.__("The path to open in the file browser")}}}},execute:e=>{const t=e.path||"",i=L.getBrowserForPath(t,o,r);if(i)if(o!==i){const e=["left","right"];for(const t of e)for(const e of l.widgets(t))if(e.contains(i))return void l.activateById(e.id)}else l.activateById(o.id)}}),u.addCommand(y.hideBrowser,{label:g.__("Hide the file browser."),describedBy:{args:{type:"object",properties:{}}},execute:()=>{const e=m.currentWidget;e&&!e.isHidden&&l.collapseLeft()}}),u.addCommand(y.toggleNavigateToCurrentDirectory,{label:g.__("Show Active File in File Browser"),isToggled:()=>o.navigateToCurrentDirectory,execute:()=>{const e=!o.navigateToCurrentDirectory;return i.set(f,"navigateToCurrentDirectory",e).catch(e=>{console.error("Failed to set navigateToCurrentDirectory setting")})},describedBy:{args:{type:"object",properties:{}}}}),p&&p.addItem({command:y.toggleNavigateToCurrentDirectory,category:g.__("File Operations")}),l.restored.then(e=>{e.fresh&&"single-document"!==l.mode&&u.execute(y.showBrowser,void 0)}),Promise.all([e.restored,o.model.restored]).then(()=>{l.currentChanged.connect(async(e,i)=>{if(o.navigateToCurrentDirectory&&i.newValue){const{newValue:e}=i,a=t.contextForWidget(e);if(a){const{path:e}=a;try{await L.navigateToPath(e,o,r,s)}catch(t){console.warn(`${y.goToPath} failed to open: ${e}`,t)}}}})})}},k={id:"@jupyterlab/filebrowser-extension:share-file",description:'Adds the "Copy Shareable Link" command; useful for JupyterHub deployment for example.',requires:[d.IFileBrowserFactory,m.ITranslator],autoStart:!0,activate:(e,t,o)=>{const r=o.load("jupyterlab"),{commands:i}=e,{tracker:s}=t;i.addCommand(y.copyShareableLink,{execute:()=>{const e=s.currentWidget,t=null==e?void 0:e.selectedItems().next();void 0===t||t.done||a.Clipboard.copyToSystem(n.PageConfig.getUrl({workspace:n.PageConfig.defaultWorkspace,treePath:t.value.path,toShare:!0}))},isVisible:()=>!!s.currentWidget&&1===Array.from(s.currentWidget.selectedItems()).length,icon:g.linkIcon.bindprops({stylesheet:"menuItem"}),label:r.__("Copy Shareable Link"),describedBy:{args:{type:"object",properties:{}}}})}},T={id:"@jupyterlab/filebrowser-extension:open-with",description:"Adds the open-with feature allowing an user to pick the non-preferred document viewer.",requires:[d.IFileBrowserFactory],autoStart:!0,activate:(e,t)=>{const{docRegistry:o}=e,{tracker:r}=t;let i=[];e.contextMenu.opened.connect(function(e){var t,a;const n=null!==(a=null===(t=e.menu.items.find(e=>{var t;return"submenu"===e.type&&"jp-contextmenu-open-with"===(null===(t=e.submenu)||void 0===t?void 0:t.id)}))||void 0===t?void 0:t.submenu)&&void 0!==a?a:null;if(!n)return;i.forEach(e=>e.dispose()),i.length=0,n.clearItems();const s=r.currentWidget?L.OpenWith.intersection((0,h.map)(r.currentWidget.selectedItems(),e=>L.OpenWith.getFactories(o,e))):new Set;i=[...s].map(e=>n.addItem({args:{factory:e.name,label:e.label||e.name},command:y.open}))})}},P={id:"@jupyterlab/filebrowser-extension:open-browser-tab",description:"Adds the open-in-new-browser-tab features.",requires:[d.IFileBrowserFactory,m.ITranslator],autoStart:!0,activate:(e,t,o)=>{const{commands:r}=e,i=o.load("jupyterlab"),{tracker:a}=t;r.addCommand(y.openBrowserTab,{execute:e=>{const t=a.currentWidget;if(!t)return;const o=e.mode;return Promise.all(Array.from((0,h.map)(t.selectedItems(),e=>{if("single-document"!==o)return r.execute("docmanager:open-browser-tab",{path:e.path});{const t=n.PageConfig.getUrl({mode:"single-document",treePath:e.path}),o=window.open();if(!o)throw new Error("Failed to open new browser tab.");o.opener=null,o.location.href=t}})))},icon:g.addIcon.bindprops({stylesheet:"menuItem"}),label:e=>"single-document"===e.mode?i.__("Open in Simple Mode"):i.__("Open in New Browser Tab"),mnemonic:0,describedBy:{args:{type:"object",properties:{mode:{type:"string",description:i.__("Mode for opening files (e.g., single-document)")}}}}})}},j={id:"@jupyterlab/filebrowser-extension:file-upload-status",description:"Adds a file upload status widget.",autoStart:!0,requires:[d.IFileBrowserFactory,m.ITranslator],optional:[u.IStatusBar],activate:(e,t,o,r)=>{if(!r)return;const i=new d.FileUploadStatus({tracker:t.tracker,translator:o});r.registerStatusItem("@jupyterlab/filebrowser-extension:file-upload-status",{item:i,align:"middle",isActive:()=>!!i.model&&i.model.items.length>0,activeStateChanged:i.model.stateChanged})}},N={id:"@jupyterlab/filebrowser-extension:open-url",description:'Adds the feature "Open files from remote URLs".',autoStart:!0,requires:[d.IDefaultFileBrowser,m.ITranslator],optional:[a.ICommandPalette],activate:(e,t,o,r)=>{const{commands:i}=e,s=o.load("jupyterlab"),l=y.openUrl;i.addCommand(l,{label:e=>e.url?s.__("Open %1",e.url):s.__("Open from URL…"),caption:e=>e.url?s.__("Open %1",e.url):s.__("Open from URL"),execute:async e=>{var o,r,l;let d=null!==(o=null==e?void 0:e.url)&&void 0!==o?o:"";if(d||(d=null!==(r=(await a.InputDialog.getText({label:s.__("URL"),placeholder:"https://example.com/path/to/file",title:s.__("Open URL"),okLabel:s.__("Open")})).value)&&void 0!==r?r:void 0),!d)return;let c,p="";try{const e=await fetch(d);c=await e.blob(),p=null!==(l=e.headers.get("Content-Type"))&&void 0!==l?l:""}catch(e){return e.response&&200!==e.response.status&&(e.message=s.__("Could not open URL: %1",d)),(0,a.showErrorMessage)(s.__("Cannot fetch"),e)}try{const e=n.PathExt.basename(d),o=new File([c],e,{type:p}),r=await t.model.upload(o);return i.execute("docmanager:open",{path:r.path})}catch(e){return(0,a.showErrorMessage)(s._p("showErrorMessage","Upload Error"),e)}},describedBy:{args:{type:"object",properties:{url:{type:"string",description:s.__("URL of the file to open")}}}}}),r&&r.addItem({command:l,category:s.__("File Operations")})}},W={id:"@jupyterlab/filebrowser-extension:notify-upload",requires:[d.IDefaultFileBrowser,c.ISettingRegistry,m.ITranslator],description:"Adds feature to auto-open supported files after upload",autoStart:!0,activate:async(e,t,o,r)=>{const i=r.load("jupyterlab"),n=await o.load(f);let s=n.get("autoOpenUploads").composite,l=1024*n.get("maxAutoOpenSizeMB").composite*1024;n.changed.connect(()=>{s=n.get("autoOpenUploads").composite,l=1024*n.get("maxAutoOpenSizeMB").composite*1024}),e.restored.then(()=>{const o=Array.from(t.toolbar.children()).find(e=>e instanceof d.Uploader);o?o.filesUploaded.connect((t,o)=>{const r=Array.from(e.docRegistry.fileTypes()).reduce((e,t)=>{if(t.extensions)for(const o of t.extensions)e.push(o.toLowerCase());return e},[]),n=o[0].name.toLowerCase(),c=r.some(e=>n.endsWith(e));if(1!==o.length||"notebook"!==o[0].type&&"file"!==o[0].type)a.Notification.emit(i.__("Upload complete (%1 files)",o.length),"info",{autoClose:5e3,actions:[{label:i.__("Open All"),callback:()=>{o.forEach(t=>{e.commands.execute("docmanager:open",{path:t.path}).catch(e=>{(0,a.showErrorMessage)(`Could not open ${t.path}`,e)})})}}]});else{const t=o[0];s&&t.size&&t.size<=l&&c?e.commands.execute("docmanager:open",{path:t.path}).catch(e=>{(0,a.showErrorMessage)(`Opening ${t.name} failed`,e)}):a.Notification.emit(i.__("Uploaded %1%2",t.name,t.size?` (${(0,d.formatFileSize)(t.size,1,1024)})`:""),"info",{autoClose:5e3,actions:[{label:i.__("Open File"),callback:()=>{e.commands.execute("docmanager:open",{path:t.path}).catch(e=>{(0,a.showErrorMessage)(`Could not open ${t.name}`,e)})}}]})}}):console.warn("Uploader widget not found")})}},O=[C,I,F,v,k,j,B,S,T,P,N,W,x];var L;!function(e){let t;e.getBrowserForPath=function(e,t,o){const{tracker:r}=o,i=t.model.manager.services.contents.driveName(e);if(i){return r.find(e=>e.model.driveName===i)||void console.warn(`${y.goToPath} failed to find filebrowser for path: ${e}`)}return t},e.navigateToPath=async function(t,o,r,i){const a=i.load("jupyterlab"),s=e.getBrowserForPath(t,o,r);if(!s)throw new Error(a.__("No browser for path"));const{services:l}=s.model.manager,d=l.contents.localPath(t);await l.ready;const c=await l.contents.get(t,{content:!1}),{model:p}=s;return await p.restored,"directory"===c.type?await p.cd(`/${d}`):await p.cd(`/${n.PathExt.dirname(d)}`),c},e.restoreBrowser=async function(e,t,o,r,i,a){const n="jp-mod-restoring";if(e.addClass(n),!o)return await e.model.restore(e.id),await e.model.refresh(),void e.removeClass(n);const s=async()=>{o.routed.disconnect(s);const i=await(null==r?void 0:r.paths);(null==i?void 0:i.file)||(null==i?void 0:i.browser)?(await e.model.restore(e.id,!1),i.file&&await t.execute(y.openPath,{path:i.file,dontShowBrowser:!0}),i.browser&&await t.execute(y.openPath,{path:i.browser,dontShowBrowser:!0})):(await e.model.restore(e.id),await e.model.refresh()),e.removeClass(n),(null==a?void 0:a.isEmpty("main"))&&t.execute("launcher:create")};o.routed.connect(s)},function(e){e.getFactories=function(e,t){const o=e.preferredWidgetFactories(t.path),r=e.getWidgetFactory("notebook");return r&&"notebook"===t.type&&-1===o.indexOf(r)&&o.unshift(r),o},e.intersection=function(e){let t;for(const o of e){if(void 0===t){t=new Set(o);continue}if(0===t.size)return t;let e=new Set;for(const r of o)t.has(r)&&e.add(r);t=e}return null!=t?t:new Set}}(t=e.OpenWith||(e.OpenWith={}))}(L||(L={}))}}]);