"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[6371],{15836(e,t,n){n.d(t,{$Y:()=>d,AH:()=>s,Mh:()=>l,bv:()=>a,uQ:()=>o,xg:()=>u});var i=n(36549);const r="numbering-entry";function o(e,t,n=[]){const r={...i.MB.defaultConfig,...t},o=n;let s=o.length;const a=new Array;for(const t of e){if(t.skip)continue;const e=t.level;if(e>0&&e<=r.maximalDepth){const n=d(e,s,o,r);s=e,a.push({...t,prefix:n})}}return a}function s(e){return"text/html"===e}function a(e,t=!0){var n;const i=document.createElement("div");i.innerHTML=e;const r=new Array,o=i.querySelectorAll("h1, h2, h3, h4, h5, h6");for(const e of o){const t=parseInt(e.tagName[1],10);r.push({text:null!==(n=e.textContent)&&void 0!==n?n:"",level:t,id:null==e?void 0:e.getAttribute("id"),skip:e.classList.contains("jp-toc-ignore")||e.classList.contains("tocSkip")})}return r}function l(e,t,n){let i=e.querySelector(t);if(!i)return null;if(i.querySelector(`span.${r}`)){const o=e.querySelectorAll(t);for(const e of o)if(!e.querySelector(`span.${r}`)){i=e,c(e,n);break}}else c(i,n);return i}function d(e,t,n,i){const{baseNumbering:r,numberingH1:o,numberHeaders:s}=i;let a="";if(s){const i=o?1:2;if(e>t){for(let i=t;i<e-1;i++)n[i]=0;n[e-1]=e===i?r:1}else n[e-1]+=1,e<t&&n.splice(e);o?a=n.map(e=>null!=e?e:0).join(".")+". ":n.length>1&&(a=n.slice(1).map(e=>null!=e?e:0).join(".")+". ")}return a}function c(e,t){e.insertAdjacentHTML("afterbegin",`<span class="${r}">${t}</span>`)}function u(e){null==e||e.querySelectorAll(`span.${r}`).forEach(e=>{e.remove()})}},16371(e,t,n){n.r(t),n.d(t,{EditorSyntaxStatus:()=>C,EditorTableOfContentsFactory:()=>M,FileEditor:()=>p,FileEditorAdapter:()=>a,FileEditorFactory:()=>m,FileEditorSearchProvider:()=>y,FileEditorWidget:()=>g,IEditorTracker:()=>L,IEditorWidgetFactory:()=>U,LaTeXTableOfContentsFactory:()=>F,LaTeXTableOfContentsModel:()=>I,MarkdownTableOfContentsFactory:()=>j,MarkdownTableOfContentsModel:()=>O,PythonTableOfContentsFactory:()=>N,PythonTableOfContentsModel:()=>H,TabSpaceStatus:()=>T});var i=n(86012),r=n(75188),o=n(51108),s=n(68211);class a extends r.x{constructor(e,t){const{docRegistry:n,...i}=t;super(e,i),this._readyDelegate=new s.PromiseDelegate,this.editor=e.content,this._docRegistry=n,this._virtualEditor=Object.freeze({getEditor:()=>this.editor.editor,ready:()=>Promise.resolve(this.editor.editor),reveal:()=>Promise.resolve(this.editor.editor)}),Promise.all([this.editor.context.ready,this.connectionManager.ready]).then(async()=>{await this.initOnceReady(),this._readyDelegate.resolve(),this._editorAdded.emit({editor:this._virtualEditor})}).catch(console.error)}get ready(){return this._readyDelegate.promise}get documentPath(){return this.widget.context.path}get mimeType(){var e;const t=this.editor.model.mimeType,n=Array.isArray(t)?null!==(e=t[0])&&void 0!==e?e:i.IEditorMimeTypeService.defaultMimeType:t,r=this.editor.context.contentsModel;return n!=i.IEditorMimeTypeService.defaultMimeType?n:r?this._docRegistry.getFileTypeForModel(r).mimeTypes[0]:n}get languageFileExtension(){let e=this.documentPath.split(".");return e[e.length-1]}get ceEditor(){return this.editor.editor}get activeEditor(){return this._virtualEditor}get wrapperElement(){return this.widget.node}get path(){return this.widget.context.path}get editors(){var e,t;return[{ceEditor:this._virtualEditor,type:"code",value:null!==(t=null===(e=this.editor)||void 0===e?void 0:e.model.sharedModel.getSource())&&void 0!==t?t:""}]}dispose(){this.isDisposed||(this._editorRemoved.emit({editor:this._virtualEditor}),this.editor.model.mimeTypeChanged.disconnect(this.reloadConnection),super.dispose())}createVirtualDocument(){return new o.v7({language:this.language,foreignCodeExtractors:this.options.foreignCodeExtractorsManager,path:this.documentPath,fileExtension:this.languageFileExtension,standalone:!0,hasLspSupportedFile:!0})}getEditorIndexAt(e){return 0}getEditorIndex(e){return 0}getEditorWrapper(e){return this.wrapperElement}async initOnceReady(){this.initVirtual(),await this.connectDocument(this.virtualDocument,!1),this.editor.model.mimeTypeChanged.connect(this.reloadConnection,this)}}var l=n(18504),d=n(21656),c=n(54006),u=n(64530),h=n(80281);class p extends h.Widget{constructor(e){super(),this._ready=new s.PromiseDelegate,this.addClass("jp-FileEditor");const t=this._context=e.context;this._mimeTypeService=e.mimeTypeService;const n=this._editorWidget=new i.CodeEditorWrapper({factory:e.factory,model:t.model,editorOptions:{config:p.defaultEditorConfig}});this._editorWidget.addClass("jp-FileEditorCodeWrapper"),this._editorWidget.node.dataset.jpCodeRunner="true",this._editorWidget.node.dataset.jpUndoer="true",this.editor=n.editor,this.model=n.model;const r=p.defaultEditorConfig.scrollPastEnd;this.toggleClass("jp-mod-scrollPastEnd",r),t.ready.then(()=>{this._onContextReady()}),this._onPathChanged(),t.pathChanged.connect(this._onPathChanged,this),(this.layout=new h.StackedLayout).addWidget(n)}get context(){return this._context}get ready(){return this._ready.promise}handleEvent(e){this.model&&"mousedown"===e.type&&this._ensureFocus()}onAfterAttach(e){super.onAfterAttach(e),this.node.addEventListener("mousedown",this)}onBeforeDetach(e){this.node.removeEventListener("mousedown",this)}onActivateRequest(e){this._ensureFocus()}_ensureFocus(){this.editor.hasFocus()||this.editor.focus()}_onContextReady(){this.isDisposed||(this.editor.clearHistory(),this._ready.resolve(void 0))}_onPathChanged(){const e=this.editor,t=this._context.localPath;e.model.mimeType=this._mimeTypeService.getMimeTypeByFilePath(t)}}!function(e){e.defaultEditorConfig={lineNumbers:!0,scrollPastEnd:!0}}(p||(p={}));class g extends c.DocumentWidget{async setFragment(e){const t=e.split("=");if("#line"!==t[0])return;const n=t[1];let i;return i=n.includes(",")?n.split(",")[0]||"0":n,this.context.ready.then(()=>{const e={line:parseInt(i,10),column:0};this.content.editor.setCursorPosition(e),this.content.editor.revealPosition(e)})}}class m extends c.ABCWidgetFactory{constructor(e){super(e.factoryOptions),this._services=e.editorServices}createNewWidget(e){const t=this._services.factoryService.newDocumentEditor,n=new p({factory:e=>t(e),context:e,mimeTypeService:this._services.mimeTypeService});return n.title.icon=u.textEditorIcon,new g({content:n,context:e})}}class y extends d.EditorSearchProvider{constructor(e){super(),this.widget=e,this._searchActive=!1}get isReadOnly(){return this.editor.getOption("readOnly")}get replaceOptionsSupport(){return{preserveCase:!0}}get editor(){return this.widget.content.editor}get model(){return this.widget.content.model}async startQuery(e,t){this._searchActive=!0,await super.startQuery(e,t),await this.highlightNext(!0,{from:"selection-start",scroll:!1,select:!1})}async endQuery(){this._searchActive=!1,await super.endQuery()}async onSharedModelChanged(e,t){if(this._searchActive)return super.onSharedModelChanged(e,t)}static createNew(e,t){return new y(e)}static isApplicable(e){return e instanceof l.MainAreaWidget&&e.content instanceof p&&e.content.editor instanceof d.CodeMirrorEditor}getInitialQuery(){const e=this.editor;return e.state.sliceDoc(e.state.selection.main.from,e.state.selection.main.to)}}var f=n(43154),v=n(90182),_=n(95870),x=n.n(_);function w(e){return x().createElement(f.TextItem,{role:"button","aria-haspopup":!0,tabIndex:0,source:e.language,onClick:e.handleClick,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||e.handleClick()}})}class C extends u.VDomRenderer{constructor(e){var t;super(new C.Model(e.languages)),this._handleClick=()=>{const e=new h.Menu({commands:this._commands});this._popup&&this._popup.dispose(),this.model.languages.getLanguages().sort((e,t)=>{var n,i;const r=null!==(n=e.displayName)&&void 0!==n?n:e.name,o=null!==(i=t.displayName)&&void 0!==i?i:t.name;return r.localeCompare(o)}).forEach(t=>{var n;if(0===t.name.toLowerCase().indexOf("brainf"))return;const i={name:t.name,displayName:null!==(n=t.displayName)&&void 0!==n?n:t.name};e.addItem({command:"fileeditor:change-language",args:i})}),this._popup=(0,f.showPopup)({body:e,anchor:this,align:"left"})},this._popup=null,this._commands=e.commands,this.translator=null!==(t=e.translator)&&void 0!==t?t:v.nullTranslator;const n=this.translator.load("jupyterlab");this.addClass("jp-mod-highlighted"),this.title.caption=n.__("Change text editor syntax highlighting")}render(){return this.model?x().createElement(w,{language:this.model.language,handleClick:this._handleClick}):null}}function b(e){const t=(e.translator||v.nullTranslator).load("jupyterlab"),n="number"==typeof e.tabSpace?t.__("Spaces"):t.__("Tab Indent");return x().createElement(f.TextItem,{role:"button","aria-haspopup":!0,tabIndex:0,onClick:e.handleClick,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||e.handleClick()},source:"number"==typeof e.tabSpace?`${n}: ${e.tabSpace}`:n,title:t.__("Change the indentationâ€¦")})}!function(e){class t extends u.VDomModel{constructor(e){super(),this.languages=e,this._onMIMETypeChange=(e,t)=>{var n;const r=this._language,o=this.languages.findByMIME(t.newValue);this._language=null!==(n=null==o?void 0:o.name)&&void 0!==n?n:i.IEditorMimeTypeService.defaultMimeType,this._triggerChange(r,this._language)},this._language="",this._editor=null}get language(){return this._language}get editor(){return this._editor}set editor(e){var t;const n=this._editor;null!==n&&n.model.mimeTypeChanged.disconnect(this._onMIMETypeChange);const r=this._language;if(this._editor=e,null===this._editor)this._language="";else{const e=this.languages.findByMIME(this._editor.model.mimeType);this._language=null!==(t=null==e?void 0:e.name)&&void 0!==t?t:i.IEditorMimeTypeService.defaultMimeType,this._editor.model.mimeTypeChanged.connect(this._onMIMETypeChange)}this._triggerChange(r,this._language)}_triggerChange(e,t){e!==t&&this.stateChanged.emit(void 0)}}e.Model=t}(C||(C={}));class T extends u.VDomRenderer{constructor(e){super(new T.Model),this._popup=null,this._menu=e.menu,this.translator=e.translator||v.nullTranslator,this.addClass("jp-mod-highlighted")}render(){var e;if(null===(e=this.model)||void 0===e?void 0:e.indentUnit){const e="Tab"===this.model.indentUnit?null:parseInt(this.model.indentUnit,10);return x().createElement(b,{tabSpace:e,handleClick:()=>this._handleClick(),translator:this.translator})}return null}_handleClick(){const e=this._menu;this._popup&&this._popup.dispose(),e.aboutToClose.connect(this._menuClosed,this),this._popup=(0,f.showPopup)({body:e,anchor:this,align:"right"}),e.update()}_menuClosed(){this.removeClass("jp-mod-clicked")}}!function(e){class t extends u.VDomModel{get indentUnit(){return this._indentUnit}set indentUnit(e){e!==this._indentUnit&&(this._indentUnit=e,this.stateChanged.emit())}}e.Model=t}(T||(T={}));var E=n(93321);class M extends E.K{createNew(e,t){const n=super.createNew(e,t),i=(t,n)=>{n&&e.content.editor.setCursorPosition({line:n.line,column:0})};return n.activeHeadingChanged.connect(i),e.disposed.connect(()=>{n.activeHeadingChanged.disconnect(i)}),n}}var k=n(64638),A=n(15836);const S={part:1,chapter:1,section:1,subsection:2,subsubsection:3,paragraph:4,subparagraph:5},P=/^\s*\\(section|subsection|subsubsection){(.+)}/;class I extends k.T{get documentType(){return"latex"}get supportedOptions(){return["maximalDepth","numberHeaders"]}getHeadings(){if(!this.isActive)return Promise.resolve(null);const e=this.widget.content.model.sharedModel.getSource().split("\n"),t=new Array;let n=t.length;const i=new Array;for(let r=0;r<e.length;r++){const o=e[r].match(P);if(o){const e=S[o[1]];if(e<=this.configuration.maximalDepth){const s=A.$Y(e,n,t,{...this.configuration,baseNumbering:1,numberingH1:!0});n=e,i.push({text:o[2],prefix:s,level:e,line:r})}}}return Promise.resolve(i)}}class F extends M{isApplicable(e){var t,n;if(super.isApplicable(e)){let i=null===(n=null===(t=e.content)||void 0===t?void 0:t.model)||void 0===n?void 0:n.mimeType;return i&&("text/x-latex"===i||"text/x-stex"===i)}return!1}_createNew(e,t){return new I(e,t)}}var D=n(86752);class O extends k.T{constructor(e,t,n=null){super(e,t),this.widget=e,this.parser=n}get documentType(){return"markdown"}async getHeadings(){if(!this.isActive)return Promise.resolve(null);const e=this.widget.content.model.sharedModel.getSource();return A.uQ(await D.ZX(e,this.parser),{...this.configuration,numberHeaders:!1})}}class j extends M{constructor(e,t=null){super(e),this.parser=t}isApplicable(e){var t,n;if(super.isApplicable(e)){let i=null===(n=null===(t=e.content)||void 0===t?void 0:t.model)||void 0===n?void 0:n.mimeType;return i&&D.sl(i)}return!1}_createNew(e,t){return new O(e,t,this.parser)}}let R;try{R=new RegExp("^\\s*(class |def |async def |from |import )","d")}catch(e){R=new RegExp("^\\s*(class |def |async def |from |import )")}class H extends k.T{get documentType(){return"python"}async getHeadings(){if(!this.isActive)return Promise.resolve(null);const e=this.widget.content.model.sharedModel.getSource().split("\n");let t=new Array,i=!1,r=1,o=-1;for(const s of e){let e;if(o++,R.flags.includes("d"))e=R.exec(s);else{const{default:t}=await n.e(8795).then(n.t.bind(n,38795,23));e=t(R,s)}if(e){const[n]=e.indices[1];1===r&&n>0&&(r=n);const a=["from ","import "].includes(e[1]);if(a&&i)continue;i=a;const l=1+n/r;if(l>this.configuration.maximalDepth)continue;t.push({text:s.slice(n),level:l,line:o})}}return Promise.resolve(t)}}class N extends M{isApplicable(e){var t,n;if(super.isApplicable(e)){let i=null===(n=null===(t=e.content)||void 0===t?void 0:t.model)||void 0===n?void 0:n.mimeType;return i&&("application/x-python-code"===i||"text/x-python"===i)}return!1}_createNew(e,t){return new H(e,t)}}const L=new s.Token("@jupyterlab/fileeditor:IEditorTracker","A widget tracker for file editors.\n  Use this if you want to be able to iterate over and interact with file editors\n  created by the application."),U=new s.Token("@jupyterlab/fileeditor:IEditorWidgetFactory","A factory for creating file editors.")},36549(e,t,n){n.d(t,{MB:()=>i});var i,r=n(68211);new r.Token("@jupyterlab/toc:ITableOfContentsRegistry","A service to register table of content factory."),new r.Token("@jupyterlab/toc:ITableOfContentsTracker","A widget tracker for table of contents."),function(e){e.defaultConfig={baseNumbering:1,maximalDepth:4,numberingH1:!0,numberHeaders:!1,includeOutput:!0,syncCollapseState:!1}}(i||(i={}))},86752(e,t,n){n.d(t,{ZX:()=>s,oQ:()=>o,sl:()=>l});var i=n(18504),r=n(40488);async function o(e,t,n,o){try{const s=document.createElement("div");await(0,r.renderMarkdown)({markdownParser:e,host:s,source:t,trusted:!1,sanitizer:null!=o?o:new i.Sanitizer,shouldTypeset:!1,resolver:null,linkHandler:null,latexTypesetter:null});const a=s.querySelector(`h${n}`);return a?(null==o?void 0:o.allowNamedProperties)?a.id:a.getAttribute("data-jupyter-id"):null}catch(e){console.error("Failed to parse a heading.",e)}return null}async function s(e,t){if(!t)return console.warn("Couldn't parse headings; Markdown parser is null"),[];const n=await t.render(e),i=new Array;return(new DOMParser).parseFromString(n,"text/html").querySelectorAll("h1, h2, h3, h4, h5, h6").forEach((e,t)=>{var n;const r=parseInt(e.tagName.substring(1),10),o=(null===(n=e.textContent)||void 0===n?void 0:n.trim())||"";i.push({text:o,line:t,level:r,raw:e.outerHTML,skip:d.test(e.outerHTML)})}),i}const a=["text/x-ipythongfm","text/x-markdown","text/x-gfm","text/markdown"];function l(e){return a.includes(e)}const d=/<\w+\s(.*?\s)?class="(.*?\s)?(jp-toc-ignore|tocSkip)(\s.*?)?"(\s.*?)?>/}}]);