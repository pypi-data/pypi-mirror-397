import{j as e,B as l,K as g,H as f,b as j,a as P,d as b,R as S,V as y}from"./chakra.js";import{r as M}from"./react-core.js";import{u as R,M as k}from"./MigrateButton.js";import{P as D}from"./ProgressSummary.js";import{P as H,D as I}from"./PageLoading.js";import{e as h,a as O,b as C,o as w}from"./index.js";import{c as B}from"./table.js";import"./http.js";import"./icons.js";import"./router.js";const r=B();function E(a,t,o){return[r.accessor("name",{header:"Name"}),r.accessor("slots",{header:"Slots"}),r.accessor("description",{header:"Description"}),r.display({id:"migrate",header:"Migrate",meta:{align:"right"},cell:i=>{const{original:s}=i.row;return e.jsx(k,{route:O(a+h.POOL_ROUTE),headers:C(t),existsInRemote:s.exists,sendData:w(s,"exists"),onStatusChange:n=>o(s.name,n),itemName:`pool "${s.name}"`})}})]}function F(){const{loading:a,error:t,data:o,isMigratingAll:i,totalItems:s,migratedItems:n,fetchData:p,handleItemStatusChange:c,handleMigrateAll:u,targetUrl:m,token:d}=R({route:h.POOL_ROUTE,idField:"name",itemName:"pool"}),x=M.useMemo(()=>E(m,d,c),[m,d,c]);return e.jsxs(l,{children:[e.jsxs(g,{direction:{base:"column",md:"row"},justify:"space-between",align:{base:"flex-start",md:"center"},mb:3,children:[e.jsxs(l,{children:[e.jsx(f,{size:"md",mb:.5,children:"Pools"}),e.jsx(j,{fontSize:"xs",color:"gray.600",children:"Pools limit the number of concurrent tasks of a certain type."})]}),e.jsx(P,{children:e.jsx(b,{size:"sm",leftIcon:e.jsx(S,{}),onClick:p,variant:"outline",isLoading:a,children:"Refresh"})})]}),e.jsxs(y,{spacing:3,align:"stretch",w:"100%",children:[!a&&!t&&e.jsx(D,{totalItems:s,migratedItems:n,onMigrateAll:u,isMigratingAll:i}),e.jsx(l,{children:a||t?e.jsx(H,{loading:a,error:t}):e.jsx(I,{data:o,columns:x,searchPlaceholder:"Search pools..."})})]})]})}export{F as default};
