import{j as e,B as n,K as p,H as j,b,a as f,d as y,R as k,V as S}from"./chakra.js";import{r as R}from"./react-core.js";import{u as I,M}from"./MigrateButton.js";import{P as V}from"./ProgressSummary.js";import{P as A,D as v}from"./PageLoading.js";import{e as u,a as B,b as E,o as H}from"./index.js";import{c as P}from"./table.js";import"./http.js";import"./icons.js";import"./router.js";const l=P();function C(a,s,t){return[l.accessor("key",{header:"Key"}),l.accessor("val",{header:"Value"}),l.display({id:"migrate",header:"Migrate",meta:{align:"right"},cell:i=>{const{original:r}=i.row;return e.jsx(M,{route:B(a+u.VARIABLES_ROUTE),headers:E(s),existsInRemote:r.exists,sendData:H(r,"exists"),onStatusChange:o=>t(r.key,o),itemName:`variable "${r.key}"`})}})]}function F(){const{loading:a,error:s,data:t,isMigratingAll:i,totalItems:r,migratedItems:o,fetchData:x,handleItemStatusChange:c,handleMigrateAll:g,targetUrl:m,token:d}=I({route:u.VARIABLES_ROUTE,idField:"key",itemName:"variable"}),h=R.useMemo(()=>C(m,d,c),[m,d,c]);return e.jsxs(n,{children:[e.jsxs(p,{direction:{base:"column",md:"row"},justify:"space-between",align:{base:"flex-start",md:"center"},mb:3,children:[e.jsxs(n,{children:[e.jsx(j,{size:"md",mb:.5,children:"Variables"}),e.jsx(b,{fontSize:"xs",color:"gray.600",children:"Variables store arbitrary content as key-value pairs."})]}),e.jsx(f,{children:e.jsx(y,{size:"sm",leftIcon:e.jsx(k,{}),onClick:x,variant:"outline",isLoading:a,children:"Refresh"})})]}),e.jsxs(S,{spacing:3,align:"stretch",w:"100%",children:[!a&&!s&&e.jsx(V,{totalItems:r,migratedItems:o,onMigrateAll:g,isMigratingAll:i}),e.jsx(n,{children:a||s?e.jsx(A,{loading:a,error:s}):e.jsx(v,{data:t,columns:h,searchPlaceholder:"Search variables..."})})]})]})}export{F as default};
