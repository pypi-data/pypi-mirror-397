import{j as e,B as c,K as f,H as j,b as C,a as S,d as b,R as H,V as y}from"./chakra.js";import{r as I}from"./react-core.js";import{u as M,M as N}from"./MigrateButton.js";import{H as P}from"./HiddenValue.js";import{P as w}from"./ProgressSummary.js";import{P as E,D as R}from"./PageLoading.js";import{e as u,a as T,b as _,o as D}from"./index.js";import{c as O}from"./table.js";import"./http.js";import"./icons.js";import"./router.js";const a=O();function h(s){return e.jsx(P,{value:s.getValue()})}function k(s,t,o){return[a.accessor("conn_id",{header:"Connection ID"}),a.accessor("conn_type",{header:"Type"}),a.accessor("host",{header:"Host"}),a.accessor("port",{header:"Port"}),a.accessor("schema",{header:"Schema"}),a.accessor("login",{header:"Login"}),a.accessor("password",{header:"Password",cell:h}),a.accessor("extra",{header:"Extra",cell:h}),a.display({id:"migrate",header:"Migrate",meta:{align:"right"},cell:n=>{const{original:r}=n.row;return e.jsx(N,{route:T(s+u.CONNECTIONS_ROUTE),headers:_(t),existsInRemote:r.exists,sendData:D(r,"exists"),onStatusChange:i=>o(r.conn_id,i),itemName:`connection "${r.conn_id}"`})}})]}function q(){const{loading:s,error:t,data:o,isMigratingAll:n,totalItems:r,migratedItems:i,fetchData:x,handleItemStatusChange:l,handleMigrateAll:g,targetUrl:d,token:m}=M({route:u.CONNECTIONS_ROUTE,idField:"conn_id",itemName:"connection"}),p=I.useMemo(()=>k(d,m,l),[d,m,l]);return e.jsxs(c,{children:[e.jsxs(f,{direction:{base:"column",md:"row"},justify:"space-between",align:{base:"flex-start",md:"center"},mb:3,children:[e.jsxs(c,{children:[e.jsx(j,{size:"md",mb:.5,children:"Connections"}),e.jsx(C,{fontSize:"xs",color:"gray.600",children:"Airflow Connection objects store credentials for external services."})]}),e.jsx(S,{children:e.jsx(b,{size:"sm",leftIcon:e.jsx(H,{}),onClick:x,variant:"outline",isLoading:s,children:"Refresh"})})]}),e.jsxs(y,{spacing:3,align:"stretch",w:"100%",children:[!s&&!t&&e.jsx(w,{totalItems:r,migratedItems:i,onMigrateAll:g,isMigratingAll:n}),e.jsx(c,{children:s||t?e.jsx(E,{loading:s,error:t}):e.jsx(R,{data:o,columns:p,searchPlaceholder:"Search connections..."})})]})]})}export{q as default};
